;/*!searchdetail:widget/ui/utils/lib.js*/
define("searchdetail:widget/ui/utils/lib",function(t){var n=t("common:widget/ui/base/base"),e=t("common:widget/ui/utils/utils"),r=function(){var t={w:"a",k:"b",v:"c",1:"d",j:"e",u:"f",2:"g",i:"h",t:"i",3:"j",h:"k",s:"l",4:"m",g:"n",5:"o",r:"p",q:"q",6:"r",f:"s",p:"t",7:"u",e:"v",o:"w",8:"1",d:"2",n:"3",9:"4",c:"5",m:"6",0:"7",b:"8",l:"9",a:"0",_z2C$q:":","_z&e3B":".",AzdH3F:"/"},n=/([a-w\d])/g,e=/(_z2C\$q|_z&e3B|AzdH3F)/g;return{compile:function(t){if(!t)return"";for(var n=(t.charCodeAt(0)+t.length).toString(16),e=1;e<t.length;e++)n+="g"+(t.charCodeAt(e)+t.charCodeAt(e-1)).toString(16);return n},uncompile:function(r){if(!r)return"";var o=r.replace(e,function(n,e){return t[e]});return o.replace(n,function(n,e){return t[e]})},uncompileURL:function(t){return/^(http|https)/.test(t)?t:this.uncompile(t)}}}(),o=function(){var t=["a","c","e","g","i","k","z","b","w","o"];return{encodeTime:function(n){for(var e=n+"",r="",o=0,i=e.length;i>o;o++)r+=t[parseInt(e.charAt(o),10)];return r}}}(),i=n.extend({stringEncode:function(t){var t=t||"";return t.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")},getBaiduId:function(t){var e=n.cookie("BAIDUID");return e&&(t?e.substr(0,t):e)},getHost:function(t){var n=t.match(/^(https?:\/\/[^\/]+)(\/|$)/i);return n&&n.length&&n[1]||""},isCrossDomain:function(t){var n=t.match(/^(https?:)\/\/([^\/]+)(\/|$)/i);return!(!n||!n.length||n[1]==location.protocol&&n[2]==location.host)},getUniqId:function(){var t=0,n="imgdetailpg_";return function(e){return(e||n)+ ++t}}(),parseResponse:function(t){if("string"==typeof t)try{t=n.json.parse(n.trim(t))}catch(e){t=null}return t},getRedirectUrl:function(t,n,e){var r=Math.round((new Date).getTime()/1e3),n=n||"",o="";if(e&&e[0])for(var u=0;u<e.length;u++)o+="&bakfurl"+(u+1)+"="+encodeURIComponent(e[u].FromURL);return"/search/redirect?tn=redirect&word=j&juid="+encodeURIComponent(i.getBaiduId(6))+"&sign="+encodeURIComponent(i.encodeTime(r))+"&url="+encodeURIComponent(t)+o+"&objurl="+encodeURIComponent(n)},getThumbUrl:function(t,n){n=n||201;var r=Math.floor(100*Math.random())%5,o=e.ihttpsAgent("http://img"+r+".imgtn.bdimg.com");return o+"/it/u="+t+"&fm="+n+"&gp=0.jpg"},getSiteName:function(t){return t?t.replace(/^(https?:\/\/)?(www\.)?(.+)(:\d+)?\/?$/i,"$3"):""},split:function(t,n){t=String(t||"");var e=[t];if(t)for(var r=0,o=n.length;o>r;r++)for(var i=n[r],u=e.length-1;u>=0;u--){var a=e[u].split(i);e.splice.apply(e,[u,1].concat(a))}return e},mergeSeqArray:function(t,e){var r=[],o=[];if(t&&t.length)if(e&&e.length){for(var i=0;i<t.length;i++){var u=t[i];n.inArray(u,e)>=0?(r.push(i),o.push(null)):o.push(u)}if(r.length){if(r.length!=e.length)for(var i=e.length-1;i>=0;i--)n.inArray(e[i],t)<0&&e.splice(i,1);for(var i=0;i<r.length;i++){var a=r[i];o[a]=e[i]}}}else o=[].concat(t);return o},cutTextByCharWidth:function(t,n,e,r){if(t){"undefined"==typeof r&&(r=String(e).length);var o=0,i=0,u=0,a="",c=[],l=[],g=!1;if(t=String(t),t.replace(/[\u4e00-\u9fa5\u3000-\u303F\uFF00-\uFFFF]+/gi,function(e,r){i+=r-o,g||r>o&&(a=t.substring(o,r),c.push(a),l.push(1),u+=r-o,u>=n&&(g=!0));var h=2*e.length;return g||(c.push(e),l.push(2),u+=h,u>=n&&(g=!0)),o=e.length+r,i+=h,e}),c.length||(c.push(t),l.push(1),i=t.length,u=i,u>=n&&(g=!0)),g&&u>n){var h=c[c.length-1],f=l[l.length-1];return c[c.length-1]=h.substr(0,Math.floor((h.length*f-(u-n)-r)/f)),c.join("")+e}}return t},logTime:function(t,n,e,r){r=r||"//imgstat.baidu.com/";var o,i=r+"6.gif?for=detailtime&hostfr=imgstat&_dev=pc&p=1012200&logid="+window.logid,u="_dts"+e;o=window[u]=new Image,o.onload=o.onerror=function(){o.onload=o.onerror=null,o=null,window[u]=null},o.src=i+"&act="+t+"&time="+(e-n)+"&"+new Date*Math.random()}},r,o);return i});
;/*!searchdetail:widget/ui/utils/imghelper.js*/
define("searchdetail:widget/ui/utils/imghelper",function(t){var h=t("common:widget/ui/base/base"),i={_loaded:{},_loading:{},fetch:function(t){var i=new h.Deferred;if(this._loaded[t])return i.resolve(this._loaded[t]);if(this._loading[t])return this._loading[t];var e=new Image,n=this;return e.onload=function(){var h={width:e.width,height:e.height};n._loaded[t]=h,i.resolve(h)},e.onerror=function(){i.reject()},this._loading[t]=i,e.src=t,i.always(function(){e.onload=e.onerror=null,delete n._loading[t],e=null})}},e={zoom:function(t,h){if(!(t.width&&t.height&&h.width&&h.height))return{width:t.width&&h.width?Math.min(h.width,t.width):"auto",height:t.height&&h.height?Math.min(h.height,t.height):"auto"};var i={};return t.width/t.height>h.width/h.height?(i.width=Math.min(t.width,h.width),i.height=Math.floor(t.height*i.width/t.width)):(i.height=Math.min(t.height,h.height),i.width=Math.floor(t.width*i.height/t.height)),i},scaleFull:function(t,h){if(!(t.width&&t.height&&h.width&&h.height))return{width:t.width&&h.width?Math.min(h.width,t.width):"auto",height:t.height&&h.height?Math.min(h.height,t.height):"auto"};var i={};return t.width/t.height>h.width/h.height?(i.height=h.height,i.width=Math.floor(t.width*i.height/t.height)):(i.width=h.width,i.height=Math.floor(t.height*i.width/t.width)),i.width>h.width&&(i["margin-left"]=(h.width-i.width)/2+"px"),i.height>h.height&&(i["margin-top"]=(h.height-i.height)/3+"px"),i},getFileType:function(t){if(!t)return"";var h=t.lastIndexOf(".");return h>0?t.substr(h+1):""},formatBytes:function(t,h,i){var e=["b","kb","mb","gb"],n=t;for(h=h||0;n>=1024&&h<e.length-1;)n/=1024,h+=1;return h>0&&(n=Math.round(100*n)/100),i&&(n=i.call(null,n)),n+e[h]},bindScaleFull:function(t,h,i){var n=t[0];n.onload=function(){var n=e._imgLoaded(t,h);i&&i(n)}},_imgLoaded:function(t,h){var i=t[0],n=e.scaleFull({width:i.width,height:i.height},h);return t.css(n),i.onload=null,n},loadImage:function(t,e){h(t).each(function(t,h){i.fetch(h).then(e||function(){})})}};return e});
;/*!searchdetail:widget/ui/app/pagemodel.js*/
define("searchdetail:widget/ui/app/pagemodel",function(e){function t(){r.apply(this,arguments)}var n=e("common:widget/ui/base/base"),o=e("common:widget/ui/utils/utils"),r=e("common:widget/ui/arch/pagemodel");return n.extend(t.prototype,r.prototype,{load:function(){r.prototype.load.call(this);var e=n.extend({},this.uri.query.getAll(),this.uri.hash.getAll());for(var t in e)e.hasOwnProperty(t)&&e[t]&&(e[t]=o.tryDecodeURIComponent(e[t]));e.pn=1*(e.pn||0),e.spn&&(e.spn=1*(e.spn||0)),e.pn<0&&e.spn<0&&(e.spn=0),e.sampleId=o.getSampleId(),this.set(e)},parseHash:function(e){var t={};if(e){var t=o.decodeJsonForQuery(o.queryToJson(e,!0));if("undefined"==typeof t.pn){var n,r=e.split("&"),s=/(pn|di|objURL|fromURLW|H|S|TP)(.*)/;t={};for(var a=0;a<r.length;a++)n=r[a].match(s),n&&n.length&&(t[n[1]]=o.escapeHTML(o.tryDecodeURIComponent(n[2]||"")),"pn"==n[1]&&(t.spn=o.escapeHTML(o.tryDecodeURIComponent(r[a+1]||0))))}}return t},buildQuery:function(e){var t=[],o=this;return n(e).each(function(e,n){t.push(n+"="+encodeURIComponent(o.get(n)||""))}),t.join("&")},setAbTest:function(){if(arguments&&arguments.length)for(var e=this,t=1*this.get("sampleId"),n=0;n<arguments.length;n++){var o=arguments[n];if(t>=o[0]&&t<=o[1]){e.set("__abtestgrp",o.length>2?o[2]:n+1);break}}},getAbTestGroup:function(){return this.get("__abtestgrp")||""}}),new t});
;/*!searchdetail:widget/ui/statistic/statistic-core.js*/
define("searchdetail:widget/ui/statistic/statistic-core",function(t){var a=t("common:widget/ui/base/base"),e=t("common:widget/ui/monitorRequest/monitorRequest"),i=t("searchdetail:widget/ui/app/pagemodel"),n=t("common:widget/ui/utils/utils"),s=(t("common:widget/ui/base/events"),{ROOT_URL:"//imgstat.baidu.com/",PV_URL:"//image.baidu.com/pv/pv.gif",gif:0,imgData:{},imgViewStart:-1,pageData:{},init:function(t){this.pageData={ct:t.data.ct,tn:t.data.tn,word:t.data.queryWordEnc,step_word:t.data.step_word,pn:t.data.pn,spn:t.data.spn,rn:t.data.rn,istype:t.data.istype,"in":t.data["in"],cl:t.data.cl,lm:t.data.lm,st:t.data.st,cs:t.data.cs,os:t.data.os,ln:t.data.ln,fr:t.data.fr,fmq:t.data.fmq,ic:t.data.ic,s:t.data.s,se:t.data.se,tab:t.data.tab,face:t.data.face,ist:t.data.ist,jit:t.data.jit,tpl:t.data.tpl,resTabs:t.data.resTabs,pn:t.data.pageNum,objURL:t.data.objURL,fromURL:t.data.fromURL,fromURLHost:t.data.fromURLHost,type:t.data.type,isAspDianjing:t.data.isAspDianjing,token:t.data.token,key:t.data.key,investid:t.get("investId")||"",samplekey:encodeURIComponent(window.samplekey||""),fromHost:t.data.fromHost,dututype:t.data.dututype},t.data.hs-0&&(this.pageData.ishttps=t.data.hs)},update:function(t){this.imgViewStart=(new Date).getTime();var a="";if(t.fromPageTitleEnc)try{a=JSON.parse(t.fromPageTitleEnc).strategy}catch(e){}this.imgData={thumbURL:encodeURIComponent(t.thumbURL),u:encodeURIComponent(t.objURLHttp||t.objURL),f:encodeURIComponent(t.fromURL),width:t.width,height:t.height,di:t.di,is:t.is,isAspDianjing:t.isAspDianjing,token:t.token,cs:t.cs,os:t.os,key:t.key,isSet:t.isSet,fromHost:t.fromHost,ftitle:encodeURIComponent(t.fromPageTitle),pn:t.pn,vs:window.vsid||"",adQuery:t.adQuery||"",samplekey:encodeURIComponent(window.samplekey||""),adtype:t.adType,lensman:"1"===t.youtuType?1:void 0,frm:"lensman"===i.get("frm")?"lensman":void 0,personalized:t.personalized||"",adPicId:t.adPicId||"",strategy:a}},send:function(t,s){var o={};o=a.extend({},this.pageData,this.imgData,s),o.p=t.toString().split(".")[1],o.samplekey=encodeURIComponent(window.samplekey||""),o.logid=window.logid,o.baiduid=a.cookie("BAIDUID")||"";var d=i.get("is");d&&(o.isset=encodeURIComponent(d||"")),o=n.jsonToQuery(o);var p=parseInt(t);isNaN(p)||(this.gif=p+".gif?",e(this.ROOT_URL+this.gif+o))},hold:function(t,i){var s={};s=a.extend({},this.pageData,this.imgData,i),s.p=t.toString().split(".")[1],s.samplekey=encodeURIComponent(window.samplekey||""),s.logid=window.logid,s=n.jsonToQuery(s);var o=parseInt(t),d=parseInt(t)+".gif?",p=this;return{send:function(){isNaN(o)||e(p.ROOT_URL+d+s)}}}});return s});
;/*!searchdetail:widget/ecomads/layer/layer.js*/
define("searchdetail:widget/ecomads/layer/layer",function(e,t,i){function a(){var e=window.samplekey.match("UI_PC_TUIGUANG:2")||window.samplekey.match("UI_PC_TUIGUANG:1")?"":"<h3>商业推广</h3>";this.layerTpl1=['<div class="ecom-layer" id="ecom-hint-layer">',e,'<p>本搜索结果为<a href="http://e.baidu.com/" target="_blank">商业推广</a>信息，请注意可能的风险。百度推出','<a class="layer-plan" target="_blank" href="http://baozhang.baidu.com/guarantee/">网民权益保障计划</a>，','<a class="layer-login" target="_blank" href="https://passport.baidu.com/">登录</a>搜索有保障</p>',"</div>"].join(""),this.layerTpl2=['<div class="ecom-layer" id="ecom-hint-layer">',e,'<p>本搜索结果为<a href="http://e.baidu.com/" target="_blank">商业推广</a>信息，请注意可能的风险。','您当前为登录状态，已参加<a target="_blank" href="http://baozhang.baidu.com/guarantee/">网民权益保障计划</a>。',"</div>"].join("")}var s=e("common:widget/ui/base/base"),n=(e("common:widget/ui/utils/utils"),e("common:widget/ui/base/events"),e("searchdetail:widget/ui/utils/lib"),e("searchdetail:widget/ui/utils/imghelper"),e("common:widget/ui/juicer/juicer"),e("searchdetail:widget/ui/statistic/statistic-core"));s.extend(a.prototype,{init:function(e){this.hasUser=e,this.render(),this.bindEvents()},render:function(){var e=this.hasUser?this.layerTpl2:this.layerTpl1,t=s("#ecom-hint-layer"),i=s("#adCard").find(".tips"),a=this;t.length||(s("#wrapper").append(e),this.layer=s("#ecom-hint-layer"),this.tips=i,setTimeout(function(){a.setPos()},800))},setPos:function(){var e=this.getLayerTop();this.layer.css({top:e+22+"px"})},appear:function(){var e=this;this.setTop(),this.layer.show(),clearTimeout(this.timer),this.timer=setTimeout(function(){e.layer.hide()},2e3)},disappear:function(){this.layer.hide(),clearTimeout(this.timer)},getLayerTop:function(){return s("#adCard")[0].getBoundingClientRect().top},setTop:function(){this.layer.css({top:this.getLayerTop()})},layerLog:function(e){n.send("10.1010100",{as:"card-layer",pos:"right",subpos:"0",shownum:"1",matcont:e,materialNum:"1"})},bindEvents:function(){var e=this;s("body").off("click"),s("body").on("click",function(t){var i=s(t.target).closest("#adCard .tips");return i.length&&e.layer.is(":hidden")?void e.appear():void e.disappear()}),s("#sider").on("scroll",function(){e.layer.is(":visible")&&e.setTop()}),s(".layer-login").on("click",function(){e.layerLog("login")}),s(".layer-plan").on("click",function(){e.layerLog("plan")}),s(window).on("resize",function(){e.setPos()})}}),i.exports=new a});
;/*!searchdetail:widget/searchbox/searchbox.js*/
define("searchdetail:widget/searchbox/searchbox",function(e){function t(){var e=s.getTime(),t=u.get("fmq");return t?t.indexOf("m")>-1&&-1==t.indexOf("_m")&&-1==t.indexOf("_D")?t=e+"_"+t+"_D":-1==t.indexOf("_D")&&(t+="_D"):t=e+"_D",t}function n(e){if(!u)return e.preventDefault(),!1;if(f)return!0;f=!0;var n=this,i=n.word.value,a=/^http[s]*\:\/\/[\s\S]*\.[jpg|gif|png|bmp|jpeg]*$/.test(i)||/img5\.imgtn\.bdimg\.com/.test(i)||/mt1\.baidu\.com\/timg/.test(i),d="/pcdutu?queryImageUrl="+encodeURIComponent(i)+"&fm=searchdetail&uptype=urlsearch";if(a)return location.href=d,!1;if(u.get("word")==n.word.value)n.fmq.value=t(),n.fm.value="";else{var r=new Date,s=r.getTime(),m=u.get("fmq");n.fmq.value=m&&m.indexOf("m")>-1&&-1==m.indexOf("_m")&&-1==m.indexOf("_R")?s+"_"+m+"_R":s+"_R"}return o.send("5.41",{q:n.word.value}),!0}function i(e,t){function n(e){var t,n=e.form,i=e.value,a=e.originValue,o=e.index;i!=a&&("undefined"==typeof n.f?(t=document.createElement("input"),t.type="hidden",t.name="f",t.value="3",n.appendChild(t)):n.f.value="3","undefined"==typeof n.oq?(t=document.createElement("input"),t.type="hidden",t.name="oq",t.value=a,n.appendChild(t)):n.oq.value=a,"undefined"==typeof n.rsp?(t=document.createElement("input"),t.type="hidden",t.name="rsp",t.value=o,n.appendChild(t)):n.rsp.value=o)}var i=a(e),o=i.parent(),u=o.position(),s=o.outerWidth()-2,f=o.outerHeight(),m=t.parent(),l=function(){a(window).width()<1217?m.addClass("narrow"):m.removeClass("narrow"),s=o.outerWidth()-2};l();var p=new d({el:i,formElement:document.f1,parentElement:o.parent()});p.css({left:u.left,top:u.top+f-1,width:s}).on("beforesubmit",n);var c=a.cookie.get("indexPageSugList");c=c?a.json.parse(c):[];var g=new r({width:s,fm:"detail",offsetL:0,offsetT:4,page:1011112,query:i.val(),samplekey:window.samplekey});g.init(c),a(window).on("resize",function(){l(),p.css({width:s}),g&&g.update&&g.update({width:s})})}var a=e("common:widget/ui/base/base"),o=e("searchdetail:widget/ui/statistic/statistic-core"),d=e("common:widget/ui/suggest/suggestion"),r=e("common:widget/ui/sugHistory/sugHistory"),u=null,s=new Date,f=!1;return{init:function(e,t,o){u=e,t=a(t),t.submit(n),o&&i(t[0].word,t)}}});
;/*!searchdetail:widget/shitutip/tip.js*/
define("searchdetail:widget/shitutip/tip",function(i,e,t){{var o=i("common:widget/ui/base/base");t.exports={init:function(){o.cookie("closedututip")||(o.browser.msie?o(".ie-shituTip").show():o(".shituTip").show(),o(".closetip").on("click",function(){o(this).parent().remove(),o.cookie("closedututip",!0)}))}}}});
;/*!searchdetail:widget/sning1/sning1.js*/
define("searchdetail:widget/sning1/sning1",function(t,n,i){function e(t){this.defaultOpts={landingPages:{1:"http://www.niwodai.com/index.do?method=ac&artId=1823227138797576&f&utm_source=baidutz&utm_medium=cpc&cid=sem-bdtp-04"}},this.options=s.extend({},this.defaultOpts,t||{}),this.$container=null}var s=t("common:widget/ui/base/base"),o=t("searchdetail:widget/ui/statistic/statistic-core");s.extend(e.prototype,{init:function(t){t&&s.extend(this.options,t),this.$container=s("#"+t.id)},show:function(t){this._render(t.container),this._bindEvent()},_render:function(t){t&&t.length&&t.append(this.$container.remove());var n="pc_1_4.jpg",i=this.$container.find("img").eq(0);i.attr("src","//img0.bdstatic.com/img/image/nwd/"+n),this.$container.show(),o.send("5.1011103",{fm:"searchdetail",type:"sning3",sning:this.options.label,event:"show"})},_bindEvent:function(){var t=this;this.$container.on("click","a",function(n){n.preventDefault(),o.send("5.1011103",{fm:"searchdetail",type:"sning3",sning:t.options.label,event:"click"});var i=t.options.landingPages[""+t.options.label];i&&window.open(i)})}}),i.exports=new e});
;/*!searchdetail:widget/ui/app/history.js*/
define("searchdetail:widget/ui/app/history",function(t){function i(t){s.apply(this),this.pageModel=t,this._isLockUrl=!1,this._lockedState=null}var e=t("common:widget/ui/base/base"),s=t("common:widget/ui/arch/history");return e.extend(i.prototype,s.prototype,{urlParamKeys:{ct:"ct",z:"z",ipn:"ipn",word:"word",step_word:"step_word",hs:"hs",pn:"pn",spn:"spn",di:"di",pi:"pi",rn:"rn",tn:"tn",is:"is",istype:"istype",ie:"ie",oe:"oe","in":"in",cl:"cl",lm:"lm",st:"st",cs:"cs",os:"os",simid:"simid",adpicid:"adpicid",lpn:"lpn",cs:"cs",ln:"ln",fr:"fr",fmq:"fmq",fm:"fm",ic:"ic",s:"s",se:"se",sme:"sme",tab:"tab",width:"width",height:"height",face:"face",ist:"ist",jit:"jit",statnum:"statnum",cg:"cg",bdtype:"imgData.bdSrcType",simics:"simics",oriquery:"oriquery",objurl:"objurl",fromurl:"fromurl",adtype:"adtype",gsm:"gsm",rpstart:"rpstart",rpnum:"rpnum",catename:"catename",tabname:"tabname",querytype:"querytype"},hashParamKeys:{pn:"pn",spn:"spn",di:"di",adpicid:"adpicid",lpn:"lpn",cs:"cs",pi:"pi",simid:"simid",objurl:"objurl",fromurl:"fromurl",W:"imgData.width",H:"imgData.height",S:"imgData.filesize",TP:"imgData.type"},init:function(){this.pageModel.get("simics")&&(this.urlParamKeys=e.extend({},this.urlParamKeys,{cardserver:"cardserver"})),s.prototype.init.call(this),this.pageModel.addEventListener("changed",this._pageModelChangedHandler.bind(this))},lockState:function(){this._isLockUrl=!0},unlockState:function(){this._isLockUrl=!1,this._lockedState&&(this.forward(this._lockedState),this._lockedState=null)},forward:function(t){this._popState||(this._isLockUrl?this._lockedState=t:s.prototype.forward.call(this,t))},buildStateParams:function(t){var i,s=this.pageModel,a={};for(var r in t)t.hasOwnProperty(r)&&(i=s.get(t[r]||r),i&&"word"==r&&e("#kw").val(i),"undefined"!=typeof i&&(a[r]=null==i?"":i));return a},_pageModelChangedHandler:function(t){for(var i=t.keys,e=this.urlParamKeys,s=i.length-1;s>=0;s--)if("undefined"!=typeof e[i[s]]){this.forward(this.buildStateParams(this.supportPushState?this.urlParamKeys:this.hashParamKeys));break}}}),i});
;/*!searchdetail:widget/ui/app/sizemanager.js*/
define("searchdetail:widget/ui/app/sizemanager",function(i){var e=i("common:widget/ui/base/base"),t=i("common:widget/ui/utils/utils"),n=i("common:widget/ui/base/subject"),a={};return e.extend(a,n,{elements:{wrapper:"#wrapper",main:"#main",container:"#container",header:"#header",sider:"#sider",imgContainer:".img-container",albumPnl:".album-pnl",albumContainer:".album-container"},mainMinSize:{width:630,height:391},init:function(){var i=this.elements;for(var t in i)i.hasOwnProperty(t)&&(this.elements[t]=e(i[t]));i.imgPrev=i.container.find(".img-prev"),i.imgNext=i.container.find(".img-next")},update:function(){var i=e(window),n=i.width(),a=i.height(),g=this.elements,r=g.main,m=g.sider[0].offsetWidth,h=t.UI.getCssDigitValueSum(g.sider,["padding-top","padding-bottom"]),d=Math.max(n-m,this.mainMinSize.width),s=Math.max(a,this.mainMinSize.height),o=t.UI.getCssDigitValueSum(g.imgContainer,["padding-top","padding-bottom"]),l=g.header[0].offsetHeight+t.UI.getCssDigitValue(g.header,"margin-bottom"),u=s-l-g.albumPnl[0].offsetHeight-o-3,p=d-t.UI.getCssDigitValueSum(g.imgContainer,["padding-left","padding-right","margin-left","margin-right"]),c=s-l,w=t.UI.getCssDigitValueSum(g.albumContainer,["padding-left","padding-right"]);g.imgContainer.height(u).width(p),g.albumPnl.width(d).css("visibility","visible"),g.albumContainer.width(d-w),g.container.height(c),g.imgPrev.height(c),g.imgNext.height(c),r.height(s).width(d),g.wrapper.width(d+m),g.sider.css("height",a-h-55+"px"),this.notify(),e.cookie&&e.cookie("winWH","^6_"+n+"x"+a)}}),a});
;/*!searchdetail:widget/ui/controls/imagedetail/dragsupport.js*/
define("searchdetail:widget/ui/controls/imagedetail/dragsupport",function(t){function e(t,e,s){this.$pnl=t,this.$handler=e,this.opts=n.extend({minInterval:10,cursor:"url(//img0.bdstatic.com/img/image/grabhand.cur), move"},s),this._isInited=!1,this.enabled=!1,this.dragState={startX:0,startY:0,dx:0,dy:0,useDrag:!1};var i=this;this._pnlMouseDownHandler=function(t){return 1!=t.which||i.$handler[0]!=t.target?!0:(i._moveStart(t),t.stopPropagation(),void t.preventDefault())},this._pnlMouseOutHandler=function(t){var e=t.target;!i.dragState.useDrag||e===i.$handler[0]&&e===i.$pnl[0]||i._moveEnd(t)},this._moveHandler=function(t){return i._moving(t),t.preventDefault?t.preventDefault():t.returnValue=!1,!1},this._mouseUpHandler=function(t){t.stopPropagation(),t.preventDefault(),i._moveEnd(t)}}var n=t("common:widget/ui/base/base"),s=t("common:widget/ui/base/events");return n.extend(e.prototype,s,{init:function(){this.$pnl.on("mousedown",this._pnlMouseDownHandler),this.$pnl.on("mouseout",this._pnlMouseOutHandler),this._isInited=!0},_moveStart:function(t){var e=this.$handler.position(),n=this.dragState;n.startX=t.clientX,n.startY=t.clientY,n.dx=n.startX-e.left,n.dy=n.startY-e.top,document.addEventListener?document.addEventListener("mousemove",this._moveHandler,!0):(this.$handler[0].setCapture(),this.$handler.on("mousemove",this._moveHandler)),this.$handler.on("mouseup",this._mouseUpHandler),this.fire("startMove")},_moving:function(t){t=t||window.event;var e=this.dragState,n=t.clientX-e.dx,s=t.clientY-e.dy;if(!e.useDrag){var i=this.opts.minInterval;e.useDrag=Math.abs(t.clientX-e.startX)>i||Math.abs(t.clientY-e.startY)>i}this.$handler.css({top:s,left:n}),this.dragState.ingMoveStatus||(this.dragState.ingMoveStatus=!0,this.fire("ingMove"))},_moveEnd:function(){document.removeEventListener?document.removeEventListener("mousemove",this._moveHandler,!0):(this.$handler[0].releaseCapture(),this.$handler.off("mousemove",this._moveHandler)),this.$handler.off("mouseup",this._mouseUpHandler),this.dragState.useDrag=!1,this.dragState.ingMoveStatus=!1,this.fire("endMove")},enable:function(){this._isInited&&this.enabled||this.init(),this.enabled=!0,this.$handler.css("cursor",this.opts.cursor)},disable:function(){this.enabled&&(this._moveEnd(),this.$pnl.off("mousedown",this._pnlMouseDownHandler),this.$pnl.off("mouseout",this._pnlMouseOutHandler)),this.dragState.useDrag=!1,this.enabled=!1,this.$handler.css("cursor","")}}),e});
;/*!searchdetail:widget/ui/models/settingmodel.js*/
define("searchdetail:widget/ui/models/settingmodel",function(e){function t(){this.data={},this._isLoaded=!1,this._storageKey="usetting",this.DUTU_TAG_CLOSE="cdutu",this.DUTU_GUIDE_KEY="cguide",this._keyIndexes={cdutu:0,cguide:1}}{var i=e("common:widget/ui/base/base"),s=(e("common:widget/ui/utils/utils"),e("common:widget/ui/base/events"));e("common:widget/ui/arch/model"),e("searchdetail:widget/ui/utils/lib"),e("common:widget/ui/browser-storage/browser-storage")}return i.extend(t.prototype,s,{getValue:function(e){var t=this._load(),i=t[e]||"";return i},setValue:function(e,t){this._saveToLocal(e,t),this.fire(e+":changed")},_load:function(){if(this._isLoaded)return this.data;try{var e=i.cookie(this._storageKey);if(e){var t=this._keyIndexes;for(var s in t)if(t.hasOwnProperty(s)){var a=t[s];this.data[s]=e.length>a?1*e[a]:""}}}catch(o){}return this._isLoaded=!0,this.data},_saveToLocal:function(e,t){var s=this._load();s[e]=t;try{var a=this._keyIndexes,o=[],r=0;for(var n in a)if(a.hasOwnProperty(n)){var d=a[n];d>r&&(r=d),o[d]=s[n]||0}for(var u=0;r>=u;u++)"undefined"==typeof o[u]&&(o[u]=0);i.cookie.set(this._storageKey,o.join(""),{path:"/",expires:2592e6})}catch(h){}}}),new t});
;/*!searchdetail:widget/ui/controls/imagedetail/dutuanchor/dutuanchor.js*/
define("searchdetail:widget/ui/controls/imagedetail/dutuanchor/dutuanchor",function(t){function e(t){this.$element=i(null),this.elements={name:"em"},this.opts=i.extend({query:"",tpl:"<div id='dutu-anchor-wrapper'></div>",itemTpl:"<div class='dutu-anchor'><span class='ic'><span class='ic-bg-new'></span><i class='downloadoptimize'></i></span><a target='_blank'><em></em></a></div>"},t),this.opts.elements=i.extend({},{},this.elements),this.pnl=null,this.hostImg=null,this.imgData=null,this.imgScale=1,this.visible=!1;var e=this;n.on(n.DUTU_TAG_CLOSE+":changed",function(){e.update(e.imgData,e.imgScale)})}var i=t("common:widget/ui/base/base"),a=t("common:widget/ui/utils/utils"),s=t("common:widget/ui/base/events"),n=(t("searchdetail:widget/ui/utils/lib"),t("searchdetail:widget/ui/models/settingmodel")),h=t("searchdetail:widget/ui/statistic/statistic-core");return i.extend(e.prototype,s,{init:function(t,e){if(this.pnl=t,this.hostImg=e,i.browser.msie&&i.browser.version<=6){var a=this;t.on("mouseover",function(){a.hover()}).on("mouseout",function(){a.hout()})}},render:function(){var t=this,e=t.face_list!=t.render_face_list||t.auto_list!=t.render_auto_list||t.cloth_list!=t.render_cloth_list;t.render_face_list=t.face_list,t.render_auto_list=t.auto_list,t.render_cloth_list=t.cloth_list;var a=function(){var e=i("<div/>"),a=0,s=t.face_list.length;for(a;s>=a&&(a!=s||"downloadoptimize"==t.group)&&(a!=s||0==s);a++){var n=i("<div/>"),h=i(t.opts.itemTpl).attr("data-id","face_"+a).appendTo(n);t._compat(h),e.append(n.children())}var o=0,l=t.auto_list.length;for(o;l>=o&&(o!=l||0==l);o++){var u=i("<div/>"),h=i(t.opts.itemTpl).addClass("auto").attr("data-id","face_auto_"+o).appendTo(u);t._compat(h),e.append(u.children())}var d=0,r=t.cloth_list.length;for(d;r>d&&(d!=r||0==r);d++){var c=i("<div/>"),h=i(t.opts.itemTpl).addClass("cloth").attr("data-id","face_cloth_"+d).appendTo(c);t._compat(h),e.append(c.children())}return e};this.$element.length?e&&this.$element.empty().append(a().children()):(this.$element=i(this.opts.tpl),this.$element.append(a().children()),this.$element.appendTo(this.pnl),this.bindEvent())},_compat:function(t){a.UI.isSupportCss3("borderRadius",t.get(0),!0)||t.addClass("dutu-anchor-lower")},_removeTwinkle:function(){this.$element.find(".dutu-anchor").each(function(t,e){e=i(e),e.hasClass("dutu-twinkle")&&e.removeClass("dutu-twinkle")})},bindEvent:function(){var t=this,e=!1;this.$element.on("mouseenter",".dutu-anchor",function(){var a=i(this).attr("data-id");if(t.anthorIndex=a,!e){i(this).hasClass("dutu-twinkle")&&i(this).removeClass("dutu-twinkle");var s="face";a.indexOf("auto")>=0&&(s="auto"),a.indexOf("cloth")>=0&&(s="cloth"),h.send("5.1011200",{tn:"baiduimagedetail",fm:s,tag:"face"}),e=!0,t.fire("hover")}}).on("mouseleave",".dutu-anchor",function(){e=!1,t.fire("hout")}),i("#srcPic").on("mouseenter",function(){t.wrapperLeaveTimeout&&clearTimeout(t.wrapperLeaveTimeout),i(this).find(".dutu-anchor").show()}).on("mouseleave",function(){var e=this;t.wrapperLeaveTimeout=setTimeout(function(){i(e).find(".dutu-anchor").each(function(t,e){e=i(e),e.hasClass("dutu-twinkle")||e.hide()})},150)}),i(document).on("mouseleave",function(){i(this).find(".dutu-anchor").each(function(t,e){e=i(e),e.hasClass("dutu-twinkle")||e.hide()})})},setQuery:function(t){this.opts.query=t},_imgChanged:function(t){return t==this.imgData?!1:t&&this.imgData?t.objURL!=this.imgData.objURL:!0},update:function(t,e,i,a){this.group=t.group,this.update_dutu(t,e,i,a)},update_dutu:function(t,e,i,a){var s=this._imgChanged(t)||a,o=this;s&&this._removeTwinkle(),this.imgData=t,this.imgScale=e||1;var l=t.star_face,u=t.auto_info,d="clothcard"==this.group?t.cloth:null,r=t.wiki_face_entity,c=t.srv_auto,f=[],m=[],g=[];if(u&&1==u.length&&c&&g.push(u[0]),l&&l.length>0&&r&&r.length>0){var _,p;for(_=r.length-1;_>=0;_--)for(p=l.length-1;p>=0;p--)l[p].entity===r[_].ne&&(f.unshift(l[p]),m.unshift(r[_]))}l&&0==l.length&&r&&r.length>0&&m.unshift(r[0]),this.face_list=f,this.wiki_list=m,this.auto_list=g,this.cloth_list=d?[d]:[],this.default_auto_info=t.default_auto_info,this.default_star_face=t.default_star_face,(this.face_list.length>0||this.auto_list.length>0||this.default_auto_info||this.default_star_face||0==this.face_list.length&&r&&r.length>0||0==this.auto_list.length&&c||this.cloth_list.length>0)&&!n.getValue(n.DUTU_TAG_CLOSE)?(s&&o.show(),this.updateData(t,i),this.refreshPos(),0==this.auto_list.length&&c&&!this.default_auto_info&&this.hide(),(this.default_auto_info||this.default_star_face||this.cloth_list.length>0)&&(o.visible=!0),s&&(this.$element.find(".dutu-anchor").addClass("dutu-twinkle"),setTimeout(function(){o._removeTwinkle(),o.visible||o.hide()},3600),this.face_list.length>0&&h.send("5.1011000",{tn:"baiduimagedetail",fm:"face",tag:"face",dutusize:this.face_list.length}),this.auto_list.length>0&&h.send("5.1011000",{tn:"baiduimagedetail",fm:"auto",tag:"face",dutusize:this.auto_list.length}),d&&h.send("5.1011000",{tn:"baiduimagedetail",fm:"cloth",tag:"face",dutusize:1}))):this.hide()},update_dutu_dz:function(t,e,i){var a=this._imgChanged(t),s=this;a&&this._removeTwinkle(),this.imgData=t,this.imgScale=e||1;var o=t.star_face,l=t.auto_info,u=t.wiki_face_entity,d=t.srv_auto,r=[],c=[],f=[];if(l&&1==l.length&&d&&f.push(l[0]),o&&o.length>0&&u&&u.length>0){var m,g;for(m=u.length-1;m>=0;m--)for(g=o.length-1;g>=0;g--)o[g].entity===u[m].ne&&(r.unshift(o[g]),c.unshift(u[m]))}this.face_list=r,this.wiki_list=c,this.auto_list=f,(this.face_list.length>0||this.auto_list.length>0)&&!n.getValue(n.DUTU_TAG_CLOSE)?(a&&this.show(),this.updateData(t,i),this.refreshPos(),a&&(this.$element.find(".dutu-anchor").addClass("dutu-twinkle"),setTimeout(function(){s._removeTwinkle(),s.visible||s.hide()},3600),this.face_list.length>0&&h.send("5.1011000",{tn:"baiduimagedetail",fm:"face",tag:"face",dutusize:this.face_list.length}),this.auto_list.length>0&&h.send("5.1011000",{tn:"baiduimagedetail",fm:"auto",tag:"face",dutusize:this.auto_list.length}))):this.hide()},clearHout:function(){this.wrapperLeaveTimeout&&clearTimeout(this.wrapperLeaveTimeout),this.$element.show(),this.visible=!0,this.$element.find(".dutu-anchor").show()},nocardtip:function(t,e,i){var a=e.getPropCollection("serviceCard"),s=e.getKey(),n=t.srv_auto.name;a&&a.getByKey(e.getKey()).done(function(t){s==e.getKey()&&(t=t?t.auto:null,!t&&n&&i.attr("href","/search/index?tn=baiduimage&ie=utf-8&word="+encodeURIComponent(n)).attr("log-click","p=5.15&fm=auto&tag=innerface"))})},updateData:function(t,e){var i=this.wiki_list,a=this.face_list,s=this.$element,n=0,o=a.length;for(n;o>n;n++){var l=s.find('[data-id="face_'+n+'"]'),u=this.opts.elements,d=this.elements;for(var r in u)d.hasOwnProperty(r)&&(d[r]=l.find(u[r]));this.elements.name.text(i[n].ne).parent().attr("href",i[n].url).attr("log-click","p=5.15&fm=face&tag=face&site="+encodeURIComponent(i[n].url)),!i[n].ne||this.opts.query&&this.opts.query.indexOf(i[n].ne)>=0?this.elements.name.parent().hide():this.elements.name.parent().show()}if(0==o&&0!=i.length&&"downloadoptimize"==this.group){var l=s.find('[data-id="face_0"]'),u=this.opts.elements,d=this.elements;l.addClass("default_icon default_face_icon");for(var r in u)d.hasOwnProperty(r)&&(d[r]=l.find(u[r]));this.elements.name.text(i[0].ne).parent().attr("href",i[0].url),h.send("5.1011000",{tn:"baiduimagedetail",fm:"facedefault",tag:"face"})}if(0==this.auto_list.length&&this.imgData.srv_auto||this.auto_list.length>0){var c=s.find('[data-id="face_auto_0"]').find("em"),f=c.parent(),m=f.parent();m.attr("title",""),c.text(this.imgData.srv_auto.name||"猜猜图中车型"),this.auto_list.length>0&&(!t.srv_auto.name||this.opts.query&&this.opts.query.indexOf(t.srv_auto.name)>=0?c.parent().hide():c.parent().show()),e&&this.nocardtip(t,e,f)}if(this.cloth_list.length>0){var c=s.find('[data-id="face_cloth_0"]').find("em"),g=e&&e.get("imgData").cs,_=e&&e.get("word"),p=e&&e.get("imgData").bdSrcType,v=encodeURIComponent(e&&e.get("bigImgUrl")),w=e&&e.get("imgData").map,b=w&&w.cloth_info?1:2,T=e&&e.get("imgData").picDesc,y=e&&e.get("imgData").fromPageTitleEnc,C="/n/pc_list?queryImageUrl="+v+"&querysign="+g+"&query="+_+"&shixiao="+p+"&objtype="+b+"&title="+y+"&ddesc="+T+"&fp=searchdetail&pos=card&fm=searchdetail&uptype=button#tab=product";c.parent().attr("href",C),c.text("找同款")}},show:function(){this.render(),this.$element.css("display",""),this.visible=!0},hide:function(){this.visible=!1,this.$element.find(".dutu-anchor").hasClass("dutu-twinkle")||this.$element.hide()},hover:function(){this.update(this.imgData,this.imgScale),this.$element.hasClass("dutu-anchor-hover")||this.$element.addClass("dutu-anchor-hover")},hout:function(){this.$element.hasClass("dutu-anchor-hover")&&this.$element.removeClass("dutu-anchor-hover")},refreshPos:function(t){if(this.visible){this.imgScale=t||this.imgScale;var e=this.face_list,i=this.wiki_list,a=this.$element,s=0,n=e.length,h=this.imgScale,o=this.hostImg.position();for(s;n>s;s++){var l=a.find('[data-id="face_'+s+'"]'),u=e[s];l.css({left:u.x*h+o.left,top:o.top+(1*u.y+1*u.h)*h+20})}if(0==n&&0!=i.length&&"downloadoptimize"==this.group){var l=a.find('[data-id="face_'+s+'"]');l.css({left:o.left+this.hostImg.width()-l.width()-10,top:o.top+this.hostImg.height()-l.height()-10})}if(this.auto_list.length>=0){var l=a.find('[data-id="face_auto_0"]'),u=this.auto_list[0],d=this.hostImg.width(),r=this.hostImg.height();0==this.auto_list.length&&this.imgData.srv_auto?l.css({left:o.left+parseInt(d/2),top:o.top+parseInt(r/2)}):0!=this.auto_list.length&&this.imgData.srv_auto&&l.css({left:(1*u.x+1*u.w/2)*h+o.left,top:(1*u.y+1*u.h/2)*h+o.top})}if(this.cloth_list.length>0){var l=a.find('[data-id="face_cloth_0"]'),u=this.auto_list[0],h=this.imgScale,o=this.hostImg.position();l.css({left:(1*u.x+1*u.w/2)*h+o.left,top:(1*u.y+1*u.h/2)*h+o.top})}}}}),e});
;/*!searchdetail:widget/ui/statistic/bdgstat.js*/
define("searchdetail:widget/ui/statistic/bdgstat",function(e,t,i){var a=e("common:widget/ui/base/base"),s=e("common:widget/ui/utils/utils"),o=e("common:widget/ui/monitorRequest/monitorRequest"),d=e("searchdetail:widget/ui/app/pagemodel"),n={host:"//imgstat.baidu.com/10.gif?"};a.extend(n,{sendLog:function(e){var t=this._getBaseParams();e=a.extend({},t,e,{timestamp:(new Date).getTime()}),o(this.host+s.jsonToQuery(e))},_getBaseParams:function(){if(!this._defaultParams){var e=a.cookie("BAIDUID")||"";this._defaultParams={query:d.data.queryWordEnc||"",baiduid:e.slice(0,-5),logid:window.logid||"",samplekey:encodeURIComponent(window.samplekey||""),as:""}}return this._defaultParams}}),i.exports=n});
;/*!searchdetail:widget/ui/controls/imagedetail/textlinkad/displaystrategy.js*/
define("searchdetail:widget/ui/controls/imagedetail/textlinkad/displaystrategy",function(i,t,s){function e(i){this._displayLimit=i||0}function n(i){e.call(this,i),this._firstDisplayPosition={isSet:!1,pn:-1,spn:-1}}function o(i){e.call(this,i),this._displayCount=0,this._displayPositions={}}var r=i("common:widget/ui/base/base");r.extend(e.prototype,{getDisplayIndex:function(i,t,s){return this.computeIndex(i,t,s)},computeIndex:function(){return-1}}),r.extend(n.prototype,e.prototype,{computeIndex:function(i,t,s){var e=s&&s.imgMetaArray,n=s&&s.imgModel&&s.imgModel.get("rootImg");if(!e||e.length<this._displayLimit||!n)return-1;var o=-1;if(this._firstDisplayPosition.isSet){e.push({isInited:!0,pn:i,imgNum:n.bdSetImgNum||1,adType:n.adType||"0"});var r=i-this._displayLimit<=this._firstDisplayPosition.pn&&this._firstDisplayPosition.pn<=i;if(!r)return-1;for(var p=0,a=e.length;a>p;p++){var d=e[p];if(d.isInited&&d.pn===this._firstDisplayPosition.pn)break}if(p>=a)return-1;for(o=0;a-1>p;p++){var d=e[p];d.isInited&&"0"===d.adType&&(o+=d.imgNum)}if(o=o+t-this._firstDisplayPosition.spn,0>o||o>=this._displayLimit)return-1}else this._firstDisplayPosition={isSet:!0,pn:i,spn:t},o=0;return o}}),r.extend(o.prototype,e.prototype,{computeIndex:function(i,t){var s=this._createPositionKey(i,t);if("number"==typeof this._displayPositions[s])return this._displayPositions[s];if(this._displayCount<this._displayLimit){var e=this._displayCount++;return this._displayPositions[s]=e,e}return-1},_createPositionKey:function(i,t){return i+("number"==typeof t?"_"+t:"")}}),s.exports={arbitrary:o,forward:n}});
;/*!searchdetail:widget/ui/controls/imagedetail/rightAd/rightAd.js*/
define("searchdetail:widget/ui/controls/imagedetail/rightAd/rightAd",function(i,t,e){function n(i,t){this.init(i,t)}var s=i("common:widget/ui/base/base"),o=(i("common:widget/ui/base/events"),i("searchdetail:widget/ui/statistic/bdgstat"));s.extend(n.prototype,{init:function(i,t){this.$win=s(window),this.$im=s("#imContainer"),this.imgModel=t,this._adsEpv=[],this.render(i)},bindEvents:function(){this.sendRightLog(),this.checkCropout()},render:function(i){if(i){var t=s("#adCard"),e=s("#imContainer");i.length&&i[0].AdDesc&&(t&&t.length&&"hidden"===t.css("visibility")&&t.css({visibility:"visible",height:"auto"}),e.append(i[0].AdTitle),e.append("<script>"+i[0].AdDesc+"</script>"),this.bindEvents())}},checkCropout:function(){var i,t,e=this.$im.find(".ec_img_detail"),n=this.$win.height(),d=e.length;if(!(this._adsEpv.length>=d))for(var c=0;d>c;c++)i=s(".ec_img_detail:eq("+c+")"),t=i.offset().top,n>=t&&!i.attr("data-epv")&&(o.sendLog({p:1101006,pos:"pc_detail_right_card",subpos:"右侧index",type:"epv",shownum:1}),i.attr("data-epv",1),this._adsEpv.push(c))},sendRightLog:function(){var i=s(".ec_img_detail"),t=i.find(".ec_img_wrap_a"),e=i.find(".ec_img_channel_title"),n=i.find(".ec_img_channel_url"),d=(n.text(),this);t.on("click",function(){o.sendLog({p:1101007,pos:"pc_detail_right_card",shownum:1,subpos:"右侧index",matcont:"img"})}),e.on("click",function(){o.sendLog({p:1101007,pos:"pc_detail_right_card",shownum:1,subpos:"右侧index",matcont:"title"})}),n.on("click",function(){var i=s(this).attr("href");o.sendLog({p:1101007,pos:"pc_detail_right_card",shownum:1,subpos:"右侧index",matcont:i})}),i.on("click",function(){o.sendLog({p:1101007,pos:"pc_detail_right_card",shownum:1,subpos:"右侧index",matcont:"ad"})}),s("#sider").scroll(function(){d.checkCropout()})}}),e.exports=n});
;/*!searchdetail:widget/ui/controls/imagedetail/textlinkad/textlinkad.js*/
define("searchdetail:widget/ui/controls/imagedetail/textlinkad/textlinkad",function(t,e,i){function s(t){this._element="string"===n.type(t)?n(t):t,this._isRequestProcessing=!1,this._forceHide=!1,this._isHidden=!1,this._cachedAds={isSet:!1,ads:[],js:""},this._adsShowRecords={},this._ckCode={isLoaded:!1,timeSign:0},this._opts={defaultLineHeight:20,marginTop:14,marginBottom:14,fetchNum:8,userIsLogin:!1},this._imgModel={},this._displayStrategy=null,this._displayStrategyType="arbitrary";var e=o[this._displayStrategyType];e&&(this._displayStrategy=new e(this._opts.fetchNum)),this._bindEvents()}var n=t("common:widget/ui/base/base"),d=t("common:widget/ui/base/events"),a=t("searchdetail:widget/ui/statistic/bdgstat"),o=t("searchdetail:widget/ui/controls/imagedetail/textlinkad/displaystrategy"),h=t("searchdetail:widget/ui/controls/imagedetail/rightAd/rightAd"),c=function(t){return n("<div>"+t+"</div>").text()},r=function(){return window.ecom&&window.ecom.pl&&window.ecom.pl.run};s.EventType={AD_UPDATE:"ad-update"},n.extend(s.prototype,d,{setOptions:function(t){n.extend(this._opts,t)},update:function(t){this._imgModel=t,this._forceHide||this._updateInternal(t)},_updateInternal:function(t){this._showElement(!1);var e=t.get("pn"),i=t.get("spn"),s=t.get("rootImg"),n=(this.getFetchNum(),s.adType);if("65"===n&&(n="0"),"0"!==n||!t.data.word||!this._displayStrategy||"1"===t.data.imgData.youtuType)return void(this._isHidden=!0);var d=this._displayStrategy.getDisplayIndex(e,i,{imgModel:t});return 0>d?void(this._isHidden=!0):this._cachedAds.isSet&&!this._cachedAds.ads[d]?void(this._isHidden=!0):(this._isHidden=!1,this._cachedAds.isSet&&this._cachedAds.ads[d]?void this._updateContent({index:d,ad:this._cachedAds.ads[d],js:this._cachedAds.js}):void this._fetchAds(t,d))},_bindEvents:function(){var t=this,e=this._element,i=e.find(".promote-tag"),d=e.find(".promote-warning"),o=e.find(".close-button");this._domAd=e.find(".ad-container a"),this._domDetail=e.find(".detail-button"),this._domWarningLines=d.find(".warning-line");var h=!1,c=null,r=function(){c&&(clearTimeout(c),c=null)},_=function(){d.hide(),h=!1,n(document).off("click.domPromote")};o.click(function(){t._showElement(!1),e.empty(),t._isHidden=!0,t._forceHide=!0,t.dispatchEvent(s.EventType.AD_UPDATE),a.sendLog({p:"1101009",pos:"pc_detail_left_textlink",matcont:"close",subpos:+e.attr("data-index")||0})}),i.click(function(t){h||(d.show(),h=!0,c=setTimeout(function(){_()},2e3),n(document).on("click.domPromote",function(){r(),_()}),t.stopPropagation()),a.sendLog({p:"1101009",pos:"pc_detail_left_textlink",matcont:"promote",subpos:+e.attr("data-index")||0})}),this._domAd.click(function(){a.sendLog({p:"1101009",pos:"pc_detail_left_textlink",matcont:"ad",subpos:+e.attr("data-index")||0})}),this._domDetail.length&&this._domDetail.click(function(){a.sendLog({p:"1101009",pos:"pc_detail_left_textlink",matcont:"detail",subpos:+e.attr("data-index")||0})})},_fetchAds:function(t,e){if(!this._isRequestProcessing){this._isRequestProcessing=!0;var i=this,s={tn:"baiduaspdetail",word:t.data.word,request_type:"ImageAspDetail",ie:"utf-8",objurl:"",adiswise:0,adreqtype:12};n.ajax({url:"/search/aspdetail?",type:"GET",data:s,dataType:"json",success:function(s){i.rightAd=s.rightAd,i._cachedAds.isSet=!0,i._cachedAds.ads=s.textLinkAdList&&s.textLinkAdList.slice(0,3)||[],i._cachedAds.js=s[70009]||"",new h(i.rightAd,t),i._cachedAds.ads.length&&i._cachedAds.ads[e]?i._updateContent({index:e,ad:i._cachedAds.ads[e],js:i._cachedAds.js}):i._isHidden=!0},error:function(){i._isHidden=!0},complete:function(){i._isRequestProcessing=!1}})}},_updateContent:function(t){var e=c(t.ad.AdTitle),i=c(t.ad.AdDesc),d=t.ad.AdLink,o=t.index||0;this._element.attr("data-index",o),this._domAd.text(e).attr("href",d).attr("title",i),this._domDetail.length&&this._domDetail.attr("href",d);var h=!!this._imgModel.get("userName"),_=this._opts.userIsLogin!==h;if(_){this._opts.userIsLogin=h;var l=n("#text-link-warning-login").html();l&&n(this._domWarningLines[1]).html(l)}if(this._ckCode.isLoaded||(this._element.after(t.js||""),r()&&(this._ckCode={isLoaded:!0,timeSign:window.ecom.pl.imTimesign||0})),r()){var u=this;window.ecom.pl.run(function(e){u._element.each(function(i,s){var n=s.getElementsByTagName("A");e.ck(n,t.timeSign||u._ckCode.timeSign)})},!1)}this.dispatchEvent(s.EventType.AD_UPDATE),this._isHidden||this._showElement(!0),this._adsShowRecords[o]!==!0&&(a.sendLog({p:1101008,pos:"pc_detail_left_textlink",subpos:o,shownum:1}),this._adsShowRecords[o]=!0)},getFetchNum:function(){return this._opts.fetchNum},getHeight:function(){if(this._isHidden)return 0;var t=this._opts.defaultLineHeight;return t+this._opts.marginTop+this._opts.marginBottom},reRender:function(){var t=this._element.parent();t.length&&(t.append(this._element.remove()),this._bindEvents())},_showElement:function(t){t?this._element.show():this._element.hide()},isShow:function(){return!this._isHidden},resetPosition:function(t){if(!this._isHidden){var e=t.left>0?t.left:0,i=t.top+t.height+this._opts.marginTop;this._element.css({left:e+"px",top:i+"px"})}}}),i.exports=s});
;/*!searchdetail:widget/ui/controls/card/base/base.js*/
define("searchdetail:widget/ui/controls/card/base/base",function(t){function e(t,e){this.$element=s(e.element||null),this.elements=s.extend({title:".card-title",content:".card-content",cntWrapper:".cnt-wrapper",closeBtn:".card-title .close"},t),this.opts=s.extend({initHide:!1,logTag:"card",dataKey:"",logKey:"",checkState:!0,collapseClass:"card-box-collpse",activeClass:"card-box-active",collapseHeight:!1,caption:"",tpl:['<div class="card-box">','<h5 class="card-title"><i class="sticker"></i><span class="text"></span><i class="close"></i></h5>','<div class="card-content">',"</div>","</div>"].join("")},e),this.imgData=null,this.curState={visible:!1,collapse:!1,pro:null,hasContent:!1},this.pnl=null}var s=t("common:widget/ui/base/base"),i=t("common:widget/ui/utils/utils"),a=t("common:widget/ui/base/events"),n=(t("searchdetail:widget/ui/utils/lib"),t("searchdetail:widget/ui/statistic/statistic-core"));return s.extend(e.prototype,a,{init:function(t){this.pnl=t,this.$element.length?(this._compat(this.$element),this._init()):(this.render(),this.$element.hide())},_init:function(){var t=this.$element,e=this.elements;for(var s in e)e.hasOwnProperty(s)&&(e[s]=t.find(e[s]));this.bindEvent()},render:function(){var t=this.pnl;if(!this.$element.length){var e=s(this.opts.tpl),i=s('<div class="cnt-wrapper"></div>');e.find(".card-content").appendTo(i),e.append(i),this._compat(e),this.$element=e.show().appendTo(t)}this._init(),this.opts.caption&&this.elements.title.find(".text").text(this.opts.caption)},_compat:function(t){i.UI.isSupportCss3("transform",t.get(0))||t.find(".card-title .close").addClass("close-lower")},setLinkLog:function(t){t=t||this.$element;var e=this.opts.logKey,i=this;i.element=t,t.find("a").each(function(t,a){a=s(a);var n=a.attr("href");if(n&&!a.attr("log-click")&&!a.hasClass("nolog")){var o=a.attr("log-ext")||"";a.attr("log-click","p=5.15&tag="+i.opts.logTag+"&fm="+e+"&site="+encodeURIComponent(n)+"&pos="+(a.attr("log-pos")||"")+"&ext="+encodeURIComponent(o))}}),i.element.find(".sma-container").size()>0&&i.element.find(".sma-container .sma-body>li").size()>0&&(n.send("5.1010000",{tn:"baiduimagedetail",tag:"card",fm:"sma"}),i.element.find(".sma-container").find("a").each(function(t,e){e=s(e);var a=e.attr("href");if(a){var n=e.attr("log-ext")||"";e.attr("log-click","p=5.15&tag="+i.opts.logTag+"&fm=sma&site="+encodeURIComponent(a)+"&pos="+(e.attr("log-pos")||"")+"&ext="+encodeURIComponent(n))}})),i.element.find("#imContainer").size()>0&&i.element.find("#imContainer .EC_im").size()>0&&(n.send("5.1010000",{tn:"baiduimagedetail",tag:"card",fm:"ecim"}),i.element.find("#imContainer").find("a").each(function(t,e){e=s(e);var a=e.attr("href");if(a){var n=e.attr("log-ext")||"";e.attr("log-click","p=5.15&tag="+i.opts.logTag+"&fm=ecim&site="+encodeURIComponent(a)+"&pos="+(e.attr("log-pos")||"")+"&ext="+encodeURIComponent(n))}})),s(".card-box-more").size()>0&&s(".card-box-more").each(function(t,e){e=s(e);var a=e.attr("href"),n=s(this).attr("id")?"xiangsi":s(this).attr("fm")?s(this).attr("fm"):"";if(a){var o=e.attr("log-ext")||"";e.attr("log-click","p=5.15&tag="+i.opts.logTag+"&fm="+n+"&site="+encodeURIComponent(a)+"&pos=more&ext="+encodeURIComponent(o))}})},updateLogSeq:function(t){this.opts.logIndex=t,this.$element.find("a[log-click]").each(function(e,i){i=s(i);var a=i.attr("log-click")||"";a.indexOf("&seq")>0?a=a.replace(/&seq=\d+(&|$)/,"&seq="+t+"$1"):a+="&seq="+t,i.attr("log-click",a)})},bindEvent:function(){var t=this;this.elements.closeBtn.on("click",function(){var e=t.toggleState();n.send("5.1010101",{tn:"baiduimagedetail",fm:t.opts.logKey,act:e?"open":"close",seq:t.opts.logIndex,tag:"card"})})},toggleState:function(){var t=this,e=t.opts.collapseClass,i=!t.$element.hasClass(e);return t.opts.cardHeight||(t.opts.cardHeight=t._ready4Animate()),t.$element.toggleClass(e).css("height",i?t.opts.collapseHeight:t.opts.cardHeight),s.browser.msie&&s.browser.version<=6&&s(document.body).toggleClass("refr4ie6"),!i},_ready4Animate:function(){var t=this.elements,e=t.cntWrapper.height(),s=e+(t.title.length?t.title[0].offsetHeight:0);return this.opts.collapseHeight||(this.opts.collapseHeight=t.title.height()),this.$element.height(s).css("overflow","hidden"),t.cntWrapper.height(e).css({position:"absolute",bottom:"1px"}),s},_resetBox4Update:function(){var t=this.opts.collapseClass;this.opts.cardHeight=!1,this.elements.cntWrapper.css({position:"static",height:"auto"}),this.$element.hasClass(t)&&this.$element.removeClass(t),this.$element.hasClass("ad-card")||this.$element.css("height","auto")},bindText:function(t,e){t.text(e||""),e?t.show():t.hide()},getState:function(){return this.curState},update:function(t,e,s){var i=this.checkState(t),a=!0;if(this.imgData=t,this.curState.hasContent=i.hasContent,(!this.opts.checkState||i.hasContent&&i.changed||"common"===this.opts.sortKey&&window.hitFeibiao)&&!s){this.curState.collapse=!1;var n=this.opts.dataKey;this.$element.length||this.render();var o=this.updateView(t[n]||t,e);if(this._resetBox4Update(),o!==!1){var l=t.card_pres_info||{};if(n&&l[n]){var c=this.opts.collapseClass;this.$element.hasClass(c)||this.$element.addClass(c),this.$element.height(37),this.curState.collapse=!0}a=!1,this.setLinkLog(this.elements.content)}}this.curState.visible=!a,a||this.opts.initHide?this.hide():this.$element.show()},hide:function(){var t=this.$element,e=this.opts.collapseClass;t.hide(),t.hasClass(e)&&t.removeClass(e),this.$element.hasClass("ad-card")||this.$element.css("height","auto")},active:function(){var t=this.opts.collapseClass,e=!this.$element.hasClass(t);e||this.toggleState();var s=this.opts.activeClass;this.$element.hasClass(s)||this.$element.addClass(s)},disactive:function(){var t=this.opts.activeClass;this.$element.hasClass(t)&&this.$element.removeClass(t)},checkState:function(t){var e=this.opts.dataKey,i=this.curState.hasContent,a=e&&this.imgData?this.imgData[e]:null,n=e?t[e]:null,o=n&&(!s.isArray(n)||n.length);return"decoration_sim"===e?o=!1:void 0,t.decoration_sim&&"decoration_sim"===e?o=!0:void 0,{hasContent:o,changed:i!=o||o&&a!=n,dataObj:n}},getData:function(t){var e=this.opts.dataKey;return e?t[e]:null},updateView:function(){},getDataByPosId:function(t,e){if(!t||!e)return null;for(var s=null,i=0;i<e.length;i++)e[i].Tag===t&&(s=e[i]);return s}}),e});
;/*!searchdetail:widget/ui/controls/card/nsAdII_leftBottomButton/leftBottomButton.js*/
define("searchdetail:widget/ui/controls/card/nsAdII_leftBottomButton/leftBottomButton",function(t){function e(t,e){e=n.extend({pn:-1,spn:-1,itemTpl:'<a class="leftBottomButton" id="leftBottomButton1" target="_blank" href="${adLink1}">${adButtonText1}</a>\n<a class="leftBottomButton" id="leftBottomButton2" target="_blank" href="${adLink2}">${adButtonText2}</a>',tpl:"",layerTpl1:['<p>本搜索结果为<a target="_blank" href="http://e.baidu.com/">商业推广</a>信息，请注意可能的风险。百度推出','<a target="_blank" href="http://baozhang.baidu.com/guarantee/">网民权益保障计划</a>，','<a target="_blank" href="https://passport.baidu.com/">登录</a>搜索有保障。</p>'].join(""),layerTpl2:['<p>本搜索结果为<a target="_blank" href="http://e.baidu.com/">商业推广</a>信息，请注意可能的风险。','您当前为登录状态，已参加<a target="_blank" href="http://baozhang.baidu.com/guarantee/">网民权益保障计划</a>。'].join("")},e),a.call(this,t,e)}var n=t("common:widget/ui/base/base"),i=t("common:widget/ui/base/events"),o=(t("searchdetail:widget/ui/utils/lib"),t("searchdetail:widget/ui/utils/imghelper"),t("common:widget/ui/juicer/juicer")),a=t("searchdetail:widget/ui/controls/card/base/base"),s=t("searchdetail:widget/ui/statistic/statistic-core");return n.extend(e.prototype,i,a.prototype,{checkState:function(t){var e=this.getDataByPosId("pc_detail_slider_left_bottom_button",t.fbResult),i=!!e;return!i&&n("#srcPic").find(".fb-leftBottomButton-wrapper").remove(),!i&&n("#srcPic").find(".tuiguang-btn").remove(),!i&&n("#srcPic").find(".tuiguang-info").remove(),{hasContent:i,changed:i,dataObj:[]}},addSpread:function(t){var e=this,i=n("#srcPic").find(".tuiguang-btn"),o=n("#srcPic").find(".tuiguang-info"),a=!t.get("userName");o.empty().append(a?e.opts.layerTpl1:e.opts.layerTpl2),o.css("display","none"),i.off("click"),o.off("click"),o.off("hover"),i.on("click",function(){o.show()}),e.clickTips=setTimeout(function(){o.hide()},4e3),o.hover(function(){o.show(),clearTimeout(e.clickTips)},function(){e.clickTips=setTimeout(function(){o.hide()},4e3)}),o.on("click",function(){o.hide()})},resize:function(t){var e=n("#srcPic"),t=t||e.find(".currentImg")||e.find("img"),i=e.find(".fb-leftBottomButton-wrapper"),o=e.find(".tuiguang-btn"),a=e.find(".tuiguang-info"),s=t.width()||0,c=t.height()||0,d=t.position()?t.position().left:0,p=t.position()?t.position().top:0,u=i.height();i.css("top",p+c-u+"px"),i.css("left",d+"px"),i.width(s+"px"),o.css({top:p+"px",left:d+s-35+"px"}),a.css({top:p+"px",left:d+s-281+"px"})},updateView:function(t,e){var i=this,a=n("#srcPic"),c=a.find(".fb-leftBottomButton-wrapper"),d=(a.find(".currentImg"),"pc_detail_slider_left_bottom_button"),p=this.getDataByPosId(d,t.fbResult),u=p.Items[0].Images,r=p.Items[0].BrandName,l={};c[0]||(a.append('<div class="fb-leftBottomButton-wrapper"></div>'),a.append('<span class="tuiguang-btn">广告</span><div class="tuiguang-info"></div>'),c=a.find(".fb-leftBottomButton-wrapper"),i.resize()),n(u).each(function(t,e){"1"===e.AdPosition&&(l=n.extend({adLink1:e.AdLink,adButtonText1:e.AdTitle},l)),"2"===e.AdPosition&&(l=n.extend({adLink2:e.AdLink,adButtonText2:e.AdTitle},l))}),(this.opts.pn!==e.get("pn")||this.opts.spn!==e.get("spn"))&&(this.opts.pn=e.get("pn"),this.opts.spn=e.get("spn"),s.send("10.1010100",{as:r,pos:d,subpos:"0",shownum:"2",matcont:l.adButtonText1,materialNum:"2"}),s.send("10.1010100",{as:r,pos:d,subpos:"1",shownum:"2",matcont:l.adButtonText2,materialNum:"2"})),c.empty().append(o(i.opts.itemTpl,l)),n("#leftBottomButton1").click(function(){s.send("10.1010101",{as:r,pos:d,subpos:"0",matcont:l.adButtonText1,tgTo:1})}),n("#leftBottomButton2").click(function(){s.send("10.1010101",{as:r,pos:d,subpos:"1",matcont:l.adButtonText2,tgTo:1})}),i.addSpread(e)}}),e});
;/*!searchdetail:widget/ui/statistic/avatar-statistic.js*/
define("searchdetail:widget/ui/statistic/avatar-statistic",function(t,a,e){var i=t("searchdetail:widget/ui/app/pagemodel"),n=t("common:widget/ui/utils/utils"),r=n.ihttpsAgent("http://bzclk.baidu.com")+"/7.gif";e.exports=function(){function t(t){if(null===t||"object"!=typeof t)return t;var a=[];for(var e in t)""!==e&&(a[a.length]=e+"="+t[e]);return a.join("&")}return function(a,e){var n={type:"avatar",app:"pc",page:"detail",wd:i.data.queryWordEnc,pn:i.data.pn};n.adid=a,n.etype=e;var c=new Image;c.src=r+"?"+t(n)+"&_="+ +new Date}}()});
;/*!searchdetail:widget/ui/controls/imagedetail/imagedetail.js*/
define("searchdetail:widget/ui/controls/imagedetail/imagedetail",function(t){function e(t,e){this._pageModel=e.pageModel,this.$pnl=i(t),this.$img=this.$pnl.find("img"),this.$desc=i(null),this._imgInited=!0,this._showFirstObjUrl=!0,this.dutuAnchor=new h,this.timeout=null,this.mouseWheelFlag=!0,this.textLinkAd=new r(this.$pnl.find(".img-wrapper .text-link-ads")),i('<div class="currentImg-adtext" style="display:none"><p></p></div>').insertAfter(".currentImg"),this.fbLeftBottomButton=new n,this.$img.length?(alog&&alog("speed.set","c_imginsert",+new Date),alog.fire&&alog.fire("mark")):(this.$img=i("<img />"),this._imgInited=!1,this._showFirstObjUrl=!1),this.setJsaction(),this.opts=i.extend({minScale:.1,maxScale:10,descTpl:""},e),this.data={},this.scale=1,this.dragSupport=null,this.wheelZoomable=!1}var i=t("common:widget/ui/base/base"),s=(t("common:widget/ui/utils/utils"),t("common:widget/ui/base/events")),a=t("searchdetail:widget/ui/utils/lib"),o=t("searchdetail:widget/ui/controls/imagedetail/dragsupport"),h=t("searchdetail:widget/ui/controls/imagedetail/dutuanchor/dutuanchor"),r=t("searchdetail:widget/ui/controls/imagedetail/textlinkad/textlinkad"),n=t("searchdetail:widget/ui/controls/card/nsAdII_leftBottomButton/leftBottomButton"),l=t("searchdetail:widget/ui/statistic/avatar-statistic"),g=t("searchdetail:widget/ui/statistic/statistic-core");return i.extend(e.prototype,s,{errImgData:{bigImgUrl:"//img0.bdstatic.com/img/image/error.gif",width:318,height:73},setOptions:function(t){i.extend(this.opts,t)},init:function(){var t=this;this.$img.length&&this.dutuAnchor.init(this.$pnl,this.$img);/macintosh|mac os x/i.test(navigator.userAgent);!i.browser.mozilla||"onmousewheel"in document.body?this.$pnl.on("mousewheel",this._onMouseWheelHandler.bind(this)):this.$pnl.on("DOMMouseScroll",this._onMouseWheelHandler.bind(this)),t.group=t.opts.pageModel&&t.opts.pageModel.getAbTestGroup(),t.group&&"prevnextarrow"==t.group?(t.$pnl.on("mouseleave",function(){i(this).parent("#container").removeClass("left right")}),t.$pnl.children(".img-wrapper").on("mousemove",function(e){var s=e||window.event,a=i(t.$img).width(),o=i(t.$img).offset().left,h=s.pageX,r=(s.pageY,(h-o)/a),n=(i(this).parent().siblings(".img-prev"),i(this).parent().siblings(".img-next"),"");.3>r?(i(this).removeClass("rightArrow").addClass("leftArrow"),i(this).closest("#container").removeClass("right").addClass("left"),i(this).closest("#container").find(".img-next").css("visibility","hidden"),i(this).closest("#container").find(".img-prev").css("visibility","visible"),n="点击上翻"):(i(this).removeClass("leftArrow").addClass("rightArrow"),i(this).closest("#container").removeClass("left").addClass("right"),i(this).closest("#container").find(".img-prev").css("visibility","hidden"),i(this).closest("#container").find(".img-next").css("visibility","visible"),n="点击下翻"),t.$img.attr("title",t.wheelZoomable?"可拖动":n)})):(t.$pnl.find("img").css("cursor","pointer"),this.$img.on("click",function(){if(t.data&&(!t.dragSupport||!t.dragSupport.enabled)){if(!t.data.fromURL||"http://"===t.data.fromURL)return;window.open(a.getRedirectUrl(t.data.fromURL,t.data.objURL,t.data.replaceUrl)),t.dispatchEvent("linkout")}1===+t.data.adType&&l(t.data.adid,"clk")})),this.opts.descTpl&&(this.$desc=i(this.opts.descTpl)),this.on("scaleChanged",function(){t.dutuAnchor.refreshPos(t.scale),t._repositionTextLinkAd(),t.fbLeftBottomButton.resize(t.$img)}),this.textLinkAd.on(r.EventType.AD_UPDATE,function(){t.autoScale()})},_initImg:function(){this.opts.descTpl&&this.$desc.appendTo(this.$pnl);var t=this;this.$img.get(0).onload=function(){t._imgloaded()},this.$img.appendTo(this.$pnl),this._imgInited=!0,this.dutuAnchor.init(this.$pnl,this.$img),this.textLinkAd.reRender(),alog&&alog("speed.set","c_imginsert",+new Date),alog.fire&&alog.fire("mark"),a.logTime("imginsert",window.pageStartTime,(new Date).getTime())},_imgloaded:function(){alog&&alog("speed.set","c_firstPageComplete",+new Date),alog.fire&&alog.fire("mark"),this.$img.get(0).onload=null},update:function(t,e){this.updateData(e.get("imgData"),e.get("rootImg"),e)},updateData:function(t,e,s){this.group=t.group;var o=t.key!=this.data.key;if(o||t.bigImgUrl!=this.data.bigImgUrl){e=e||t,this.setDraggable(!1);var h=this.scale;if(o&&(this.scale=1),this._imgInited&&this.$img.attr("src")!=t.bigImgUrl){var r=this.$img[0];r.onload=r.onerror=null}if(t&&t.bigImgUrl){var n=!0;i("#dutu-anchor-wrapper").hide();var l=this._showImg(t,e,s);l||(this.scale=h,this.dispatchEvent("scaleChanged",{scale:this.scale}))}else this._showThumbImg(t);if(this._imgInited||this._initImg(),t.bigImgUrl==t.objURL){if(this._showFirstObjUrl&&alog){var d=(new Date).getTime()-g.imgViewStart;alog&&alog("speed.set","p_switchimgobjshow",d),alog.fire&&alog.fire("mark"),o&&(alog&&alog("speed.set","p_switchimgthumbshow",d),alog.fire&&alog.fire("mark"))}this._showFirstObjUrl||(this._showFirstObjUrl=!0,alog&&alog("speed.set","c_imgobjshow",+new Date),alog.fire&&alog.fire("mark"),a.logTime("imgobjshow",window.pageStartTime,(new Date).getTime()))}else{var c=(new Date).getTime()-g.imgViewStart;this._showFirstObjUrl&&alog&&alog("speed.set","p_switchimgthumbshow",c),alog.fire&&alog.fire("mark")}!!n||this.dutuAnchor.update(t,this.scale,s)}},update_dutuAnchor:function(t,e){this.dutuAnchor.update(t,this.scale,e,!0)},_showImg:function(t,e,s){{var a=this,o=(i(".img-wrapper .currentImg").length>0,new i.Deferred,t.bigImgUrl),h=t.objURL;t.replaceUrl}e=e||{};var r=this.data;this.data=i.extend({},t),this.$img.get(0).onload=this.$img.get(0).onerror=function(){a.$img.get(0).onload=a.$img.get(0).onerror=null,a.$img.show(),i("#dutu-anchor-wrapper").show(),a.dutuAnchor.update(t,a.scale,s),a._repositionTextLinkAd(),a.fbLeftBottomButton.resize(a.$img)};var n=i("#hdFirstImgObj"),l=!1;220===n.width()&&159===n.height()&&(l=!0),n.attr("data-ispreload")&&"1"===i(".currentImg").attr("data-ispreload")&&!l&&(t.bigImgUrl=n.attr("src"));var g=new Image;return g.onload=function(){a.data.__idx_===t.__idx_&&a.$img.attr("src")!==h&&a.$img.attr("src",o)},g.src=o,a.$img.height(),this.$desc.text(e.setTitle),e.setTitle?this.$desc.show():this.$desc.hide(),r.width!=t.width||r.height!=t.height?(r.width&&a.$img.hide(),a.autoScale(),!0):(a.$img.show(),!1)},_showThumbImg:function(t){this.data=i.extend({},t);var e=this.$img[0];if(this.$img.attr("src")==t.bakUrl)this.$img.css({width:"auto",height:"auto"}),this._thumbLoaded(t,e.offsetWidth,e.offsetHeight);else{var s=this;e.onload=function(){s._thumbLoaded(t,e.offsetWidth,e.offsetHeight)},e.onerror=function(){s._thumbLoaded(t,0,0)},this.$img.attr("src",t.bakUrl).css({width:"auto",height:"auto"})}},_thumbLoaded:function(t,e,i){var s=this.$img[0];if(s.onload=s.onerror=null,this.data.key==t.key){var a={key:t.key,bigImgUrl:t.bakUrl,width:e,height:i};0>=e&&(a.width=this.errImgData.width,a.height=this.errImgData.height,this.$img.attr("src",this.errImgData.bigImgUrl)),this.data=a,this._updateImageStyle(this.$img,{width:a.width,height:a.height}),this.autoScale()}},resetSize:function(t,e){this.wheelZoomable||this.autoScale(t,e)},autoScale:function(t,e){t=t||this.getPnlWidth(),e=e||this.getPnlHeight();var s=function(i,s){return{top:Math.floor((e-s)/2),left:Math.floor((t-i)/2)}},a=this.data.width,o=this.data.height;t>=a&&e>=o||(t/e>a/o?(a=a*e/o,o=e):(o=o*t/a,a=t));var h=s(a,o),r=this._getReservedHeight();r.reserve&&(h.top=h.top+r.topHeight),this._updateImageStyle(this.$img,i.extend({width:a,height:o},h)),this._updateDescPos(t,e,a,o,h),this.scale=a/this.data.width,this.dispatchEvent("scaleChanged",{scale:this.scale})},_updateImageStyle:function(t,e){var s=2,a={},o={};if(i.isNumeric(e.left)||i.isNumeric(e.top)){var h={left:parseFloat(t.css("left"))||0,top:parseFloat(t.css("top"))||0},r=(i.isNumeric(e.left)?Math.abs(e.left-h.left):0)+(i.isNumeric(e.top)?Math.abs(e.top-h.top):0);r>=s&&(a.left=(i.isNumeric(e.left)?e.left:h.left)+"px",o.left=parseInt(a.left,0)+"px",a.top=(i.isNumeric(e.top)?e.top:h.top)+"px",o.top=a.top)}e.width>=0&&(a.width=e.width+"px",o.width=a.width),e.height>=0&&(a.height=e.height+"px"),t.css(a),o.top&&(o.top=parseInt(o.top,0)+parseInt(i(".currentImg").height(),0)-30+"px"),o.width&&parseInt(o.width,0)>parseInt(i("#srcPic").width(),0)&&(o.width=i("#srcPic").width(),o.left="0"),a.height&&parseInt(a.height,0)>parseInt(i("#srcPic").height(),0)&&(o.top=parseInt(i("#srcPic").height(),0)-30+"px"),i(".currentImg-adtext").css(o)},_getImagePosition:function(t){return{left:parseFloat(t.css("left"))||0,top:parseFloat(t.css("top"))||0}},_getReservedHeight:function(){var t=this.textLinkAd.getHeight();return{reserve:0!==this._pageModel.get("firstPic")&&!!t,topHeight:48,bottomHeight:t}},_updateDescPos:function(t,e,i,s,a){var o=!!this.$desc.text();if(o)if(200>i||100>s)this.$desc.hide();else{this.$desc.show();var h=Math.min(t,i+Math.min(a.left,0)),r=Math.max(0,a.left),n=Math.min(a.top+s,e)-(this.$desc.height()||32);this.$desc.width(h).css({top:n,left:r})}},zoomChange:function(t){this.zoom(t)},zoom:function(t,e){var i=t<this.opts.minScale;if(t=Math.max(this.opts.minScale,Math.min(t,this.opts.maxScale)),t&&t!=this.scale){e=e||this.getZoomCenter();var s=this.$img,a=this.data.width,o=this.data.height,h=s.width(),r=s.height(),n=this.getPnlWidth(),l=this.getPnlHeight(),g=a*t,d=o*t,c=100,m=this._getImagePosition(s),p={left:g/h*(m.left-e.x)+e.x,top:d/r*(m.top-e.y)+e.y};p.left+g<c?p.left=c-g:p.left>n-c&&(p.left=n-c),p.top+d<c?p.top=c-d:p.top>l-c&&(p.top=l-c),this._updateImageStyle(s,{width:g,height:d,top:p.top,left:p.left}),this.scale=t,this._updateDescPos(n,l,g,d,p),this.dispatchEvent("scaleChanged",{scale:this.scale}),i||this.setDraggable(!0)}},getPnlWidth:function(){return this.$pnl.width()},getPnlHeight:function(){var t=this.$pnl.height(),e=this._getReservedHeight();return t-=e.reserve?e.topHeight+e.bottomHeight:e.bottomHeight},getZoomCenter:function(){var t=this.$img,e=this._getImagePosition(t),i=e.left+t.width()/2,s=e.top+t.height()/2;return{x:i,y:s}},setDraggable:function(t){this.wheelZoomable=t;var e=this;if(t&&!this.dragSupport&&(this.dragSupport=e.group&&"prevnextarrow"==e.group?new o(this.$pnl,this.$img,{cursor:""}):new o(this.$pnl,this.$img),this.dragSupport.on("startMove",function(){e.dutuAnchor.$element.addClass("hide"),e.$desc.hide()}),e.group&&"prevnextarrow"==e.group&&this.dragSupport.on("ingMove",function(){i(e.$pnl).find(".img-wrapper").addClass("dragging"),i(e.$img).css("cursor","url(//img0.bdstatic.com/img/image/grabhand.cur), move")}),this.dragSupport.on("endMove",function(){e.dutuAnchor.$element.removeClass("hide"),e.dutuAnchor.refreshPos(e.scale);var t=!!e.$desc.text();t&&e._updateDescPos(e.getPnlWidth(),e.getPnlHeight(),e.$img.width(),e.$img.height(),e.$img.position()),e.group&&"prevnextarrow"==e.group&&setTimeout(function(){i(e.$pnl).find(".img-wrapper").removeClass("dragging"),i(e.$img).css("cursor","")},0)})),this.dragSupport&&(t?this.dragSupport.enable():this.dragSupport.disable()),e.group&&"prevnextarrow"==e.group){var s="";s=this.$pnl.find(".img-wrapper").hasClass("leftArrow")?"点击上翻":this.$pnl.find(".img-wrapper").hasClass("rightArrow")&&"点击下翻",this.$img.attr("title",t?"可拖动":s)}else this.$img.attr("title",t?"可拖动":e.data.fromURL?"点击查看源网页":""),!t&&this.$img.css("cursor",e.data.fromURL?"pointer":"")},setJsaction:function(){this.$img.attr("log-rightclick","p=5.102")},_onMouseWheelHandler:function(t){var e=this,i=/macintosh|mac os x/i.test(navigator.userAgent);t=t.originalEvent||t||window.event;var s=Math.abs(t.deltaY),a=/^([0-9])[0-9]*(\\.\\w*)?$/;if(window.samplekey.match("UI_PC_MOUSEWHEEL:1")&&i&&a.test(s)||window.samplekey.match("UI_PC_MOUSEWHEEL:1")&&!i&&!a.test(s)){var o=i?45:100;this.mouseWheelFlag&&(e.wheelZoomable?e.processWheelZoom(t):e._processWheelSwitch(t),t.preventDefault&&t.preventDefault(),t.returnValue=!1,this.mouseWheelFlag=!1),clearTimeout(this.timeout),this.timeout=setTimeout(function(){e.mouseWheelFlag=!0},o)}else e.wheelZoomable?e.processWheelZoom(t):e._processWheelSwitch(t),t.preventDefault&&t.preventDefault(),t.returnValue=!1},throttle:function(t,e,i){var s=!1;return i||(i={}),function(){var a=this,o=arguments;s||(i.leading!==!1&&t.apply(a,o),s=!0,setTimeout(function(){i.trailing!==!1&&t.apply(a,o),s=!1},e))}},_processWheelSwitch:function(t){var e=0;t.wheelDelta?e=t.wheelDelta/240:t.detail&&(e=-t.detail/6),e&&e>0?this.dispatchEvent("wheelPrev"):e&&0>e&&this.dispatchEvent("wheelNext")},processWheelZoom:function(t){var e=t.clientX-14,i=t.clientY-47,s=t.wheelDelta||-1*t.detail,a=.25*(s>0?1:-1);this.zoom((1+a)*this.scale,{x:e,y:i})},_repositionTextLinkAd:function(){if(this.textLinkAd.isShow()){var t="none"===this.$img.css("display");t&&this.$img.show();var e=this.$img.position();e.left=e.left+(this.$img.width()/2-this.$pnl.find(".img-wrapper .text-link-ads").width()/2),this.textLinkAd.resetPosition({left:e.left,top:e.top,width:this.$img.width(),height:this.$img.height()}),t&&this.$img.hide()}}}),e});
;/*!searchdetail:widget/ui/databinder/databind.js*/
define("searchdetail:widget/ui/databinder/databind",function(n){var a=(n("common:widget/ui/base/base"),{bind:function(n,a,e,i,t){if(n&&a&&e&&i){var r;if(n.addEventListener(a+":changed",function(){var t=n.get(a);r!=t&&e[i].call(e,t,n),r=t}),t){var d=e[t];e[t]=function(){var i=d.apply(e,arguments);return n.set(a,i),i}}}}});return a});
;/*!searchdetail:widget/ui/controls/pressbtn/pressbtn.js*/
define("searchdetail:widget/ui/controls/pressbtn/pressbtn",function(s){function e(s,e){this.$element=s,this._pressing=!1,this._ignoreNextClick=!1,this._pressDelay=null,this.options=t.extend({pressDelay:150,disabledClass:"disabled",disabledTitle:""},e)}var t=s("common:widget/ui/base/base"),n=s("common:widget/ui/utils/utils"),i=s("common:widget/ui/base/events");return t.extend(e.prototype,i,{init:function(){this.$element=t(this.$element),this._bindBtnEvent()},setEnable:function(s){var e=this.options.disabledClass,t=this.options.disabledTitle,n=this.$element;s&&n.hasClass(e)?(n.removeClass(e),t&&n.attr("title","")):s||n.hasClass(e)||(n.addClass(e),t&&n.attr("title",t),this._pressing&&this._presssEnd())},getEnable:function(){return!this.$element.hasClass(this.options.disabledClass)},_bindBtnEvent:function(){var s=this.$element,e=this,t=n.throttle(function(){e._ignoreNextClick||e.dispatchEvent("clicked"),e._ignoreNextClick=!1},e.options.pressDelay);s.on("click",function(s){s.preventDefault(),e.getEnable()&&t()}),s.on("mousedown",function(){e.getEnable()&&(e._pressDelay=n.delay(function(){e._pressDelay=null,e._pressing||(e._pressing=!0,e.dispatchEvent("pressing"))},e.options.pressDelay))}),s.on("mouseup",function(){e.getEnable()&&(e._ignoreNextClick=e._pressing,e._presssEnd())}),s.on("mouseout",function(){e.getEnable()&&e._presssEnd()})},_presssEnd:function(){this._pressDelay&&this._pressDelay.cancel(),this._pressDelay=null,this._pressing&&(this._pressing=!1,this.dispatchEvent("pressEnd"))}}),e});
;/*!searchdetail:widget/ui/controls/imgtoolbar/zoomview/zoomview.js*/
define("searchdetail:widget/ui/controls/imgtoolbar/zoomview/zoomview",function(t){function i(t,i){this.elements={zoomIn:t.zoomIn,zoomOut:t.zoomOut,scale:t.scale,zoomToggle:t.zoomToggle,img:t.img,imgPnl:t.imgPnl},this.lastImgModel=null,this.zoomInBtn=null,this.zoomOutBtn=null,this.zoomToggle=null,this._timerFrag=e("<div></div>"),this.options=e.extend({minScale:.1,maxScale:10,step:.25},i),this.scale=1}var e=t("common:widget/ui/base/base"),n=t("common:widget/ui/base/events"),o=t("searchdetail:widget/ui/controls/pressbtn/pressbtn");return e.extend(i.prototype,n,{init:function(){var t=this.elements;for(var i in t)t.hasOwnProperty(i)&&(this.elements[i]=e(t[i]));this.zoomInBtn=new o(t.zoomIn),this.zoomInBtn.init(),this.zoomOutBtn=new o(t.zoomOut),this.zoomOutBtn.init(),this._bindEvent()},_bindEvent:function(){this._bindBtnEvent(this.zoomInBtn,!0),this._bindBtnEvent(this.zoomOutBtn,!1);var t=this;this.elements.zoomToggle.on("click",function(){var i=e(this);if(!i.hasClass("btn-imgtoggle-disable")){var n="1"==i.attr("data-adapt");t.fire("viewModeChanged",{mode:n?"adapt":"origin"})}})},_bindBtnEvent:function(t,i){var e=this,n=this.options.step*(i?1:-1),o=i?this.options.maxScale:this.options.minScale;t.on("clicked",function(){e._timerFrag.stop(),e.changeScale(n,!0)}),t.on("pressing",function(){e._startChangeTimer(o)}),t.on("pressEnd",function(){e._timerFrag.stop()})},_getZoomDuration:function(t,i,e){return 1>i?1>=t?(t-i)*e:(1-i+(t-1)/this.options.maxScale)*e:t>=1?(i-t)/this.options.maxScale*e:((i-1)/this.options.maxScale+(1-t))*e},_startChangeTimer:function(t){var i=this;this._timerFrag.width(this.scale).animate({width:t},{duration:this._getZoomDuration(this.scale,t,2e3),easing:"linear",step:function(t){i.changeScale(t,!1)}})},changeScale:function(t,i){var e=i?(1+t)*this.scale:t;return e=Math.min(e,this.options.maxScale),e=Math.max(e,this.options.minScale)},updateScale:function(t){this.scale=t,this.elements.scale.text(Math.floor(100*t)+"%"),this._updateToggleBtnState()},resetImgPnlSize:function(){this._updateToggleBtnState()},_updateToggleBtnState:function(){this.elements.img&&0===this.elements.img.length&&(this.elements.img=e("#srcPic img"));var t=this.elements,i=t.img.width(),n=t.img.height(),o=t.imgPnl.width(),s=t.imgPnl.height();i>o||n>s||1==this.scale?t.zoomToggle.html('<span class="b-before"></span>合适尺寸<i></i>').attr("data-adapt","1").attr("title","合适尺寸"):t.zoomToggle.html('<span class="b-before"></span>原始尺寸<i></i>').attr("data-adapt","").attr("title","原始尺寸");var a="btn-imgtoggle-disable";o>=i&&s>=n&&1==this.scale?t.zoomToggle.hasClass(a)||t.zoomToggle.addClass(a):t.zoomToggle.hasClass(a)&&t.zoomToggle.removeClass(a)}}),i});
;/*!searchdetail:widget/ui/controls/pop/pop.js*/
define("searchdetail:widget/ui/controls/pop/pop",function(t){function i(t){t=e.extend({hasArrow:!0,hasClose:!0},t);var i=e('<div class="mod-pop" style="display:none;position:absolute;z-index:999;"><div class="content"></div></div>');i.attr("id",o.getUniqId("imgpop_")),t.className&&i.addClass(t.className),t.hasArrow&&i.append('<div class="arrow"><div class="arrow-bd"></div><div class="arrow-bg"></div></div>'),t.hasClose&&i.append('<a class="pop-close" href="#" title="关闭"></a>'),this.$element=i,this.$content=i.find(".content"),this.$arrow=i.find(".arrow"),this.$close=i.find(".pop-close"),this.opts=t,this._inited=!1,this.triggerElement=null,this.visible=!1}var e=t("common:widget/ui/base/base"),s=t("common:widget/ui/utils/utils"),n=t("common:widget/ui/base/events"),o=t("searchdetail:widget/ui/utils/lib");return e.extend(i.prototype,n,{setContent:function(t){this.$content.html(t)},init:function(){var t=this;this.$element=this.$element.appendTo(document.body),e(document).on("mousedown",function(i){(!t.triggerElement||t.triggerElement[0]!=i.target)&&t.hide()}),this.$element.on("mousedown",function(t){t.stopPropagation()}),this.$close.on("click",function(i){i.preventDefault(),t.hide()}),this.opts.contentWidth=this.$content.width()||this.$element.width()-s.UI.getCssDigitValueSum(this.$content,["border-left-width","border-right-width","padding-left","padding-right"]),this.opts.contentHeight=this.$content.height(),this._inited=!0},setTrigger:function(t){this.triggerElement=t},_beforeShow:function(){},refreshPos:function(t){var i=this.triggerElement;if(this.visible&&this._inited&&i){if("none"==i.css("display"))return void this.hide();t=t||this.$arrow.position().left+this.$arrow.width()/2;var e=i.offset(),s=this.$arrow.height(),n=i[0].offsetWidth,o=(i[0].offsetHeight,this.opts.contentHeight);this.$element.css({top:e.top-o-s/2,left:e.left-t+n/2})}},show:function(){this._inited||this.init();var t=this._beforeShow();if(!t){this.visible=!0;var i=this.triggerElement;if(i&&i.length){this.$element.show();var e=this.opts.contentWidth,s=this.$arrow.position().left+this.$arrow.width()/2,n=s/e,o=this;this.refreshPos(s),this.$close.hide(),this.$content.css({width:100,height:5,"margin-left":(e-100)*n}).animate({width:e,height:this.opts.contentHeight},{duration:200,step:function(t,i){"width"==i.prop&&o.$content.css({"margin-left":(e-t)*n,opacity:t/e/2})},done:function(){o.$content.css("opacity",1).height(o.opts.contentHeight),o.$close.show()}})}else this.$element.show()}},hide:function(){this.$content.stop(),this.$element.fadeOut("fast"),this.visible=!1}}),i});
;/*!searchdetail:widget/ui/qrcode/qrcode.js*/
define("searchdetail:widget/ui/qrcode/qrcode",function(e){function t(){this.options={background:"#ffffff",foreground:"#000000"}}function o(){}function r(e){this.opts=i.extend({width:130,height:130},e),this.generator=i.browser.msie&&i.browser.version<=7?new t:new o}var i=e("common:widget/ui/base/base");return i.extend(t.prototype,{get:function(e,t,o){var r=new i.Deferred,n=this,d=i.extend({width:t,height:o},n.options);return this._loadLib().then(function(t){var o=n._createTable(t.QRCodeClass,e,d);o.css("margin-top",0),r.resolve({dom:o,width:d.width,height:d.height})}),r},_loadLib:function(){var e=new i.Deferred;return window.QRCode?e.resolve({QRCodeClass:window.QRCode}):i.getScript("//img0.bdstatic.com/img/image/qrcode.min.js").then(function(){e.resolve({QRCodeClass:window.QRCode})}),e},_createTable:function(e,t,o){var r=new e(-1,QRErrorCorrectLevel.H);r.addData(t),r.make();var n=3,d=3,a=r.getModuleCount(),s=r.getModuleCount();o.width=n*a,o.height=d*s;for(var h=["<table style='width:",o.width,"px;height:",o.height,"px;border:0px;margin:5px 0 5px 0;border-collapse:collapse;background-color:",o.background,";'>"],c=0;a>c;c++){h.push("<tr style='height:",d,"px;'>");for(var g=0;s>g;g++)h.push("<td style='width:",n,"px;background-color:",r.isDark(c,g)?o.foreground:o.background,";'></td>");h.push("</tr>")}return h.push("</table>"),i(h.join(""))}}),i.extend(o.prototype,{get:function(e,t,o){var r=new i.Deferred,n=this;return this._loadLib().then(function(i){var d=n._createImg(i.QRCodeClass,e);d.width(t).height(o),r.resolve({dom:d,width:t,height:o})}),r},_loadLib:function(){var e=new i.Deferred;return window.qrcode?e.resolve({QRCodeClass:window.qrcode}):i.getScript("//img0.bdstatic.com/img/image/qrcode.plus.js").then(function(){e.resolve({QRCodeClass:window.qrcode})}),e},_createImg:function(e,t){t=t.replace(/^[\s\u3000]+|[\s\u3000]+$/g,"");var o=new e(10,"M");return o.addData(t),o.make(),i(o.createImgTag())}}),i.extend(r.prototype,{get:function(e){return this.generator.get(e,this.opts.width,this.opts.height)}}),r});
;/*!searchdetail:widget/ui/controls/imgtoolbar/qrcodepop/qrcodepop.js*/
define("searchdetail:widget/ui/controls/imgtoolbar/qrcodepop/qrcodepop",function(e){function i(e){e=t.extend({className:"qrcode-pop",hasArrow:!0,hasClose:!0},e),h.call(this,e),this.elementSize={width:220,height:205},this.codeImgSize={width:130,height:130},this.$element.css(this.elementSize),this.setContent(s),this.imgData=null,this.imgChanged=!1,this.qrcodeBuilder=new o(this.codeImgSize)}var t=e("common:widget/ui/base/base"),h=e("searchdetail:widget/ui/controls/pop/pop"),o=e("searchdetail:widget/ui/qrcode/qrcode"),s=['<p class="title-row">用手机二维码扫描器打开图片</p>','<div class="qrcode"></div>','<p class="sizeinfo"></p>'].join("");return t.extend(i.prototype,h.prototype,{update:function(e){this.imgData=e,this.imgChanged=!0},_beforeShow:function(){if(this.imgChanged){this.imgChanged=!1;var e=this.imgData,i=this.$element,t=this,h=this.elementSize,o=this.codeImgSize,s=e.width+"&#215;"+e.height;e.filesize&&"0"!=e.filesize&&(s+=" , "+e.filesize+"KB"),i.find(".sizeinfo").html(s),this.qrcodeBuilder.get(e.objURLHttp||e.objURL).then(function(e){var s=e.height-o.height+h.height;t.$content.height(s),i.find(".qrcode").html(e.dom).css({width:e.width,height:e.height}),t.opts.contentHeight=s})}}}),i});
;/*!searchdetail:widget/ui/controls/imgtoolbar/downloadpop/downloadpop.js*/
define("searchdetail:widget/ui/controls/imgtoolbar/downloadpop/downloadpop",function(t){function i(t){t=a.extend({className:"download-pop",hasArrow:!0,hasClose:!0,itemTpl:o},t),e.call(this,t),this.elementSize={width:320,height:200},this.$element.css(this.elementSize),this.setContent(n),this.imgShallowData=null,this.imgData=null,this.imgChanged=!1,this.curState={collapse:!1,hasContent:!1,pro:null,visible:!1},this.elements={infoList:".info-list"},this.liNum=0,this._validData=null,this._validData2=null}{var a=t("common:widget/ui/base/base"),e=t("searchdetail:widget/ui/controls/pop/pop"),o=["<li>",'<p class="size-info">','<span class="info-text info-size"></span>','<span class="vsep">|</span><span class="info-text info-bytes"></span>','<span class="vsep">|</span><span class="info-text info-type"></span>','<span class="info-text info-bizhi-highlight">壁纸</span>','<a class="download-btn" href="javascript:void(0);">下载</a>',"</p>",'<p class="url-info">','<a class="src-site" href="" target="_blank">来自：<span></span></a>',"</p>","</li>"].join(""),n=['<p class="title-row">相同图片</p>','<div class="sizeinfo"></div>','<ul class="info-list" id="down-pop-info-list"></ul>','<div class="bottom-download-btn">','<a id="bottom-download-btn-link" href="">','<div id="bottom-download-btn-link-size"></div><div>下载原图</div>',"</a>","</div>"].join("");['<p class="download-tip" id="download-tip">tip</p>'].join("")}return a.extend(i.prototype,e.prototype,{checkWallpaperState:function(t){this.opts.dataKey="wallp_info";var i=BaseCardControl.prototype.checkState.call(this,t);if(i.hasContent&&i.changed){var e=window.screen.width,o=window.screen.height;this._validData=a(i.dataObj).filter(function(t,i){return i.w>=e&&i.h>=o}),this._validData=a(this._validData).sort(function(t,i){return t.w!=i.w?t.w>i.w:t.h>i.h}),i.hasContent=!(!this._validData||!this._validData.length)}else this._validData=null;return i},checkSucaiState:function(t){this.opts.dataKey="sucai_info";var i=BaseCardControl.prototype.checkState.call(this,t);if(i.hasContent&&i.changed){var e=this;this._validData2=a(i.dataObj).filter(function(t,i){return i.fm?e.isEmpty(i.w)&&e.isEmpty(i.dpi)&&e.isEmpty(i.filesize)?!1:!0:!1}),i.hasContent=!(!this._validData2||!this._validData2.length)}else this._validData2=null;return i},isEmpty:function(t){return!t||"0"==t},update:function(t){this.imgData=t,this.imgChanged=!0,this.checkWallpaperState(t),this.checkSucaiState(t);var i=this._validData?this._validData.length>3?3:this._validData.length:0,a=this._validData2?this._validData2.length>2?2:this._validData2.length:0,e=i+a;e>0&&this.downtip(),this._inited=!1,this.elementSize={width:320,height:101+45*e},this.$element.css(this.elementSize),this.$content.css(this.elementSize),this.init()},updateShallow:function(t){this.imgShallowData=t},initDom:function(t,i,e,o,n){var s=this,l="sucai"===n?!0:!1;o=a(s.opts.itemTpl).appendTo(e);var d=o.find(".info-type"),h=o.find(".info-size"),p=o.find(".info-bytes"),c=o.find(".info-bizhi-highlight"),r=o.find(".download-btn"),f=o.find(".src-site"),w={s:(i.w||"0")+"x"+(i.h||"0")},u=i.fm||imghelper.getFileType(i.objurl);d.text(u.toUpperCase()),h.html(i.w+"&#215;"+i.h);var m=1*(i.size||0),v=i.dpi;m?p.text(imghelper.formatBytes(m,0,Math.floor).toUpperCase()).show().prev().show():v&&v&&v-0!==0?p.text(v+"dpi").show().prev().show():p.hide().prev().hide();{var g=a.json.stringify(w)||"";"p=5.15&tag=card&fm="+(l?"sucai":"wallp")+"&site="+encodeURIComponent(l?i.furl:i.objurl)+"&pos=&ext="+encodeURIComponent(g)}if(l?(r.attr({href:i.furl,target:"_blank"}),c.css({display:"none"})):r.attr({href:"/search/down?tn=download&word=download&ie=utf8&fr=detail&url="+encodeURIComponent(i.objurl)}),l){var b=i.siteName||lib.getSiteName(i.s||i.site);f.attr("href","http://"+i.site||"").find("span").text(utils.cutHtmlText(b,14,"...")),f.attr("log-click","p=5.15")}else f.parent().css({visibility:"hidden"});r.click(function(t){t.stopImmediatePropagation(),statistic.send("5.15",{tag:"card",fm:l?"sucai":"wallp",site:encodeURIComponent(l?i.furl:i.objurl),pos:"",ext:encodeURIComponent(g)})}),f.click(function(t){t.stopImmediatePropagation(),statistic.send("5.15",{tag:"card",fm:l?"sucai":"wallp",site:encodeURIComponent(i.site),pos:"",ext:encodeURIComponent(g)})}),this.liNum+=1},_beforeShow:function(){var t,i=this,e=a("<ul></ul>"),o=this;a(this._validData).each(function(a,n){return a>2?!1:void i.initDom.call(o,a,n,e,t,"wallp")}),a(this._validData2).each(function(a,n){return a>1?!1:void i.initDom.call(o,a,n,e,t,"sucai")});var n=this._validData?this._validData.length>3?3:this._validData.length:0,s=this._validData2?this._validData2.length>2?2:this._validData2.length:0,l=n+s;if(i.imgShallowData&&"1"===i.imgShallowData.youtuType)return this.forbidDownloadTip(),!0;if(0===l)return statistic.send("5.42",{}),window.open(a(".btn-download").attr("href")),!0;statistic.send("5.44",{});var d=[],h=[];s>0&&(d.push("sucai"),h.push(1)),n>0&&(d.push("wallp"),h.push(1)),statistic.send("5.1010000",{tn:"baiduimagedetail",tag:"card",fm:d.join(","),state:h.join(",")}),a("#down-pop-info-list").empty().append(e.children()),a("#bottom-download-btn-link-size").text(this.imgData.width+"X"+this.imgData.height),a("#bottom-download-btn-link").attr("href",a(".btn-download").attr("href")),a("#bottom-download-btn-link").click(function(t){t.stopImmediatePropagation(),statistic.send("5.45",{})}),a(".download-tip").remove(),a.cookie("closedowntip","1")},hide:function(){e.prototype.hide.call(this)},forbidDownloadTip:function(){var t=a(".download-tip"),i=a(".album-pnl"),e=a(".btn-download").offset().left,o="left:"+(e>500?e-95:1e3)+"px;bottom:"+(i.height()+10)+"px",n=['<div class="download-tip" style="'+o+'">','版权归作者所有，请勿商用<i class="download-tip-close">&#10006;</i>',"</div>"].join("");0===t.length&&i.before(n),a(window).on("resize",function(){var t=a(".btn-download").offset().left;a(".download-tip").css({left:(t>500?t-95:1e3)+"px"})}),a(".download-tip-close").one("click",function(){a(this).parent().remove()})},downtip:function(){var t=a(".download-tip"),i=a(".album-pnl"),e=['<div class="download-tip" style="left:'+((a("#toolbar").width()-737)/2+579-95)+"px;bottom:"+(i.height()+10)+'px">素材和壁纸移动至这里<i class="download-tip-close">&#10006;</i></div>'].join("");if(0===t.length){i.before(e);var o=a(".btn-download").offset().left;window.samplekey.match("UI_PC_DETAIL_DOWNLOAD:1")&&a(".download-tip").css({left:(o>500?o-95:1e3)+"px"})}"1"!==a.cookie("closedowntip")?(a(".download-tip").show(),a.cookie("closedowntip","1")):a(".download-tip").remove(),a(window).on("resize",function(){var t=a(".btn-download").offset().left;a(".download-tip").css({left:(t>500?t-95:1e3)+"px"})}),a(".download-tip-close").one("click",function(){a(this).parent().remove(),a.cookie("closedowntip","1")})}}),i});
;/*!searchdetail:widget/ui/collections/albumpiccollection.js*/
define("searchdetail:widget/ui/collections/albumpiccollection",function(e){function t(e,t){r.call(this),this.configCache({primaryKey:"picSrc"}),this.albumId=e,this.token=t||"",this.total=0}var i=e("common:widget/ui/base/base"),r=e("common:widget/ui/arch/collection"),n=e("searchdetail:widget/ui/utils/lib"),c=e("common:widget/ui/browser-storage/browser-storage");return i.extend(t.prototype,r.prototype,{contains:function(e){return!!this.getPic(e)},getPic:function(e){var t=null;return this.get({picSrc:e}).then(function(e){e&&e.length&&(t=e[0])}),t},addPic:function(e,t){var r=this.getPic(e),n=new i.Deferred,c=this;if(r)n.reject(r);else{var o=this.albumId?this._saveToServer:this._saveToLocal;o.call(this,e,t).always(function(r){if(r&&"0"==r.errno){var o=i.extend({picSrc:e},t);c.put(o),n.resolve(o)}else n.reject()})}return n},_saveToServer:function(e,t){var r={app_id:1002,album_id:this.albumId,"picture_src_list[]":[e],"surl[]":[t.surl||""],"picture_name[]":[t.desc||""],bdstoken:this.token,"contsign[]":[t.contsign]};return i.post("/picturefav/submit/url",r).then(function(e){return n.parseResponse(e)})},getTotal:function(){return this.total},_saveToLocal:function(e,t){var r=new i.Deferred,o=c.api.get({key:"_favpic_local_key"});o=i.parseJSON(o.value)||[];var s=!1;if(i.each(o,function(i,r){return r.picUrl==e&&r.desc==t.desc?(s=!0,!1):void 0}),this.total=o.length,!s){o.push({picUrl:e,desc:t.desc,originalUrl:t.surl,detailUrl:window.location.href,userId:n.getBaiduId()});try{c.api.set({key:"_favpic_local_key",value:i.json.stringify(o),expires:2592e3}),this.total+=1}catch(a){return r.reject()}}return r.resolve({errno:"0"}),r}}),t});
;/*!searchdetail:widget/ui/collections/albumcollection.js*/
define("searchdetail:widget/ui/collections/albumcollection",function(e){function t(e,t){n.call(this,s),this.configCache({primaryKey:"id",indexes:["name"]}),this.userId=e,this.token=t||"",this.picCollections={},s.reqParams={uid:e}}var a=e("common:widget/ui/base/base"),n=e("common:widget/ui/arch/collection"),i=e("searchdetail:widget/ui/collections/albumpiccollection"),r=e("searchdetail:widget/ui/utils/lib"),s={url:"/picturefav/data/albumlist",reqParams:null,hasMore:!0,fetch:function(e,t){var n=a.extend({},this.reqParams),i=this;if(!this.hasMore){var r=new a.Deferred;return r.resolve({offset:t}),r}return a.get(this.url,n,null,"text").then(function(e){var t=i.parseResponse(e,n.pn);return i.hasMore=!1,t})},parseResponse:function(e){e=r.parseResponse(e);return{offset:0,total:e&&e.length,dataSet:e}}};return a.extend(t.prototype,n.prototype,{get:function(){if(!this.userId){var e=new a.Deferred;return e.resolve([]),e}return n.prototype.get.call(this)},getByName:function(e){return n.prototype.get.call(this,{name:e}).then(function(e){return e&&e.length&&e[0]})},addAlbum:function(e,t,n){var i=new a.Deferred,s=this;return this.getByName(e).then(function(o){if(o&&o.id)i.reject({data:o});else{var l={album_name:e,album_scope:n||1,album_category:t||"",bdstoken:s.token};a.post("/albumlist/createalbum",l).always(function(t){if(t=r.parseResponse(t),t&&t.status&&"0"==t.status.code&&t.data&&t.data.album_id){var a={id:t.data.album_id,name:t.data.album_name||e,picture_num:0};s.put(a),i.resolve(a)}else i.reject(t)})}}),i},getPicCollection:function(e){var t=e||"_default_",a=this.picCollections[t];return a||(a=new i(e,this.token),this.picCollections[t]=a),a}}),t});
;/*!searchdetail:widget/ui/controls/imgtoolbar/favo/favopop.js*/
define("searchdetail:widget/ui/controls/imgtoolbar/favo/favopop",function(t){function e(t){t=l.extend({className:"favo-pop",hasArrow:!0,hasClose:!0},t),n.call(this,t),this.setContent(a),this.descInput=null,this.albumListCtrl=null,this.newAlbumNameEle=null}var l=t("common:widget/ui/base/base"),i=(t("common:widget/ui/utils/utils"),t("common:widget/ui/dropdownlist/dropdownlist")),n=t("searchdetail:widget/ui/controls/pop/pop"),a=['<div class="favo-content">','<div class="album-row"><label>专辑：</label><select name="albumId"></select></div>','<div class="desc-row"><label>描述：</label><textarea name="desc"></textarea></div>','<p class="button-row"><a href="#" class="pop-okbtn">确定</a></p>',"</div>"].join("");return l.extend(e.prototype,n.prototype,{init:function(){n.prototype.init.call(this);var t=this;this.$element.find(".pop-okbtn").on("click",function(e){e.preventDefault(),t.fire("onok",{data:t._collectFormData()})}),this.descInput=this.$element.find(".desc-row textarea"),this.albumListCtrl=this._initAlbumDDLCtrl()},_initAlbumDDLCtrl:function(){var t=i.create({select:this.$element.find(".album-row select"),attrs:{column:5,width:170},box:l(['<div class="x-createalbum">','<div class="box-ipt clearfix">','<input type="text" name="albumName" title="创建新相册">','<button class="btn-new-album">创建</button>',"</div>","<div>"].join(""))}),e=this;return this.newAlbumNameEle=this.$element.find("[name=albumName]"),this.$element.find(".btn-new-album").on("click",this._onNewAlbumClick.bind(this)),t.change(function(){e.fire("albumSelectChange",{value:t.val()})}),t},addAlbumOption:function(t){this.albumListCtrl.add(t)},resetNewAlbumName:function(){this.newAlbumNameEle&&this.newAlbumNameEle.val("")},setDesc:function(t){this.descInput.val(t||"")},_collectFormData:function(){return{albumId:this.albumListCtrl.val(),desc:this.descInput.val()}},_onNewAlbumClick:function(){this.fire("newAlbumClicked",{albumName:this.newAlbumNameEle.val()})}}),e});
;/*!searchdetail:widget/ui/controls/imgtoolbar/favo/favotip.js*/
define("searchdetail:widget/ui/controls/imgtoolbar/favo/favotip",function(t){function e(t){t=i.extend({className:"favotip-pop",hasArrow:!0,hasClose:!0},t),a.call(this,t),this.setContent(n),this.$text=this.$element.find(".tip-text"),this.$link=this.$element.find(".tip-link")}var i=t("common:widget/ui/base/base"),a=t("searchdetail:widget/ui/controls/pop/pop"),n=['<div class="tip-content">','<span class="tip-text"></span>','<a class="tip-link" href="http://image.baidu.com/picturefav/fav" target="_blank">去我的图片查看</a>',"</div>"].join("");return i.extend(e.prototype,a.prototype,{setTipText:function(t){this.$text.html(t)}}),e});
;/*!searchdetail:widget/ui/controls/imgtoolbar/favo/favoview.js*/
define("searchdetail:widget/ui/controls/imgtoolbar/favo/favoview",function(t){function i(t){this.$button=t,this.imgData=null,this.pop=null,this.tip=null}var e=t("common:widget/ui/base/base"),o=t("common:widget/ui/utils/utils"),a=t("common:widget/ui/base/events"),n=t("common:widget/ui/browser-storage/browser-storage"),s=t("common:widget/ui/message/message"),l=t("searchdetail:widget/ui/app/pagemodel"),c=t("searchdetail:widget/ui/statistic/statistic-core"),p=t("searchdetail:widget/ui/collections/albumcollection"),u=t("searchdetail:widget/ui/controls/imgtoolbar/favo/favopop"),r=t("searchdetail:widget/ui/controls/imgtoolbar/favo/favotip");return e.extend(i.prototype,a,{init:function(){var t=this;this.$button.on("click",function(i){i.preventDefault(),l.data.userName?t.albumCollection?(t.albumCollection.userName=l.data.userName,t.albumCollection.bdstoken=l.data.bdstoken,t.albumCollection.dataProxy.reqParams.uid=encodeURIComponent(l.data.userName),t.albumCollection.get().then(function(i){i&&i.length?t._showInputPop(i):t._savePic()})):t._saveToLocal():t.popLogin()})},popLogin:function(){var t=this;e.getScript("//passport.baidu.com/passApi/js/uni_login_wrapper.js?cdnversion="+(new Date).getTime(),function(){var i=e("#passLog");if(i){i.attr("href","javascript:void(0);");var o={tangram:!0,cache:!1,apiOpt:{product:"im",staticPage:location.protocol+"//"+location.host+"/static/searchresult/html/v3Jump.html",memberPass:!0,u:location.href,qrcode:3},authsite:["tsina","renren","qzone"],authsiteCfg:{tpl:"im",display:"popup",act:"optional",jumpUrl:location.protocol+"//"+location.host+"/static/imgsearch/html/xd.html",onBindSuccess:function(){return e.cookie("BDIMGISLOGIN",1),c&&c.send("5.1010200",{tn:"baiduimagedetail",act:"loginsucess"}),location.reload(),!1}},onLoginSuccess:function(t){e.cookie("BDIMGISLOGIN",1),c&&c.send("5.1010200",{tn:"baiduimagedetail",act:"loginsucess"}),t.returnValue=!1,location.reload()},onShow:function(){t.trigger("loginPop.show"),c&&c.send("5.1010200",{tn:"baiduimagedetail",act:"loginshow"})},onHide:function(){t.trigger("loginPop.hide"),e("#passport-login-pop").remove()}},a=passport.pop.init(o);a.show()}})},setAlbumCollection:function(t){this.albumCollection=t},userNameChanged:function(){this.setAlbumCollection(new p(l.data.userName,l.data.bdstoken))},update:function(t){var i=this;this.imgData=t,this._updatePop(t);var o=parseInt(e.cookie("BDIMGISLOGIN"));1===o&&i.$button.trigger("click"),e.cookie("BDIMGISLOGIN",0)},_updatePop:function(t){if(this.pop){var i=t.fromPageTitle||"";this.pop.setDesc(o.trimTags(i))}},_initPop:function(t){var i,e=new u,o=n.api.get({key:"_local_album_key_"}),a=o&&o.value,s=t&&t.length&&t[0].id,l=this;e.init();for(var c=0,p=t.length;p>c;c++)i=t[c],e.addAlbumOption({text:i.name,value:i.id}),i.id==a&&(s=a);return e.albumListCtrl.val(s),e.setTrigger(this.$button),this.pop=e,e.on("onok",function(t){l._savePic(t.data)}),e.on("newAlbumClicked",this._onPopNewAlbumClicked.bind(this)),e.on("albumSelectChange",this._onPopAlbumSelectChange.bind(this)),e},_onPopNewAlbumClicked:function(t){if(t.albumName){var i=this;this.albumCollection.addAlbum(t.albumName).done(function(t){i.pop.addAlbumOption({text:t.name,value:t.id}),i.pop.resetNewAlbumName(),i.pop.albumListCtrl.val(t.id+""),i.pop.albumListCtrl.hide(),new s("创建相册成功",{type:"info"})}).fail(function(t){var e=t&&t.status&&t.status.msg||"创建相册失败，请选择其他相册";t&&t.data&&(i.pop.albumListCtrl.val(t.data.id),e="相册已存在"),new s(e,{type:"error"})})}else new s("请输入名称",{type:"error"})},_onPopAlbumSelectChange:function(t){n.api.set({key:"_local_album_key_",value:t.value,expires:2592e3})},_showInputPop:function(t){this.imgData&&(this.pop||(this._initPop(t),this._updatePop(this.imgData)),this.pop.visible||this.pop.show())},_savePic:function(t){t=t||{desc:o.trimTags(this.imgData.fromPageTitle||"")};var i=this.albumCollection.getPicCollection(t.albumId),e=this.imgData,a=this;i.addPic(e.objURLHttp,{desc:t.desc,surl:e.fromURL,contsign:e.cs}).always(function(){a.pop&&a.pop.hide(),a._showEffect(),a._showSuccessTip(t,i)})},_showSuccessTip:function(t,i){this.tip?t.albumId||this.tip.setTipText('已临时收藏<span class="tip-num">'+i.getTotal()+"</span>张图片，"):(this.tip=new r,this.tip.setTipText(t.albumId?"收藏成功，":'已临时收藏<span class="tip-num">'+i.getTotal()+"</span>张图片，"),this.tip.setTrigger(this.$button)),this.tip.show()},_showAddOne:function(t){var i=e("#fav-add-one"),o=new e.Deferred;return i[0]||(i=e('<span id="fav-add-one">+1</span>').appendTo("body")),i.css({position:"absolute",top:t.top+3,left:t.left-22,"z-index":1020,display:"block",width:"30px",height:"30px","font-size":"30px","font-family":"TAHOMA",color:"#000",opacity:1}).delay(100).animate({top:"-=30",opacity:0},500,function(){i.hide(),o.resolve()}),o},_showEffect:function(){var t=e("#container").find(".img-container img"),i=t.offset(),o=this.$button,a=o.offset(),n=e("<img />").attr({src:this.imgData.bigImgUrl||this.imgData.thumbURL}),s=this,l=new e.Deferred,c=function(){n.css({position:"absolute",top:i.top,left:i.left,width:t.width(),height:t.height(),"z-index":1020}).animate({top:a.top+10,left:a.left+50,width:0,height:0},500,"linear",function(){n.remove(),s._showAddOne(a).then(function(){l.resolve()})})};return n.ready(c),n.appendTo("body"),l}}),i});
;/*!searchdetail:widget/ui/controls/imgtoolbar/feedbacknew/feedbacknew.js*/
define("searchdetail:widget/ui/controls/imgtoolbar/feedbacknew/feedbacknew",function(require,exports,module){var utils=require("common:widget/ui/utils/utils"),bds=bds||{};bds.qa=bds.qa||{},bds.qa.ShortCut={base_url_path:utils.ihttpsAgent("http://f3.baidu.com"),up_file:!1,is_feedbacking:!1,product_id:0,entrance_id:0,send_img:!1,img_data:"",onlyUpFile:!1,pro_data:"",plugintitle:'意见反馈&nbsp;<font style="font-size:13px;color:#2d9ef8;line-height:13px;">|&nbsp;<a style="font-size:14px;color:#2d9ef8;line-height:26px;text-decoration:underline;margin-left:20px;height:26px;" href="http://f3.baidu.com/index.php/feedback/f/index" target="_blank">我的反馈</a></font>',issueTips:"反馈内容",issuePlaceholder:"欢迎提出您在使用过程中遇到的问题或宝贵建议（400字以内），感谢您对百度的支持。",emailPlaceholder:"请留下您的联系方式，以便我们及时回复您。",guide:'<span>申请删除百度快照内容，请在<a style="text-decoration:underline;" href="http://tousu.baidu.com/webmaster/add" target="_blank">网页搜索投诉中心</a>提交。</span><br><span>网站收录、流量等站长相关问题，请在<a style="text-decoration:underline;" href="http://zhanzhang.baidu.com/feedback/index" target="_blank">站长平台</a>反馈。</span>',cutFileTips:"&nbsp;点我，可以上传图片哦~",cutCanvasTips:'&nbsp;点我，可以在当前页面截图哦~&nbsp;<a style="text-decoration:underline;" href="http://f3.baidu.com/index.php/feedback/tiyan/steps" target="_blank">使用方法</a>',emailTips:"联系方式",showPosition:"right",skinStyle:"flat",needLevelType:!0,needIssueTips:!0,needIssue:!0,needCut:!0,needEmail:!0,needGuide:!1,defaultCut:!1,cutImg:"jietu.png",upImg:"upload.png",win_width:"",queryWord:"",dialogPosition:{left:"5px",right:"5px",bottom:"5px"},initRightBar:function(fb_styles,fb_data){return bds.qa.ShortCut.is_feedbacking?!0:(bds.qa.ShortCut.is_feedbacking=!0,bds.qa.ShortCut._disposeHttps(),bds.qa.ShortCut._getMyJquery(),bds.qa.ShortCut.queryWord=fb_data,bds.qa.ShortCut.load_first(fb_styles),void 0!=fb_data?bds.qa.ShortCut._getProData(fb_data):"",void(bds.qa.ShortCut._isIE()&&("object"!=typeof JSON&&(JSON={}),function(){function f(t){return 10>t?"0"+t:t}function quote(t){return escapable.lastIndex=0,escapable.test(t)?'"'+t.replace(escapable,function(t){var e=meta[t];return"string"==typeof e?e:"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+t+'"'}function str(t,e){var n,i,o,r,a,s=gap,l=e[t];switch(l&&"object"==typeof l&&"function"==typeof l.toJSON&&(l=l.toJSON(t)),"function"==typeof rep&&(l=rep.call(e,t,l)),typeof l){case"string":return quote(l);case"number":return isFinite(l)?String(l):"null";case"boolean":case"null":return String(l);case"object":if(!l)return"null";if(gap+=indent,a=[],"[object Array]"===Object.prototype.toString.apply(l)){for(r=l.length,n=0;r>n;n+=1)a[n]=str(n,l)||"null";return o=0===a.length?"[]":gap?"[\n"+gap+a.join(",\n"+gap)+"\n"+s+"]":"["+a.join(",")+"]",gap=s,o}if(rep&&"object"==typeof rep)for(r=rep.length,n=0;r>n;n+=1)"string"==typeof rep[n]&&(i=rep[n],o=str(i,l),o&&a.push(quote(i)+(gap?": ":":")+o));else for(i in l)Object.prototype.hasOwnProperty.call(l,i)&&(o=str(i,l),o&&a.push(quote(i)+(gap?": ":":")+o));return o=0===a.length?"{}":gap?"{\n"+gap+a.join(",\n"+gap)+"\n"+s+"}":"{"+a.join(",")+"}",gap=s,o}}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var cx,escapable,gap,indent,meta,rep;"function"!=typeof JSON.stringify&&(escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,meta={"\b":"\\b","   ":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},JSON.stringify=function(t,e,n){var i;if(gap="",indent="","number"==typeof n)for(i=0;n>i;i+=1)indent+=" ";else"string"==typeof n&&(indent=n);if(rep=e,e&&"function"!=typeof e&&("object"!=typeof e||"number"!=typeof e.length))throw new Error("JSON.stringify");return str("",{"":t})}),"function"!=typeof JSON.parse&&(cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,JSON.parse=function(text,reviver){function walk(t,e){var n,i,o=t[e];if(o&&"object"==typeof o)for(n in o)Object.prototype.hasOwnProperty.call(o,n)&&(i=walk(o,n),void 0!==i?o[n]=i:delete o[n]);return reviver.call(t,e,o)}var j;if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(t){return"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}())))},load_first:function(t){t||(t=bds.qa.ShortCut.default_options),bds.qa.ShortCut.initialize(t),bds.qa.ShortCut.getPrepare(),bds.qa.ShortCut.init(),bds.qa.ShortCut.imgLog(bds.qa.ShortCut.base_url_path+"/index.php/feedback/zx/clickcount/pro_id/"+bds.qa.ShortCut.product_id+"/entra_id/"+bds.qa.ShortCut.entrance_id)},_getMyJquery:function(){!function(t,e){e(t)}("undefined"!=typeof window?window:this,function(t,e){function n(t){var e=t.length,n=oe.type(t);return"function"===n||oe.isWindow(t)?!1:1===t.nodeType&&e?!0:"array"===n||0===e||"number"==typeof e&&e>0&&e-1 in t}function i(t,e,n){if(oe.isFunction(e))return oe.grep(t,function(t,i){return!!e.call(t,i,t)!==n});if(e.nodeType)return oe.grep(t,function(t){return t===e!==n});if("string"==typeof e){if(fe.test(e))return oe.filter(e,t,n);e=oe.filter(e,t)}return oe.grep(t,function(t){return oe.inArray(t,e)>=0!==n})}function o(t,e){do t=t[e];while(t&&1!==t.nodeType);return t}function r(t){var e=xe[t]={};return oe.each(t.match(ye)||[],function(t,n){e[n]=!0}),e}function a(){pe.addEventListener?(pe.removeEventListener("DOMContentLoaded",s,!1),t.removeEventListener("load",s,!1)):(pe.detachEvent("onreadystatechange",s),t.detachEvent("onload",s))}function s(){(pe.addEventListener||"load"===event.type||"complete"===pe.readyState)&&(a(),oe.ready())}function l(t,e,n){if(void 0===n&&1===t.nodeType){var i="data-"+e.replace(qe,"-$1").toLowerCase();if(n=t.getAttribute(i),"string"==typeof n){try{n="true"===n?!0:"false"===n?!1:"null"===n?null:+n+""===n?+n:_e.test(n)?oe.parseJSON(n):n}catch(o){}oe.data(t,e,n)}else n=void 0}return n}function u(t){var e;for(e in t)if(("data"!==e||!oe.isEmptyObject(t[e]))&&"toJSON"!==e)return!1;return!0}function d(t,e,n,i){if(oe.acceptData(t)){var o,r,a=oe.expando,s=t.nodeType,l=s?oe.cache:t,u=s?t[a]:t[a]&&a;if(u&&l[u]&&(i||l[u].data)||void 0!==n||"string"!=typeof e)return u||(u=s?t[a]=X.pop()||oe.guid++:a),l[u]||(l[u]=s?{}:{toJSON:oe.noop}),("object"==typeof e||"function"==typeof e)&&(i?l[u]=oe.extend(l[u],e):l[u].data=oe.extend(l[u].data,e)),r=l[u],i||(r.data||(r.data={}),r=r.data),void 0!==n&&(r[oe.camelCase(e)]=n),"string"==typeof e?(o=r[e],null==o&&(o=r[oe.camelCase(e)])):o=r,o}}function c(t,e,n){if(oe.acceptData(t)){var i,o,r=t.nodeType,a=r?oe.cache:t,s=r?t[oe.expando]:oe.expando;if(a[s]){if(e&&(i=n?a[s]:a[s].data)){oe.isArray(e)?e=e.concat(oe.map(e,oe.camelCase)):e in i?e=[e]:(e=oe.camelCase(e),e=e in i?[e]:e.split(" ")),o=e.length;for(;o--;)delete i[e[o]];if(n?!u(i):!oe.isEmptyObject(i))return}(n||(delete a[s].data,u(a[s])))&&(r?oe.cleanData([t],!0):ne.deleteExpando||a!=a.window?delete a[s]:a[s]=null)}}}function f(){return!0}function h(){return!1}function p(){try{return pe.activeElement}catch(t){}}function g(t){var e=Me.split("|"),n=t.createDocumentFragment();if(n.createElement)for(;e.length;)n.createElement(e.pop());return n}function m(t,e){var n,i,o=0,r=typeof t.getElementsByTagName!==Se?t.getElementsByTagName(e||"*"):typeof t.querySelectorAll!==Se?t.querySelectorAll(e||"*"):void 0;if(!r)for(r=[],n=t.childNodes||t;null!=(i=n[o]);o++)!e||oe.nodeName(i,e)?r.push(i):oe.merge(r,m(i,e));return void 0===e||e&&oe.nodeName(t,e)?oe.merge([t],r):r}function b(t){De.test(t.type)&&(t.defaultChecked=t.checked)}function v(t,e){return oe.nodeName(t,"table")&&oe.nodeName(11!==e.nodeType?e:e.firstChild,"tr")?t.getElementsByTagName("tbody")[0]||t.appendChild(t.ownerDocument.createElement("tbody")):t}function y(t){return t.type=(null!==oe.find.attr(t,"type"))+"/"+t.type,t}function x(t){var e=$e.exec(t.type);return e?t.type=e[1]:t.removeAttribute("type"),t}function C(t,e){for(var n,i=0;null!=(n=t[i]);i++)oe._data(n,"globalEval",!e||oe._data(e[i],"globalEval"))}function w(t,e){if(1===e.nodeType&&oe.hasData(t)){var n,i,o,r=oe._data(t),a=oe._data(e,r),s=r.events;if(s){delete a.handle,a.events={};for(n in s)for(i=0,o=s[n].length;o>i;i++)oe.event.add(e,n,s[n][i])}a.data&&(a.data=oe.extend({},a.data))}}function S(t,e){var n,i,o;if(1===e.nodeType){if(n=e.nodeName.toLowerCase(),!ne.noCloneEvent&&e[oe.expando]){o=oe._data(e);for(i in o.events)oe.removeEvent(e,i,o.handle);e.removeAttribute(oe.expando)}"script"===n&&e.text!==t.text?(y(e).text=t.text,x(e)):"object"===n?(e.parentNode&&(e.outerHTML=t.outerHTML),ne.html5Clone&&t.innerHTML&&!oe.trim(e.innerHTML)&&(e.innerHTML=t.innerHTML)):"input"===n&&De.test(t.type)?(e.defaultChecked=e.checked=t.checked,e.value!==t.value&&(e.value=t.value)):"option"===n?e.defaultSelected=e.selected=t.defaultSelected:("input"===n||"textarea"===n)&&(e.defaultValue=t.defaultValue)}}function _(e,n){var i,o=oe(n.createElement(e)).appendTo(n.body),r=t.getDefaultComputedStyle&&(i=t.getDefaultComputedStyle(o[0]))?i.display:oe.css(o[0],"display");return o.detach(),r}function q(t){var e=pe,n=Ze[t];return n||(n=_(t,e),"none"!==n&&n||(Ke=(Ke||oe("<iframe frameborder='0' width='0' height='0'/>")).appendTo(e.documentElement),e=(Ke[0].contentWindow||Ke[0].contentDocument).document,e.write(),e.close(),n=_(t,e),Ke.detach()),Ze[t]=n),n}function T(t,e){return{get:function(){var n=t();if(null!=n)return n?void delete this.get:(this.get=e).apply(this,arguments)}}}function k(t,e){if(e in t)return e;for(var n=e.charAt(0).toUpperCase()+e.slice(1),i=e,o=hn.length;o--;)if(e=hn[o]+n,e in t)return e;return i}function E(t,e){for(var n,i,o,r=[],a=0,s=t.length;s>a;a++)i=t[a],i.style&&(r[a]=oe._data(i,"olddisplay"),n=i.style.display,e?(r[a]||"none"!==n||(i.style.display=""),""===i.style.display&&Ee(i)&&(r[a]=oe._data(i,"olddisplay",q(i.nodeName)))):(o=Ee(i),(n&&"none"!==n||!o)&&oe._data(i,"olddisplay",o?n:oe.css(i,"display"))));for(a=0;s>a;a++)i=t[a],i.style&&(e&&"none"!==i.style.display&&""!==i.style.display||(i.style.display=e?r[a]||"":"none"));return t}function N(t,e,n){var i=un.exec(e);return i?Math.max(0,i[1]-(n||0))+(i[2]||"px"):e}function D(t,e,n,i,o){for(var r=n===(i?"border":"content")?4:"width"===e?1:0,a=0;4>r;r+=2)"margin"===n&&(a+=oe.css(t,n+ke[r],!0,o)),i?("content"===n&&(a-=oe.css(t,"padding"+ke[r],!0,o)),"margin"!==n&&(a-=oe.css(t,"border"+ke[r]+"Width",!0,o))):(a+=oe.css(t,"padding"+ke[r],!0,o),"padding"!==n&&(a+=oe.css(t,"border"+ke[r]+"Width",!0,o)));return a}function L(t,e,n){var i=!0,o="width"===e?t.offsetWidth:t.offsetHeight,r=tn(t),a=ne.boxSizing&&"border-box"===oe.css(t,"boxSizing",!1,r);if(0>=o||null==o){if(o=en(t,e,r),(0>o||null==o)&&(o=t.style[e]),on.test(o))return o;i=a&&(ne.boxSizingReliable()||o===t.style[e]),o=parseFloat(o)||0}return o+D(t,e,n||(a?"border":"content"),i,r)+"px"}function J(t,e,n,i,o){return new J.prototype.init(t,e,n,i,o)}function A(){return setTimeout(function(){pn=void 0}),pn=oe.now()}function I(t,e){var n,i={height:t},o=0;for(e=e?1:0;4>o;o+=2-e)n=ke[o],i["margin"+n]=i["padding"+n]=t;return e&&(i.opacity=i.width=t),i}function P(t,e,n){for(var i,o=(xn[e]||[]).concat(xn["*"]),r=0,a=o.length;a>r;r++)if(i=o[r].call(n,e,t))return i}function M(t,e,n){var i,o,r,a,s,l,u,d,c=this,f={},h=t.style,p=t.nodeType&&Ee(t),g=oe._data(t,"fxshow");n.queue||(s=oe._queueHooks(t,"fx"),null==s.unqueued&&(s.unqueued=0,l=s.empty.fire,s.empty.fire=function(){s.unqueued||l()}),s.unqueued++,c.always(function(){c.always(function(){s.unqueued--,oe.queue(t,"fx").length||s.empty.fire()})})),1===t.nodeType&&("height"in e||"width"in e)&&(n.overflow=[h.overflow,h.overflowX,h.overflowY],u=oe.css(t,"display"),d="none"===u?oe._data(t,"olddisplay")||q(t.nodeName):u,"inline"===d&&"none"===oe.css(t,"float")&&(ne.inlineBlockNeedsLayout&&"inline"!==q(t.nodeName)?h.zoom=1:h.display="inline-block")),n.overflow&&(h.overflow="hidden",ne.shrinkWrapBlocks()||c.always(function(){h.overflow=n.overflow[0],h.overflowX=n.overflow[1],h.overflowY=n.overflow[2]}));for(i in e)if(o=e[i],mn.exec(o)){if(delete e[i],r=r||"toggle"===o,o===(p?"hide":"show")){if("show"!==o||!g||void 0===g[i])continue;p=!0}f[i]=g&&g[i]||oe.style(t,i)}else u=void 0;if(oe.isEmptyObject(f))"inline"===("none"===u?q(t.nodeName):u)&&(h.display=u);else{g?"hidden"in g&&(p=g.hidden):g=oe._data(t,"fxshow",{}),r&&(g.hidden=!p),p?oe(t).show():c.done(function(){oe(t).hide()}),c.done(function(){var e;oe._removeData(t,"fxshow");for(e in f)oe.style(t,e,f[e])});for(i in f)a=P(p?g[i]:0,i,c),i in g||(g[i]=a.start,p&&(a.end=a.start,a.start="width"===i||"height"===i?1:0))}}function Q(t,e){var n,i,o,r,a;for(n in t)if(i=oe.camelCase(n),o=e[i],r=t[n],oe.isArray(r)&&(o=r[1],r=t[n]=r[0]),n!==i&&(t[i]=r,delete t[n]),a=oe.cssHooks[i],a&&"expand"in a){r=a.expand(r),delete t[i];for(n in r)n in t||(t[n]=r[n],e[n]=o)}else e[i]=o}function O(t,e,n){var i,o,r=0,a=yn.length,s=oe.Deferred().always(function(){delete l.elem}),l=function(){if(o)return!1;for(var e=pn||A(),n=Math.max(0,u.startTime+u.duration-e),i=n/u.duration||0,r=1-i,a=0,l=u.tweens.length;l>a;a++)u.tweens[a].run(r);return s.notifyWith(t,[u,r,n]),1>r&&l?n:(s.resolveWith(t,[u]),!1)},u=s.promise({elem:t,props:oe.extend({},e),opts:oe.extend(!0,{specialEasing:{}},n),originalProperties:e,originalOptions:n,startTime:pn||A(),duration:n.duration,tweens:[],createTween:function(e,n){var i=oe.Tween(t,u.opts,e,n,u.opts.specialEasing[e]||u.opts.easing);return u.tweens.push(i),i},stop:function(e){var n=0,i=e?u.tweens.length:0;if(o)return this;for(o=!0;i>n;n++)u.tweens[n].run(1);return e?s.resolveWith(t,[u,e]):s.rejectWith(t,[u,e]),this}}),d=u.props;for(Q(d,u.opts.specialEasing);a>r;r++)if(i=yn[r].call(u,t,d,u.opts))return i;return oe.map(d,P,u),oe.isFunction(u.opts.start)&&u.opts.start.call(t,u),oe.fx.timer(oe.extend(l,{elem:t,anim:u,queue:u.opts.queue})),u.progress(u.opts.progress).done(u.opts.done,u.opts.complete).fail(u.opts.fail).always(u.opts.always)}function R(t){return function(e,n){"string"!=typeof e&&(n=e,e="*");var i,o=0,r=e.toLowerCase().match(ye)||[];if(oe.isFunction(n))for(;i=r[o++];)"+"===i.charAt(0)?(i=i.slice(1)||"*",(t[i]=t[i]||[]).unshift(n)):(t[i]=t[i]||[]).push(n)}}function j(t,e,n,i){function o(s){var l;return r[s]=!0,oe.each(t[s]||[],function(t,s){var u=s(e,n,i);return"string"!=typeof u||a||r[u]?a?!(l=u):void 0:(e.dataTypes.unshift(u),o(u),!1)}),l}var r={},a=t===Bn;return o(e.dataTypes[0])||!r["*"]&&o("*")}function H(t,e){var n,i,o=oe.ajaxSettings.flatOptions||{};for(i in e)void 0!==e[i]&&((o[i]?t:n||(n={}))[i]=e[i]);return n&&oe.extend(!0,t,n),t}function F(t,e,n){for(var i,o,r,a,s=t.contents,l=t.dataTypes;"*"===l[0];)l.shift(),void 0===o&&(o=t.mimeType||e.getResponseHeader("Content-Type"));if(o)for(a in s)if(s[a]&&s[a].test(o)){l.unshift(a);break}if(l[0]in n)r=l[0];else{for(a in n){if(!l[0]||t.converters[a+" "+l[0]]){r=a;break}i||(i=a)}r=r||i}return r?(r!==l[0]&&l.unshift(r),n[r]):void 0}function z(t,e,n,i){var o,r,a,s,l,u={},d=t.dataTypes.slice();if(d[1])for(a in t.converters)u[a.toLowerCase()]=t.converters[a];for(r=d.shift();r;)if(t.responseFields[r]&&(n[t.responseFields[r]]=e),!l&&i&&t.dataFilter&&(e=t.dataFilter(e,t.dataType)),l=r,r=d.shift())if("*"===r)r=l;else if("*"!==l&&l!==r){if(a=u[l+" "+r]||u["* "+r],!a)for(o in u)if(s=o.split(" "),s[1]===r&&(a=u[l+" "+s[0]]||u["* "+s[0]])){a===!0?a=u[o]:u[o]!==!0&&(r=s[0],d.unshift(s[1]));break}if(a!==!0)if(a&&t["throws"])e=a(e);else try{e=a(e)}catch(c){return{state:"parsererror",error:a?c:"No conversion from "+l+" to "+r}}}return{state:"success",data:e}}function B(t,e,n,i){var o;if(oe.isArray(e))oe.each(e,function(e,o){n||Xn.test(t)?i(t,o):B(t+"["+("object"==typeof o?e:"")+"]",o,n,i)});else if(n||"object"!==oe.type(e))i(t,e);else for(o in e)B(t+"["+o+"]",e[o],n,i)}function W(){try{return new t.XMLHttpRequest}catch(e){}}function U(){try{return new t.ActiveXObject("Microsoft.XMLHTTP")}catch(e){}}function $(t){return oe.isWindow(t)?t:9===t.nodeType?t.defaultView||t.parentWindow:!1}var X=[],G=X.slice,V=X.concat,Y=X.push,K=X.indexOf,Z={},te=Z.toString,ee=Z.hasOwnProperty,ne={},ie="1.11.2",oe=function(t,e){return new oe.fn.init(t,e)},re=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,ae=/^-ms-/,se=/-([\da-z])/gi,le=function(t,e){return e.toUpperCase()};oe.fn=oe.prototype={jquery:ie,constructor:oe,selector:"",length:0,toArray:function(){return G.call(this)},get:function(t){return null!=t?0>t?this[t+this.length]:this[t]:G.call(this)},pushStack:function(t){var e=oe.merge(this.constructor(),t);return e.prevObject=this,e.context=this.context,e},each:function(t,e){return oe.each(this,t,e)},map:function(t){return this.pushStack(oe.map(this,function(e,n){return t.call(e,n,e)}))},slice:function(){return this.pushStack(G.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(t){var e=this.length,n=+t+(0>t?e:0);return this.pushStack(n>=0&&e>n?[this[n]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:Y,sort:X.sort,splice:X.splice},oe.extend=oe.fn.extend=function(){var t,e,n,i,o,r,a=arguments[0]||{},s=1,l=arguments.length,u=!1;for("boolean"==typeof a&&(u=a,a=arguments[s]||{},s++),"object"==typeof a||oe.isFunction(a)||(a={}),s===l&&(a=this,s--);l>s;s++)if(null!=(o=arguments[s]))for(i in o)t=a[i],n=o[i],a!==n&&(u&&n&&(oe.isPlainObject(n)||(e=oe.isArray(n)))?(e?(e=!1,r=t&&oe.isArray(t)?t:[]):r=t&&oe.isPlainObject(t)?t:{},a[i]=oe.extend(u,r,n)):void 0!==n&&(a[i]=n));return a},oe.extend({expando:"jQuery"+(ie+Math.random()).replace(/\D/g,""),isReady:!0,error:function(t){throw new Error(t)},noop:function(){},isFunction:function(t){return"function"===oe.type(t)},isArray:Array.isArray||function(t){return"array"===oe.type(t)},isWindow:function(t){return null!=t&&t==t.window},isNumeric:function(t){return!oe.isArray(t)&&t-parseFloat(t)+1>=0},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},isPlainObject:function(t){var e;if(!t||"object"!==oe.type(t)||t.nodeType||oe.isWindow(t))return!1;try{if(t.constructor&&!ee.call(t,"constructor")&&!ee.call(t.constructor.prototype,"isPrototypeOf"))return!1}catch(n){return!1}if(ne.ownLast)for(e in t)return ee.call(t,e);for(e in t);return void 0===e||ee.call(t,e)},type:function(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?Z[te.call(t)]||"object":typeof t},globalEval:function(e){e&&oe.trim(e)&&(t.execScript||function(e){t.eval.call(t,e)})(e)},camelCase:function(t){return t.replace(ae,"ms-").replace(se,le)},nodeName:function(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()},each:function(t,e,i){var o,r=0,a=t.length,s=n(t);if(i){if(s)for(;a>r&&(o=e.apply(t[r],i),o!==!1);r++);else for(r in t)if(o=e.apply(t[r],i),o===!1)break}else if(s)for(;a>r&&(o=e.call(t[r],r,t[r]),o!==!1);r++);else for(r in t)if(o=e.call(t[r],r,t[r]),o===!1)break;return t},trim:function(t){return null==t?"":(t+"").replace(re,"")},makeArray:function(t,e){var i=e||[];return null!=t&&(n(Object(t))?oe.merge(i,"string"==typeof t?[t]:t):Y.call(i,t)),i},inArray:function(t,e,n){var i;if(e){if(K)return K.call(e,t,n);for(i=e.length,n=n?0>n?Math.max(0,i+n):n:0;i>n;n++)if(n in e&&e[n]===t)return n}return-1},merge:function(t,e){for(var n=+e.length,i=0,o=t.length;n>i;)t[o++]=e[i++];if(n!==n)for(;void 0!==e[i];)t[o++]=e[i++];return t.length=o,t},grep:function(t,e,n){for(var i,o=[],r=0,a=t.length,s=!n;a>r;r++)i=!e(t[r],r),i!==s&&o.push(t[r]);return o},map:function(t,e,i){var o,r=0,a=t.length,s=n(t),l=[];if(s)for(;a>r;r++)o=e(t[r],r,i),null!=o&&l.push(o);else for(r in t)o=e(t[r],r,i),null!=o&&l.push(o);return V.apply([],l)},guid:1,proxy:function(t,e){var n,i,o;return"string"==typeof e&&(o=t[e],e=t,t=o),oe.isFunction(t)?(n=G.call(arguments,2),i=function(){return t.apply(e||this,n.concat(G.call(arguments)))},i.guid=t.guid=t.guid||oe.guid++,i):void 0},now:function(){return+new Date},support:ne}),oe.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(t,e){Z["[object "+e+"]"]=e.toLowerCase()});var ue=function(t){function e(t,e,n,i){var o,r,a,s,l,u,c,h,p,g;if((e?e.ownerDocument||e:j)!==J&&L(e),e=e||J,n=n||[],s=e.nodeType,"string"!=typeof t||!t||1!==s&&9!==s&&11!==s)return n;if(!i&&I){if(11!==s&&(o=ve.exec(t)))if(a=o[1]){if(9===s){if(r=e.getElementById(a),!r||!r.parentNode)return n;if(r.id===a)return n.push(r),n}else if(e.ownerDocument&&(r=e.ownerDocument.getElementById(a))&&O(e,r)&&r.id===a)return n.push(r),n}else{if(o[2])return K.apply(n,e.getElementsByTagName(t)),n;if((a=o[3])&&C.getElementsByClassName)return K.apply(n,e.getElementsByClassName(a)),n}if(C.qsa&&(!P||!P.test(t))){if(h=c=R,p=e,g=1!==s&&t,1===s&&"object"!==e.nodeName.toLowerCase()){for(u=q(t),(c=e.getAttribute("id"))?h=c.replace(xe,"\\$&"):e.setAttribute("id",h),h="[id='"+h+"'] ",l=u.length;l--;)u[l]=h+f(u[l]);p=ye.test(t)&&d(e.parentNode)||e,g=u.join(",")}if(g)try{return K.apply(n,p.querySelectorAll(g)),n}catch(m){}finally{c||e.removeAttribute("id")}}}return k(t.replace(le,"$1"),e,n,i)}function n(){function t(n,i){return e.push(n+" ")>w.cacheLength&&delete t[e.shift()],t[n+" "]=i}var e=[];return t}function i(t){return t[R]=!0,t}function o(t){var e=J.createElement("div");try{return!!t(e)}catch(n){return!1}finally{e.parentNode&&e.parentNode.removeChild(e),e=null}}function r(t,e){for(var n=t.split("|"),i=t.length;i--;)w.attrHandle[n[i]]=e}function a(t,e){var n=e&&t,i=n&&1===t.nodeType&&1===e.nodeType&&(~e.sourceIndex||$)-(~t.sourceIndex||$);if(i)return i;if(n)for(;n=n.nextSibling;)if(n===e)return-1;return t?1:-1}function s(t){return function(e){var n=e.nodeName.toLowerCase();return"input"===n&&e.type===t}}function l(t){return function(e){var n=e.nodeName.toLowerCase();return("input"===n||"button"===n)&&e.type===t}}function u(t){return i(function(e){return e=+e,i(function(n,i){for(var o,r=t([],n.length,e),a=r.length;a--;)n[o=r[a]]&&(n[o]=!(i[o]=n[o]))})})}function d(t){return t&&"undefined"!=typeof t.getElementsByTagName&&t}function c(){}function f(t){for(var e=0,n=t.length,i="";n>e;e++)i+=t[e].value;return i}function h(t,e,n){var i=e.dir,o=n&&"parentNode"===i,r=F++;return e.first?function(e,n,r){for(;e=e[i];)if(1===e.nodeType||o)return t(e,n,r)}:function(e,n,a){var s,l,u=[H,r];if(a){for(;e=e[i];)if((1===e.nodeType||o)&&t(e,n,a))return!0}else for(;e=e[i];)if(1===e.nodeType||o){if(l=e[R]||(e[R]={}),(s=l[i])&&s[0]===H&&s[1]===r)return u[2]=s[2];if(l[i]=u,u[2]=t(e,n,a))return!0}}}function p(t){return t.length>1?function(e,n,i){for(var o=t.length;o--;)if(!t[o](e,n,i))return!1;return!0}:t[0]}function g(t,n,i){for(var o=0,r=n.length;r>o;o++)e(t,n[o],i);return i}function m(t,e,n,i,o){for(var r,a=[],s=0,l=t.length,u=null!=e;l>s;s++)(r=t[s])&&(!n||n(r,i,o))&&(a.push(r),u&&e.push(s));return a}function b(t,e,n,o,r,a){return o&&!o[R]&&(o=b(o)),r&&!r[R]&&(r=b(r,a)),i(function(i,a,s,l){var u,d,c,f=[],h=[],p=a.length,b=i||g(e||"*",s.nodeType?[s]:s,[]),v=!t||!i&&e?b:m(b,f,t,s,l),y=n?r||(i?t:p||o)?[]:a:v;if(n&&n(v,y,s,l),o)for(u=m(y,h),o(u,[],s,l),d=u.length;d--;)(c=u[d])&&(y[h[d]]=!(v[h[d]]=c));if(i){if(r||t){if(r){for(u=[],d=y.length;d--;)(c=y[d])&&u.push(v[d]=c);r(null,y=[],u,l)}for(d=y.length;d--;)(c=y[d])&&(u=r?te(i,c):f[d])>-1&&(i[u]=!(a[u]=c))}}else y=m(y===a?y.splice(p,y.length):y),r?r(null,a,y,l):K.apply(a,y)})}function v(t){for(var e,n,i,o=t.length,r=w.relative[t[0].type],a=r||w.relative[" "],s=r?1:0,l=h(function(t){return t===e},a,!0),u=h(function(t){return te(e,t)>-1},a,!0),d=[function(t,n,i){var o=!r&&(i||n!==E)||((e=n).nodeType?l(t,n,i):u(t,n,i));return e=null,o}];o>s;s++)if(n=w.relative[t[s].type])d=[h(p(d),n)];else{if(n=w.filter[t[s].type].apply(null,t[s].matches),n[R]){for(i=++s;o>i&&!w.relative[t[i].type];i++);return b(s>1&&p(d),s>1&&f(t.slice(0,s-1).concat({value:" "===t[s-2].type?"*":""})).replace(le,"$1"),n,i>s&&v(t.slice(s,i)),o>i&&v(t=t.slice(i)),o>i&&f(t))}d.push(n)}return p(d)}function y(t,n){var o=n.length>0,r=t.length>0,a=function(i,a,s,l,u){var d,c,f,h=0,p="0",g=i&&[],b=[],v=E,y=i||r&&w.find.TAG("*",u),x=H+=null==v?1:Math.random()||.1,C=y.length;for(u&&(E=a!==J&&a);p!==C&&null!=(d=y[p]);p++){if(r&&d){for(c=0;f=t[c++];)if(f(d,a,s)){l.push(d);break}u&&(H=x)}o&&((d=!f&&d)&&h--,i&&g.push(d))}if(h+=p,o&&p!==h){for(c=0;f=n[c++];)f(g,b,a,s);if(i){if(h>0)for(;p--;)g[p]||b[p]||(b[p]=V.call(l));b=m(b)}K.apply(l,b),u&&!i&&b.length>0&&h+n.length>1&&e.uniqueSort(l)}return u&&(H=x,E=v),g};return o?i(a):a}var x,C,w,S,_,q,T,k,E,N,D,L,J,A,I,P,M,Q,O,R="sizzle"+1*new Date,j=t.document,H=0,F=0,z=n(),B=n(),W=n(),U=function(t,e){return t===e&&(D=!0),0},$=1<<31,X={}.hasOwnProperty,G=[],V=G.pop,Y=G.push,K=G.push,Z=G.slice,te=function(t,e){for(var n=0,i=t.length;i>n;n++)if(t[n]===e)return n;return-1},ee="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",ne="[\\x20\\t\\r\\n\\f]",ie="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",oe=ie.replace("w","w#"),re="\\["+ne+"*("+ie+")(?:"+ne+"*([*^$|!~]?=)"+ne+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+oe+"))|)"+ne+"*\\]",ae=":("+ie+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+re+")*)|.*)\\)|)",se=new RegExp(ne+"+","g"),le=new RegExp("^"+ne+"+|((?:^|[^\\\\])(?:\\\\.)*)"+ne+"+$","g"),ue=new RegExp("^"+ne+"*,"+ne+"*"),de=new RegExp("^"+ne+"*([>+~]|"+ne+")"+ne+"*"),ce=new RegExp("="+ne+"*([^\\]'\"]*?)"+ne+"*\\]","g"),fe=new RegExp(ae),he=new RegExp("^"+oe+"$"),pe={ID:new RegExp("^#("+ie+")"),CLASS:new RegExp("^\\.("+ie+")"),TAG:new RegExp("^("+ie.replace("w","w*")+")"),ATTR:new RegExp("^"+re),PSEUDO:new RegExp("^"+ae),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+ne+"*(even|odd|(([+-]|)(\\d*)n|)"+ne+"*(?:([+-]|)"+ne+"*(\\d+)|))"+ne+"*\\)|)","i"),bool:new RegExp("^(?:"+ee+")$","i"),needsContext:new RegExp("^"+ne+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+ne+"*((?:-\\d)?\\d*)"+ne+"*\\)|)(?=[^-]|$)","i")},ge=/^(?:input|select|textarea|button)$/i,me=/^h\d$/i,be=/^[^{]+\{\s*\[native \w/,ve=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ye=/[+~]/,xe=/'|\\/g,Ce=new RegExp("\\\\([\\da-f]{1,6}"+ne+"?|("+ne+")|.)","ig"),we=function(t,e,n){var i="0x"+e-65536;return i!==i||n?e:0>i?String.fromCharCode(i+65536):String.fromCharCode(i>>10|55296,1023&i|56320)},Se=function(){L()};try{K.apply(G=Z.call(j.childNodes),j.childNodes),G[j.childNodes.length].nodeType}catch(_e){K={apply:G.length?function(t,e){Y.apply(t,Z.call(e))}:function(t,e){for(var n=t.length,i=0;t[n++]=e[i++];);t.length=n-1}}}C=e.support={},_=e.isXML=function(t){var e=t&&(t.ownerDocument||t).documentElement;return e?"HTML"!==e.nodeName:!1},L=e.setDocument=function(t){var e,n,i=t?t.ownerDocument||t:j;return i!==J&&9===i.nodeType&&i.documentElement?(J=i,A=i.documentElement,n=i.defaultView,n&&n!==n.top&&(n.addEventListener?n.addEventListener("unload",Se,!1):n.attachEvent&&n.attachEvent("onunload",Se)),I=!_(i),C.attributes=o(function(t){return t.className="i",!t.getAttribute("className")}),C.getElementsByTagName=o(function(t){return t.appendChild(i.createComment("")),!t.getElementsByTagName("*").length}),C.getElementsByClassName=be.test(i.getElementsByClassName),C.getById=o(function(t){return A.appendChild(t).id=R,!i.getElementsByName||!i.getElementsByName(R).length}),C.getById?(w.find.ID=function(t,e){if("undefined"!=typeof e.getElementById&&I){var n=e.getElementById(t);return n&&n.parentNode?[n]:[]}},w.filter.ID=function(t){var e=t.replace(Ce,we);return function(t){return t.getAttribute("id")===e}}):(delete w.find.ID,w.filter.ID=function(t){var e=t.replace(Ce,we);return function(t){var n="undefined"!=typeof t.getAttributeNode&&t.getAttributeNode("id");return n&&n.value===e}}),w.find.TAG=C.getElementsByTagName?function(t,e){return"undefined"!=typeof e.getElementsByTagName?e.getElementsByTagName(t):C.qsa?e.querySelectorAll(t):void 0}:function(t,e){var n,i=[],o=0,r=e.getElementsByTagName(t);if("*"===t){for(;n=r[o++];)1===n.nodeType&&i.push(n);return i}return r},w.find.CLASS=C.getElementsByClassName&&function(t,e){return I?e.getElementsByClassName(t):void 0},M=[],P=[],(C.qsa=be.test(i.querySelectorAll))&&(o(function(t){A.appendChild(t).innerHTML="<a id='"+R+"'></a><select id='"+R+"-\f]' msallowcapture=''><option selected=''></option></select>",t.querySelectorAll("[msallowcapture^='']").length&&P.push("[*^$]="+ne+"*(?:''|\"\")"),t.querySelectorAll("[selected]").length||P.push("\\["+ne+"*(?:value|"+ee+")"),t.querySelectorAll("[id~="+R+"-]").length||P.push("~="),t.querySelectorAll(":checked").length||P.push(":checked"),t.querySelectorAll("a#"+R+"+*").length||P.push(".#.+[+~]")}),o(function(t){var e=i.createElement("input");e.setAttribute("type","hidden"),t.appendChild(e).setAttribute("name","D"),t.querySelectorAll("[name=d]").length&&P.push("name"+ne+"*[*^$|!~]?="),t.querySelectorAll(":enabled").length||P.push(":enabled",":disabled"),t.querySelectorAll("*,:x"),P.push(",.*:")})),(C.matchesSelector=be.test(Q=A.matches||A.webkitMatchesSelector||A.mozMatchesSelector||A.oMatchesSelector||A.msMatchesSelector))&&o(function(t){C.disconnectedMatch=Q.call(t,"div"),Q.call(t,"[s!='']:x"),M.push("!=",ae)}),P=P.length&&new RegExp(P.join("|")),M=M.length&&new RegExp(M.join("|")),e=be.test(A.compareDocumentPosition),O=e||be.test(A.contains)?function(t,e){var n=9===t.nodeType?t.documentElement:t,i=e&&e.parentNode;return t===i||!(!i||1!==i.nodeType||!(n.contains?n.contains(i):t.compareDocumentPosition&&16&t.compareDocumentPosition(i)))}:function(t,e){if(e)for(;e=e.parentNode;)if(e===t)return!0;return!1},U=e?function(t,e){if(t===e)return D=!0,0;var n=!t.compareDocumentPosition-!e.compareDocumentPosition;return n?n:(n=(t.ownerDocument||t)===(e.ownerDocument||e)?t.compareDocumentPosition(e):1,1&n||!C.sortDetached&&e.compareDocumentPosition(t)===n?t===i||t.ownerDocument===j&&O(j,t)?-1:e===i||e.ownerDocument===j&&O(j,e)?1:N?te(N,t)-te(N,e):0:4&n?-1:1)}:function(t,e){if(t===e)return D=!0,0;var n,o=0,r=t.parentNode,s=e.parentNode,l=[t],u=[e];if(!r||!s)return t===i?-1:e===i?1:r?-1:s?1:N?te(N,t)-te(N,e):0;if(r===s)return a(t,e);for(n=t;n=n.parentNode;)l.unshift(n);for(n=e;n=n.parentNode;)u.unshift(n);for(;l[o]===u[o];)o++;return o?a(l[o],u[o]):l[o]===j?-1:u[o]===j?1:0},i):J},e.matches=function(t,n){return e(t,null,null,n)},e.matchesSelector=function(t,n){if((t.ownerDocument||t)!==J&&L(t),n=n.replace(ce,"='$1']"),!(!C.matchesSelector||!I||M&&M.test(n)||P&&P.test(n)))try{var i=Q.call(t,n);if(i||C.disconnectedMatch||t.document&&11!==t.document.nodeType)return i}catch(o){}return e(n,J,null,[t]).length>0},e.contains=function(t,e){return(t.ownerDocument||t)!==J&&L(t),O(t,e)},e.attr=function(t,e){(t.ownerDocument||t)!==J&&L(t);var n=w.attrHandle[e.toLowerCase()],i=n&&X.call(w.attrHandle,e.toLowerCase())?n(t,e,!I):void 0;return void 0!==i?i:C.attributes||!I?t.getAttribute(e):(i=t.getAttributeNode(e))&&i.specified?i.value:null},e.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)},e.uniqueSort=function(t){var e,n=[],i=0,o=0;if(D=!C.detectDuplicates,N=!C.sortStable&&t.slice(0),t.sort(U),D){for(;e=t[o++];)e===t[o]&&(i=n.push(o));for(;i--;)t.splice(n[i],1)}return N=null,t},S=e.getText=function(t){var e,n="",i=0,o=t.nodeType;if(o){if(1===o||9===o||11===o){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)n+=S(t)}else if(3===o||4===o)return t.nodeValue}else for(;e=t[i++];)n+=S(e);return n},w=e.selectors={cacheLength:50,createPseudo:i,match:pe,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(Ce,we),t[3]=(t[3]||t[4]||t[5]||"").replace(Ce,we),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)
},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||e.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&e.error(t[0]),t},PSEUDO:function(t){var e,n=!t[6]&&t[2];return pe.CHILD.test(t[0])?null:(t[3]?t[2]=t[4]||t[5]||"":n&&fe.test(n)&&(e=q(n,!0))&&(e=n.indexOf(")",n.length-e)-n.length)&&(t[0]=t[0].slice(0,e),t[2]=n.slice(0,e)),t.slice(0,3))}},filter:{TAG:function(t){var e=t.replace(Ce,we).toLowerCase();return"*"===t?function(){return!0}:function(t){return t.nodeName&&t.nodeName.toLowerCase()===e}},CLASS:function(t){var e=z[t+" "];return e||(e=new RegExp("(^|"+ne+")"+t+"("+ne+"|$)"))&&z(t,function(t){return e.test("string"==typeof t.className&&t.className||"undefined"!=typeof t.getAttribute&&t.getAttribute("class")||"")})},ATTR:function(t,n,i){return function(o){var r=e.attr(o,t);return null==r?"!="===n:n?(r+="","="===n?r===i:"!="===n?r!==i:"^="===n?i&&0===r.indexOf(i):"*="===n?i&&r.indexOf(i)>-1:"$="===n?i&&r.slice(-i.length)===i:"~="===n?(" "+r.replace(se," ")+" ").indexOf(i)>-1:"|="===n?r===i||r.slice(0,i.length+1)===i+"-":!1):!0}},CHILD:function(t,e,n,i,o){var r="nth"!==t.slice(0,3),a="last"!==t.slice(-4),s="of-type"===e;return 1===i&&0===o?function(t){return!!t.parentNode}:function(e,n,l){var u,d,c,f,h,p,g=r!==a?"nextSibling":"previousSibling",m=e.parentNode,b=s&&e.nodeName.toLowerCase(),v=!l&&!s;if(m){if(r){for(;g;){for(c=e;c=c[g];)if(s?c.nodeName.toLowerCase()===b:1===c.nodeType)return!1;p=g="only"===t&&!p&&"nextSibling"}return!0}if(p=[a?m.firstChild:m.lastChild],a&&v){for(d=m[R]||(m[R]={}),u=d[t]||[],h=u[0]===H&&u[1],f=u[0]===H&&u[2],c=h&&m.childNodes[h];c=++h&&c&&c[g]||(f=h=0)||p.pop();)if(1===c.nodeType&&++f&&c===e){d[t]=[H,h,f];break}}else if(v&&(u=(e[R]||(e[R]={}))[t])&&u[0]===H)f=u[1];else for(;(c=++h&&c&&c[g]||(f=h=0)||p.pop())&&((s?c.nodeName.toLowerCase()!==b:1!==c.nodeType)||!++f||(v&&((c[R]||(c[R]={}))[t]=[H,f]),c!==e)););return f-=o,f===i||f%i===0&&f/i>=0}}},PSEUDO:function(t,n){var o,r=w.pseudos[t]||w.setFilters[t.toLowerCase()]||e.error("unsupported pseudo: "+t);return r[R]?r(n):r.length>1?(o=[t,t,"",n],w.setFilters.hasOwnProperty(t.toLowerCase())?i(function(t,e){for(var i,o=r(t,n),a=o.length;a--;)i=te(t,o[a]),t[i]=!(e[i]=o[a])}):function(t){return r(t,0,o)}):r}},pseudos:{not:i(function(t){var e=[],n=[],o=T(t.replace(le,"$1"));return o[R]?i(function(t,e,n,i){for(var r,a=o(t,null,i,[]),s=t.length;s--;)(r=a[s])&&(t[s]=!(e[s]=r))}):function(t,i,r){return e[0]=t,o(e,null,r,n),e[0]=null,!n.pop()}}),has:i(function(t){return function(n){return e(t,n).length>0}}),contains:i(function(t){return t=t.replace(Ce,we),function(e){return(e.textContent||e.innerText||S(e)).indexOf(t)>-1}}),lang:i(function(t){return he.test(t||"")||e.error("unsupported lang: "+t),t=t.replace(Ce,we).toLowerCase(),function(e){var n;do if(n=I?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return n=n.toLowerCase(),n===t||0===n.indexOf(t+"-");while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var n=t.location&&t.location.hash;return n&&n.slice(1)===e.id},root:function(t){return t===A},focus:function(t){return t===J.activeElement&&(!J.hasFocus||J.hasFocus())&&!!(t.type||t.href||~t.tabIndex)},enabled:function(t){return t.disabled===!1},disabled:function(t){return t.disabled===!0},checked:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&!!t.checked||"option"===e&&!!t.selected},selected:function(t){return t.parentNode&&t.parentNode.selectedIndex,t.selected===!0},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeType<6)return!1;return!0},parent:function(t){return!w.pseudos.empty(t)},header:function(t){return me.test(t.nodeName)},input:function(t){return ge.test(t.nodeName)},button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},text:function(t){var e;return"input"===t.nodeName.toLowerCase()&&"text"===t.type&&(null==(e=t.getAttribute("type"))||"text"===e.toLowerCase())},first:u(function(){return[0]}),last:u(function(t,e){return[e-1]}),eq:u(function(t,e,n){return[0>n?n+e:n]}),even:u(function(t,e){for(var n=0;e>n;n+=2)t.push(n);return t}),odd:u(function(t,e){for(var n=1;e>n;n+=2)t.push(n);return t}),lt:u(function(t,e,n){for(var i=0>n?n+e:n;--i>=0;)t.push(i);return t}),gt:u(function(t,e,n){for(var i=0>n?n+e:n;++i<e;)t.push(i);return t})}},w.pseudos.nth=w.pseudos.eq;for(x in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})w.pseudos[x]=s(x);for(x in{submit:!0,reset:!0})w.pseudos[x]=l(x);return c.prototype=w.filters=w.pseudos,w.setFilters=new c,q=e.tokenize=function(t,n){var i,o,r,a,s,l,u,d=B[t+" "];if(d)return n?0:d.slice(0);for(s=t,l=[],u=w.preFilter;s;){(!i||(o=ue.exec(s)))&&(o&&(s=s.slice(o[0].length)||s),l.push(r=[])),i=!1,(o=de.exec(s))&&(i=o.shift(),r.push({value:i,type:o[0].replace(le," ")}),s=s.slice(i.length));for(a in w.filter)!(o=pe[a].exec(s))||u[a]&&!(o=u[a](o))||(i=o.shift(),r.push({value:i,type:a,matches:o}),s=s.slice(i.length));if(!i)break}return n?s.length:s?e.error(t):B(t,l).slice(0)},T=e.compile=function(t,e){var n,i=[],o=[],r=W[t+" "];if(!r){for(e||(e=q(t)),n=e.length;n--;)r=v(e[n]),r[R]?i.push(r):o.push(r);r=W(t,y(o,i)),r.selector=t}return r},k=e.select=function(t,e,n,i){var o,r,a,s,l,u="function"==typeof t&&t,c=!i&&q(t=u.selector||t);if(n=n||[],1===c.length){if(r=c[0]=c[0].slice(0),r.length>2&&"ID"===(a=r[0]).type&&C.getById&&9===e.nodeType&&I&&w.relative[r[1].type]){if(e=(w.find.ID(a.matches[0].replace(Ce,we),e)||[])[0],!e)return n;u&&(e=e.parentNode),t=t.slice(r.shift().value.length)}for(o=pe.needsContext.test(t)?0:r.length;o--&&(a=r[o],!w.relative[s=a.type]);)if((l=w.find[s])&&(i=l(a.matches[0].replace(Ce,we),ye.test(r[0].type)&&d(e.parentNode)||e))){if(r.splice(o,1),t=i.length&&f(r),!t)return K.apply(n,i),n;break}}return(u||T(t,c))(i,e,!I,n,ye.test(t)&&d(e.parentNode)||e),n},C.sortStable=R.split("").sort(U).join("")===R,C.detectDuplicates=!!D,L(),C.sortDetached=o(function(t){return 1&t.compareDocumentPosition(J.createElement("div"))}),o(function(t){return t.innerHTML="<a href='#'></a>","#"===t.firstChild.getAttribute("href")})||r("type|href|height|width",function(t,e,n){return n?void 0:t.getAttribute(e,"type"===e.toLowerCase()?1:2)}),C.attributes&&o(function(t){return t.innerHTML="<input/>",t.firstChild.setAttribute("value",""),""===t.firstChild.getAttribute("value")})||r("value",function(t,e,n){return n||"input"!==t.nodeName.toLowerCase()?void 0:t.defaultValue}),o(function(t){return null==t.getAttribute("disabled")})||r(ee,function(t,e,n){var i;return n?void 0:t[e]===!0?e.toLowerCase():(i=t.getAttributeNode(e))&&i.specified?i.value:null}),e}(t);oe.find=ue,oe.expr=ue.selectors,oe.expr[":"]=oe.expr.pseudos,oe.unique=ue.uniqueSort,oe.text=ue.getText,oe.isXMLDoc=ue.isXML,oe.contains=ue.contains;var de=oe.expr.match.needsContext,ce=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,fe=/^.[^:#\[\.,]*$/;oe.filter=function(t,e,n){var i=e[0];return n&&(t=":not("+t+")"),1===e.length&&1===i.nodeType?oe.find.matchesSelector(i,t)?[i]:[]:oe.find.matches(t,oe.grep(e,function(t){return 1===t.nodeType}))},oe.fn.extend({find:function(t){var e,n=[],i=this,o=i.length;if("string"!=typeof t)return this.pushStack(oe(t).filter(function(){for(e=0;o>e;e++)if(oe.contains(i[e],this))return!0}));for(e=0;o>e;e++)oe.find(t,i[e],n);return n=this.pushStack(o>1?oe.unique(n):n),n.selector=this.selector?this.selector+" "+t:t,n},filter:function(t){return this.pushStack(i(this,t||[],!1))},not:function(t){return this.pushStack(i(this,t||[],!0))},is:function(t){return!!i(this,"string"==typeof t&&de.test(t)?oe(t):t||[],!1).length}});var he,pe=t.document,ge=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,me=oe.fn.init=function(t,e){var n,i;if(!t)return this;if("string"==typeof t){if(n="<"===t.charAt(0)&&">"===t.charAt(t.length-1)&&t.length>=3?[null,t,null]:ge.exec(t),!n||!n[1]&&e)return!e||e.jquery?(e||he).find(t):this.constructor(e).find(t);if(n[1]){if(e=e instanceof oe?e[0]:e,oe.merge(this,oe.parseHTML(n[1],e&&e.nodeType?e.ownerDocument||e:pe,!0)),ce.test(n[1])&&oe.isPlainObject(e))for(n in e)oe.isFunction(this[n])?this[n](e[n]):this.attr(n,e[n]);return this}if(i=pe.getElementById(n[2]),i&&i.parentNode){if(i.id!==n[2])return he.find(t);this.length=1,this[0]=i}return this.context=pe,this.selector=t,this}return t.nodeType?(this.context=this[0]=t,this.length=1,this):oe.isFunction(t)?"undefined"!=typeof he.ready?he.ready(t):t(oe):(void 0!==t.selector&&(this.selector=t.selector,this.context=t.context),oe.makeArray(t,this))};me.prototype=oe.fn,he=oe(pe);var be=/^(?:parents|prev(?:Until|All))/,ve={children:!0,contents:!0,next:!0,prev:!0};oe.extend({dir:function(t,e,n){for(var i=[],o=t[e];o&&9!==o.nodeType&&(void 0===n||1!==o.nodeType||!oe(o).is(n));)1===o.nodeType&&i.push(o),o=o[e];return i},sibling:function(t,e){for(var n=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&n.push(t);return n}}),oe.fn.extend({has:function(t){var e,n=oe(t,this),i=n.length;return this.filter(function(){for(e=0;i>e;e++)if(oe.contains(this,n[e]))return!0})},closest:function(t,e){for(var n,i=0,o=this.length,r=[],a=de.test(t)||"string"!=typeof t?oe(t,e||this.context):0;o>i;i++)for(n=this[i];n&&n!==e;n=n.parentNode)if(n.nodeType<11&&(a?a.index(n)>-1:1===n.nodeType&&oe.find.matchesSelector(n,t))){r.push(n);break}return this.pushStack(r.length>1?oe.unique(r):r)},index:function(t){return t?"string"==typeof t?oe.inArray(this[0],oe(t)):oe.inArray(t.jquery?t[0]:t,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,e){return this.pushStack(oe.unique(oe.merge(this.get(),oe(t,e))))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),oe.each({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return oe.dir(t,"parentNode")},parentsUntil:function(t,e,n){return oe.dir(t,"parentNode",n)},next:function(t){return o(t,"nextSibling")},prev:function(t){return o(t,"previousSibling")},nextAll:function(t){return oe.dir(t,"nextSibling")},prevAll:function(t){return oe.dir(t,"previousSibling")},nextUntil:function(t,e,n){return oe.dir(t,"nextSibling",n)},prevUntil:function(t,e,n){return oe.dir(t,"previousSibling",n)},siblings:function(t){return oe.sibling((t.parentNode||{}).firstChild,t)},children:function(t){return oe.sibling(t.firstChild)},contents:function(t){return oe.nodeName(t,"iframe")?t.contentDocument||t.contentWindow.document:oe.merge([],t.childNodes)}},function(t,e){oe.fn[t]=function(n,i){var o=oe.map(this,e,n);return"Until"!==t.slice(-5)&&(i=n),i&&"string"==typeof i&&(o=oe.filter(i,o)),this.length>1&&(ve[t]||(o=oe.unique(o)),be.test(t)&&(o=o.reverse())),this.pushStack(o)}});var ye=/\S+/g,xe={};oe.Callbacks=function(t){t="string"==typeof t?xe[t]||r(t):oe.extend({},t);var e,n,i,o,a,s,l=[],u=!t.once&&[],d=function(r){for(n=t.memory&&r,i=!0,a=s||0,s=0,o=l.length,e=!0;l&&o>a;a++)if(l[a].apply(r[0],r[1])===!1&&t.stopOnFalse){n=!1;break}e=!1,l&&(u?u.length&&d(u.shift()):n?l=[]:c.disable())},c={add:function(){if(l){var i=l.length;!function r(e){oe.each(e,function(e,n){var i=oe.type(n);"function"===i?t.unique&&c.has(n)||l.push(n):n&&n.length&&"string"!==i&&r(n)})}(arguments),e?o=l.length:n&&(s=i,d(n))}return this},remove:function(){return l&&oe.each(arguments,function(t,n){for(var i;(i=oe.inArray(n,l,i))>-1;)l.splice(i,1),e&&(o>=i&&o--,a>=i&&a--)}),this},has:function(t){return t?oe.inArray(t,l)>-1:!(!l||!l.length)},empty:function(){return l=[],o=0,this},disable:function(){return l=u=n=void 0,this},disabled:function(){return!l},lock:function(){return u=void 0,n||c.disable(),this},locked:function(){return!u},fireWith:function(t,n){return!l||i&&!u||(n=n||[],n=[t,n.slice?n.slice():n],e?u.push(n):d(n)),this},fire:function(){return c.fireWith(this,arguments),this},fired:function(){return!!i}};return c},oe.extend({Deferred:function(t){var e=[["resolve","done",oe.Callbacks("once memory"),"resolved"],["reject","fail",oe.Callbacks("once memory"),"rejected"],["notify","progress",oe.Callbacks("memory")]],n="pending",i={state:function(){return n},always:function(){return o.done(arguments).fail(arguments),this},then:function(){var t=arguments;return oe.Deferred(function(n){oe.each(e,function(e,r){var a=oe.isFunction(t[e])&&t[e];o[r[1]](function(){var t=a&&a.apply(this,arguments);t&&oe.isFunction(t.promise)?t.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[r[0]+"With"](this===i?n.promise():this,a?[t]:arguments)})}),t=null}).promise()},promise:function(t){return null!=t?oe.extend(t,i):i}},o={};return i.pipe=i.then,oe.each(e,function(t,r){var a=r[2],s=r[3];i[r[1]]=a.add,s&&a.add(function(){n=s},e[1^t][2].disable,e[2][2].lock),o[r[0]]=function(){return o[r[0]+"With"](this===o?i:this,arguments),this},o[r[0]+"With"]=a.fireWith}),i.promise(o),t&&t.call(o,o),o},when:function(t){var e,n,i,o=0,r=G.call(arguments),a=r.length,s=1!==a||t&&oe.isFunction(t.promise)?a:0,l=1===s?t:oe.Deferred(),u=function(t,n,i){return function(o){n[t]=this,i[t]=arguments.length>1?G.call(arguments):o,i===e?l.notifyWith(n,i):--s||l.resolveWith(n,i)}};if(a>1)for(e=new Array(a),n=new Array(a),i=new Array(a);a>o;o++)r[o]&&oe.isFunction(r[o].promise)?r[o].promise().done(u(o,i,r)).fail(l.reject).progress(u(o,n,e)):--s;return s||l.resolveWith(i,r),l.promise()}});var Ce;oe.fn.ready=function(t){return oe.ready.promise().done(t),this},oe.extend({isReady:!1,readyWait:1,holdReady:function(t){t?oe.readyWait++:oe.ready(!0)},ready:function(t){if(t===!0?!--oe.readyWait:!oe.isReady){if(!pe.body)return setTimeout(oe.ready);oe.isReady=!0,t!==!0&&--oe.readyWait>0||(Ce.resolveWith(pe,[oe]),oe.fn.triggerHandler&&(oe(pe).triggerHandler("ready"),oe(pe).off("ready")))}}}),oe.ready.promise=function(e){if(!Ce)if(Ce=oe.Deferred(),"complete"===pe.readyState)setTimeout(oe.ready);else if(pe.addEventListener)pe.addEventListener("DOMContentLoaded",s,!1),t.addEventListener("load",s,!1);else{pe.attachEvent("onreadystatechange",s),t.attachEvent("onload",s);var n=!1;try{n=null==t.frameElement&&pe.documentElement}catch(i){}n&&n.doScroll&&!function o(){if(!oe.isReady){try{n.doScroll("left")}catch(t){return setTimeout(o,50)}a(),oe.ready()}}()}return Ce.promise(e)};var we,Se="undefined";for(we in oe(ne))break;ne.ownLast="0"!==we,ne.inlineBlockNeedsLayout=!1,oe(function(){var t,e,n,i;n=pe.getElementsByTagName("body")[0],n&&n.style&&(e=pe.createElement("div"),i=pe.createElement("div"),i.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",n.appendChild(i).appendChild(e),typeof e.style.zoom!==Se&&(e.style.cssText="display:inline;margin:0;border:0;padding:1px;width:1px;zoom:1",ne.inlineBlockNeedsLayout=t=3===e.offsetWidth,t&&(n.style.zoom=1)),n.removeChild(i))}),function(){var t=pe.createElement("div");if(null==ne.deleteExpando){ne.deleteExpando=!0;try{delete t.test}catch(e){ne.deleteExpando=!1}}t=null}(),oe.acceptData=function(t){var e=oe.noData[(t.nodeName+" ").toLowerCase()],n=+t.nodeType||1;return 1!==n&&9!==n?!1:!e||e!==!0&&t.getAttribute("classid")===e};var _e=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,qe=/([A-Z])/g;oe.extend({cache:{},noData:{"applet ":!0,"embed ":!0,"object ":"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"},hasData:function(t){return t=t.nodeType?oe.cache[t[oe.expando]]:t[oe.expando],!!t&&!u(t)},data:function(t,e,n){return d(t,e,n)},removeData:function(t,e){return c(t,e)},_data:function(t,e,n){return d(t,e,n,!0)},_removeData:function(t,e){return c(t,e,!0)}}),oe.fn.extend({data:function(t,e){var n,i,o,r=this[0],a=r&&r.attributes;if(void 0===t){if(this.length&&(o=oe.data(r),1===r.nodeType&&!oe._data(r,"parsedAttrs"))){for(n=a.length;n--;)a[n]&&(i=a[n].name,0===i.indexOf("data-")&&(i=oe.camelCase(i.slice(5)),l(r,i,o[i])));oe._data(r,"parsedAttrs",!0)}return o}return"object"==typeof t?this.each(function(){oe.data(this,t)}):arguments.length>1?this.each(function(){oe.data(this,t,e)}):r?l(r,t,oe.data(r,t)):void 0},removeData:function(t){return this.each(function(){oe.removeData(this,t)})}}),oe.extend({queue:function(t,e,n){var i;return t?(e=(e||"fx")+"queue",i=oe._data(t,e),n&&(!i||oe.isArray(n)?i=oe._data(t,e,oe.makeArray(n)):i.push(n)),i||[]):void 0},dequeue:function(t,e){e=e||"fx";var n=oe.queue(t,e),i=n.length,o=n.shift(),r=oe._queueHooks(t,e),a=function(){oe.dequeue(t,e)};"inprogress"===o&&(o=n.shift(),i--),o&&("fx"===e&&n.unshift("inprogress"),delete r.stop,o.call(t,a,r)),!i&&r&&r.empty.fire()},_queueHooks:function(t,e){var n=e+"queueHooks";return oe._data(t,n)||oe._data(t,n,{empty:oe.Callbacks("once memory").add(function(){oe._removeData(t,e+"queue"),oe._removeData(t,n)})})}}),oe.fn.extend({queue:function(t,e){var n=2;return"string"!=typeof t&&(e=t,t="fx",n--),arguments.length<n?oe.queue(this[0],t):void 0===e?this:this.each(function(){var n=oe.queue(this,t,e);oe._queueHooks(this,t),"fx"===t&&"inprogress"!==n[0]&&oe.dequeue(this,t)})},dequeue:function(t){return this.each(function(){oe.dequeue(this,t)})},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,e){var n,i=1,o=oe.Deferred(),r=this,a=this.length,s=function(){--i||o.resolveWith(r,[r])};for("string"!=typeof t&&(e=t,t=void 0),t=t||"fx";a--;)n=oe._data(r[a],t+"queueHooks"),n&&n.empty&&(i++,n.empty.add(s));return s(),o.promise(e)}});var Te=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,ke=["Top","Right","Bottom","Left"],Ee=function(t,e){return t=e||t,"none"===oe.css(t,"display")||!oe.contains(t.ownerDocument,t)},Ne=oe.access=function(t,e,n,i,o,r,a){var s=0,l=t.length,u=null==n;if("object"===oe.type(n)){o=!0;for(s in n)oe.access(t,e,s,n[s],!0,r,a)}else if(void 0!==i&&(o=!0,oe.isFunction(i)||(a=!0),u&&(a?(e.call(t,i),e=null):(u=e,e=function(t,e,n){return u.call(oe(t),n)})),e))for(;l>s;s++)e(t[s],n,a?i:i.call(t[s],s,e(t[s],n)));return o?t:u?e.call(t):l?e(t[0],n):r},De=/^(?:checkbox|radio)$/i;!function(){var t=pe.createElement("input"),e=pe.createElement("div"),n=pe.createDocumentFragment();if(e.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",ne.leadingWhitespace=3===e.firstChild.nodeType,ne.tbody=!e.getElementsByTagName("tbody").length,ne.htmlSerialize=!!e.getElementsByTagName("link").length,ne.html5Clone="<:nav></:nav>"!==pe.createElement("nav").cloneNode(!0).outerHTML,t.type="checkbox",t.checked=!0,n.appendChild(t),ne.appendChecked=t.checked,e.innerHTML="<textarea>x</textarea>",ne.noCloneChecked=!!e.cloneNode(!0).lastChild.defaultValue,n.appendChild(e),e.innerHTML="<input type='radio' checked='checked' name='t'/>",ne.checkClone=e.cloneNode(!0).cloneNode(!0).lastChild.checked,ne.noCloneEvent=!0,e.attachEvent&&(e.attachEvent("onclick",function(){ne.noCloneEvent=!1}),e.cloneNode(!0).click()),null==ne.deleteExpando){ne.deleteExpando=!0;try{delete e.test}catch(i){ne.deleteExpando=!1}}}(),function(){var e,n,i=pe.createElement("div");for(e in{submit:!0,change:!0,focusin:!0})n="on"+e,(ne[e+"Bubbles"]=n in t)||(i.setAttribute(n,"t"),ne[e+"Bubbles"]=i.attributes[n].expando===!1);i=null}();var Le=/^(?:input|select|textarea)$/i,Je=/^key/,Ae=/^(?:mouse|pointer|contextmenu)|click/,Ie=/^(?:focusinfocus|focusoutblur)$/,Pe=/^([^.]*)(?:\.(.+)|)$/;oe.event={global:{},add:function(t,e,n,i,o){var r,a,s,l,u,d,c,f,h,p,g,m=oe._data(t);if(m){for(n.handler&&(l=n,n=l.handler,o=l.selector),n.guid||(n.guid=oe.guid++),(a=m.events)||(a=m.events={}),(d=m.handle)||(d=m.handle=function(t){return typeof oe===Se||t&&oe.event.triggered===t.type?void 0:oe.event.dispatch.apply(d.elem,arguments)},d.elem=t),e=(e||"").match(ye)||[""],s=e.length;s--;)r=Pe.exec(e[s])||[],h=g=r[1],p=(r[2]||"").split(".").sort(),h&&(u=oe.event.special[h]||{},h=(o?u.delegateType:u.bindType)||h,u=oe.event.special[h]||{},c=oe.extend({type:h,origType:g,data:i,handler:n,guid:n.guid,selector:o,needsContext:o&&oe.expr.match.needsContext.test(o),namespace:p.join(".")},l),(f=a[h])||(f=a[h]=[],f.delegateCount=0,u.setup&&u.setup.call(t,i,p,d)!==!1||(t.addEventListener?t.addEventListener(h,d,!1):t.attachEvent&&t.attachEvent("on"+h,d))),u.add&&(u.add.call(t,c),c.handler.guid||(c.handler.guid=n.guid)),o?f.splice(f.delegateCount++,0,c):f.push(c),oe.event.global[h]=!0);t=null}},remove:function(t,e,n,i,o){var r,a,s,l,u,d,c,f,h,p,g,m=oe.hasData(t)&&oe._data(t);if(m&&(d=m.events)){for(e=(e||"").match(ye)||[""],u=e.length;u--;)if(s=Pe.exec(e[u])||[],h=g=s[1],p=(s[2]||"").split(".").sort(),h){for(c=oe.event.special[h]||{},h=(i?c.delegateType:c.bindType)||h,f=d[h]||[],s=s[2]&&new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"),l=r=f.length;r--;)a=f[r],!o&&g!==a.origType||n&&n.guid!==a.guid||s&&!s.test(a.namespace)||i&&i!==a.selector&&("**"!==i||!a.selector)||(f.splice(r,1),a.selector&&f.delegateCount--,c.remove&&c.remove.call(t,a));l&&!f.length&&(c.teardown&&c.teardown.call(t,p,m.handle)!==!1||oe.removeEvent(t,h,m.handle),delete d[h])}else for(h in d)oe.event.remove(t,h+e[u],n,i,!0);oe.isEmptyObject(d)&&(delete m.handle,oe._removeData(t,"events"))}},trigger:function(e,n,i,o){var r,a,s,l,u,d,c,f=[i||pe],h=ee.call(e,"type")?e.type:e,p=ee.call(e,"namespace")?e.namespace.split("."):[];if(s=d=i=i||pe,3!==i.nodeType&&8!==i.nodeType&&!Ie.test(h+oe.event.triggered)&&(h.indexOf(".")>=0&&(p=h.split("."),h=p.shift(),p.sort()),a=h.indexOf(":")<0&&"on"+h,e=e[oe.expando]?e:new oe.Event(h,"object"==typeof e&&e),e.isTrigger=o?2:3,e.namespace=p.join("."),e.namespace_re=e.namespace?new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=i),n=null==n?[e]:oe.makeArray(n,[e]),u=oe.event.special[h]||{},o||!u.trigger||u.trigger.apply(i,n)!==!1)){if(!o&&!u.noBubble&&!oe.isWindow(i)){for(l=u.delegateType||h,Ie.test(l+h)||(s=s.parentNode);s;s=s.parentNode)f.push(s),d=s;d===(i.ownerDocument||pe)&&f.push(d.defaultView||d.parentWindow||t)}for(c=0;(s=f[c++])&&!e.isPropagationStopped();)e.type=c>1?l:u.bindType||h,r=(oe._data(s,"events")||{})[e.type]&&oe._data(s,"handle"),r&&r.apply(s,n),r=a&&s[a],r&&r.apply&&oe.acceptData(s)&&(e.result=r.apply(s,n),e.result===!1&&e.preventDefault());if(e.type=h,!o&&!e.isDefaultPrevented()&&(!u._default||u._default.apply(f.pop(),n)===!1)&&oe.acceptData(i)&&a&&i[h]&&!oe.isWindow(i)){d=i[a],d&&(i[a]=null),oe.event.triggered=h;try{i[h]()}catch(g){}oe.event.triggered=void 0,d&&(i[a]=d)}return e.result}},dispatch:function(t){t=oe.event.fix(t);var e,n,i,o,r,a=[],s=G.call(arguments),l=(oe._data(this,"events")||{})[t.type]||[],u=oe.event.special[t.type]||{};if(s[0]=t,t.delegateTarget=this,!u.preDispatch||u.preDispatch.call(this,t)!==!1){for(a=oe.event.handlers.call(this,t,l),e=0;(o=a[e++])&&!t.isPropagationStopped();)for(t.currentTarget=o.elem,r=0;(i=o.handlers[r++])&&!t.isImmediatePropagationStopped();)(!t.namespace_re||t.namespace_re.test(i.namespace))&&(t.handleObj=i,t.data=i.data,n=((oe.event.special[i.origType]||{}).handle||i.handler).apply(o.elem,s),void 0!==n&&(t.result=n)===!1&&(t.preventDefault(),t.stopPropagation()));return u.postDispatch&&u.postDispatch.call(this,t),t.result}},handlers:function(t,e){var n,i,o,r,a=[],s=e.delegateCount,l=t.target;if(s&&l.nodeType&&(!t.button||"click"!==t.type))for(;l!=this;l=l.parentNode||this)if(1===l.nodeType&&(l.disabled!==!0||"click"!==t.type)){for(o=[],r=0;s>r;r++)i=e[r],n=i.selector+" ",void 0===o[n]&&(o[n]=i.needsContext?oe(n,this).index(l)>=0:oe.find(n,this,null,[l]).length),o[n]&&o.push(i);o.length&&a.push({elem:l,handlers:o})}return s<e.length&&a.push({elem:this,handlers:e.slice(s)}),a},fix:function(t){if(t[oe.expando])return t;var e,n,i,o=t.type,r=t,a=this.fixHooks[o];for(a||(this.fixHooks[o]=a=Ae.test(o)?this.mouseHooks:Je.test(o)?this.keyHooks:{}),i=a.props?this.props.concat(a.props):this.props,t=new oe.Event(r),e=i.length;e--;)n=i[e],t[n]=r[n];return t.target||(t.target=r.srcElement||pe),3===t.target.nodeType&&(t.target=t.target.parentNode),t.metaKey=!!t.metaKey,a.filter?a.filter(t,r):t},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(t,e){return null==t.which&&(t.which=null!=e.charCode?e.charCode:e.keyCode),t}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(t,e){var n,i,o,r=e.button,a=e.fromElement;return null==t.pageX&&null!=e.clientX&&(i=t.target.ownerDocument||pe,o=i.documentElement,n=i.body,t.pageX=e.clientX+(o&&o.scrollLeft||n&&n.scrollLeft||0)-(o&&o.clientLeft||n&&n.clientLeft||0),t.pageY=e.clientY+(o&&o.scrollTop||n&&n.scrollTop||0)-(o&&o.clientTop||n&&n.clientTop||0)),!t.relatedTarget&&a&&(t.relatedTarget=a===t.target?e.toElement:a),t.which||void 0===r||(t.which=1&r?1:2&r?3:4&r?2:0),t}},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==p()&&this.focus)try{return this.focus(),!1}catch(t){}},delegateType:"focusin"},blur:{trigger:function(){return this===p()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return oe.nodeName(this,"input")&&"checkbox"===this.type&&this.click?(this.click(),!1):void 0},_default:function(t){return oe.nodeName(t.target,"a")}},beforeunload:{postDispatch:function(t){void 0!==t.result&&t.originalEvent&&(t.originalEvent.returnValue=t.result)}}},simulate:function(t,e,n,i){var o=oe.extend(new oe.Event,n,{type:t,isSimulated:!0,originalEvent:{}});i?oe.event.trigger(o,null,e):oe.event.dispatch.call(e,o),o.isDefaultPrevented()&&n.preventDefault()}},oe.removeEvent=pe.removeEventListener?function(t,e,n){t.removeEventListener&&t.removeEventListener(e,n,!1)}:function(t,e,n){var i="on"+e;t.detachEvent&&(typeof t[i]===Se&&(t[i]=null),t.detachEvent(i,n))},oe.Event=function(t,e){return this instanceof oe.Event?(t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||void 0===t.defaultPrevented&&t.returnValue===!1?f:h):this.type=t,e&&oe.extend(this,e),this.timeStamp=t&&t.timeStamp||oe.now(),void(this[oe.expando]=!0)):new oe.Event(t,e)},oe.Event.prototype={isDefaultPrevented:h,isPropagationStopped:h,isImmediatePropagationStopped:h,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=f,t&&(t.preventDefault?t.preventDefault():t.returnValue=!1)},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=f,t&&(t.stopPropagation&&t.stopPropagation(),t.cancelBubble=!0)},stopImmediatePropagation:function(){var t=this.originalEvent;this.isImmediatePropagationStopped=f,t&&t.stopImmediatePropagation&&t.stopImmediatePropagation(),this.stopPropagation()}},oe.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(t,e){oe.event.special[t]={delegateType:e,bindType:e,handle:function(t){var n,i=this,o=t.relatedTarget,r=t.handleObj;return(!o||o!==i&&!oe.contains(i,o))&&(t.type=r.origType,n=r.handler.apply(this,arguments),t.type=e),n}}}),ne.submitBubbles||(oe.event.special.submit={setup:function(){return oe.nodeName(this,"form")?!1:void oe.event.add(this,"click._submit keypress._submit",function(t){var e=t.target,n=oe.nodeName(e,"input")||oe.nodeName(e,"button")?e.form:void 0;n&&!oe._data(n,"submitBubbles")&&(oe.event.add(n,"submit._submit",function(t){t._submit_bubble=!0}),oe._data(n,"submitBubbles",!0))})},postDispatch:function(t){t._submit_bubble&&(delete t._submit_bubble,this.parentNode&&!t.isTrigger&&oe.event.simulate("submit",this.parentNode,t,!0))},teardown:function(){return oe.nodeName(this,"form")?!1:void oe.event.remove(this,"._submit")}}),ne.changeBubbles||(oe.event.special.change={setup:function(){return Le.test(this.nodeName)?(("checkbox"===this.type||"radio"===this.type)&&(oe.event.add(this,"propertychange._change",function(t){"checked"===t.originalEvent.propertyName&&(this._just_changed=!0)}),oe.event.add(this,"click._change",function(t){this._just_changed&&!t.isTrigger&&(this._just_changed=!1),oe.event.simulate("change",this,t,!0)})),!1):void oe.event.add(this,"beforeactivate._change",function(t){var e=t.target;Le.test(e.nodeName)&&!oe._data(e,"changeBubbles")&&(oe.event.add(e,"change._change",function(t){!this.parentNode||t.isSimulated||t.isTrigger||oe.event.simulate("change",this.parentNode,t,!0)}),oe._data(e,"changeBubbles",!0))})},handle:function(t){var e=t.target;return this!==e||t.isSimulated||t.isTrigger||"radio"!==e.type&&"checkbox"!==e.type?t.handleObj.handler.apply(this,arguments):void 0},teardown:function(){return oe.event.remove(this,"._change"),!Le.test(this.nodeName)}}),ne.focusinBubbles||oe.each({focus:"focusin",blur:"focusout"},function(t,e){var n=function(t){oe.event.simulate(e,t.target,oe.event.fix(t),!0)};oe.event.special[e]={setup:function(){var i=this.ownerDocument||this,o=oe._data(i,e);o||i.addEventListener(t,n,!0),oe._data(i,e,(o||0)+1)},teardown:function(){var i=this.ownerDocument||this,o=oe._data(i,e)-1;o?oe._data(i,e,o):(i.removeEventListener(t,n,!0),oe._removeData(i,e))}}}),oe.fn.extend({on:function(t,e,n,i,o){var r,a;if("object"==typeof t){"string"!=typeof e&&(n=n||e,e=void 0);for(r in t)this.on(r,e,n,t[r],o);return this}if(null==n&&null==i?(i=e,n=e=void 0):null==i&&("string"==typeof e?(i=n,n=void 0):(i=n,n=e,e=void 0)),i===!1)i=h;else if(!i)return this;return 1===o&&(a=i,i=function(t){return oe().off(t),a.apply(this,arguments)},i.guid=a.guid||(a.guid=oe.guid++)),this.each(function(){oe.event.add(this,t,i,n,e)})},one:function(t,e,n,i){return this.on(t,e,n,i,1)},off:function(t,e,n){var i,o;if(t&&t.preventDefault&&t.handleObj)return i=t.handleObj,oe(t.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if("object"==typeof t){for(o in t)this.off(o,e,t[o]);return this}return(e===!1||"function"==typeof e)&&(n=e,e=void 0),n===!1&&(n=h),this.each(function(){oe.event.remove(this,t,n,e)})},trigger:function(t,e){return this.each(function(){oe.event.trigger(t,e,this)})},triggerHandler:function(t,e){var n=this[0];return n?oe.event.trigger(t,e,n,!0):void 0}});var Me="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",Qe=/ jQuery\d+="(?:null|\d+)"/g,Oe=new RegExp("<(?:"+Me+")[\\s/>]","i"),Re=/^\s+/,je=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,He=/<([\w:]+)/,Fe=/<tbody/i,ze=/<|&#?\w+;/,Be=/<(?:script|style|link)/i,We=/checked\s*(?:[^=]|=\s*.checked.)/i,Ue=/^$|\/(?:java|ecma)script/i,$e=/^true\/(.*)/,Xe=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,Ge={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:ne.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},Ve=g(pe),Ye=Ve.appendChild(pe.createElement("div"));Ge.optgroup=Ge.option,Ge.tbody=Ge.tfoot=Ge.colgroup=Ge.caption=Ge.thead,Ge.th=Ge.td,oe.extend({clone:function(t,e,n){var i,o,r,a,s,l=oe.contains(t.ownerDocument,t);if(ne.html5Clone||oe.isXMLDoc(t)||!Oe.test("<"+t.nodeName+">")?r=t.cloneNode(!0):(Ye.innerHTML=t.outerHTML,Ye.removeChild(r=Ye.firstChild)),!(ne.noCloneEvent&&ne.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||oe.isXMLDoc(t)))for(i=m(r),s=m(t),a=0;null!=(o=s[a]);++a)i[a]&&S(o,i[a]);if(e)if(n)for(s=s||m(t),i=i||m(r),a=0;null!=(o=s[a]);a++)w(o,i[a]);else w(t,r);return i=m(r,"script"),i.length>0&&C(i,!l&&m(t,"script")),i=s=o=null,r},buildFragment:function(t,e,n,i){for(var o,r,a,s,l,u,d,c=t.length,f=g(e),h=[],p=0;c>p;p++)if(r=t[p],r||0===r)if("object"===oe.type(r))oe.merge(h,r.nodeType?[r]:r);else if(ze.test(r)){for(s=s||f.appendChild(e.createElement("div")),l=(He.exec(r)||["",""])[1].toLowerCase(),d=Ge[l]||Ge._default,s.innerHTML=d[1]+r.replace(je,"<$1></$2>")+d[2],o=d[0];o--;)s=s.lastChild;if(!ne.leadingWhitespace&&Re.test(r)&&h.push(e.createTextNode(Re.exec(r)[0])),!ne.tbody)for(r="table"!==l||Fe.test(r)?"<table>"!==d[1]||Fe.test(r)?0:s:s.firstChild,o=r&&r.childNodes.length;o--;)oe.nodeName(u=r.childNodes[o],"tbody")&&!u.childNodes.length&&r.removeChild(u);
for(oe.merge(h,s.childNodes),s.textContent="";s.firstChild;)s.removeChild(s.firstChild);s=f.lastChild}else h.push(e.createTextNode(r));for(s&&f.removeChild(s),ne.appendChecked||oe.grep(m(h,"input"),b),p=0;r=h[p++];)if((!i||-1===oe.inArray(r,i))&&(a=oe.contains(r.ownerDocument,r),s=m(f.appendChild(r),"script"),a&&C(s),n))for(o=0;r=s[o++];)Ue.test(r.type||"")&&n.push(r);return s=null,f},cleanData:function(t,e){for(var n,i,o,r,a=0,s=oe.expando,l=oe.cache,u=ne.deleteExpando,d=oe.event.special;null!=(n=t[a]);a++)if((e||oe.acceptData(n))&&(o=n[s],r=o&&l[o])){if(r.events)for(i in r.events)d[i]?oe.event.remove(n,i):oe.removeEvent(n,i,r.handle);l[o]&&(delete l[o],u?delete n[s]:typeof n.removeAttribute!==Se?n.removeAttribute(s):n[s]=null,X.push(o))}}}),oe.fn.extend({text:function(t){return Ne(this,function(t){return void 0===t?oe.text(this):this.empty().append((this[0]&&this[0].ownerDocument||pe).createTextNode(t))},null,t,arguments.length)},append:function(){return this.domManip(arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=v(this,t);e.appendChild(t)}})},prepend:function(){return this.domManip(arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=v(this,t);e.insertBefore(t,e.firstChild)}})},before:function(){return this.domManip(arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this)})},after:function(){return this.domManip(arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)})},remove:function(t,e){for(var n,i=t?oe.filter(t,this):this,o=0;null!=(n=i[o]);o++)e||1!==n.nodeType||oe.cleanData(m(n)),n.parentNode&&(e&&oe.contains(n.ownerDocument,n)&&C(m(n,"script")),n.parentNode.removeChild(n));return this},empty:function(){for(var t,e=0;null!=(t=this[e]);e++){for(1===t.nodeType&&oe.cleanData(m(t,!1));t.firstChild;)t.removeChild(t.firstChild);t.options&&oe.nodeName(t,"select")&&(t.options.length=0)}return this},clone:function(t,e){return t=null==t?!1:t,e=null==e?t:e,this.map(function(){return oe.clone(this,t,e)})},html:function(t){return Ne(this,function(t){var e=this[0]||{},n=0,i=this.length;if(void 0===t)return 1===e.nodeType?e.innerHTML.replace(Qe,""):void 0;if(!("string"!=typeof t||Be.test(t)||!ne.htmlSerialize&&Oe.test(t)||!ne.leadingWhitespace&&Re.test(t)||Ge[(He.exec(t)||["",""])[1].toLowerCase()])){t=t.replace(je,"<$1></$2>");try{for(;i>n;n++)e=this[n]||{},1===e.nodeType&&(oe.cleanData(m(e,!1)),e.innerHTML=t);e=0}catch(o){}}e&&this.empty().append(t)},null,t,arguments.length)},replaceWith:function(){var t=arguments[0];return this.domManip(arguments,function(e){t=this.parentNode,oe.cleanData(m(this)),t&&t.replaceChild(e,this)}),t&&(t.length||t.nodeType)?this:this.remove()},detach:function(t){return this.remove(t,!0)},domManip:function(t,e){t=V.apply([],t);var n,i,o,r,a,s,l=0,u=this.length,d=this,c=u-1,f=t[0],h=oe.isFunction(f);if(h||u>1&&"string"==typeof f&&!ne.checkClone&&We.test(f))return this.each(function(n){var i=d.eq(n);h&&(t[0]=f.call(this,n,i.html())),i.domManip(t,e)});if(u&&(s=oe.buildFragment(t,this[0].ownerDocument,!1,this),n=s.firstChild,1===s.childNodes.length&&(s=n),n)){for(r=oe.map(m(s,"script"),y),o=r.length;u>l;l++)i=s,l!==c&&(i=oe.clone(i,!0,!0),o&&oe.merge(r,m(i,"script"))),e.call(this[l],i,l);if(o)for(a=r[r.length-1].ownerDocument,oe.map(r,x),l=0;o>l;l++)i=r[l],Ue.test(i.type||"")&&!oe._data(i,"globalEval")&&oe.contains(a,i)&&(i.src?oe._evalUrl&&oe._evalUrl(i.src):oe.globalEval((i.text||i.textContent||i.innerHTML||"").replace(Xe,"")));s=n=null}return this}}),oe.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(t,e){oe.fn[t]=function(t){for(var n,i=0,o=[],r=oe(t),a=r.length-1;a>=i;i++)n=i===a?this:this.clone(!0),oe(r[i])[e](n),Y.apply(o,n.get());return this.pushStack(o)}});var Ke,Ze={};!function(){var t;ne.shrinkWrapBlocks=function(){if(null!=t)return t;t=!1;var e,n,i;return n=pe.getElementsByTagName("body")[0],n&&n.style?(e=pe.createElement("div"),i=pe.createElement("div"),i.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",n.appendChild(i).appendChild(e),typeof e.style.zoom!==Se&&(e.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:1px;width:1px;zoom:1",e.appendChild(pe.createElement("div")).style.width="5px",t=3!==e.offsetWidth),n.removeChild(i),t):void 0}}();var tn,en,nn=/^margin/,on=new RegExp("^("+Te+")(?!px)[a-z%]+$","i"),rn=/^(top|right|bottom|left)$/;t.getComputedStyle?(tn=function(e){return e.ownerDocument.defaultView.opener?e.ownerDocument.defaultView.getComputedStyle(e,null):t.getComputedStyle(e,null)},en=function(t,e,n){var i,o,r,a,s=t.style;return n=n||tn(t),a=n?n.getPropertyValue(e)||n[e]:void 0,n&&(""!==a||oe.contains(t.ownerDocument,t)||(a=oe.style(t,e)),on.test(a)&&nn.test(e)&&(i=s.width,o=s.minWidth,r=s.maxWidth,s.minWidth=s.maxWidth=s.width=a,a=n.width,s.width=i,s.minWidth=o,s.maxWidth=r)),void 0===a?a:a+""}):pe.documentElement.currentStyle&&(tn=function(t){return t.currentStyle},en=function(t,e,n){var i,o,r,a,s=t.style;return n=n||tn(t),a=n?n[e]:void 0,null==a&&s&&s[e]&&(a=s[e]),on.test(a)&&!rn.test(e)&&(i=s.left,o=t.runtimeStyle,r=o&&o.left,r&&(o.left=t.currentStyle.left),s.left="fontSize"===e?"1em":a,a=s.pixelLeft+"px",s.left=i,r&&(o.left=r)),void 0===a?a:a+""||"auto"}),function(){function e(){var e,n,i,o;n=pe.getElementsByTagName("body")[0],n&&n.style&&(e=pe.createElement("div"),i=pe.createElement("div"),i.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",n.appendChild(i).appendChild(e),e.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute",r=a=!1,l=!0,t.getComputedStyle&&(r="1%"!==(t.getComputedStyle(e,null)||{}).top,a="4px"===(t.getComputedStyle(e,null)||{width:"4px"}).width,o=e.appendChild(pe.createElement("div")),o.style.cssText=e.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",o.style.marginRight=o.style.width="0",e.style.width="1px",l=!parseFloat((t.getComputedStyle(o,null)||{}).marginRight),e.removeChild(o)),e.innerHTML="<table><tr><td></td><td>t</td></tr></table>",o=e.getElementsByTagName("td"),o[0].style.cssText="margin:0;border:0;padding:0;display:none",s=0===o[0].offsetHeight,s&&(o[0].style.display="",o[1].style.display="none",s=0===o[0].offsetHeight),n.removeChild(i))}var n,i,o,r,a,s,l;n=pe.createElement("div"),n.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",o=n.getElementsByTagName("a")[0],i=o&&o.style,i&&(i.cssText="float:left;opacity:.5",ne.opacity="0.5"===i.opacity,ne.cssFloat=!!i.cssFloat,n.style.backgroundClip="content-box",n.cloneNode(!0).style.backgroundClip="",ne.clearCloneStyle="content-box"===n.style.backgroundClip,ne.boxSizing=""===i.boxSizing||""===i.MozBoxSizing||""===i.WebkitBoxSizing,oe.extend(ne,{reliableHiddenOffsets:function(){return null==s&&e(),s},boxSizingReliable:function(){return null==a&&e(),a},pixelPosition:function(){return null==r&&e(),r},reliableMarginRight:function(){return null==l&&e(),l}}))}(),oe.swap=function(t,e,n,i){var o,r,a={};for(r in e)a[r]=t.style[r],t.style[r]=e[r];o=n.apply(t,i||[]);for(r in e)t.style[r]=a[r];return o};var an=/alpha\([^)]*\)/i,sn=/opacity\s*=\s*([^)]*)/,ln=/^(none|table(?!-c[ea]).+)/,un=new RegExp("^("+Te+")(.*)$","i"),dn=new RegExp("^([+-])=("+Te+")","i"),cn={position:"absolute",visibility:"hidden",display:"block"},fn={letterSpacing:"0",fontWeight:"400"},hn=["Webkit","O","Moz","ms"];oe.extend({cssHooks:{opacity:{get:function(t,e){if(e){var n=en(t,"opacity");return""===n?"1":n}}}},cssNumber:{columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":ne.cssFloat?"cssFloat":"styleFloat"},style:function(t,e,n,i){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var o,r,a,s=oe.camelCase(e),l=t.style;if(e=oe.cssProps[s]||(oe.cssProps[s]=k(l,s)),a=oe.cssHooks[e]||oe.cssHooks[s],void 0===n)return a&&"get"in a&&void 0!==(o=a.get(t,!1,i))?o:l[e];if(r=typeof n,"string"===r&&(o=dn.exec(n))&&(n=(o[1]+1)*o[2]+parseFloat(oe.css(t,e)),r="number"),null!=n&&n===n&&("number"!==r||oe.cssNumber[s]||(n+="px"),ne.clearCloneStyle||""!==n||0!==e.indexOf("background")||(l[e]="inherit"),!(a&&"set"in a&&void 0===(n=a.set(t,n,i)))))try{l[e]=n}catch(u){}}},css:function(t,e,n,i){var o,r,a,s=oe.camelCase(e);return e=oe.cssProps[s]||(oe.cssProps[s]=k(t.style,s)),a=oe.cssHooks[e]||oe.cssHooks[s],a&&"get"in a&&(r=a.get(t,!0,n)),void 0===r&&(r=en(t,e,i)),"normal"===r&&e in fn&&(r=fn[e]),""===n||n?(o=parseFloat(r),n===!0||oe.isNumeric(o)?o||0:r):r}}),oe.each(["height","width"],function(t,e){oe.cssHooks[e]={get:function(t,n,i){return n?ln.test(oe.css(t,"display"))&&0===t.offsetWidth?oe.swap(t,cn,function(){return L(t,e,i)}):L(t,e,i):void 0},set:function(t,n,i){var o=i&&tn(t);return N(t,n,i?D(t,e,i,ne.boxSizing&&"border-box"===oe.css(t,"boxSizing",!1,o),o):0)}}}),ne.opacity||(oe.cssHooks.opacity={get:function(t,e){return sn.test((e&&t.currentStyle?t.currentStyle.filter:t.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":e?"1":""},set:function(t,e){var n=t.style,i=t.currentStyle,o=oe.isNumeric(e)?"alpha(opacity="+100*e+")":"",r=i&&i.filter||n.filter||"";n.zoom=1,(e>=1||""===e)&&""===oe.trim(r.replace(an,""))&&n.removeAttribute&&(n.removeAttribute("filter"),""===e||i&&!i.filter)||(n.filter=an.test(r)?r.replace(an,o):r+" "+o)}}),oe.cssHooks.marginRight=T(ne.reliableMarginRight,function(t,e){return e?oe.swap(t,{display:"inline-block"},en,[t,"marginRight"]):void 0}),oe.each({margin:"",padding:"",border:"Width"},function(t,e){oe.cssHooks[t+e]={expand:function(n){for(var i=0,o={},r="string"==typeof n?n.split(" "):[n];4>i;i++)o[t+ke[i]+e]=r[i]||r[i-2]||r[0];return o}},nn.test(t)||(oe.cssHooks[t+e].set=N)}),oe.fn.extend({css:function(t,e){return Ne(this,function(t,e,n){var i,o,r={},a=0;if(oe.isArray(e)){for(i=tn(t),o=e.length;o>a;a++)r[e[a]]=oe.css(t,e[a],!1,i);return r}return void 0!==n?oe.style(t,e,n):oe.css(t,e)},t,e,arguments.length>1)},show:function(){return E(this,!0)},hide:function(){return E(this)},toggle:function(t){return"boolean"==typeof t?t?this.show():this.hide():this.each(function(){Ee(this)?oe(this).show():oe(this).hide()})}}),oe.Tween=J,J.prototype={constructor:J,init:function(t,e,n,i,o,r){this.elem=t,this.prop=n,this.easing=o||"swing",this.options=e,this.start=this.now=this.cur(),this.end=i,this.unit=r||(oe.cssNumber[n]?"":"px")},cur:function(){var t=J.propHooks[this.prop];return t&&t.get?t.get(this):J.propHooks._default.get(this)},run:function(t){var e,n=J.propHooks[this.prop];return this.pos=e=this.options.duration?oe.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):t,this.now=(this.end-this.start)*e+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):J.propHooks._default.set(this),this}},J.prototype.init.prototype=J.prototype,J.propHooks={_default:{get:function(t){var e;return null==t.elem[t.prop]||t.elem.style&&null!=t.elem.style[t.prop]?(e=oe.css(t.elem,t.prop,""),e&&"auto"!==e?e:0):t.elem[t.prop]},set:function(t){oe.fx.step[t.prop]?oe.fx.step[t.prop](t):t.elem.style&&(null!=t.elem.style[oe.cssProps[t.prop]]||oe.cssHooks[t.prop])?oe.style(t.elem,t.prop,t.now+t.unit):t.elem[t.prop]=t.now}}},J.propHooks.scrollTop=J.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},oe.easing={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2}},oe.fx=J.prototype.init,oe.fx.step={};var pn,gn,mn=/^(?:toggle|show|hide)$/,bn=new RegExp("^(?:([+-])=|)("+Te+")([a-z%]*)$","i"),vn=/queueHooks$/,yn=[M],xn={"*":[function(t,e){var n=this.createTween(t,e),i=n.cur(),o=bn.exec(e),r=o&&o[3]||(oe.cssNumber[t]?"":"px"),a=(oe.cssNumber[t]||"px"!==r&&+i)&&bn.exec(oe.css(n.elem,t)),s=1,l=20;if(a&&a[3]!==r){r=r||a[3],o=o||[],a=+i||1;do s=s||".5",a/=s,oe.style(n.elem,t,a+r);while(s!==(s=n.cur()/i)&&1!==s&&--l)}return o&&(a=n.start=+a||+i||0,n.unit=r,n.end=o[1]?a+(o[1]+1)*o[2]:+o[2]),n}]};oe.Animation=oe.extend(O,{tweener:function(t,e){oe.isFunction(t)?(e=t,t=["*"]):t=t.split(" ");for(var n,i=0,o=t.length;o>i;i++)n=t[i],xn[n]=xn[n]||[],xn[n].unshift(e)},prefilter:function(t,e){e?yn.unshift(t):yn.push(t)}}),oe.speed=function(t,e,n){var i=t&&"object"==typeof t?oe.extend({},t):{complete:n||!n&&e||oe.isFunction(t)&&t,duration:t,easing:n&&e||e&&!oe.isFunction(e)&&e};return i.duration=oe.fx.off?0:"number"==typeof i.duration?i.duration:i.duration in oe.fx.speeds?oe.fx.speeds[i.duration]:oe.fx.speeds._default,(null==i.queue||i.queue===!0)&&(i.queue="fx"),i.old=i.complete,i.complete=function(){oe.isFunction(i.old)&&i.old.call(this),i.queue&&oe.dequeue(this,i.queue)},i},oe.fn.extend({fadeTo:function(t,e,n,i){return this.filter(Ee).css("opacity",0).show().end().animate({opacity:e},t,n,i)},animate:function(t,e,n,i){var o=oe.isEmptyObject(t),r=oe.speed(e,n,i),a=function(){var e=O(this,oe.extend({},t),r);(o||oe._data(this,"finish"))&&e.stop(!0)};return a.finish=a,o||r.queue===!1?this.each(a):this.queue(r.queue,a)},stop:function(t,e,n){var i=function(t){var e=t.stop;delete t.stop,e(n)};return"string"!=typeof t&&(n=e,e=t,t=void 0),e&&t!==!1&&this.queue(t||"fx",[]),this.each(function(){var e=!0,o=null!=t&&t+"queueHooks",r=oe.timers,a=oe._data(this);if(o)a[o]&&a[o].stop&&i(a[o]);else for(o in a)a[o]&&a[o].stop&&vn.test(o)&&i(a[o]);for(o=r.length;o--;)r[o].elem!==this||null!=t&&r[o].queue!==t||(r[o].anim.stop(n),e=!1,r.splice(o,1));(e||!n)&&oe.dequeue(this,t)})},finish:function(t){return t!==!1&&(t=t||"fx"),this.each(function(){var e,n=oe._data(this),i=n[t+"queue"],o=n[t+"queueHooks"],r=oe.timers,a=i?i.length:0;for(n.finish=!0,oe.queue(this,t,[]),o&&o.stop&&o.stop.call(this,!0),e=r.length;e--;)r[e].elem===this&&r[e].queue===t&&(r[e].anim.stop(!0),r.splice(e,1));for(e=0;a>e;e++)i[e]&&i[e].finish&&i[e].finish.call(this);delete n.finish})}}),oe.each(["toggle","show","hide"],function(t,e){var n=oe.fn[e];oe.fn[e]=function(t,i,o){return null==t||"boolean"==typeof t?n.apply(this,arguments):this.animate(I(e,!0),t,i,o)}}),oe.each({slideDown:I("show"),slideUp:I("hide"),slideToggle:I("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(t,e){oe.fn[t]=function(t,n,i){return this.animate(e,t,n,i)}}),oe.timers=[],oe.fx.tick=function(){var t,e=oe.timers,n=0;for(pn=oe.now();n<e.length;n++)t=e[n],t()||e[n]!==t||e.splice(n--,1);e.length||oe.fx.stop(),pn=void 0},oe.fx.timer=function(t){oe.timers.push(t),t()?oe.fx.start():oe.timers.pop()},oe.fx.interval=13,oe.fx.start=function(){gn||(gn=setInterval(oe.fx.tick,oe.fx.interval))},oe.fx.stop=function(){clearInterval(gn),gn=null},oe.fx.speeds={slow:600,fast:200,_default:400},oe.fn.delay=function(t,e){return t=oe.fx?oe.fx.speeds[t]||t:t,e=e||"fx",this.queue(e,function(e,n){var i=setTimeout(e,t);n.stop=function(){clearTimeout(i)}})},function(){var t,e,n,i,o;e=pe.createElement("div"),e.setAttribute("className","t"),e.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",i=e.getElementsByTagName("a")[0],n=pe.createElement("select"),o=n.appendChild(pe.createElement("option")),t=e.getElementsByTagName("input")[0],i.style.cssText="top:1px",ne.getSetAttribute="t"!==e.className,ne.style=/top/.test(i.getAttribute("style")),ne.hrefNormalized="/a"===i.getAttribute("href"),ne.checkOn=!!t.value,ne.optSelected=o.selected,ne.enctype=!!pe.createElement("form").enctype,n.disabled=!0,ne.optDisabled=!o.disabled,t=pe.createElement("input"),t.setAttribute("value",""),ne.input=""===t.getAttribute("value"),t.value="t",t.setAttribute("type","radio"),ne.radioValue="t"===t.value}();var Cn=/\r/g;oe.fn.extend({val:function(t){var e,n,i,o=this[0];{if(arguments.length)return i=oe.isFunction(t),this.each(function(n){var o;1===this.nodeType&&(o=i?t.call(this,n,oe(this).val()):t,null==o?o="":"number"==typeof o?o+="":oe.isArray(o)&&(o=oe.map(o,function(t){return null==t?"":t+""})),e=oe.valHooks[this.type]||oe.valHooks[this.nodeName.toLowerCase()],e&&"set"in e&&void 0!==e.set(this,o,"value")||(this.value=o))});if(o)return e=oe.valHooks[o.type]||oe.valHooks[o.nodeName.toLowerCase()],e&&"get"in e&&void 0!==(n=e.get(o,"value"))?n:(n=o.value,"string"==typeof n?n.replace(Cn,""):null==n?"":n)}}}),oe.extend({valHooks:{option:{get:function(t){var e=oe.find.attr(t,"value");return null!=e?e:oe.trim(oe.text(t))}},select:{get:function(t){for(var e,n,i=t.options,o=t.selectedIndex,r="select-one"===t.type||0>o,a=r?null:[],s=r?o+1:i.length,l=0>o?s:r?o:0;s>l;l++)if(n=i[l],!(!n.selected&&l!==o||(ne.optDisabled?n.disabled:null!==n.getAttribute("disabled"))||n.parentNode.disabled&&oe.nodeName(n.parentNode,"optgroup"))){if(e=oe(n).val(),r)return e;a.push(e)}return a},set:function(t,e){for(var n,i,o=t.options,r=oe.makeArray(e),a=o.length;a--;)if(i=o[a],oe.inArray(oe.valHooks.option.get(i),r)>=0)try{i.selected=n=!0}catch(s){i.scrollHeight}else i.selected=!1;return n||(t.selectedIndex=-1),o}}}}),oe.each(["radio","checkbox"],function(){oe.valHooks[this]={set:function(t,e){return oe.isArray(e)?t.checked=oe.inArray(oe(t).val(),e)>=0:void 0}},ne.checkOn||(oe.valHooks[this].get=function(t){return null===t.getAttribute("value")?"on":t.value})});var wn,Sn,_n=oe.expr.attrHandle,qn=/^(?:checked|selected)$/i,Tn=ne.getSetAttribute,kn=ne.input;oe.fn.extend({attr:function(t,e){return Ne(this,oe.attr,t,e,arguments.length>1)},removeAttr:function(t){return this.each(function(){oe.removeAttr(this,t)})}}),oe.extend({attr:function(t,e,n){var i,o,r=t.nodeType;if(t&&3!==r&&8!==r&&2!==r)return typeof t.getAttribute===Se?oe.prop(t,e,n):(1===r&&oe.isXMLDoc(t)||(e=e.toLowerCase(),i=oe.attrHooks[e]||(oe.expr.match.bool.test(e)?Sn:wn)),void 0===n?i&&"get"in i&&null!==(o=i.get(t,e))?o:(o=oe.find.attr(t,e),null==o?void 0:o):null!==n?i&&"set"in i&&void 0!==(o=i.set(t,n,e))?o:(t.setAttribute(e,n+""),n):void oe.removeAttr(t,e))},removeAttr:function(t,e){var n,i,o=0,r=e&&e.match(ye);if(r&&1===t.nodeType)for(;n=r[o++];)i=oe.propFix[n]||n,oe.expr.match.bool.test(n)?kn&&Tn||!qn.test(n)?t[i]=!1:t[oe.camelCase("default-"+n)]=t[i]=!1:oe.attr(t,n,""),t.removeAttribute(Tn?n:i)},attrHooks:{type:{set:function(t,e){if(!ne.radioValue&&"radio"===e&&oe.nodeName(t,"input")){var n=t.value;return t.setAttribute("type",e),n&&(t.value=n),e}}}}}),Sn={set:function(t,e,n){return e===!1?oe.removeAttr(t,n):kn&&Tn||!qn.test(n)?t.setAttribute(!Tn&&oe.propFix[n]||n,n):t[oe.camelCase("default-"+n)]=t[n]=!0,n}},oe.each(oe.expr.match.bool.source.match(/\w+/g),function(t,e){var n=_n[e]||oe.find.attr;_n[e]=kn&&Tn||!qn.test(e)?function(t,e,i){var o,r;return i||(r=_n[e],_n[e]=o,o=null!=n(t,e,i)?e.toLowerCase():null,_n[e]=r),o}:function(t,e,n){return n?void 0:t[oe.camelCase("default-"+e)]?e.toLowerCase():null}}),kn&&Tn||(oe.attrHooks.value={set:function(t,e,n){return oe.nodeName(t,"input")?void(t.defaultValue=e):wn&&wn.set(t,e,n)}}),Tn||(wn={set:function(t,e,n){var i=t.getAttributeNode(n);return i||t.setAttributeNode(i=t.ownerDocument.createAttribute(n)),i.value=e+="","value"===n||e===t.getAttribute(n)?e:void 0}},_n.id=_n.name=_n.coords=function(t,e,n){var i;return n?void 0:(i=t.getAttributeNode(e))&&""!==i.value?i.value:null},oe.valHooks.button={get:function(t,e){var n=t.getAttributeNode(e);return n&&n.specified?n.value:void 0},set:wn.set},oe.attrHooks.contenteditable={set:function(t,e,n){wn.set(t,""===e?!1:e,n)}},oe.each(["width","height"],function(t,e){oe.attrHooks[e]={set:function(t,n){return""===n?(t.setAttribute(e,"auto"),n):void 0}}})),ne.style||(oe.attrHooks.style={get:function(t){return t.style.cssText||void 0},set:function(t,e){return t.style.cssText=e+""}});var En=/^(?:input|select|textarea|button|object)$/i,Nn=/^(?:a|area)$/i;oe.fn.extend({prop:function(t,e){return Ne(this,oe.prop,t,e,arguments.length>1)},removeProp:function(t){return t=oe.propFix[t]||t,this.each(function(){try{this[t]=void 0,delete this[t]}catch(e){}})}}),oe.extend({propFix:{"for":"htmlFor","class":"className"},prop:function(t,e,n){var i,o,r,a=t.nodeType;if(t&&3!==a&&8!==a&&2!==a)return r=1!==a||!oe.isXMLDoc(t),r&&(e=oe.propFix[e]||e,o=oe.propHooks[e]),void 0!==n?o&&"set"in o&&void 0!==(i=o.set(t,n,e))?i:t[e]=n:o&&"get"in o&&null!==(i=o.get(t,e))?i:t[e]},propHooks:{tabIndex:{get:function(t){var e=oe.find.attr(t,"tabindex");return e?parseInt(e,10):En.test(t.nodeName)||Nn.test(t.nodeName)&&t.href?0:-1}}}}),ne.hrefNormalized||oe.each(["href","src"],function(t,e){oe.propHooks[e]={get:function(t){return t.getAttribute(e,4)}}}),ne.optSelected||(oe.propHooks.selected={get:function(t){var e=t.parentNode;return e&&(e.selectedIndex,e.parentNode&&e.parentNode.selectedIndex),null}}),oe.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){oe.propFix[this.toLowerCase()]=this}),ne.enctype||(oe.propFix.enctype="encoding");var Dn=/[\t\r\n\f]/g;oe.fn.extend({addClass:function(t){var e,n,i,o,r,a,s=0,l=this.length,u="string"==typeof t&&t;if(oe.isFunction(t))return this.each(function(e){oe(this).addClass(t.call(this,e,this.className))});if(u)for(e=(t||"").match(ye)||[];l>s;s++)if(n=this[s],i=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(Dn," "):" ")){for(r=0;o=e[r++];)i.indexOf(" "+o+" ")<0&&(i+=o+" ");a=oe.trim(i),n.className!==a&&(n.className=a)}return this},removeClass:function(t){var e,n,i,o,r,a,s=0,l=this.length,u=0===arguments.length||"string"==typeof t&&t;if(oe.isFunction(t))return this.each(function(e){oe(this).removeClass(t.call(this,e,this.className))});if(u)for(e=(t||"").match(ye)||[];l>s;s++)if(n=this[s],i=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(Dn," "):"")){for(r=0;o=e[r++];)for(;i.indexOf(" "+o+" ")>=0;)i=i.replace(" "+o+" "," ");a=t?oe.trim(i):"",n.className!==a&&(n.className=a)}return this},toggleClass:function(t,e){var n=typeof t;return"boolean"==typeof e&&"string"===n?e?this.addClass(t):this.removeClass(t):this.each(oe.isFunction(t)?function(n){oe(this).toggleClass(t.call(this,n,this.className,e),e)}:function(){if("string"===n)for(var e,i=0,o=oe(this),r=t.match(ye)||[];e=r[i++];)o.hasClass(e)?o.removeClass(e):o.addClass(e);else(n===Se||"boolean"===n)&&(this.className&&oe._data(this,"__className__",this.className),this.className=this.className||t===!1?"":oe._data(this,"__className__")||"")})},hasClass:function(t){for(var e=" "+t+" ",n=0,i=this.length;i>n;n++)if(1===this[n].nodeType&&(" "+this[n].className+" ").replace(Dn," ").indexOf(e)>=0)return!0;return!1}}),oe.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(t,e){oe.fn[e]=function(t,n){return arguments.length>0?this.on(e,null,t,n):this.trigger(e)}}),oe.fn.extend({hover:function(t,e){return this.mouseenter(t).mouseleave(e||t)},bind:function(t,e,n){return this.on(t,null,e,n)},unbind:function(t,e){return this.off(t,null,e)},delegate:function(t,e,n,i){return this.on(e,t,n,i)},undelegate:function(t,e,n){return 1===arguments.length?this.off(t,"**"):this.off(e,t||"**",n)}});var Ln=oe.now(),Jn=/\?/,An=/(,)|(\[|{)|(}|])|"(?:[^"\\\r\n]|\\["\\\/bfnrt]|\\u[\da-fA-F]{4})*"\s*:?|true|false|null|-?(?!0\d)\d+(?:\.\d+|)(?:[eE][+-]?\d+|)/g;oe.parseJSON=function(e){if(t.JSON&&t.JSON.parse)return t.JSON.parse(e+"");var n,i=null,o=oe.trim(e+"");return o&&!oe.trim(o.replace(An,function(t,e,o,r){return n&&e&&(i=0),0===i?t:(n=o||e,i+=!r-!o,"")}))?Function("return "+o)():oe.error("Invalid JSON: "+e)},oe.parseXML=function(e){var n,i;if(!e||"string"!=typeof e)return null;try{t.DOMParser?(i=new DOMParser,n=i.parseFromString(e,"text/xml")):(n=new ActiveXObject("Microsoft.XMLDOM"),n.async="false",n.loadXML(e))}catch(o){n=void 0}return n&&n.documentElement&&!n.getElementsByTagName("parsererror").length||oe.error("Invalid XML: "+e),n};var In,Pn,Mn=/#.*$/,Qn=/([?&])_=[^&]*/,On=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,Rn=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,jn=/^(?:GET|HEAD)$/,Hn=/^\/\//,Fn=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,zn={},Bn={},Wn="*/".concat("*");try{Pn=location.href}catch(Un){Pn=pe.createElement("a"),Pn.href="",Pn=Pn.href}In=Fn.exec(Pn.toLowerCase())||[],oe.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Pn,type:"GET",isLocal:Rn.test(In[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Wn,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":oe.parseJSON,"text xml":oe.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,e){return e?H(H(t,oe.ajaxSettings),e):H(oe.ajaxSettings,t)},ajaxPrefilter:R(zn),ajaxTransport:R(Bn),ajax:function(t,e){function n(t,e,n,i){var o,d,b,v,x,w=e;2!==y&&(y=2,s&&clearTimeout(s),u=void 0,a=i||"",C.readyState=t>0?4:0,o=t>=200&&300>t||304===t,n&&(v=F(c,C,n)),v=z(c,v,C,o),o?(c.ifModified&&(x=C.getResponseHeader("Last-Modified"),x&&(oe.lastModified[r]=x),x=C.getResponseHeader("etag"),x&&(oe.etag[r]=x)),204===t||"HEAD"===c.type?w="nocontent":304===t?w="notmodified":(w=v.state,d=v.data,b=v.error,o=!b)):(b=w,(t||!w)&&(w="error",0>t&&(t=0))),C.status=t,C.statusText=(e||w)+"",o?p.resolveWith(f,[d,w,C]):p.rejectWith(f,[C,w,b]),C.statusCode(m),m=void 0,l&&h.trigger(o?"ajaxSuccess":"ajaxError",[C,c,o?d:b]),g.fireWith(f,[C,w]),l&&(h.trigger("ajaxComplete",[C,c]),--oe.active||oe.event.trigger("ajaxStop")))}"object"==typeof t&&(e=t,t=void 0),e=e||{};var i,o,r,a,s,l,u,d,c=oe.ajaxSetup({},e),f=c.context||c,h=c.context&&(f.nodeType||f.jquery)?oe(f):oe.event,p=oe.Deferred(),g=oe.Callbacks("once memory"),m=c.statusCode||{},b={},v={},y=0,x="canceled",C={readyState:0,getResponseHeader:function(t){var e;if(2===y){if(!d)for(d={};e=On.exec(a);)d[e[1].toLowerCase()]=e[2];e=d[t.toLowerCase()]}return null==e?null:e},getAllResponseHeaders:function(){return 2===y?a:null},setRequestHeader:function(t,e){var n=t.toLowerCase();return y||(t=v[n]=v[n]||t,b[t]=e),this},overrideMimeType:function(t){return y||(c.mimeType=t),this},statusCode:function(t){var e;if(t)if(2>y)for(e in t)m[e]=[m[e],t[e]];else C.always(t[C.status]);return this},abort:function(t){var e=t||x;return u&&u.abort(e),n(0,e),this}};if(p.promise(C).complete=g.add,C.success=C.done,C.error=C.fail,c.url=((t||c.url||Pn)+"").replace(Mn,"").replace(Hn,In[1]+"//"),c.type=e.method||e.type||c.method||c.type,c.dataTypes=oe.trim(c.dataType||"*").toLowerCase().match(ye)||[""],null==c.crossDomain&&(i=Fn.exec(c.url.toLowerCase()),c.crossDomain=!(!i||i[1]===In[1]&&i[2]===In[2]&&(i[3]||("http:"===i[1]?"80":"443"))===(In[3]||("http:"===In[1]?"80":"443")))),c.data&&c.processData&&"string"!=typeof c.data&&(c.data=oe.param(c.data,c.traditional)),j(zn,c,e,C),2===y)return C;l=oe.event&&c.global,l&&0===oe.active++&&oe.event.trigger("ajaxStart"),c.type=c.type.toUpperCase(),c.hasContent=!jn.test(c.type),r=c.url,c.hasContent||(c.data&&(r=c.url+=(Jn.test(r)?"&":"?")+c.data,delete c.data),c.cache===!1&&(c.url=Qn.test(r)?r.replace(Qn,"$1_="+Ln++):r+(Jn.test(r)?"&":"?")+"_="+Ln++)),c.ifModified&&(oe.lastModified[r]&&C.setRequestHeader("If-Modified-Since",oe.lastModified[r]),oe.etag[r]&&C.setRequestHeader("If-None-Match",oe.etag[r])),(c.data&&c.hasContent&&c.contentType!==!1||e.contentType)&&C.setRequestHeader("Content-Type",c.contentType),C.setRequestHeader("Accept",c.dataTypes[0]&&c.accepts[c.dataTypes[0]]?c.accepts[c.dataTypes[0]]+("*"!==c.dataTypes[0]?", "+Wn+"; q=0.01":""):c.accepts["*"]);for(o in c.headers)C.setRequestHeader(o,c.headers[o]);if(c.beforeSend&&(c.beforeSend.call(f,C,c)===!1||2===y))return C.abort();x="abort";for(o in{success:1,error:1,complete:1})C[o](c[o]);if(u=j(Bn,c,e,C)){C.readyState=1,l&&h.trigger("ajaxSend",[C,c]),c.async&&c.timeout>0&&(s=setTimeout(function(){C.abort("timeout")},c.timeout));try{y=1,u.send(b,n)}catch(w){if(!(2>y))throw w;n(-1,w)}}else n(-1,"No Transport");return C},getJSON:function(t,e,n){return oe.get(t,e,n,"json")},getScript:function(t,e){return oe.get(t,void 0,e,"script")}}),oe.each(["get","post"],function(t,e){oe[e]=function(t,n,i,o){return oe.isFunction(n)&&(o=o||i,i=n,n=void 0),oe.ajax({url:t,type:e,dataType:o,data:n,success:i})}}),oe._evalUrl=function(t){return oe.ajax({url:t,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})},oe.fn.extend({wrapAll:function(t){if(oe.isFunction(t))return this.each(function(e){oe(this).wrapAll(t.call(this,e))});if(this[0]){var e=oe(t,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&e.insertBefore(this[0]),e.map(function(){for(var t=this;t.firstChild&&1===t.firstChild.nodeType;)t=t.firstChild;return t}).append(this)}return this},wrapInner:function(t){return this.each(oe.isFunction(t)?function(e){oe(this).wrapInner(t.call(this,e))}:function(){var e=oe(this),n=e.contents();n.length?n.wrapAll(t):e.append(t)})},wrap:function(t){var e=oe.isFunction(t);return this.each(function(n){oe(this).wrapAll(e?t.call(this,n):t)})},unwrap:function(){return this.parent().each(function(){oe.nodeName(this,"body")||oe(this).replaceWith(this.childNodes)}).end()}}),oe.expr.filters.hidden=function(t){return t.offsetWidth<=0&&t.offsetHeight<=0||!ne.reliableHiddenOffsets()&&"none"===(t.style&&t.style.display||oe.css(t,"display"))},oe.expr.filters.visible=function(t){return!oe.expr.filters.hidden(t)};var $n=/%20/g,Xn=/\[\]$/,Gn=/\r?\n/g,Vn=/^(?:submit|button|image|reset|file)$/i,Yn=/^(?:input|select|textarea|keygen)/i;oe.param=function(t,e){var n,i=[],o=function(t,e){e=oe.isFunction(e)?e():null==e?"":e,i[i.length]=encodeURIComponent(t)+"="+encodeURIComponent(e)};if(void 0===e&&(e=oe.ajaxSettings&&oe.ajaxSettings.traditional),oe.isArray(t)||t.jquery&&!oe.isPlainObject(t))oe.each(t,function(){o(this.name,this.value)});else for(n in t)B(n,t[n],e,o);return i.join("&").replace($n,"+")},oe.fn.extend({serialize:function(){return oe.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var t=oe.prop(this,"elements");return t?oe.makeArray(t):this}).filter(function(){var t=this.type;return this.name&&!oe(this).is(":disabled")&&Yn.test(this.nodeName)&&!Vn.test(t)&&(this.checked||!De.test(t))}).map(function(t,e){var n=oe(this).val();return null==n?null:oe.isArray(n)?oe.map(n,function(t){return{name:e.name,value:t.replace(Gn,"\r\n")}}):{name:e.name,value:n.replace(Gn,"\r\n")}}).get()}}),oe.ajaxSettings.xhr=void 0!==t.ActiveXObject?function(){return!this.isLocal&&/^(get|post|head|put|delete|options)$/i.test(this.type)&&W()||U()}:W;var Kn=0,Zn={},ti=oe.ajaxSettings.xhr();t.attachEvent&&t.attachEvent("onunload",function(){for(var t in Zn)Zn[t](void 0,!0)}),ne.cors=!!ti&&"withCredentials"in ti,ti=ne.ajax=!!ti,ti&&oe.ajaxTransport(function(t){if(!t.crossDomain||ne.cors){var e;return{send:function(n,i){var o,r=t.xhr(),a=++Kn;if(r.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(o in t.xhrFields)r[o]=t.xhrFields[o];t.mimeType&&r.overrideMimeType&&r.overrideMimeType(t.mimeType),t.crossDomain||n["X-Requested-With"]||(n["X-Requested-With"]="XMLHttpRequest");for(o in n)void 0!==n[o]&&r.setRequestHeader(o,n[o]+"");r.send(t.hasContent&&t.data||null),e=function(n,o){var s,l,u;if(e&&(o||4===r.readyState))if(delete Zn[a],e=void 0,r.onreadystatechange=oe.noop,o)4!==r.readyState&&r.abort();else{u={},s=r.status,"string"==typeof r.responseText&&(u.text=r.responseText);try{l=r.statusText}catch(d){l=""}s||!t.isLocal||t.crossDomain?1223===s&&(s=204):s=u.text?200:404}u&&i(s,l,u,r.getAllResponseHeaders())},t.async?4===r.readyState?setTimeout(e):r.onreadystatechange=Zn[a]=e:e()},abort:function(){e&&e(void 0,!0)}}
}}),oe.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(t){return oe.globalEval(t),t}}}),oe.ajaxPrefilter("script",function(t){void 0===t.cache&&(t.cache=!1),t.crossDomain&&(t.type="GET",t.global=!1)}),oe.ajaxTransport("script",function(t){if(t.crossDomain){var e,n=pe.head||oe("head")[0]||pe.documentElement;return{send:function(i,o){e=pe.createElement("script"),e.async=!0,t.scriptCharset&&(e.charset=t.scriptCharset),e.src=t.url,e.onload=e.onreadystatechange=function(t,n){(n||!e.readyState||/loaded|complete/.test(e.readyState))&&(e.onload=e.onreadystatechange=null,e.parentNode&&e.parentNode.removeChild(e),e=null,n||o(200,"success"))},n.insertBefore(e,n.firstChild)},abort:function(){e&&e.onload(void 0,!0)}}}});var ei=[],ni=/(=)\?(?=&|$)|\?\?/;oe.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=ei.pop()||oe.expando+"_"+Ln++;return this[t]=!0,t}}),oe.ajaxPrefilter("json jsonp",function(e,n,i){var o,r,a,s=e.jsonp!==!1&&(ni.test(e.url)?"url":"string"==typeof e.data&&!(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&ni.test(e.data)&&"data");return s||"jsonp"===e.dataTypes[0]?(o=e.jsonpCallback=oe.isFunction(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,s?e[s]=e[s].replace(ni,"$1"+o):e.jsonp!==!1&&(e.url+=(Jn.test(e.url)?"&":"?")+e.jsonp+"="+o),e.converters["script json"]=function(){return a||oe.error(o+" was not called"),a[0]},e.dataTypes[0]="json",r=t[o],t[o]=function(){a=arguments},i.always(function(){t[o]=r,e[o]&&(e.jsonpCallback=n.jsonpCallback,ei.push(o)),a&&oe.isFunction(r)&&r(a[0]),a=r=void 0}),"script"):void 0}),oe.parseHTML=function(t,e,n){if(!t||"string"!=typeof t)return null;"boolean"==typeof e&&(n=e,e=!1),e=e||pe;var i=ce.exec(t),o=!n&&[];return i?[e.createElement(i[1])]:(i=oe.buildFragment([t],e,o),o&&o.length&&oe(o).remove(),oe.merge([],i.childNodes))};var ii=oe.fn.load;oe.fn.load=function(t,e,n){if("string"!=typeof t&&ii)return ii.apply(this,arguments);var i,o,r,a=this,s=t.indexOf(" ");return s>=0&&(i=oe.trim(t.slice(s,t.length)),t=t.slice(0,s)),oe.isFunction(e)?(n=e,e=void 0):e&&"object"==typeof e&&(r="POST"),a.length>0&&oe.ajax({url:t,type:r,dataType:"html",data:e}).done(function(t){o=arguments,a.html(i?oe("<div>").append(oe.parseHTML(t)).find(i):t)}).complete(n&&function(t,e){a.each(n,o||[t.responseText,e,t])}),this},oe.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(t,e){oe.fn[e]=function(t){return this.on(e,t)}}),oe.expr.filters.animated=function(t){return oe.grep(oe.timers,function(e){return t===e.elem}).length};var oi=t.document.documentElement;oe.offset={setOffset:function(t,e,n){var i,o,r,a,s,l,u,d=oe.css(t,"position"),c=oe(t),f={};"static"===d&&(t.style.position="relative"),s=c.offset(),r=oe.css(t,"top"),l=oe.css(t,"left"),u=("absolute"===d||"fixed"===d)&&oe.inArray("auto",[r,l])>-1,u?(i=c.position(),a=i.top,o=i.left):(a=parseFloat(r)||0,o=parseFloat(l)||0),oe.isFunction(e)&&(e=e.call(t,n,s)),null!=e.top&&(f.top=e.top-s.top+a),null!=e.left&&(f.left=e.left-s.left+o),"using"in e?e.using.call(t,f):c.css(f)}},oe.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each(function(e){oe.offset.setOffset(this,t,e)});var e,n,i={top:0,left:0},o=this[0],r=o&&o.ownerDocument;if(r)return e=r.documentElement,oe.contains(e,o)?(typeof o.getBoundingClientRect!==Se&&(i=o.getBoundingClientRect()),n=$(r),{top:i.top+(n.pageYOffset||e.scrollTop)-(e.clientTop||0),left:i.left+(n.pageXOffset||e.scrollLeft)-(e.clientLeft||0)}):i},position:function(){if(this[0]){var t,e,n={top:0,left:0},i=this[0];return"fixed"===oe.css(i,"position")?e=i.getBoundingClientRect():(t=this.offsetParent(),e=this.offset(),oe.nodeName(t[0],"html")||(n=t.offset()),n.top+=oe.css(t[0],"borderTopWidth",!0),n.left+=oe.css(t[0],"borderLeftWidth",!0)),{top:e.top-n.top-oe.css(i,"marginTop",!0),left:e.left-n.left-oe.css(i,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent||oi;t&&!oe.nodeName(t,"html")&&"static"===oe.css(t,"position");)t=t.offsetParent;return t||oi})}}),oe.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,e){var n=/Y/.test(e);oe.fn[t]=function(i){return Ne(this,function(t,i,o){var r=$(t);return void 0===o?r?e in r?r[e]:r.document.documentElement[i]:t[i]:void(r?r.scrollTo(n?oe(r).scrollLeft():o,n?o:oe(r).scrollTop()):t[i]=o)},t,i,arguments.length,null)}}),oe.each(["top","left"],function(t,e){oe.cssHooks[e]=T(ne.pixelPosition,function(t,n){return n?(n=en(t,e),on.test(n)?oe(t).position()[e]+"px":n):void 0})}),oe.each({Height:"height",Width:"width"},function(t,e){oe.each({padding:"inner"+t,content:e,"":"outer"+t},function(n,i){oe.fn[i]=function(i,o){var r=arguments.length&&(n||"boolean"!=typeof i),a=n||(i===!0||o===!0?"margin":"border");return Ne(this,function(e,n,i){var o;return oe.isWindow(e)?e.document.documentElement["client"+t]:9===e.nodeType?(o=e.documentElement,Math.max(e.body["scroll"+t],o["scroll"+t],e.body["offset"+t],o["offset"+t],o["client"+t])):void 0===i?oe.css(e,n,a):oe.style(e,n,i,a)},e,r?i:void 0,r,null)}})}),oe.fn.size=function(){return this.length},oe.fn.andSelf=oe.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return oe});var ri=t.jQuery,ai=t.$;return oe.noConflict=function(e){return t.$===oe&&(t.$=ai),e&&t.jQuery===oe&&(t.jQuery=ri),oe},typeof e===Se&&(t.jQuery2=t.$2=oe),oe}),bds.qa.ShortCut.fbJQ=$2.noConflict()},initialize:function(t){this.product_id=t.product_id?t.product_id:bds.qa.ShortCut.default_options.product_id,this.entrance_id=void 0!=t.entrance_id?t.entrance_id:bds.qa.ShortCut.default_options.entrance_id,this.needIssueTips=void 0!=t.needIssueTips?t.needIssueTips:bds.qa.ShortCut.default_options.needIssueTips,this.needLevelType=void 0!=t.needLevelType?t.needLevelType:bds.qa.ShortCut.default_options.needLevelType,this.needIssue=void 0!=t.needIssue?t.needIssue:bds.qa.ShortCut.default_options.needIssue,this.needCut=void 0!=t.needCut?t.needCut:bds.qa.ShortCut.default_options.needCut,this.needEmail=void 0!=t.needEmail?t.needEmail:bds.qa.ShortCut.default_options.needEmail,this.defaultCut=void 0!=t.defaultCut?t.defaultCut:bds.qa.ShortCut.default_options.defaultCut,this.needGuide=void 0!=t.needGuide?t.needGuide:bds.qa.ShortCut.default_options.needGuide,this.plugintitle=void 0!=t.plugintitle?t.plugintitle:bds.qa.ShortCut.default_options.plugintitle,this.issueTips=void 0!=t.issueTips?t.issueTips:bds.qa.ShortCut.default_options.issueTips,this.issuePlaceholder=void 0!=t.issuePlaceholder?t.issuePlaceholder:bds.qa.ShortCut.default_options.issuePlaceholder,this.emailPlaceholder=void 0!=t.emailPlaceholder?t.emailPlaceholder:bds.qa.ShortCut.default_options.emailPlaceholder,this.guide=void 0!=t.guide?t.guide:bds.qa.ShortCut.default_options.guide,this.cutFileTips=void 0!=t.cutFileTips?t.cutFileTips:bds.qa.ShortCut.default_options.cutFileTips,this.cutCanvasTips=void 0!=t.cutCanvasTips?t.cutCanvasTips:bds.qa.ShortCut.default_options.cutCanvasTips,this.emailTips=void 0!=t.emailTips?t.emailTips:bds.qa.ShortCut.default_options.emailTips,this.onlyUpFile=void 0!=t.onlyUpFile?t.onlyUpFile:bds.qa.ShortCut.default_options.onlyUpFile,this.showPosition=void 0!=t.showPosition?t.showPosition:bds.qa.ShortCut.default_options.showPosition,this.skinStyle=void 0!=t.skinStyle?t.skinStyle:bds.qa.ShortCut.default_options.skinStyle,this.cutImg=void 0!=t.cutImg?t.cutImg:bds.qa.ShortCut.default_options.cutImg,this.upImg=void 0!=t.upImg?t.upImg:bds.qa.ShortCut.default_options.upImg,this.win_width=parseInt(Math.max(document.body.scrollWidth,document.documentElement.clientWidth,document.body.clientWidth)),this.dialogPosition=t.dialogPosition?t.dialogPosition:bds.qa.ShortCut.default_options.dialogPosition,bds.qa.ShortCut._getImg(),"pad"==bds.qa.ShortCut.skinStyle&&(this.needCut=bds.qa.ShortCut._isUpperIos6())},getPrepare:function(){bds.qa.ShortCut.up_file=!bds.qa.ShortCut._identifyBrowser(),bds.qa.ShortCut.onlyUpFile>0&&(bds.qa.ShortCut.up_file=!0),"pad"==bds.qa.ShortCut.skinStyle&&(bds.qa.ShortCut.up_file=!0,bds.qa.ShortCut.upImg="padUp.png")},init:function(){bds.qa.ShortCut.init_action_dialog(),bds.qa.ShortCut.init_bind_action(),bds.qa.ShortCut._isIE6()||bds.qa.ShortCut.init_drag(),bds.qa.ShortCut.init_post_data()},init_action_dialog:function(){var t=document.getElementById("fb_baidu_right_dialog");if(!t){var e="",n=bds.qa.ShortCut.needIssueTips?'<div  class ="fb-tips-block"><span class="fb-content-tips">'+bds.qa.ShortCut.issueTips+'</span><span class="fb-danger-tips">(*必填)</span></div>':"",i=bds.qa.ShortCut.needLevelType?'<div class="fb-level-type-block"><div class="fb-level-title"><span>您遇到的问题类型</span><span class="fb-danger-tips">(*必选)</span></div><ul><li data-value="1482"><div class="fb-radio"></div><span>图片无法显示</span></li><li data-value="1665"><div class="fb-radio"></div><span>个人隐私图片</span></li><li data-value="1483"><div class="fb-radio"></div><span>加载速度慢</span></li><li data-value="1487"><div class="fb-radio"></div><span>图片品质太差</span></li><li data-value="1484"><div class="fb-radio"></div><span>下载不了图片</span></li><li data-value="1248"><div class="fb-radio"></div><span>找不到想要的图片</span></li><li data-value="1485"><div class="fb-radio"></div><span>色情、暴力图片</span></li><li data-value="1249"><div class="fb-radio"></div><span>其它</span></li></ul></div>':"",o=bds.qa.ShortCut.needIssue?'<div class="fb-textarea fb-content-block"><textarea maxlength="400" class ="fb-des-content" name="issuedesc" id="fb_des_content" data-exclude="true">'+bds.qa.ShortCut.issuePlaceholder+"</textarea></div>":"",r=bds.qa.ShortCut.needEmail?'<div class="fb-block fb-email-block"><div class="fb-phone-txt">'+bds.qa.ShortCut.emailTips+'</div><div><input type="text" class="fb-email" maxlength="100" value="'+bds.qa.ShortCut.emailPlaceholder+'" id="feedback_email"></div></div>':"",a=bds.qa.ShortCut.needGuide?'<div class="fb-guide fb-guide-block">'+bds.qa.ShortCut.guide+"</div>":"";if(bds.qa.ShortCut.up_file)s=bds.qa.ShortCut.needCut?'<div class="fb-block fb-cut-block" ><div class="fb-cut-block-ie" style="background: url('+bds.qa.ShortCut.base_url_path+"/feedback/images/"+bds.qa.ShortCut.upImg+')"><input class="fb-cut-input" type="file" id="fb_shangchuan" name="issueimage" onchange="bds.qa.ShortCut._checkFileType(this)"></div><span id="fb_shangchuan_txt" class="fb-shangchuan">'+bds.qa.ShortCut.cutFileTips+"</span></div>":"",e='<div class="fb-modal " data-html2canvas-ignore="true"><div class="fb-header" id="fb_dialog_header" unselectable="on" onselectstart="return false;"><a class="fb-close" id="fb_close_x">×</a><h3  class="fb-header-tips">'+bds.qa.ShortCut.plugintitle+'</h3></div><div class="fb-body" id="fb_qa_feedback_body"><div class="fb-action"><form id="fb_right_post_form" enctype="multipart/form-data" action="'+bds.qa.ShortCut.base_url_path+'/index.php/feedback/zx/getData" method="post" onsubmit = "return false;">'+i+n+o+s+r+'</form></div><div class="fb-footer"><div class="fb-btn fb-btn-primary" id="fb_right_post_save">提交反馈</div><a style="font-size:14px;color:#2d9ef8;line-height:26px;text-decoration:underline;margin-left:20px;height:26px;" href="http://f3.baidu.com/index.php/feedback/f/index" target="_blank">我的反馈</a></font></div>'+a+'</div><div class="arrow"><div class="arrow-bd"></div><div class="arrow-bg"></div></div></div>';else{bds.qa.ShortCut.up_file=!1;var s=bds.qa.ShortCut.needCut?'<div class="fb-block fb-cut-block"><div><input type="button" class="fb-btn fb-cut-btn" style="background: url('+bds.qa.ShortCut.cutImg+') no-repeat center" id="fb_jietu" value=""/><span id = "fb_tips_span" >'+bds.qa.ShortCut.cutCanvasTips+"</span></div></div> ":"";e='<div class="fb-modal " data-html2canvas-ignore="true"><div class="fb-header" id="fb_dialog_header" unselectable="on" onselectstart="return false;"><a class="fb-close" id="fb_close_x">×</a><h3  class = "fb-header-tips">'+bds.qa.ShortCut.plugintitle+'</h3></div><div class="fb-body" id="fb_qa_feedback_body"><div class="fb-action">'+i+n+o+s+r+'</div><div class="fb-footer"><div class="fb-btn fb-btn-primary" id="fb_right_canvas_save">提交反馈</div><a style="font-size:14px;color:#2d9ef8;line-height:26px;text-decoration:underline; margin-left:20px;height:26px;" href="http://f3.baidu.com/index.php/feedback/f/index" target="_blank">我的反馈</a></font></div>'+a+'</div><div class="arrow"><div class="arrow-bd"></div><div class="arrow-bg"></div></div></div>'}var l=document.createElement("div");l.id="fb_baidu_right_dialog",l.className="fb-feedback-right-dialog",bds.qa.ShortCut._isIE6()||(l.style.display="none",l.style.position="fixed"),l.style.zIndex=999999,l.innerHTML=e;var u=document.createElement("div");u.id="fb_baidu_wizard",u.className="fb-baidu-wizard",bds.qa.ShortCut.fbJQ("body").append(u),bds.qa.ShortCut._getWizardPosition(),bds.qa.ShortCut.fbJQ("body").append(l),bds.qa.ShortCut._fixedPage()}},init_bind_action:function(){bds.qa.ShortCut.fbJQ(document).on("mousedown",function(t){if(bds.qa.ShortCut.fbJQ(t.target).hasClass("reportlink")||bds.qa.ShortCut.fbJQ(t.target).closest(".reportlink").size()>0);else{var e=bds.qa.ShortCut.fbJQ("#fb_baidu_right_dialog");(0==e.length||0==bds.qa.ShortCut.fbJQ(t.target).closest("#fb_baidu_right_dialog").length&&"fb_right_dialog_canvas"!=t.target.id)&&bds.qa.ShortCut.fbJQ("#fb_close_x").click()}}),bds.qa.ShortCut.fbJQ(".fb-level-type-block li").click(function(){bds.qa.ShortCut.fbJQ(this).hasClass("fb-check")?bds.qa.ShortCut.fbJQ(this).removeClass("fb-check"):bds.qa.ShortCut.fbJQ(this).addClass("fb-check").siblings().removeClass("fb-check")}),bds.qa.ShortCut.fbJQ(".fb-modal textarea").focus(function(){bds.qa.ShortCut.fbJQ(this).val()==bds.qa.ShortCut.issuePlaceholder&&(bds.qa.ShortCut.fbJQ(this).val(""),bds.qa.ShortCut.fbJQ("#fb_pop_tips")&&bds.qa.ShortCut.fbJQ("#fb_pop_tips").remove())}),bds.qa.ShortCut.fbJQ(".fb-modal textarea").blur(function(){""==bds.qa.ShortCut.fbJQ(this).val()&&(bds.qa.ShortCut.fbJQ(this).css("color","#9a9a9a"),bds.qa.ShortCut.fbJQ(this).val(bds.qa.ShortCut.issuePlaceholder))}),bds.qa.ShortCut.fbJQ(".fb-modal textarea").keydown(function(){bds.qa.ShortCut.fbJQ(this).val()!=bds.qa.ShortCut.issuePlaceholder&&(bds.qa.ShortCut.fbJQ(this).css("color","black"),bds.qa.ShortCut.fbJQ("#fb_pop_tips")&&bds.qa.ShortCut.fbJQ("#fb_pop_tips").remove())}),bds.qa.ShortCut.fbJQ(".fb-modal .fb-email").focus(function(){bds.qa.ShortCut.fbJQ(this).val()==bds.qa.ShortCut.emailPlaceholder&&bds.qa.ShortCut.fbJQ(this).val("")}),bds.qa.ShortCut.fbJQ(".fb-modal .fb-email").blur(function(){""==bds.qa.ShortCut.fbJQ(this).val()&&(bds.qa.ShortCut.fbJQ(this).css("color","#9a9a9a"),bds.qa.ShortCut.fbJQ(this).val(bds.qa.ShortCut.emailPlaceholder))}),bds.qa.ShortCut.fbJQ(".fb-modal textarea").keyup(function(){if(bds.qa.ShortCut.fbJQ(this).val().length>=400){var t=bds.qa.ShortCut.fbJQ(this).val().substr(0,400);bds.qa.ShortCut.fbJQ(this).val(t)}}),bds.qa.ShortCut.fbJQ(".fb-modal .fb-email").keydown(function(){bds.qa.ShortCut.fbJQ(this).val()!=bds.qa.ShortCut.emailPlaceholder&&bds.qa.ShortCut.fbJQ(this).css("color","black")}),bds.qa.ShortCut.fbJQ("#fb_close_x").click(function(){var t=function(){bds.qa.ShortCut.fbJQ("#fb_baidu_right_dialog").remove(),bds.qa.ShortCut.fbJQ("#ShortCut_wizard").remove(),bds.qa.ShortCut.fbJQ("#fb_base_wizard_canvas").remove(),bds.qa.ShortCut.fbJQ("#fb_baidu_wizard").remove(),bds.qa.ShortCut.fbJQ("#fb_right_dialog_canvas").remove(),bds.qa.ShortCut.fbJQ("#fb_right_dialog_pagecanvas").remove(),bds.qa.ShortCut.fbJQ("#fb_right_dialog_pagecanvas2").remove(),bds.qa.ShortCut.fbJQ(".fb_cancel_flag").remove(),bds.qa.ShortCut.fbJQ("#fb_popwindow").remove(),bds.qa.ShortCut.is_feedbacking=!1};"pad"==bds.qa.ShortCut.skinStyle?t():(bds.qa.ShortCut.fbJQ("#fb_baidu_right_dialog").hide(),t()),bds.qa.ShortCut.send_img=!1}),bds.qa.ShortCut.fbJQ("#fb_jietu").click(function(){0==bds.qa.ShortCut.send_img&&(bds.qa.ShortCut.defaultCut=!0,bds.qa.ShortCut.fbJQ("#fb_right_dialog_canvas").css("cursor","crosshair"),bds.qa.ShortCut.fbJQ("#fb_jietu").css("cursor","crosshair"),bds.qa.ShortCut.init_img_render())}),"pad"==bds.qa.ShortCut.skinStyle&&(bds.qa.ShortCut.fbJQ(window).on("orientationchange",function(){bds.qa.ShortCut._repaint()}),bds.qa.ShortCut.fbJQ(".fb-des-content").on("focus",function(){bds.qa.ShortCut.fbJQ("#fb_baidu_right_dialog").css("position","absolute")}),bds.qa.ShortCut.fbJQ(".fb-email").on("focus",function(){bds.qa.ShortCut.fbJQ("#fb_baidu_right_dialog").css("position","absolute")})),bds.qa.ShortCut.bindclick=0,bds.qa.ShortCut._isIE6()&&(("right"==bds.qa.ShortCut.showPosition||"bottom_left"==bds.qa.ShortCut.showPosition||"bottom_right"==bds.qa.ShortCut.showPosition)&&bds.qa.ShortCut.fbJQ(window).scroll(function(){bds.qa.ShortCut.fbJQ("#fb_baidu_right_dialog").css("top",parseInt(document.documentElement.clientHeight+document.documentElement.scrollTop-bds.qa.ShortCut.fbJQ("#fb_baidu_right_dialog").height()-5)+"px")}),"center"==bds.qa.ShortCut.showPosition&&bds.qa.ShortCut.fbJQ(window).scroll(function(){bds.qa.ShortCut.fbJQ("#fb_baidu_right_dialog").css("top",parseInt((bds.qa.ShortCut._getClientWidth()-bds.qa.ShortCut.fbJQ("#fb_baidu_right_dialog").width())/2)+"px")})),bds.qa.ShortCut.fbJQ(window).on("index_off",function(){bds.qa.ShortCut.fbJQ("#fb_baidu_right_dialog").remove(),bds.qa.ShortCut.fbJQ("#ShortCut_wizard").remove(),bds.qa.ShortCut.fbJQ("#fb_base_wizard_canvas").remove(),bds.qa.ShortCut.fbJQ("#fb_baidu_wizard").remove(),bds.qa.ShortCut.fbJQ("#fb_right_dialog_canvas").remove(),bds.qa.ShortCut.fbJQ("#fb_right_dialog_pagecanvas").remove(),bds.qa.ShortCut.fbJQ("#fb_right_dialog_pagecanvas2").remove(),bds.qa.ShortCut.fbJQ(".fb_cancel_flag").remove(),bds.qa.ShortCut.fbJQ("#fb_popwindow").remove(),bds.qa.ShortCut.is_feedbacking=!1,bds.qa.ShortCut.send_img=!1})},init_drag:function(){function t(t,e,n){t.addEventListener?t.addEventListener(e,n,!1):t.attachEvent?t.attachEvent("on"+e,n):t["on"+e]=n}function e(t,e,n){t.removeEventListener?t.removeEventListener(e,n,!1):t.detachEvent?t.detachEvent("on"+e,n):t["on"+e]=null}var n=(document.all?!0:!1,function(t){return"string"==typeof t?document.getElementById(t):t}),i={create:function(){return function(){this.initialize.apply(this,arguments)}}},o=function(t,e){return function(){return e.apply(t,arguments)}},r=function(t,e){return function(n){return e.call(t,n||window.event)}};bds.qa.ShortCut.SimpleDrag=i.create(),bds.qa.ShortCut.SimpleDrag.prototype={initialize:function(e,i){this.Drag=n(e),this.beDrag=n(i),this._x=this._y=0,this._fM=r(this,this.Move),this._fS=o(this,this.Stop),t(this.Drag,"mousedown",r(this,this.Start))},Start:function(e){e.preventDefault?e.preventDefault():e.returnValue=!1,this._x=e.clientX-this.beDrag.offsetLeft,this._y=e.clientY-this.beDrag.offsetTop,t(document,"mousemove",this._fM),t(document,"mouseup",this._fS)},Move:function(t){if(bds.qa.ShortCut._isIE6())this.beDrag.style.left=t.clientX-this._x+"px",this.beDrag.style.top=t.clientY-this._y+"px",this.Drag.style.left=t.clientX-this._x+1+"px",this.Drag.style.top=t.clientY-this._y+2+"px";else{var e=bds.qa.ShortCut.fbJQ("#fb_baidu_right_dialog").height(),n=bds.qa.ShortCut.fbJQ("#fb_baidu_right_dialog").width(),i=0;document.documentElement&&document.documentElement.clientWidth?i=document.documentElement.clientWidth:document.body&&(i=document.body.clientWidth);var o=0;document.documentElement&&document.documentElement.clientHeight?o=document.documentElement.clientHeight:document.body&&(o=document.body.clientHeight);var r=t.clientX-this._x,a=t.clientY-this._y,s=e,l=n;bds.qa.ShortCut._isIE()&&(s=e,l=n),0>r&&(r=0),r>i-l&&(r=i-l),0>a&&(a=0),a>o-s&&(a=o-s),this.beDrag.style.left=r+"px",this.beDrag.style.top=a+"px",this.Drag.style.left=r+1+"px",this.Drag.style.top=bds.qa.ShortCut._isIE()?a+1+"px":a+2+"px"}this.beDrag.style.bottom="",this.beDrag.style.right=""},Stop:function(){e(document,"mousemove",this._fM),e(document,"mouseup",this._fS)}},new bds.qa.ShortCut.SimpleDrag("fb_dialog_header","fb_baidu_right_dialog")},init_post_data:function(){bds.qa.ShortCut.fbJQ("#fb_right_canvas_save").click(function(){if(0==bds.qa.ShortCut.send_img){var t=bds.qa.ShortCut.fbJQ("#fb_des_content").val();if(""==t||t==bds.qa.ShortCut.issuePlaceholder)return bds.qa.ShortCut.popwindow("请填写反馈内容",200),!1;var e=bds.qa.ShortCut.fbJQ(".fb-level-type-block .fb-check").length;if(""==e||1>e)return bds.qa.ShortCut.popwindow("请选择问题类型",200),!1;bds.qa.ShortCut.sendCanvasData()}}),bds.qa.ShortCut.fbJQ("#fb_right_post_save").click(function(){var t=bds.qa.ShortCut.fbJQ("#fb_des_content").val();if(""==t||t==bds.qa.ShortCut.issuePlaceholder)return bds.qa.ShortCut.popwindow("请填写反馈内容",200),!1;var e=bds.qa.ShortCut.fbJQ(".fb-level-type-block .fb-check").length;if(""==e||1>e)return bds.qa.ShortCut.popwindow("请选择问题类型",200),!1;var n=bds.qa.ShortCut.fbJQ("#fb_shangchuan").val()||"",i=bds.qa.ShortCut.checkImage(n);return n&&!i?(bds.qa.ShortCut.popwindow("请上传PNG,JPEG,GIF等图片文件",200),bds.qa.ShortCut.fbJQ("#fb_shangchuan").val(""),bds.qa.ShortCut.fbJQ(".fb_shangchuan_txt").html(""),!1):void bds.qa.ShortCut.postCrossDomainDataForm(bds.qa.ShortCut.sendDataResult)})},get_Snapshot:function(){!function(t,e,n){function i(e){u.logging&&t.console&&t.console.log&&t.console.log(e)}function o(t,e,n,i,o,r){var a,s,l,d,c=u.Util.getCSS(e,t,o);if(1===c.length&&(d=c[0],c=[],c[0]=d,c[1]=d),-1!==c[0].toString().indexOf("%"))l=parseFloat(c[0])/100,s=n.width*l,"backgroundSize"!==t&&(s-=(r||i).width*l);else if("backgroundSize"===t)if("auto"===c[0])s=i.width;else if(c[0].match(/contain|cover/)){var f=u.Util.resizeBounds(i.width,i.height,n.width,n.height,c[0]);s=f.width,a=f.height}else s=parseInt(c[0],10);else s=parseInt(c[0],10);return"auto"===c[1]?a=s/i.width*i.height:-1!==c[1].toString().indexOf("%")?(l=parseFloat(c[1])/100,a=n.height*l,"backgroundSize"!==t&&(a-=(r||i).height*l)):a=parseInt(c[1],10),[s,a]}function r(t,e){var n=[];return{storage:n,width:t,height:e,clip:function(){n.push({type:"function",name:"clip",arguments:arguments})},translate:function(){n.push({type:"function",name:"translate",arguments:arguments})},fill:function(){n.push({type:"function",name:"fill",arguments:arguments})},save:function(){n.push({type:"function",name:"save",arguments:arguments})},restore:function(){n.push({type:"function",name:"restore",arguments:arguments})},fillRect:function(){n.push({type:"function",name:"fillRect",arguments:arguments})},createPattern:function(){n.push({type:"function",name:"createPattern",arguments:arguments})},drawShape:function(){var t=[];return n.push({type:"function",name:"drawShape",arguments:t}),{moveTo:function(){t.push({name:"moveTo",arguments:arguments})},lineTo:function(){t.push({name:"lineTo",arguments:arguments})},arcTo:function(){t.push({name:"arcTo",arguments:arguments})},bezierCurveTo:function(){t.push({name:"bezierCurveTo",arguments:arguments})},quadraticCurveTo:function(){t.push({name:"quadraticCurveTo",arguments:arguments})}}},drawImage:function(){n.push({type:"function",name:"drawImage",arguments:arguments})},fillText:function(){n.push({type:"function",name:"fillText",arguments:arguments})},setVariable:function(t,e){n.push({type:"variable",name:t,arguments:e})}}}function a(t){return{zindex:t,children:[]}}var s,l,u={};u.Util={},u.Util.trimText=function(t){return function(e){return t?t.apply(e):((e||"")+"").replace(/^\s+|\s+$/g,"")}}(String.prototype.trim),u.Util.parseBackgroundImage=function(t){var e,n,i,o,r,a,s,l,u=" \r\n	",d=[],c=0,f=0,h=function(){e&&('"'===n.substr(0,1)&&(n=n.substr(1,n.length-2)),n&&l.push(n),"-"===e.substr(0,1)&&(o=e.indexOf("-",1)+1)>0&&(i=e.substr(0,o),e=e.substr(o)),d.push({prefix:i,method:e.toLowerCase(),value:r,args:l})),l=[],e=i=n=r=""};h();for(var p=0,g=t.length;g>p;p++)if(a=t[p],!(0===c&&u.indexOf(a)>-1)){switch(a){case'"':s?s===a&&(s=null):s=a;break;case"(":if(s)break;if(0===c){c=1,r+=a;continue}f++;break;case")":if(s)break;if(1===c){if(0===f){c=0,r+=a,h();continue}f--}break;case",":if(s)break;if(0===c){h();continue}if(1===c&&0===f&&!e.match(/^url$/i)){l.push(n),n="",r+=a;continue}}r+=a,0===c?e+=a:n+=a}return h(),d},u.Util.Bounds=function(t){var e,n={};return t.getBoundingClientRect?(e=t.getBoundingClientRect(),n.top=e.top,n.bottom=e.bottom||e.top+e.height,n.left=e.left,n.width=e.width||e.right-e.left,n.height=e.height||e.bottom-e.top,n):void 0},u.Util.getCSS=function(t,i,o){function r(e,n){var i,o=t.runtimeStyle&&t.runtimeStyle[e],r=t.style;return!/^-?[0-9]+\.?[0-9]*(?:px)?$/i.test(n)&&/^-?\d/.test(n)&&(i=r.left,o&&(t.runtimeStyle.left=t.currentStyle.left),r.left="fontSize"===e?"1em":n||0,n=r.pixelLeft+"px",r.left=i,o&&(t.runtimeStyle.left=o)),/^(thin|medium|thick)$/i.test(n)?n:Math.round(parseFloat(n))+"px"}var a,d=i.match(/^background(Size|Position)$/);if(s!==t&&(l=e.defaultView.getComputedStyle(t,null)),a=l[i],d)if(a=(a||"").split(","),a=a[o||0]||a[0]||"auto",a=u.Util.trimText(a).split(" "),"backgroundSize"!==i||a[0]&&!a[0].match(/cover|contain|auto/)){if(a[0]=-1===a[0].indexOf("%")?r(i+"X",a[0]):a[0],a[1]===n){if("backgroundSize"===i)return a[1]="auto",a;a[1]=a[0]}a[1]=-1===a[1].indexOf("%")?r(i+"Y",a[1]):a[1]}else;else if(/border(Top|Bottom)(Left|Right)Radius/.test(i)){var c=a.split(" ");c.length<=1&&(c[1]=c[0]),c[0]=parseInt(c[0],10),c[1]=parseInt(c[1],10),a=c}return a},u.Util.resizeBounds=function(t,e,n,i,o){var r,a,s=n/i,l=t/e;return o&&"auto"!==o?l>s^"contain"===o?(a=i,r=i*l):(r=n,a=n/l):(r=n,a=i),{width:r,height:a}},u.Util.BackgroundPosition=function(t,e,n,i,r){var a=o("backgroundPosition",t,e,n,i,r);return{left:a[0],top:a[1]}},u.Util.BackgroundSize=function(t,e,n,i){var r=o("backgroundSize",t,e,n,i);return{width:r[0],height:r[1]}},u.Util.Extend=function(t,e){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e},u.Util.Children=function(t){var e;try{e=t.nodeName&&"IFRAME"===t.nodeName.toUpperCase()?t.contentDocument||t.contentWindow.document:function(t){var e=[];return null!==t&&!function(t,e){var i=t.length,o=0;if("number"==typeof e.length)for(var r=e.length;r>o;o++)t[i++]=e[o];else for(;e[o]!==n;)t[i++]=e[o++];return t.length=i,t}(e,t),e}(t.childNodes)}catch(o){i("html2canvas.Util.Children failed with exception: "+o.message),e=[]}return e},u.Util.Font=function(){var t={};return function(e,i,o){if(t[e+"-"+i]!==n)return t[e+"-"+i];var r,a,s,l=o.createElement("div"),u=o.createElement("img"),d=o.createElement("span"),c="Hidden Text";return l.style.visibility="hidden",l.style.fontFamily=e,l.style.fontSize=i,l.style.margin=0,l.style.padding=0,o.body.appendChild(l),u.src="data:image/gif;base64,R0lGODlhAQABAIABAP///wAAACwAAAAAAQABAAACAkQBADs=",u.width=1,u.height=1,u.style.margin=0,u.style.padding=0,u.style.verticalAlign="baseline",d.style.fontFamily=e,d.style.fontSize=i,d.style.margin=0,d.style.padding=0,d.appendChild(o.createTextNode(c)),l.appendChild(d),l.appendChild(u),r=u.offsetTop-d.offsetTop+1,l.removeChild(d),l.appendChild(o.createTextNode(c)),l.style.lineHeight="normal",u.style.verticalAlign="super",a=u.offsetTop-l.offsetTop+1,s={baseline:r,lineWidth:1,middle:a},t[e+"-"+i]=s,o.body.removeChild(l),s}}(),function(){u.Generate={};var t=[/^(-webkit-linear-gradient)\(([a-z\s]+)([\w\d\.\s,%\(\)]+)\)$/,/^(-o-linear-gradient)\(([a-z\s]+)([\w\d\.\s,%\(\)]+)\)$/,/^(-webkit-gradient)\((linear|radial),\s((?:\d{1,3}%?)\s(?:\d{1,3}%?),\s(?:\d{1,3}%?)\s(?:\d{1,3}%?))([\w\d\.\s,%\(\)\-]+)\)$/,/^(-moz-linear-gradient)\(((?:\d{1,3}%?)\s(?:\d{1,3}%?))([\w\d\.\s,%\(\)]+)\)$/,/^(-webkit-radial-gradient)\(((?:\d{1,3}%?)\s(?:\d{1,3}%?)),\s(\w+)\s([a-z\-]+)([\w\d\.\s,%\(\)]+)\)$/,/^(-moz-radial-gradient)\(((?:\d{1,3}%?)\s(?:\d{1,3}%?)),\s(\w+)\s?([a-z\-]*)([\w\d\.\s,%\(\)]+)\)$/,/^(-o-radial-gradient)\(((?:\d{1,3}%?)\s(?:\d{1,3}%?)),\s(\w+)\s([a-z\-]+)([\w\d\.\s,%\(\)]+)\)$/];u.Generate.parseGradient=function(e,n){var i,o,r,a,s,l,u,d,c,f,h,p,g=t.length;for(o=0;g>o&&!(r=e.match(t[o]));o+=1);if(r)switch(r[1]){case"-webkit-linear-gradient":case"-o-linear-gradient":if(i={type:"linear",x0:null,y0:null,x1:null,y1:null,colorStops:[]},s=r[2].match(/\w+/g))for(l=s.length,o=0;l>o;o+=1)switch(s[o]){case"top":i.y0=0,i.y1=n.height;break;case"right":i.x0=n.width,i.x1=0;break;case"bottom":i.y0=n.height,i.y1=0;break;case"left":i.x0=0,i.x1=n.width}if(null===i.x0&&null===i.x1&&(i.x0=i.x1=n.width/2),null===i.y0&&null===i.y1&&(i.y0=i.y1=n.height/2),s=r[3].match(/((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\)(?:\s\d{1,3}(?:%|px))?)+/g))for(l=s.length,u=1/Math.max(l-1,1),o=0;l>o;o+=1)d=s[o].match(/((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\))\s*(\d{1,3})?(%|px)?/),d[2]?(a=parseFloat(d[2]),a/="%"===d[3]?100:n.width):a=o*u,i.colorStops.push({color:d[1],stop:a});break;case"-webkit-gradient":if(i={type:"radial"===r[2]?"circle":r[2],x0:0,y0:0,x1:0,y1:0,colorStops:[]},s=r[3].match(/(\d{1,3})%?\s(\d{1,3})%?,\s(\d{1,3})%?\s(\d{1,3})%?/),s&&(i.x0=s[1]*n.width/100,i.y0=s[2]*n.height/100,i.x1=s[3]*n.width/100,i.y1=s[4]*n.height/100),s=r[4].match(/((?:from|to|color-stop)\((?:[0-9\.]+,\s)?(?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\)\))+/g))for(l=s.length,o=0;l>o;o+=1)d=s[o].match(/(from|to|color-stop)\(([0-9\.]+)?(?:,\s)?((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\))\)/),a=parseFloat(d[2]),"from"===d[1]&&(a=0),"to"===d[1]&&(a=1),i.colorStops.push({color:d[3],stop:a});break;case"-moz-linear-gradient":if(i={type:"linear",x0:0,y0:0,x1:0,y1:0,colorStops:[]},s=r[2].match(/(\d{1,3})%?\s(\d{1,3})%?/),s&&(i.x0=s[1]*n.width/100,i.y0=s[2]*n.height/100,i.x1=n.width-i.x0,i.y1=n.height-i.y0),s=r[3].match(/((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\)(?:\s\d{1,3}%)?)+/g))for(l=s.length,u=1/Math.max(l-1,1),o=0;l>o;o+=1)d=s[o].match(/((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\))\s*(\d{1,3})?(%)?/),d[2]?(a=parseFloat(d[2]),d[3]&&(a/=100)):a=o*u,i.colorStops.push({color:d[1],stop:a});break;case"-webkit-radial-gradient":case"-moz-radial-gradient":case"-o-radial-gradient":if(i={type:"circle",x0:0,y0:0,x1:n.width,y1:n.height,cx:0,cy:0,rx:0,ry:0,colorStops:[]},s=r[2].match(/(\d{1,3})%?\s(\d{1,3})%?/),s&&(i.cx=s[1]*n.width/100,i.cy=s[2]*n.height/100),s=r[3].match(/\w+/),d=r[4].match(/[a-z\-]*/),s&&d)switch(d[0]){case"farthest-corner":case"cover":case"":c=Math.sqrt(Math.pow(i.cx,2)+Math.pow(i.cy,2)),f=Math.sqrt(Math.pow(i.cx,2)+Math.pow(i.y1-i.cy,2)),h=Math.sqrt(Math.pow(i.x1-i.cx,2)+Math.pow(i.y1-i.cy,2)),p=Math.sqrt(Math.pow(i.x1-i.cx,2)+Math.pow(i.cy,2)),i.rx=i.ry=Math.max(c,f,h,p);break;case"closest-corner":c=Math.sqrt(Math.pow(i.cx,2)+Math.pow(i.cy,2)),f=Math.sqrt(Math.pow(i.cx,2)+Math.pow(i.y1-i.cy,2)),h=Math.sqrt(Math.pow(i.x1-i.cx,2)+Math.pow(i.y1-i.cy,2)),p=Math.sqrt(Math.pow(i.x1-i.cx,2)+Math.pow(i.cy,2)),i.rx=i.ry=Math.min(c,f,h,p);break;case"farthest-side":"circle"===s[0]?i.rx=i.ry=Math.max(i.cx,i.cy,i.x1-i.cx,i.y1-i.cy):(i.type=s[0],i.rx=Math.max(i.cx,i.x1-i.cx),i.ry=Math.max(i.cy,i.y1-i.cy));break;case"closest-side":case"contain":"circle"===s[0]?i.rx=i.ry=Math.min(i.cx,i.cy,i.x1-i.cx,i.y1-i.cy):(i.type=s[0],i.rx=Math.min(i.cx,i.x1-i.cx),i.ry=Math.min(i.cy,i.y1-i.cy))}if(s=r[5].match(/((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\)(?:\s\d{1,3}(?:%|px))?)+/g))for(l=s.length,u=1/Math.max(l-1,1),o=0;l>o;o+=1)d=s[o].match(/((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\))\s*(\d{1,3})?(%|px)?/),d[2]?(a=parseFloat(d[2]),a/="%"===d[3]?100:n.width):a=o*u,i.colorStops.push({color:d[1],stop:a})}return i},u.Generate.Gradient=function(t,n){if(0!==n.width&&0!==n.height){var o,r,a,s,l=e.createElement("canvas"),d=l.getContext("2d");if(l.width=n.width,l.height=n.height,o=u.Generate.parseGradient(t,n))if("linear"===o.type){for(r=d.createLinearGradient(o.x0,o.y0,o.x1,o.y1),a=0,s=o.colorStops.length;s>a;a+=1)try{r.addColorStop(o.colorStops[a].stop,o.colorStops[a].color)}catch(c){i(["failed to add color stop: ",c,"; tried to add: ",o.colorStops[a],"; stop: ",a,"; in: ",t])}d.fillStyle=r,d.fillRect(0,0,n.width,n.height)}else if("circle"===o.type){for(r=d.createRadialGradient(o.cx,o.cy,0,o.cx,o.cy,o.rx),a=0,s=o.colorStops.length;s>a;a+=1)try{r.addColorStop(o.colorStops[a].stop,o.colorStops[a].color)
}catch(c){i(["failed to add color stop: ",c,"; tried to add: ",o.colorStops[a],"; stop: ",a,"; in: ",t])}d.fillStyle=r,d.fillRect(0,0,n.width,n.height)}else if("ellipse"===o.type){var f=e.createElement("canvas"),h=f.getContext("2d"),p=Math.max(o.rx,o.ry),g=2*p;for(f.width=f.height=g,r=h.createRadialGradient(o.rx,o.ry,0,o.rx,o.ry,p),a=0,s=o.colorStops.length;s>a;a+=1)try{r.addColorStop(o.colorStops[a].stop,o.colorStops[a].color)}catch(c){i(["failed to add color stop: ",c,"; tried to add: ",o.colorStops[a],"; stop: ",a,"; in: ",t])}h.fillStyle=r,h.fillRect(0,0,g,g),d.fillStyle=o.colorStops[a-1].color,d.fillRect(0,0,l.width,l.height),d.drawImage(f,o.cx-o.rx,o.cy-o.ry,2*o.rx,2*o.ry)}return l}},u.Generate.ListAlpha=function(t){var e,n="";do e=t%26,n=String.fromCharCode(e+64)+n,t/=26;while(26*t>26);return n},u.Generate.ListRoman=function(t){var e,n=["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"],i=[1e3,900,500,400,100,90,50,40,10,9,5,4,1],o="",r=n.length;if(0>=t||t>=4e3)return t;for(e=0;r>e;e+=1)for(;t>=i[e];)t-=i[e],o+=n[e];return o}}(),u.Parse=function(o,s){function l(){return Math.max(Math.max(se.body.scrollWidth,se.documentElement.scrollWidth),Math.max(se.body.offsetWidth,se.documentElement.offsetWidth),Math.max(se.body.clientWidth,se.documentElement.clientWidth))}function d(){return Math.max(Math.max(se.body.scrollHeight,se.documentElement.scrollHeight),Math.max(se.body.offsetHeight,se.documentElement.offsetHeight),Math.max(se.body.clientHeight,se.documentElement.clientHeight))}function c(t,e){var n=parseInt(ce(t,e),10);return isNaN(n)?0:n}function f(t,e,n,i,o,r){"transparent"!==r&&(t.setVariable("fillStyle",r),t.fillRect(e,n,i,o),ae+=1)}function h(t,e){switch(e){case"lowercase":return t.toLowerCase();case"capitalize":return t.replace(/(^|\s|:|-|\(|\))([a-z])/g,function(t,e,n){return t.length>0?e+n.toUpperCase():void 0});case"uppercase":return t.toUpperCase();default:return t}}function p(t){return/^(normal|none|0px)$/.test(t)}function g(t,e,n,i){null!==t&&u.Util.trimText(t).length>0&&(i.fillText(t,e,n),ae+=1)}function m(t,e,n,i){var o=!1,r=ce(e,"fontWeight"),a=ce(e,"fontFamily"),s=ce(e,"fontSize");switch(parseInt(r,10)){case 401:r="bold";break;case 400:r="normal"}return t.setVariable("fillStyle",i),t.setVariable("font",[ce(e,"fontStyle"),ce(e,"fontVariant"),r,s,a].join(" ")),t.setVariable("textAlign",o?"right":"left"),"none"!==n?u.Util.Font(a,s,se):void 0}function b(t,e,n,i,o){switch(e){case"underline":f(t,n.left,Math.round(n.top+i.baseline+i.lineWidth),n.width,1,o);break;case"overline":f(t,n.left,Math.round(n.top),n.width,1,o);break;case"line-through":f(t,n.left,Math.ceil(n.top+i.middle+i.lineWidth),n.width,1,o)}}function v(t,e,n,i){var o;if(le.rangeBounds)("none"!==n||0!==u.Util.trimText(e).length)&&(o=y(e,t.node,t.textOffset)),t.textOffset+=e.length;else if(t.node&&"string"==typeof t.node.nodeValue){var r=i?t.node.splitText(e.length):null;o=x(t.node),t.node=r}return o}function y(t,e,n){var i=se.createRange();return i.setStart(e,n),i.setEnd(e,n+t.length),i.getBoundingClientRect()}function x(t){var e=t.parentNode,n=se.createElement("wrapper"),i=t.cloneNode(!0);n.appendChild(t.cloneNode(!0)),e.replaceChild(n,t);var o=u.Util.Bounds(n);return e.replaceChild(i,n),o}function C(t,e,n){var i,o,r=n.ctx,a=ce(t,"color"),l=ce(t,"textDecoration"),d=ce(t,"textAlign"),c={node:e,textOffset:0};u.Util.trimText(e.nodeValue).length>0&&(e.nodeValue=h(e.nodeValue,ce(t,"textTransform")),d=d.replace(["-webkit-auto"],["auto"]),o=e.nodeValue.split(!s.letterRendering&&/^(left|right|justify|auto)$/.test(d)&&p(ce(t,"letterSpacing"))?/(\b| )/:""),i=m(r,t,l,a),s.chinese&&o.forEach(function(t,e){/.*[\u4E00-\u9FA5].*$/.test(t)&&(t=t.split(""),t.unshift(e,1),o.splice.apply(o,t))}),o.forEach(function(t,e){var n=v(c,t,l,e<o.length-1);n&&(g(t,n.left,n.bottom,r),b(r,l,n,i,a))}))}function w(t,e){var n,i,o=se.createElement("boundelement");return o.style.display="inline",n=t.style.listStyleType,t.style.listStyleType="none",o.appendChild(se.createTextNode(e)),t.insertBefore(o,t.firstChild),i=u.Util.Bounds(o),t.removeChild(o),t.style.listStyleType=n,i}function S(t){var e=-1,n=1,i=t.parentNode.childNodes;if(t.parentNode){for(;i[++e]!==t;)1===i[e].nodeType&&n++;return n}return-1}function _(t,e){var n,i=S(t);switch(e){case"decimal":n=i;break;case"decimal-leading-zero":n=1===i.toString().length?i="0"+i.toString():i.toString();break;case"upper-roman":n=u.Generate.ListRoman(i);break;case"lower-roman":n=u.Generate.ListRoman(i).toLowerCase();break;case"lower-alpha":n=u.Generate.ListAlpha(i).toLowerCase();break;case"upper-alpha":n=u.Generate.ListAlpha(i)}return n+=". "}function q(t,e,n){var i,o,r,a=e.ctx,s=ce(t,"listStyleType");if(/^(decimal|decimal-leading-zero|upper-alpha|upper-latin|upper-roman|lower-alpha|lower-greek|lower-latin|lower-roman)$/i.test(s)){if(o=_(t,s),r=w(t,o),m(a,t,"none",ce(t,"color")),"inside"!==ce(t,"listStylePosition"))return;a.setVariable("textAlign","left"),i=n.left,g(o,i,r.bottom,a)}}function T(t){var e=o[t];return e&&e.succeeded===!0?e.img:!1}function k(t,e){var n=Math.max(t.left,e.left),i=Math.max(t.top,e.top),o=Math.min(t.left+t.width,e.left+e.width),r=Math.min(t.top+t.height,e.top+e.height);return{left:n,top:i,width:o-n,height:r-i}}function E(t,e){var n;return e?"auto"!==t?(n=a(t),e.children.push(n),n):e:n=a(0)}function N(t,e,n,i,o){var r=c(e,"paddingLeft"),a=c(e,"paddingTop"),s=c(e,"paddingRight"),l=c(e,"paddingBottom");H(t,n,0,0,n.width,n.height,i.left+r+o[3].width,i.top+a+o[0].width,i.width-(o[1].width+o[3].width+r+s),i.height-(o[0].width+o[2].width+a+l))}function D(t){return["Top","Right","Bottom","Left"].map(function(e){return{width:c(t,"border"+e+"Width"),color:ce(t,"border"+e+"Color")}})}function L(t){return["TopLeft","TopRight","BottomRight","BottomLeft"].map(function(e){return ce(t,"border"+e+"Radius")})}function J(t,e,n,i){var o=function(t,e,n){return{x:t.x+(e.x-t.x)*n,y:t.y+(e.y-t.y)*n}};return{start:t,startControl:e,endControl:n,end:i,subdivide:function(r){var a=o(t,e,r),s=o(e,n,r),l=o(n,i,r),u=o(a,s,r),d=o(s,l,r),c=o(u,d,r);return[J(t,a,u,c),J(c,d,l,i)]},curveTo:function(t){t.push(["bezierCurve",e.x,e.y,n.x,n.y,i.x,i.y])},curveToReversed:function(i){i.push(["bezierCurve",n.x,n.y,e.x,e.y,t.x,t.y])}}}function A(t,e,n,i,o,r,a){e[0]>0||e[1]>0?(t.push(["line",i[0].start.x,i[0].start.y]),i[0].curveTo(t),i[1].curveTo(t)):t.push(["line",r,a]),(n[0]>0||n[1]>0)&&t.push(["line",o[0].start.x,o[0].start.y])}function I(t,e,n,i,o,r,a){var s=[];return e[0]>0||e[1]>0?(s.push(["line",i[1].start.x,i[1].start.y]),i[1].curveTo(s)):s.push(["line",t.c1[0],t.c1[1]]),n[0]>0||n[1]>0?(s.push(["line",r[0].start.x,r[0].start.y]),r[0].curveTo(s),s.push(["line",a[0].end.x,a[0].end.y]),a[0].curveToReversed(s)):(s.push(["line",t.c2[0],t.c2[1]]),s.push(["line",t.c3[0],t.c3[1]])),e[0]>0||e[1]>0?(s.push(["line",o[1].end.x,o[1].end.y]),o[1].curveToReversed(s)):s.push(["line",t.c4[0],t.c4[1]]),s}function P(t,e,n){var i=t.left,o=t.top,r=t.width,a=t.height,s=e[0][0],l=e[0][1],u=e[1][0],d=e[1][1],c=e[2][0],f=e[2][1],h=e[3][0],p=e[3][1],g=r-u,m=a-c,b=r-f,v=a-p;return{topLeftOuter:pe(i,o,s,l).topLeft.subdivide(.5),topLeftInner:pe(i+n[3].width,o+n[0].width,Math.max(0,s-n[3].width),Math.max(0,l-n[0].width)).topLeft.subdivide(.5),topRightOuter:pe(i+g,o,u,d).topRight.subdivide(.5),topRightInner:pe(i+Math.min(g,r+n[3].width),o+n[0].width,g>r+n[3].width?0:u-n[3].width,d-n[0].width).topRight.subdivide(.5),bottomRightOuter:pe(i+b,o+m,f,c).bottomRight.subdivide(.5),bottomRightInner:pe(i+Math.min(b,r+n[3].width),o+Math.min(m,a+n[0].width),Math.max(0,f-n[1].width),Math.max(0,c-n[2].width)).bottomRight.subdivide(.5),bottomLeftOuter:pe(i,o+v,h,p).bottomLeft.subdivide(.5),bottomLeftInner:pe(i+n[3].width,o+v,Math.max(0,h-n[3].width),Math.max(0,p-n[2].width)).bottomLeft.subdivide(.5)}}function M(t,e,n,i,o){var r=ce(t,"backgroundClip"),a=[];switch(r){case"content-box":case"padding-box":A(a,i[0],i[1],e.topLeftInner,e.topRightInner,o.left+n[3].width,o.top+n[0].width),A(a,i[1],i[2],e.topRightInner,e.bottomRightInner,o.left+o.width-n[1].width,o.top+n[0].width),A(a,i[2],i[3],e.bottomRightInner,e.bottomLeftInner,o.left+o.width-n[1].width,o.top+o.height-n[2].width),A(a,i[3],i[0],e.bottomLeftInner,e.topLeftInner,o.left+n[3].width,o.top+o.height-n[2].width);break;default:A(a,i[0],i[1],e.topLeftOuter,e.topRightOuter,o.left,o.top),A(a,i[1],i[2],e.topRightOuter,e.bottomRightOuter,o.left+o.width,o.top),A(a,i[2],i[3],e.bottomRightOuter,e.bottomLeftOuter,o.left+o.width,o.top+o.height),A(a,i[3],i[0],e.bottomLeftOuter,e.topLeftOuter,o.left,o.top+o.height)}return a}function Q(t,e,n){var i,o,r,a,s,l,u=e.left,d=e.top,c=e.width,f=e.height,h=L(t),p=P(e,h,n),g={clip:M(t,p,n,h,e),borders:[]};for(i=0;4>i;i++)if(n[i].width>0){switch(o=u,r=d,a=c,s=f-n[2].width,i){case 0:s=n[0].width,l=I({c1:[o,r],c2:[o+a,r],c3:[o+a-n[1].width,r+s],c4:[o+n[3].width,r+s]},h[0],h[1],p.topLeftOuter,p.topLeftInner,p.topRightOuter,p.topRightInner);break;case 1:o=u+c-n[1].width,a=n[1].width,l=I({c1:[o+a,r],c2:[o+a,r+s+n[2].width],c3:[o,r+s],c4:[o,r+n[0].width]},h[1],h[2],p.topRightOuter,p.topRightInner,p.bottomRightOuter,p.bottomRightInner);break;case 2:r=r+f-n[2].width,s=n[2].width,l=I({c1:[o+a,r+s],c2:[o,r+s],c3:[o+n[3].width,r],c4:[o+a-n[2].width,r]},h[2],h[3],p.bottomRightOuter,p.bottomRightInner,p.bottomLeftOuter,p.bottomLeftInner);break;case 3:a=n[3].width,l=I({c1:[o,r+s+n[2].width],c2:[o,r],c3:[o+a,r+n[0].width],c4:[o+a,r+s]},h[3],h[0],p.bottomLeftOuter,p.bottomLeftInner,p.topLeftOuter,p.topLeftInner)}g.borders.push({args:l,color:n[i].color})}return g}function O(t,e){var n=t.drawShape();return e.forEach(function(t,e){n[0===e?"moveTo":t[0]+"To"].apply(null,t.slice(1))}),n}function R(t,e,n){"transparent"!==n&&(t.setVariable("fillStyle",n),O(t,e),t.fill(),ae+=1)}function j(t,e,n){var o,r,a=se.createElement("valuewrap"),s=["lineHeight","textAlign","fontFamily","color","fontSize","paddingLeft","paddingTop","width","height","border","borderLeftWidth","borderTopWidth"];s.forEach(function(e){try{a.style[e]=ce(t,e)}catch(n){i("html2canvas: Parse: Exception caught in renderFormValue: "+n.message)}}),a.style.borderColor="black",a.style.borderStyle="solid",a.style.display="block",a.style.position="absolute",(/^(submit|reset|button|text|password)$/.test(t.type)||"SELECT"===t.nodeName)&&(a.style.lineHeight=ce(t,"height")),a.style.top=e.top+"px",a.style.left=e.left+"px",o="SELECT"===t.nodeName?(t.options[t.selectedIndex]||0).text:t.value,o||(o=t.placeholder),r=se.createTextNode(o),a.appendChild(r),de.appendChild(a),C(t,r,n),de.removeChild(a)}function H(t){t.drawImage.apply(t,Array.prototype.slice.call(arguments,1)),ae+=1}function F(n,o){var r=t.getComputedStyle(n,o);if(r&&r.content&&"none"!==r.content&&"-moz-alt-content"!==r.content){var a=r.content+"",s=a.substr(0,1);s===a.substr(a.length-1)&&s.match(/'|"/)&&(a=a.substr(1,a.length-2));var l="url"===a.substr(0,3),d=e.createElement(l?"img":"span");return d.className=fe+"-before "+fe+"-after",Object.keys(r).filter(z).forEach(function(t){try{d.style[t]=r[t]}catch(e){i(["Tried to assign readonly property ",t,"Error:",e])}}),l?d.src=u.Util.parseBackgroundImage(a)[0].args[0]:d.innerHTML=a,d}}function z(e){return isNaN(t.parseInt(e,10))}function B(t,e){var n=F(t,":before"),i=F(t,":after");(n||i)&&(n&&(t.className+=" "+fe+"-before",t.parentNode.insertBefore(n,t),ne(n,e,!0),t.parentNode.removeChild(n),t.className=t.className.replace(fe+"-before","").trim()),i&&(t.className+=" "+fe+"-after",t.appendChild(i),ne(i,e,!0),t.removeChild(i),t.className=t.className.replace(fe+"-after","").trim()))}function W(t,e,n,i){var o=Math.round(i.left+n.left),r=Math.round(i.top+n.top);t.createPattern(e),t.translate(o,r),t.fill(),t.translate(-o,-r)}function U(t,e,n,i,o,r,a,s){var l=[];l.push(["line",Math.round(o),Math.round(r)]),l.push(["line",Math.round(o+a),Math.round(r)]),l.push(["line",Math.round(o+a),Math.round(s+r)]),l.push(["line",Math.round(o),Math.round(s+r)]),O(t,l),t.save(),t.clip(),W(t,e,n,i),t.restore()}function $(t,e,n){f(t,e.left,e.top,e.width,e.height,n)}function X(t,e,n,i,o){var r=u.Util.BackgroundSize(t,e,i,o),a=u.Util.BackgroundPosition(t,e,i,o,r),s=ce(t,"backgroundRepeat").split(",").map(function(t){return t.trim()});switch(i=V(i,r),s=s[o]||s[0]){case"repeat-x":U(n,i,a,e,e.left,e.top+a.top,99999,i.height);break;case"repeat-y":U(n,i,a,e,e.left+a.left,e.top,i.width,99999);break;case"no-repeat":U(n,i,a,e,e.left+a.left,e.top+a.top,i.width,i.height);break;default:W(n,i,a,{top:e.top,left:e.left,width:i.width,height:i.height})}}function G(t,e,n){for(var o,r=ce(t,"backgroundImage"),a=u.Util.parseBackgroundImage(r),s=a.length;s--;)if(r=a[s],r.args&&0!==r.args.length){var l="url"===r.method?r.args[0]:r.value;o=T(l),o?X(t,e,n,o,s):i("html2canvas: Error loading background:",r)}}function V(t,e){if(t.width===e.width&&t.height===e.height)return t;var n,i=se.createElement("canvas");return i.width=e.width,i.height=e.height,n=i.getContext("2d"),H(n,t,0,0,t.width,t.height,0,0,e.width,e.height),i}function Y(t,e,n){var i=ce(e,"opacity")*(n?n.opacity:1);return t.setVariable("globalAlpha",i),i}function K(t,e,n){var i=r(e?n.width:l(),e?n.height:d()),o={ctx:i,zIndex:E(ce(t,"zIndex"),e?e.zIndex:null),opacity:Y(i,t,e),cssPosition:ce(t,"position"),borders:D(t),clip:e&&e.clip?u.Util.Extend({},e.clip):null};return s.useOverflow===!0&&/(hidden|scroll|auto)/.test(ce(t,"overflow"))===!0&&/(BODY)/i.test(t.nodeName)===!1&&(o.clip=o.clip?k(o.clip,n):n),o.zIndex.children.push(o),o}function Z(t,e,n){var i={left:e.left+t[3].width,top:e.top+t[0].width,width:e.width-(t[1].width+t[3].width),height:e.height-(t[0].width+t[2].width)};return n&&(i=k(i,n)),i}function te(t,e,n){var o,r=u.Util.Bounds(t),a=ue.test(t.nodeName)?"#efefef":ce(t,"backgroundColor"),s=K(t,e,r),l=s.borders,d=s.ctx,c=Z(l,r,s.clip),f=Q(t,r,l);switch(O(d,f.clip),d.save(),d.clip(),c.height>0&&c.width>0&&($(d,r,a),G(t,c,d)),d.restore(),f.borders.forEach(function(t){R(d,t.args,t.color)}),n||B(t,s),t.nodeName){case"IMG":(o=T(t.getAttribute("src")))?N(d,t,o,r,l):i("html2canvas: Error loading <img>:"+t.getAttribute("src"));break;case"INPUT":/^(text|url|email|submit|button|reset)$/.test(t.type)&&(t.value||t.placeholder).length>0&&j(t,r,s);break;case"TEXTAREA":(t.value||t.placeholder||"").length>0&&j(t,r,s);break;case"SELECT":(t.options||t.placeholder||"").length>0&&j(t,r,s);break;case"LI":q(t,s,c);break;case"CANVAS":N(d,t,t,r,l)}return s}function ee(t){return"none"!==ce(t,"display")&&"hidden"!==ce(t,"visibility")&&!t.hasAttribute("data-html2canvas-ignore")}function ne(t,e,n){ee(t)&&(e=te(t,e,n)||e,ue.test(t.nodeName)||u.Util.Children(t).forEach(function(i){1===i.nodeType?ne(i,e,n):3===i.nodeType&&C(t,i,e)}))}function ie(t,e){function n(t){var e,i,o,r,s,l=u.Util.Children(t),d=l.length;for(s=0;d>s;s+=1)if(r=l[s],3===r.nodeType)a+=r.nodeValue.replace(/</g,"&lt;").replace(/>/g,"&gt;");else if(1===r.nodeType&&!/^(script|meta|title)$/.test(r.nodeName.toLowerCase())){if(a+="<"+r.nodeName.toLowerCase(),r.hasAttributes())for(e=r.attributes,o=e.length,i=0;o>i;i+=1)a+=" "+e[i].name+'="'+e[i].value+'"';a+=">",n(r),a+="</"+r.nodeName.toLowerCase()+">"}}var i=new Image,o=l(),r=d(),a="";n(t),i.src=["data:image/svg+xml,","<svg xmlns='http://www.w3.org/2000/svg' version='1.1' width='"+o+"' height='"+r+"'>","<foreignObject width='"+o+"' height='"+r+"'>","<html xmlns='http://www.w3.org/1999/xhtml' style='margin:0;'>",a.replace(/\#/g,"%23"),"</html>","</foreignObject>","</svg>"].join(""),i.onload=function(){e.svgRender=i}}function oe(){var t=te(re,null);return le.svgRendering&&ie(e.documentElement,t),Array.prototype.slice.call(re.children,0).forEach(function(e){ne(e,t)}),t.backgroundColor=ce(e.documentElement,"backgroundColor"),de.removeChild(he),t}bds.qa.ShortCut.scrollTop=t.pageYOffset||e.documentElement.scrollTop||e.body.scrollTop,t.scroll(0,0);var re=s.elements===n?e.body:s.elements[0],ae=0,se=re.ownerDocument,le=u.Util.Support(s,se),ue=new RegExp("("+s.ignoreElements+")"),de=se.body,ce=u.Util.getCSS,fe="___html2canvas___pseudoelement",he=se.createElement("style");he.innerHTML="."+fe+'-before:before { content: "" !important; display: none !important; }.'+fe+'-after:after { content: "" !important; display: none !important; }',de.appendChild(he),o=o||{};var pe=function(t){return function(e,n,i,o){var r=i*t,a=o*t,s=e+i,l=n+o;return{topLeft:J({x:e,y:l},{x:e,y:l-a},{x:s-r,y:n},{x:s,y:n}),topRight:J({x:e,y:n},{x:e+r,y:n},{x:s,y:l-a},{x:s,y:l}),bottomRight:J({x:s,y:n},{x:s,y:n+a},{x:e+r,y:l},{x:e,y:l}),bottomLeft:J({x:s,y:l},{x:s-r,y:l},{x:e,y:n+a},{x:e,y:n})}}}(4*((Math.sqrt(2)-1)/3));return oe()},u.Preload=function(o){function r(t){T.href=t,T.href=T.href;var e=T.protocol+T.host;return e===m}function a(){i("html2canvas: start: images: "+x.numLoaded+" / "+x.numTotal+" (failed: "+x.numFailed+")"),!x.firstRun&&x.numLoaded>=x.numTotal&&(i("Finished loading images: # "+x.numTotal+" (failed: "+x.numFailed+")"),"function"==typeof o.complete&&o.complete(x))}function s(e,i,r){var s,l,u=o.proxy;T.href=e,e=T.href,s="html2canvas_"+C++,r.callbackname=s,u+=u.indexOf("?")>-1?"&":"?",u+="url="+encodeURIComponent(e)+"&callback="+s,l=S.createElement("script"),t[s]=function(e){"error:"===e.substring(0,6)?(r.succeeded=!1,x.numLoaded++,x.numFailed++,a()):(g(i,r),i.src=e),t[s]=n;try{delete t[s]}catch(o){}l.parentNode.removeChild(l),l=null,delete r.script,delete r.callbackname},l.setAttribute("type","text/javascript"),l.setAttribute("src",u),r.script=l,t.document.body.appendChild(l)}function l(e,n){var i=t.getComputedStyle(e,n),o=i.content;"url"===o.substr(0,3)&&b.loadImage(u.Util.parseBackgroundImage(o)[0].args[0]),h(i.backgroundImage,e)}function d(t){l(t,":before"),l(t,":after")}function c(t,e){var i=u.Generate.Gradient(t,e);i!==n&&(x[t]={img:i,succeeded:!0},x.numTotal++,x.numLoaded++,a())}function f(t){return t&&t.method&&t.args&&t.args.length>0}function h(t,e){var i;u.Util.parseBackgroundImage(t).filter(f).forEach(function(t){"url"===t.method?b.loadImage(t.args[0]):t.method.match(/\-?gradient$/)&&(i===n&&(i=u.Util.Bounds(e)),c(t.value,i))})}function p(t){var e=!1;try{u.Util.Children(t).forEach(function(t){p(t)})}catch(o){}try{e=t.nodeType}catch(r){e=!1,i("html2canvas: failed to access some element's nodeType - Exception: "+r.message)}if(1===e||e===n){d(t);try{h(u.Util.getCSS(t,"backgroundImage"),t)}catch(o){i("html2canvas: failed to get background-image - Exception: "+o.message)}h(t)}}function g(e,i){e.onload=function(){i.timer!==n&&t.clearTimeout(i.timer),x.numLoaded++,i.succeeded=!0,e.onerror=e.onload=null,a()},e.onerror=function(){if("anonymous"===e.crossOrigin&&(t.clearTimeout(i.timer),o.proxy)){var n=e.src;return e=new Image,i.img=e,e.src=n,void s(e.src,e,i)}x.numLoaded++,x.numFailed++,i.succeeded=!1,e.onerror=e.onload=null,a()}}var m,b,v,y,x={numLoaded:0,numFailed:0,numTotal:0,cleanupDone:!1},C=0,w=o.elements[0]||e.body,S=w.ownerDocument,_=S.images,q=_.length,T=S.createElement("a"),k=function(t){return t.crossOrigin!==n}(new Image);for(T.href=t.location.href,m=T.protocol+T.host,b={loadImage:function(e){var i,a;e&&x[e]===n&&(i=new Image,e.match(/data:image\/.*;base64,/i)?(i.src=e.replace(/url\(['"]{0,}|['"]{0,}\)$/gi,""),a=x[e]={img:i},x.numTotal++,g(i,a)):r(e)||o.allowTaint===!0?(a=x[e]={img:i},x.numTotal++,g(i,a),i.src=e):k&&!o.allowTaint&&o.useCORS?(i.crossOrigin="anonymous",a=x[e]={img:i},x.numTotal++,g(i,a),i.src=e,i.customComplete=function(){this.img.complete?this.img.onerror():this.timer=t.setTimeout(this.img.customComplete,100)}.bind(a),i.customComplete()):o.proxy&&(a=x[e]={img:i},x.numTotal++,s(e,i,a)))},cleanupDOM:function(r){var s,l;if(!x.cleanupDone){i(r&&"string"==typeof r?"html2canvas: Cleanup because: "+r:"html2canvas: Cleanup after timeout: "+o.timeout+" ms.");for(l in x)if(x.hasOwnProperty(l)&&(s=x[l],"object"==typeof s&&s.callbackname&&s.succeeded===n)){t[s.callbackname]=n;try{delete t[s.callbackname]}catch(u){}s.script&&s.script.parentNode&&(s.script.setAttribute("src","about:blank"),s.script.parentNode.removeChild(s.script)),x.numLoaded++,x.numFailed++,i("html2canvas: Cleaned up failed img: '"+l+"' Steps: "+x.numLoaded+" / "+x.numTotal)}t.stop!==n?t.stop():e.execCommand!==n&&e.execCommand("Stop",!1),e.close!==n&&e.close(),x.cleanupDone=!0,r&&"string"==typeof r||a()}},renderingDone:function(){y&&t.clearTimeout(y)}},o.timeout>0&&(y=t.setTimeout(b.cleanupDOM,o.timeout)),i("html2canvas: Preload starts: finding background-images"),x.firstRun=!0,p(w),i("html2canvas: Preload: Finding images"),v=0;q>v;v+=1)b.loadImage(_[v].getAttribute("src"));return x.firstRun=!1,i("html2canvas: Preload: Done."),x.numTotal===x.numLoaded&&a(),b},u.Renderer=function(t,i){function o(t){var e=[],n=function(t){var i=[],o=[];t.children.forEach(function(t){t.children&&t.children.length>0?(i.push(t),o.push(t.zindex)):e.push(t)}),o.sort(function(t,e){return t-e}),o.forEach(function(t){var e;i.some(function(n,i){return e=i,n.zindex===t}),n(i.splice(e,1)[0])})};return t&&t.zIndex&&n(t.zIndex),e}function r(t){var e;if("string"==typeof i.renderer&&u.Renderer[t]!==n)e=u.Renderer[t](i);else{if("function"!=typeof t)throw new Error("Unknown renderer");e=t(i)}if("function"!=typeof e)throw new Error("Invalid renderer defined");return e}return r(i.renderer)(t,i,e,o(t),u)},u.Util.Support=function(t,e){function o(){var t=new Image,o=e.createElement("canvas"),r=o.getContext===n?!1:o.getContext("2d");if(r===!1)return!1;o.width=o.height=10,t.src=["data:image/svg+xml,","<svg xmlns='http://www.w3.org/2000/svg' width='10' height='10'>","<foreignObject width='10' height='10'>","<div xmlns='http://www.w3.org/1999/xhtml' style='width:10;height:10;'>","sup","</div>","</foreignObject>","</svg>"].join("");try{r.drawImage(t,0,0),o.toDataURL()}catch(a){return!1}return i("html2canvas: Parse: SVG powered rendering available"),!0}function r(){var t,n,i,o,r=!1;return e.createRange&&(t=e.createRange(),t.getBoundingClientRect&&(n=e.createElement("boundtest"),n.style.height="123px",n.style.display="block",e.body.appendChild(n),t.selectNode(n),i=t.getBoundingClientRect(),o=i.height,123===o&&(r=!0),e.body.removeChild(n))),r}return{rangeBounds:r(),svgRendering:t.svgRendering&&o()}},t.html2canvas=function(e,n){e=e.length?e:[e];var o,r,a={logging:!1,elements:e,background:"#fff",proxy:null,timeout:0,useCORS:!1,allowTaint:!1,svgRendering:!1,ignoreElements:"IFRAME|OBJECT|PARAM",useOverflow:!0,letterRendering:!1,chinese:!1,width:null,height:null,taintTest:!0,renderer:"Canvas"};return a=u.Util.Extend(n,a),u.logging=a.logging,a.complete=function(t){("function"!=typeof a.onpreloaded||a.onpreloaded(t)!==!1)&&(o=u.Parse(t,a),("function"!=typeof a.onparsed||a.onparsed(o)!==!1)&&(r=u.Renderer(o,a),"function"==typeof a.onrendered&&a.onrendered(r)))},t.setTimeout(function(){u.Preload(a)},0),{render:function(t,e){return u.Renderer(t,u.Util.Extend(e,a))},parse:function(t,e){return u.Parse(t,u.Util.Extend(e,a))},preload:function(t){return u.Preload(u.Util.Extend(t,a))},log:i}},t.html2canvas.log=i,t.html2canvas.Renderer={Canvas:n},u.Renderer.Canvas=function(t){function o(t,e){t.beginPath(),e.forEach(function(e){t[e.name].apply(t,e.arguments)}),t.closePath()}function r(t){if(-1===u.indexOf(t.arguments[0].src)){c.drawImage(t.arguments[0],0,0);try{c.getImageData(0,0,1,1)}catch(e){return d=l.createElement("canvas"),c=d.getContext("2d"),!1}u.push(t.arguments[0].src)}return!0}function a(t){return"transparent"===t||"rgba(0, 0, 0, 0)"===t}function s(e,n){switch(n.type){case"variable":e[n.name]=n.arguments;break;case"function":if("createPattern"===n.name){if(n.arguments[0].width>0&&n.arguments[0].height>0)try{e.fillStyle=e.createPattern(n.arguments[0],"repeat")}catch(a){i("html2canvas: Renderer: Error creating pattern",a.message)}}else"drawShape"===n.name?o(e,n.arguments):"drawImage"===n.name?n.arguments[8]>0&&n.arguments[7]>0&&(!t.taintTest||t.taintTest&&r(n))&&e.drawImage.apply(e,n.arguments):e[n.name].apply(e,n.arguments)}}t=t||{};var l=e,u=[],d=e.createElement("canvas"),c=d.getContext("2d"),f=t.canvas||l.createElement("canvas");return function(t,e,o,r,l){var u,d,c,h,p,g,m=f.getContext("2d");if(f.width=f.style.width=e.width||t.ctx.width,f.height=f.style.height=e.height||t.ctx.height,g=m.fillStyle,m.fillStyle=a(t.backgroundColor)&&e.background!==n?e.background:t.backgroundColor,m.fillRect(0,0,f.width,f.height),m.fillStyle=g,e.svgRendering&&t.svgRender!==n)m.drawImage(t.svgRender,0,0);else for(d=0,c=r.length;c>d;d+=1)u=r.splice(0,1)[0],u.canvasPosition=u.canvasPosition||{},m.textBaseline="bottom",u.clip&&(m.save(),m.beginPath(),m.rect(u.clip.left,u.clip.top,u.clip.width,u.clip.height),m.clip()),u.ctx.storage&&u.ctx.storage.forEach(s.bind(null,m)),u.clip&&m.restore();return i("html2canvas: Renderer: Canvas renderer done - returning canvas obj"),c=e.elements.length,1===c&&"object"==typeof e.elements[0]&&"BODY"!==e.elements[0].nodeName?(p=l.Util.Bounds(e.elements[0]),h=o.createElement("canvas"),h.width=p.width,h.height=p.height,m=h.getContext("2d"),m.drawImage(f,p.left,p.top,p.width,p.height,0,0,p.width,p.height),f=null,h):f}}}(window,document);var t=function(){html2canvas(document.body,{proxy:bds.qa.ShortCut.base_url_path+"/getProxyImage.php",onrendered:function(t){t.id="fb_right_dialog_pagecanvas2",t.style.top=0,t.style.left=0,t.style.position="absolute",document.body.appendChild(t),bds.qa.ShortCut.img_data=t.toDataURL("image/png")}})};t()},init_img_render:function(){bds.qa.ShortCut.send_img=!0;var t=function(){var t={init:function(){var e=function(){var e=document.getElementById("fb_right_dialog_canvas");e&&bds.qa.ShortCut.fbJQ(e).remove(),bds.qa.ShortCut.fbJQ("#fb_baidu_wizard").remove();var n=document.createElement("canvas"),i=Math.max(Math.max(document.body.scrollHeight,document.documentElement.scrollHeight),Math.max(document.body.offsetHeight,document.documentElement.offsetHeight),Math.max(document.body.clientHeight,document.documentElement.clientHeight)),o=Math.max(Math.max(document.body.scrollWidth,document.documentElement.scrollWidth),Math.max(document.body.offsetWidth,document.documentElement.offsetWidth),Math.max(document.body.clientWidth,document.documentElement.clientWidth));n.width=o,n.height=i,n.style.top=0,n.style.left=0,n.style.position="absolute",n.style.zIndex="999989",n.id="fb_right_dialog_canvas",document.body.appendChild(n),t.load(),t.bind(),bds.qa.ShortCut.fbJQ("#fb_right_dialog_canvas").css("cursor","crosshair")};e()},load:function(){this.x=[],this.y=[],this.clickDrag=[],this.Rectangles=[],this.rectangleNo="",this.lock=!1,this.hasCover=!1,this.canvas=document.getElementById("fb_right_dialog_canvas"),this.cxt=this.canvas.getContext("2d"),this.cxt.fillStyle="rgba(85,85,85,0.5)",this.cxt.fillRect(0,0,document.body.clientWidth,document.body.scrollHeight>window.screen.availHeight?document.body.scrollHeight:window.screen.availHeight),this.cxt.globalCompositeOperation="destination-out",this.StartEvent="mousedown",this.MoveEvent="mousemove",this.EndEvent="mouseup"},bind:function(){var t=this;bds.qa.ShortCut.fbJQ("#fb_right_canvas_save").click(function(){if(1==bds.qa.ShortCut.send_img){var t=bds.qa.ShortCut.fbJQ("#fb_des_content").val();if(""==t||t==bds.qa.ShortCut.issuePlaceholder)return bds.qa.ShortCut.popwindow("请填写反馈内容",200),!1;var e=bds.qa.ShortCut.fbJQ(".fb-level-type-block .fb-check").length;if(""==e||1>e)return bds.qa.ShortCut.popwindow("请选择问题类型",200),!1;bds.qa.ShortCut.sendCanvasData()}}),this.canvas["on"+t.StartEvent]=function(e){var n=t.touch?e.touches[0]:e,i=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop;if(t.movePoint(n.clientX-n.target.offsetLeft,n.clientY-n.target.offsetTop+i),t.hasCover){var o="#fb_cancel_"+t.rectangleNo;bds.qa.ShortCut.fbJQ(o).remove()}t.lock=!0},this.canvas["on"+t.MoveEvent]=function(e){e=e?e:window.event;var n=t.touch?e.touches[0]:e,i=n.clientX-n.target.offsetLeft,o=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop,r=n.clientY-n.target.offsetTop+o;t.lock?(bds.qa.ShortCut.fbJQ("#fb_baidu_right_dialog").hide(),t.movePoint(i,r,!0),t.drawRectangle()):t.showRectangle(i,r,t)},this.canvas["on"+t.EndEvent]=function(){bds.qa.ShortCut.fbJQ("#fb_baidu_right_dialog").show(),t.lock=!1,t.Rectangles.push([t.x[0],t.y[0],t.x[t.x.length-1]-t.x[0],t.y[t.y.length-1]-t.y[0]]),t.x=[],t.y=[],t.clickDrag=[],t.drawRectangle()}},createCancel:function(t,e,n){var i=document.createElement("div");i.id="fb_cancel_"+n.rectangleNo,i.className="fb_cancel_flag",i.style.background="url("+bds.qa.ShortCut.base_url_path+"/feedback/images/cancel.png)",i.style.top=parseInt(t-8)+"px",i.style.left=parseInt(e-8)+"px",i.style.width="16px",i.style.height="16px",i.style.position="absolute",i.style.zIndex="999989",i.style.cursor="pointer",bds.qa.ShortCut.fbJQ("body").append(i),bds.qa.ShortCut.fbJQ("#fb_cancel_"+n.rectangleNo).click(function(){n.Rectangles[n.rectangleNo]=0,bds.qa.ShortCut.fbJQ("#fb_cancel_"+n.rectangleNo).remove(),n.hasCover=!1,n.drawRectangle()})},movePoint:function(t,e){this.x.push(t),this.y.push(e),this.clickDrag.push(e)},showRectangle:function(t,e,n){for(i=0;i<this.Rectangles.length;i++){var o=n.hasCover?this.Rectangles[n.rectangleNo]:this.Rectangles[i],r=o[3]>0?o[1]:o[1]+o[3],a=o[3]>0?o[1]+o[3]:o[1],s=o[2]>0?o[0]:o[0]+o[2],l=o[2]>0?o[0]+o[2]:o[0];if(n.hasCover){var u=s>t||t>l||r>e||e>a;if(u){this.cxt.globalAlpha=1,this.cxt.globalCompositeOperation="source-over",this.cxt.strokeStyle="#FF7F7D",this.cxt.lineWidth="5",this.cxt.strokeRect(o[0],o[1],o[2],o[3]),this.cxt.globalCompositeOperation="destination-out",this.cxt.fillStyle="rgba(255,255,255,1)",this.cxt.fillRect(o[0],o[1],o[2],o[3]),n.hasCover=!1;var d="#fb_cancel_"+n.rectangleNo;bds.qa.ShortCut.fbJQ(d).remove()}}else{var c=t>s&&l>t&&e>r&&a>e;if(c){this.cxt.globalCompositeOperation="source-over",this.cxt.strokeStyle="#FF7F7D",this.cxt.lineWidth="5",this.cxt.strokeRect(o[0],o[1],o[2],o[3]),this.cxt.globalCompositeOperation="destination-out",this.cxt.fillStyle="rgba(255,255,255,1)",this.cxt.fillRect(o[0],o[1],o[2],o[3]),n.hasCover=!0,n.rectangleNo=i,n.createCancel(r,l,n);break}}}},drawRectangle:function(){var t=this.x[this.x.length-1]-this.x[0],e=this.y[this.y.length-1]-this.y[0];this.clear(),this.drawBackground();var n=this.Rectangles.length;if(this.cxt.globalAlpha=1,n)for(n-=1;n>=0;n--){var i=this.Rectangles[n],o=i[0],r=i[1],a=i[2],s=i[3];this.cxt.globalCompositeOperation="source-over",this.cxt.strokeStyle="#FF7F7D",this.cxt.lineWidth="5",this.cxt.strokeRect(o,r,a,s),this.cxt.globalCompositeOperation="destination-out",this.cxt.fillStyle="rgba(255,255,255,1)",this.cxt.fillRect(o,r,a,s)}this.cxt.globalCompositeOperation="source-over",this.cxt.strokeStyle="#FF7F7D",this.cxt.lineWidth="5",this.cxt.strokeRect(this.x[0],this.y[0],t,e),this.cxt.globalCompositeOperation="destination-out",this.cxt.fillStyle="rgba(255,255,255,1)",this.cxt.fillRect(this.x[0],this.y[0],t,e)},clear:function(){this.cxt.clearRect(0,0,this.w,this.h)},removeNode:function(t){t&&t.parentNode&&t.parentNode.removeChild(t)},drawBackground:function(){this.cxt.globalCompositeOperation="copy",this.cxt.fillStyle="rgba(85,85,85,0.5)",this.cxt.fillRect(0,0,document.body.clientWidth,document.body.scrollHeight>window.screen.availHeight?document.body.scrollHeight:window.screen.availHeight),this.cxt.globalCompositeOperation="destination-out"}};t.init()};t()},_getNecData:function(){var t=bds.qa.ShortCut.fbJQ("#feedback_email").val();t==bds.qa.ShortCut.emailPlaceholder&&(t="");var e=bds.qa.ShortCut.fbJQ("#fb_des_content").val();e==bds.qa.ShortCut.issuePlaceholder&&(e="");var n={product_id:bds.qa.ShortCut.product_id,userAgent:navigator.userAgent,issuedesc:encodeURIComponent(e),issueimage:bds.qa.ShortCut.img_data,issuehtml:encodeURIComponent(bds.qa.ShortCut.fbJQ("html").html()),email:t,documentcookie:document.cookie,url:document.location.href};return n},_getProData:function(t){bds.qa.ShortCut.pro_data={level1_type_id:bds.qa.ShortCut.fbJQ(".fb-level-type-block .fb-check").attr("data-value"),query:t,fb_from:"pc"}},sendCanvasData:function(){var t=bds.qa.ShortCut._getNecData();bds.qa.ShortCut._getProData(bds.qa.ShortCut.queryWord),bds.qa.ShortCut.sendDataResult(!0),bds.qa.ShortCut.defaultCut?bds.qa.ShortCut.get_Snapshot():"";
var e="",n=function(){var o=document.getElementById("fb_right_dialog_pagecanvas2");o?(t.issueimage=bds.qa.ShortCut.img_data,i(),window.clearTimeout(e)):e=setTimeout(n,1e3)},i=function(){var e=bds.qa.ShortCut.pro_data,n=bds.qa.ShortCut.fbJQ("#shujufasongzhong");n||bds.qa.ShortCut.fbJQ(".fb-action").append('<div id="shujufasongzhong" style="color:grey;text-align:left;">数据发送中...</div>');var i=document.createElement("iframe"),o="fb_qa_feedback_frame_id";bds.qa.ShortCut.fbJQ("#fb_qa_feedback_frame_id").remove(),document.body.appendChild(i),i.style.display="none",i.contentWindow.name=o;var r=document.createElement("form");r.enctype="multipart/form-data",r.target=o,r.action=bds.qa.ShortCut.base_url_path+"/index.php/feedback/zx/getData",r.method="POST";var a=document.createElement("input");a.type="hidden",a.name="necData",a.value=JSON.stringify(t),r.appendChild(a);var a=document.createElement("input");a.type="hidden",a.name="proData",a.value=JSON.stringify(e),r.appendChild(a),document.body.appendChild(r),r.submit(),i.onload=function(){bds.qa.ShortCut.fbJQ(i).remove(),bds.qa.ShortCut.fbJQ(r).remove(),bds.qa.ShortCut._removeAllElement()}};bds.qa.ShortCut.defaultCut?n():i()},postCrossDomainDataForm:function(){bds.qa.ShortCut._getProData(bds.qa.ShortCut.queryWord);var t=bds.qa.ShortCut._getNecData(),e=bds.qa.ShortCut.pro_data,n=document.createElement("iframe"),i="fb_qa_feedback_frame_id";bds.qa.ShortCut.fbJQ("#fb_qa_feedback_frame_id").remove(),document.body.appendChild(n),n.style.display="none",n.contentWindow.name=i;var o=document.getElementById("fb_right_post_form");if(o){o.enctype="multipart/form-data",o.target=i,o.method="POST";var r=document.createElement("input");r.type="hidden",r.name="necData",r.value=JSON.stringify(t),o.appendChild(r);var r=document.createElement("input");r.type="hidden",r.name="proData",r.value=JSON.stringify(e),o.appendChild(r),o.submit(),bds.qa.ShortCut.sendDataResult(!0),n.onload=function(){bds.qa.ShortCut.fbJQ(n).remove(),bds.qa.ShortCut.fbJQ(o).remove(),bds.qa.ShortCut._removeAllElement()}}},sendDataResult:function(){return bds.qa.ShortCut.popwindowEnd(),!0},_disposeHttps:function(){var t=bds&&bds.util&&bds.util.domain&&bds.util.domain.get;t&&(bds.qa.ShortCut.base_url_path=bds.util.domain.get("http://f3.baidu.com"))},imgLog:function(t){var e="imglog__"+(new Date).getTime(),n=window[e]=new Image;n.onload=n.onerror=function(){window[e]=null},n.src=t,n=null},checkImage:function(t){var e=t.lastIndexOf("."),n=t.substring(e+1).toUpperCase();return!("JPG"!=n&&"GIF"!=n&&"PNG"!=n&&"JPEG"!=n)},_isIE:function(){var t=document.all?!0:!1;return t},_isIE6:function(){var t=document.all?!0:!1,e=t&&!window.XMLHttpRequest;return e},_isIE7:function(){var t=navigator.appName,e=navigator.appVersion,n=e.split(";");if(n.length<=1)return!1;var i=n[1].replace(/[ ]/g,"");return"Microsoft Internet Explorer"==t&&"MSIE7.0"==i},_identifyBrowser:function(){if(window.ActiveXObject)return!1;try{var t=document.createElement("canvas").getContext("2d");return t=null,!0}catch(e){return!1}},_checkFileType:function(t){var e=t.value,n=bds.qa.ShortCut.checkImage(e);if(!n)return bds.qa.ShortCut.popwindow("请上传PNG,JPEG,JPG,GIF等图片文件",100),bds.qa.ShortCut.fbJQ("#fb_shangchuan").val(""),bds.qa.ShortCut.fbJQ(".fb_shangchuan_txt").html(""),!1;var i=t.value.lastIndexOf("\\");document.getElementById("fb_shangchuan_txt").innerHTML=t.value.substring(i+1)},hidwindow:function(){bds.qa.ShortCut.fbJQ("#fb_popwindow").slideUp(500);var t=function(){bds.qa.ShortCut.fbJQ("#fb_popwindow").remove()};setTimeout(t,1e3)},_removeAllElement:function(){bds.qa.ShortCut.fbJQ("#ShortCut_wizard").remove(),bds.qa.ShortCut.fbJQ("#fb_base_wizard_canvas").remove(),bds.qa.ShortCut.fbJQ("#fb_baidu_wizard").remove(),bds.qa.ShortCut.fbJQ("#fb_baidu_right_dialog").remove(),bds.qa.ShortCut.fbJQ("#fb_right_post_form").remove(),bds.qa.ShortCut.fbJQ("#fb_popwindow").remove(),bds.qa.ShortCut.fbJQ("#fb_right_dialog_canvas").remove(),bds.qa.ShortCut.fbJQ("#fb_right_dialog_pagecanvas").remove(),bds.qa.ShortCut.fbJQ("#fb_right_dialog_pagecanvas2").remove(),bds.qa.ShortCut.fbJQ(".fb_cancel_flag").remove(),bds.qa.ShortCut.is_feedbacking=!1},hidwindowEnd:function(){"pad"==bds.qa.ShortCut.skinStyle?(bds.qa.ShortCut.fbJQ("#fb_baidu_right_dialog").css("display","none"),bds.qa.ShortCut.fbJQ("#ShortCut_wizard").css("display","none"),bds.qa.ShortCut.fbJQ("#fb_base_wizard_canvas").css("display","none"),bds.qa.ShortCut.fbJQ("#fb_baidu_wizard").css("display","none"),bds.qa.ShortCut.fbJQ("#fb_right_post_form").css("display","none"),bds.qa.ShortCut.fbJQ("#fb_popwindow").css("display","none"),bds.qa.ShortCut.fbJQ("#fb_right_dialog_canvas").css("display","none"),bds.qa.ShortCut.fbJQ("#fb_right_dialog_pagecanvas").css("display","none"),bds.qa.ShortCut.fbJQ("#fb_right_dialog_pagecanvas2").css("display","none"),bds.qa.ShortCut.fbJQ(".fb_cancel_flag").css("display","none")):(bds.qa.ShortCut.fbJQ("#fb_baidu_right_dialog").fadeOut(500),bds.qa.ShortCut.fbJQ("#ShortCut_wizard").fadeOut(500),bds.qa.ShortCut.fbJQ("#fb_base_wizard_canvas").fadeOut(500),bds.qa.ShortCut.fbJQ("#fb_baidu_wizard").fadeOut(500),bds.qa.ShortCut.fbJQ("#fb_right_post_form").fadeOut(500),bds.qa.ShortCut.fbJQ("#fb_popwindow").fadeOut(500),bds.qa.ShortCut.fbJQ("#fb_right_dialog_canvas").fadeOut(500),bds.qa.ShortCut.fbJQ("#fb_right_dialog_pagecanvas").fadeOut(500),bds.qa.ShortCut.fbJQ("#fb_right_dialog_pagecanvas2").fadeOut(500),bds.qa.ShortCut.fbJQ(".fb_cancel_flag").fadeOut(500))},popwindow:function(t){var e=document.getElementById("fb_pop_tips");e||bds.qa.ShortCut.fbJQ(".fb-action").append("<div id='fb_pop_tips' style='height:25px;line-height:20px; padding-top: 3px;'><span style='color:red;'>"+t+"</span></div>"),("center"==bds.qa.ShortCut.showPosition||"top"==bds.qa.ShortCut.showPosition)&&bds.qa.ShortCut.fbJQ("#fb_pop_tips").css("text-align","center"),bds.qa.ShortCut.fbJQ("#fb_pop_tips").fadeOut(3500);var n=function(){bds.qa.ShortCut.fbJQ("#fb_pop_tips").remove()};setTimeout(n,4e3)},popwindowEnd:function(){document.getElementById("fb_qa_feedback_body").style.height="auto",bds.qa.ShortCut.fbJQ(".fb-modal").css("margin-top","150px"),bds.qa.ShortCut.fbJQ(".fb-action").css("height","auto"),bds.qa.ShortCut.fbJQ(".fb-action").css("width",bds.qa.ShortCut.fbJQ("#fb_qa_feedback_body").width()+20+"px"),bds.qa.ShortCut.fbJQ("#fb_dialog_header").css("margin-top","0px"),bds.qa.ShortCut.fbJQ("#fb_dialog_header").css("bottom","inherit"),bds.qa.ShortCut.fbJQ(".fb-footer").remove(),bds.qa.ShortCut.fbJQ(".fb-guide").remove(),bds.qa.ShortCut.fbJQ(".fb-action").css({"margin-left":"0px","text-align":"center"}),bds.qa.ShortCut.fbJQ(".fb-action").html('<div class="fb-finished" ><img src="'+bds.qa.ShortCut.base_url_path+'/feedback/images/fb_ok.png" style="float: left;margin-left: 30px;margin-top: 25px;"><p style="line-height: 80px;font-size: 16px;">您的意见我们已经收到，谢谢！</p><div>'),setTimeout(bds.qa.ShortCut.hidwindowEnd,2500)},_getWizardPosition:function(){bds.qa.ShortCut.fbJQ(".fb-baidu-wizard").css("height",parseInt(Math.max(document.body.scrollHeight,document.documentElement.clientHeight,document.body.clientHeight))+"px"),bds.qa.ShortCut.fbJQ(".fb-baidu-wizard").css("width",this.win_width+"px")},_getDialogPosition:function(){var t=bds.qa.ShortCut._getClientHeight()-bds.qa.ShortCut.fbJQ("#fb_baidu_right_dialog").height();0>t&&(t=0);var e=bds.qa.ShortCut._getClientWidth()-bds.qa.ShortCut.fbJQ("#fb_baidu_right_dialog").width();0>e&&(e=0),"right"==bds.qa.ShortCut.showPosition?(bds.qa.ShortCut.fbJQ("#fb_baidu_right_dialog").css("right","5px"),bds.qa.ShortCut.fbJQ("#fb_baidu_right_dialog").css("bottom","5px")):"center"==bds.qa.ShortCut.showPosition?(bds.qa.ShortCut.fbJQ("#fb_baidu_right_dialog").css("top",parseInt(t/2)+"px"),bds.qa.ShortCut.fbJQ("#fb_baidu_right_dialog").css("left",parseInt(e/2)+"px")):"top"==bds.qa.ShortCut.showPosition?(bds.qa.ShortCut.fbJQ("#fb_baidu_right_dialog").css("top","15px"),bds.qa.ShortCut.fbJQ("#fb_baidu_right_dialog").css("left",parseInt(e/2)+"px")):"custom"==bds.qa.ShortCut.showPosition?(bds.qa.ShortCut.fbJQ("#fb_baidu_right_dialog").css("bottom",this.dialogPosition.bottom?this.dialogPosition.bottom:"5px"),bds.qa.ShortCut.fbJQ("#fb_baidu_right_dialog").css("left",this.dialogPosition.left?this.dialogPosition.left:"5px")):"bottom_right"==bds.qa.ShortCut.showPosition?(bds.qa.ShortCut.fbJQ("#fb_baidu_right_dialog").css("right",this.dialogPosition.right?this.dialogPosition.right:"5px"),bds.qa.ShortCut.fbJQ("#fb_baidu_right_dialog").css("bottom",this.dialogPosition.bottom?this.dialogPosition.bottom:"5px")):"bottom_left"==bds.qa.ShortCut.showPosition&&(bds.qa.ShortCut.fbJQ("#fb_baidu_right_dialog").css("left",this.dialogPosition.left?this.dialogPosition.left:"5px"),bds.qa.ShortCut.fbJQ("#fb_baidu_right_dialog").css("bottom",this.dialogPosition.bottom?this.dialogPosition.bottom:"5px")),bds.qa.ShortCut.fbJQ("#fb_baidu_right_dialog").css("position","fixed")},_isUpperIos6:function(){return navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPod/i)?Boolean(navigator.userAgent.match(/OS [6-9]_\d[_\d]* like Mac OS X/i)):!1},_getCss:function(){!function(){if(!document.getElementById("fb_css")){var t=bds.qa.ShortCut._getCssName(),e=document.createElement("link");e.type="text/css",e.rel="stylesheet",e.id="fb_css",e.media="screen",e.href=bds.qa.ShortCut.base_url_path+"/feedback/css/"+t;var n=document.getElementsByTagName("head")[0];n.appendChild(e)}}()},_getCssName:function(){var t="";return t=t+"fb_"+bds.qa.ShortCut.skinStyle+"_0.3.css"},_getImg:function(){var t=function(t){var e=new Image;e.src=t,e.complete||(e.onload=function(){e.onload=null})};t(bds.qa.ShortCut.base_url_path+"/feedback/images/cancel.png"),t(bds.qa.ShortCut.base_url_path+"/feedback/images/"+bds.qa.ShortCut.upImg),t(bds.qa.ShortCut.base_url_path+"/feedback/images/fb_ok.png"),t(bds.qa.ShortCut.base_url_path+"/feedback/images/fb_mouse.png")},_repaint:function(){bds.qa.ShortCut._getWizardPosition(),bds.qa.ShortCut._getDialogPosition()},_getClientHeight:function(){var t=0;return document.documentElement&&document.documentElement.clientHeight?t=document.documentElement.clientHeight:document.body&&(t=document.body.clientHeight),parseInt(t)},_getClientWidth:function(){var t=0;return document.documentElement&&document.documentElement.clientWidth?t=document.documentElement.clientWidth:document.body&&(t=document.body.clientWidth),parseInt(t)},_fixedPage:function(){bds.qa.ShortCut._getDialogPosition(),("center"==bds.qa.ShortCut.showPosition||"top"==bds.qa.ShortCut.showPosition)&&bds.qa.ShortCut.fbJQ(".fb-footer").css("text-align","center"),bds.qa.ShortCut._isIE6()&&(bds.qa.ShortCut.fbJQ("#fb_baidu_right_dialog").css("position","absolute"),("right"==bds.qa.ShortCut.showPosition||"bottom_left"==bds.qa.ShortCut.showPosition||"bottom_right"==bds.qa.ShortCut.showPosition)&&bds.qa.ShortCut.fbJQ("#fb_baidu_right_dialog").css("top",parseInt(document.documentElement.clientHeight+document.documentElement.scrollTop-bds.qa.ShortCut.fbJQ("#fb_baidu_right_dialog").height()-5)+"px")),bds.qa.ShortCut.fbJQ("#fb_baidu_right_dialog").css({width:100}).animate({width:342},{duration:200,step:function(t,e){"width"==e.prop&&bds.qa.ShortCut.fbJQ("#fb_baidu_right_dialog").css({opacity:parseInt(t/360/2)})},done:function(){bds.qa.ShortCut.fbJQ("#fb_baidu_right_dialog").css({opacity:1,display:"block"})}})},default_options:{product_id:0,entrance_id:0,plugintitle:"",issueTips:"反馈内容",issuePlaceholder:"欢迎提出您在使用过程中遇到的问题或宝贵建议（400字以内），感谢您对百度的支持。",emailPlaceholder:"请留下您的联系方式，以便我们及时回复您。",guide:'<span>申请删除百度快照内容，请在<a style="text-decoration:underline;" href="http://tousu.baidu.com/webmaster/add" target="_blank">网页搜索投诉中心</a>提交。</span><br><span>网站收录、流量等站长相关问题，请在<a style="text-decoration:underline;" href="http://zhanzhang.baidu.com/feedback/index" target="_blank">站长平台</a>反馈。</span>',cutFileTips:"点我可以上传图片哦~",cutCanvasTips:'&nbsp;点我可以在当前页面截图哦~&nbsp;<a style="text-decoration:underline;color:#2d9ef8;" href="http://f3.baidu.com/index.php/feedback/tiyan/steps" target="_blank">使用方法</a>',emailTips:"联系方式",needIssueTips:!0,needLevelType:!0,needIssue:!0,needCut:!0,needEmail:!0,needGuide:!1,defaultCut:!1,showPosition:"right",onlyUpFile:!1,cutImg:"jietu.png",upImg:"upload.png",skinStyle:"flat"}},module.exports=bds});
;/*!searchdetail:widget/ui/utils/swf.js*/
define("searchdetail:widget/ui/utils/swf",function(){var e=e||{version:"1.3.9"};return e.guid="$BAIDU$",window[e.guid]=window[e.guid]||{},e.swf=e.swf||{},e.swf.version=function(){var e=navigator;if(e.plugins&&e.mimeTypes.length){var r=e.plugins["Shockwave Flash"];if(r&&r.description)return r.description.replace(/([a-zA-Z]|\s)+/,"").replace(/(\s)+r/,".")+".0"}else if(window.ActiveXObject&&!window.opera)for(var n=12;n>=2;n--)try{var t=new ActiveXObject("ShockwaveFlash.ShockwaveFlash."+n);if(t){var a=t.GetVariable("$version");return a.replace(/WIN/g,"").replace(/,/g,".")}}catch(i){}}(),e.string=e.string||{},e.string.encodeHTML=function(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")},e.encodeHTML=e.string.encodeHTML,e.swf.createHTML=function(r){r=r||{};var n,t,a,i,o,s,l=e.swf.version,c=r.ver||"6.0.0",u={},g=e.string.encodeHTML;for(i in r)u[i]=r[i];if(r=u,!l)return"";for(l=l.split("."),c=c.split("."),a=0;3>a&&(n=parseInt(l[a],10),t=parseInt(c[a],10),!(n>t));a++)if(t>n)return"";var d=r.vars,f=["classid","codebase","id","width","height","align"];if(r.align=r.align||"middle",r.classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000",r.codebase="https://fpdownload.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,0,0",r.movie=r.url||"",delete r.vars,delete r.url,"string"==typeof d)r.flashvars=d;else{var p=[];for(i in d)s=d[i],p.push(i+"="+encodeURIComponent(s));r.flashvars=p.join("&")}var v=["<object "];for(a=0,o=f.length;o>a;a++)s=f[a],v.push(" ",s,'="',g(r[s]),'"');v.push(">");var w={wmode:1,scale:1,quality:1,play:1,loop:1,menu:1,salign:1,bgcolor:1,base:1,allowscriptaccess:1,allownetworking:1,allowfullscreen:1,seamlesstabbing:1,devicefont:1,swliveconnect:1,flashvars:1,movie:1};for(i in r)s=r[i],i=i.toLowerCase(),w[i]&&(s||s===!1||0===s)&&v.push('<param name="'+i+'" value="'+g(s)+'" />');r.src=r.movie,r.name=r.id,delete r.id,delete r.movie,delete r.classid,delete r.codebase,r.type="application/x-shockwave-flash",r.pluginspage="https://get.adobe.com/cn/flashplayer/",v.push("<embed");var h;for(i in r)if(s=r[i],s||s===!1||0===s){if(new RegExp("^salign$","i").test(i)){h=s;continue}v.push(" ",i,'="',g(s),'"')}return h&&v.push(' salign="',g(h),'"'),v.push("></embed></object>"),v.join("")},e.swf.create=function(r,n){r=r||{};var t=e.swf.createHTML(r)||r.errorMessage||"";n&&"string"==typeof n&&(n=document.getElementById(n)),n?n.innerHTML=t:document.write(t)},e.browser=e.browser||{},e.browser.ie=e.ie=/msie (\d+\.\d+)/i.test(navigator.userAgent)?document.documentMode||+RegExp.$1:void 0,e.array=e.array||{},e.array.remove=function(e,r){for(var n=e.length;n--;)n in e&&e[n]===r&&e.splice(n,1);return e},e.lang=e.lang||{},e.lang.isArray=function(e){return"[object Array]"==Object.prototype.toString.call(e)},e.lang.isFunction=function(e){return"[object Function]"==Object.prototype.toString.call(e)},e.lang.toArray=function(r){if(null===r||void 0===r)return[];if(e.lang.isArray(r))return r;if("number"!=typeof r.length||"string"==typeof r||e.lang.isFunction(r))return[r];if(r.item){for(var n=r.length,t=new Array(n);n--;)t[n]=r[n];return t}return[].slice.call(r)},e.swf.getMovie=function(r){var n,t=document[r];return 9==e.browser.ie?t&&t.length?1==(n=e.array.remove(e.lang.toArray(t),function(e){return"embed"!=e.tagName.toLowerCase()})).length?n[0]:n:t:t||window[r]},e});
;/*!searchdetail:widget/ui/controls/imgtoolbar/wallpaper/checkax.js*/
define("searchdetail:widget/ui/controls/imgtoolbar/wallpaper/checkax",function(e,t,i){var n=function(e){var t=function(){return"Win32"==e.navigator.platform&&e.navigator.userAgent.toLowerCase().indexOf("wow64")<=0?!0:!1},i=function(){if(t())if(e.navigator.userAgent.indexOf("MSIE")>0)try{if(document.getElementById("BDWallpaper"))return document.getElementById("BDWallpaper");var i=document.createElement("div");return i.style.display="none",document.body.appendChild(i),i.innerHTML='<OBJECT ID="BDWallpaper" CLASSID="CLSID:03D2BA47-F4B2-45ba-BD3A-4DE2D5797DAC" ></OBJECT>',document.getElementById("BDWallpaper")}catch(n){}else{var a=e.navigator.mimeTypes["application/baiduwp-activex"];if(a){var r=e.navigator.mimeTypes["application/baiduwp-activex"];if(r){if(document.getElementById("BDWallpaper"))return document.getElementById("BDWallpaper");var o=document.createElement("embed");return o.style.visibility="hidden",o.type="application/baiduwp-activex",o.width=0,o.height=0,o.setAttribute("progid","wpbpluginAX.BrowserControl.1"),o.setAttribute("id","BDWallpaper"),document.body.appendChild(o),o}}}},n=function(){if(t()){if(e.navigator.userAgent.indexOf("MSIE")>0)try{{new ActiveXObject("wpbpluginAX.BrowserControl.1")}}catch(i){return!1}else{var n=e.navigator.mimeTypes["application/baiduwp-activex"];if(!n){if(navigator.plugins){navigator.plugins.refresh(!1);for(var a=0;a<navigator.plugins.length;a++)if(navigator.plugins[a][0].type&&"application/baiduwp-activex"==navigator.plugins[a][0].type)return!0}return!1}}return!0}return alert("Only support windows 32bit!"),!1},a=!1,r=function(e,t){n()?e&&"function"==typeof e&&!a&&(e(),a=!0):(t||(t=100),setTimeout(function(){r(e,t)},t))};return{exist:n,instance:i,checkSys:t,pollingCheck:r}}(window);i.exports=n});
;/*!searchdetail:widget/ui/controls/imgtoolbar/wallpaper/wallpaper.js*/
define("searchdetail:widget/ui/controls/imgtoolbar/wallpaper/wallpaper",function(t){function i(){this.imgData={}}function e(t,i){this.$pnl=t,this.$btn=t.find(".btn-wallp-in"),this.$flashPnl=t.find(".flashpnl"),this.$tip=n(null),this._tipHideTimer=!1,this.flashCtrl=null,this.opts=n.extend({popUrl:"http://bizhi.baidu.com/imagepreview/index.html",redirectUrl:location.protocol+"//"+location.host+"/static/searchdetail/html/crosswallpaper.html"},i)}var n=t("common:widget/ui/base/base"),r=t("common:widget/ui/base/events"),a=t("searchdetail:widget/ui/utils/swf"),l=t("searchdetail:widget/ui/controls/imgtoolbar/wallpaper/checkax");n.extend(i.prototype,r,{init:function(){var t=this,i=window.BD||{};i.IMG=i.IMG||{},window.WP9278A0FC9F485dB8C86BAA1688E99F=function(){t.pluginProc()},i.IMG.getCurrImgURL=function(){return t.getCurrImgURL()},i.IMG.setWallPaper=function(){t.setWallPaper()}},pluginProc:function(){var t=l.instance(),i=t.GetErrorCode();this.fire("pluginExit",{errCode:i})},getCurrImgURL:function(){var t="/search/down?tn=download&word=download&ie=utf8&fr=detailWall&url=",i=this.imgData;return t+encodeURIComponent(i.objURL)+"&height="+i.height+"&width="+i.width},setWallPaper:function(){l&&l.exist()?l.instance().WebSetWallpaper(this.getCurrImgURL()):this.fire("trySetWallPaper")}}),n.extend(e.prototype,r,{init:function(){a.swf.create({id:"flashPreView",url:"/static/searchdetail/flash/WallpaperImages.swf?v=1",width:"72",height:"30",wmode:"transparent",allowFullScreen:"true",errorMessage:"载入FLASH出错",ver:"9.0.0",vars:{preview:1,system:this._getSystemVar(),imagesurl:""}},this.$flashPnl[0]);var t=!!this.$flashPnl.find("object").length;return t&&(this._initBtnState(),this.flashCtrl=new i,this.flashCtrl.on("trySetWallPaper",this._setWallPaperHandler.bind(this)),this.flashCtrl.on("pluginExit",this._pluginExitHandler.bind(this))),t},_initBtnState:function(){if(l.exist())this.$btn.hide(),this.$flashPnl.show();else{var t=this;this.$flashPnl.hide(),this.$btn.show().on("click",function(i){i.preventDefault(),t.showPop()})}},_getSystemVar:function(){var t="";return t="Win32"==navigator.platform?navigator.userAgent.indexOf("Windows NT 5")>-1?"xp":"win7":"xp"},update:function(t){this.flashCtrl&&(this.flashCtrl.imgData=t),t.bigImgUrl&&t.width>=1024&&t.height>=640&&!/\.nipic\.com/.test(t.objURL)?this.$pnl.show():this.$pnl.hide()},showPop:function(){var t=this.flashCtrl.getCurrImgURL(),i=this,e='<div id="iframeBg" class="iframeBg"></div><div id="disIframe" class="disIframe"><iframe id="bizi-iframe" frameborder="0" width="907px" height="452px"></iframe></div>';if(document.getElementById("iframeBg"));else{window.__closeWallPaperPop__=function(t){i._pluginExitHandler({errCode:t})},n(document.body).append(e);var r=this.opts.popUrl+"?redirecturl="+encodeURIComponent(this.opts.redirectUrl)+"&imageurl="+encodeURIComponent(t)+"&"+(new Date).getTime();document.getElementById("bizi-iframe").src=r,n("#iframeBg").on("click",function(){i.hidePop()})}},hidePop:function(){document.getElementById("iframeBg")&&n("#iframeBg").remove(),document.getElementById("disIframe")&&n("#disIframe").remove()},showTip:function(t){this.$tip.length||(this.$tip=n('<div class="wallpaper-info"></div>').appendTo(document.body)),this._tipHideTimer&&(this._tipHideTimer=clearTimeout(this._tipHideTimer)),this.$tip.text(t).show();var i=this;this._tipHideTimer=setTimeout(function(){i.$tip.hide()},1500)},_setWallPaperHandler:function(){this.showPop()},_pluginExitHandler:function(t){t.errCode&&this.showTip(1==t.errCode?"设置成功":"设置失败"),this.hidePop(),this._initBtnState()}});var s=null,o=!1;return{init:function(t){return s||o||(l&&l.checkSys()&&(s=new e(t),s.init()||(s=null)),s||(o=!0,t.hide())),s}}});
;/*!searchdetail:widget/ui/controls/fullscreen/fullscreen.js*/
define("searchdetail:widget/ui/controls/fullscreen/fullscreen",function(t){function i(t,i){this.imgCollection=t,this.imgModel=i,this.cache={},this.requestId=0}function e(t,i,e){this.imgCollection=t,this.imgModel=i,this.$btnPnl=e,this.dataManager=null,this.model={},this.list=[],this._isFullScreen=!1,this.config={minThumbWidth:57,maxThumbWidth:230,thumbGapWidth:6,thumbHeight:90}}var n=t("common:widget/ui/base/base"),s=t("common:widget/ui/juicer/juicer"),o=t("common:widget/ui/base/events"),a=(t("searchdetail:widget/old/hotInfo/utils/utils"),t("common:widget/ui/utils/utils")),h=t("searchdetail:widget/ui/statistic/statistic-core");n.extend(i.prototype,{getLowerBound:function(){return-1*~~this.imgCollection.getFixDataLength()},getUpperBound:function(){return~~this.imgModel.get("total")+this.getLowerBound()-1},getImgsInBatch:function(t){var i=new n.Deferred,e=t.offset,s=30*Math.floor((e+30)/30),o=s-e,a=void 0===t.root?this.imgCollection.getByIndex(e,o):this.imgCollection.getSubImg(t.root,e,o);return a.then(function(e){var n=t.limit-o,a=void 0===t.root?e||[]:e&&e.subList||[];n>0?this.getImgsInBatch({root:t.root,offset:s,limit:n}).then(function(t){i.resolve(a.concat(t))}):i.resolve(a.splice(0,t.limit))}.bind(this)),i},getParsedImgByPos:function(t,i,e,n){var s=[i,e,~~n].join(".");return t=t||{},this.cache[s]=this.cache[s]||{key:s,pn:i,spn:e,width:t.width,height:t.height,thumbURL:t.thumbURL,objURL:t.objURL,replaceUrl:(t.replaceUrl||[]).filter(function(t){return t&&t.ObjURL}).map(function(t){return a.httpsTimg(t.ObjURL)}),isRoot:n},this.cache[s].bdSetImgNum=t.bdSetImgNum,this.cache[s]},mergeList:function(t,i,e){var n=t[e],s=(t||[]).map(function(t){return this.getParsedImgByPos(t,t.pageNum,0,!0)}.bind(this)),o=(i||[]).map(function(t){return this.getParsedImgByPos(t,n.pageNum,t.pageNum,!1)}.bind(this));return o&&o.length&&o.length<n.bdSetImgNum&&0!==o[0].spn?Array.prototype.splice.apply(s,[0,e+1].concat(o)):o&&o.length&&o.length<n.bdSetImgNum?Array.prototype.splice.apply(s,[e,s.length].concat(o)):o&&o.length&&Array.prototype.splice.apply(s,[e,1].concat(o)),s},getImgsByMiddle:function(t,i,e){var n=++this.requestId,s=Math.max(this.getLowerBound(),Math.floor(t.pn-i/2));this.getImgsInBatch({offset:s,limit:i}).then(function(o){if(n===this.requestId){var a=t.pn-s,h=o[a],r=o[o.length-1],l=o.length<i;if(h&&h.isSet){var d=Math.max(0,Math.floor(t.spn-i/2));this.getImgsInBatch({root:t.pn,offset:d,limit:i}).then(function(i){if(n===this.requestId){var s=i[t.spn-d];e&&e({rootImg:this.getParsedImgByPos(h,t.pn,0,!0),imgData:this.getParsedImgByPos(s||h,t.pn,t.spn,!s),list:this.mergeList(o,i,a),lastImg:r,exhausted:l})}}.bind(this))}else h&&e&&e({rootImg:this.getParsedImgByPos(h,t.pn,0,!0),imgData:this.getParsedImgByPos(h,t.pn,0,!0),list:this.mergeList(o),lastImg:r,exhausted:l})}}.bind(this))},getImgsByPnRange:function(t,i,e,n){var s=++this.requestId,o=i.pn-t.pn+1;this.getImgsInBatch({offset:t.pn,limit:o}).then(function(a){if(s===this.requestId){var h=a.length<o,r=a.map(function(t){return t.pn}).indexOf(e),l=a[r];if(~r){var d=0===r?t.spn:0,u=r===a.length-1?i.spn-d+1:l.bdSetImgNum;this.getImgsInBatch({root:e,offset:d,limit:u}).then(function(t){s===this.requestId&&n&&n({list:this.mergeList(a,t,r),exhausted:h})}.bind(this))}else n&&n({list:this.mergeList(a),exhausted:h})}}.bind(this))}}),n.extend(e.prototype,o,{init:function(){this.dataManager=new i(this.imgCollection,this.imgModel),this.bindEvents()},update:function(){if(!this._isFullScreen){var t=this.imgModel.get("rootImg"),i=this.imgModel.get("imgData");this.model={pn:this.imgModel.get("pn"),spn:this.imgModel.get("spn"),imgData:this.dataManager.getParsedImgByPos(i,t.pn,i.pn,!1),rootImg:this.dataManager.getParsedImgByPos(t,t.pn,0,!0),total:this.imgModel.get("total")}}},bindEvents:function(){var t=this.toggleUnfold=this.toggle(".unfold"),i=this.togglePlay=this.toggle(".play");n(this.$btnPnl).on("click",function(){this.toggleFullscreen()}.bind(this)),n(document).on("click",".fullscreen-close-btn",this.toggleFullscreen.bind(this)),n(document).on("click",".unfold-bar",function(){var i=t();this.toggleSlider(i),h.send(i?"5.1013002":"5.1013003",{})}.bind(this)),n(document).on("click",".play-bar",function(){var t=i();this.toggleSetinterval(t),h.send(t?"5.1013000":"5.1013001",{})}.bind(this)),n(document).on("fullscreenchange webkitfullscreenchange mozfullscreenchange MSFullscreenChange",function(){this._isFullScreen=!this._isFullScreen,this._isFullScreen?(t(!0),this.toggleSlider(!0,!0)):(this.toggleSetinterval(),i(!1),this.fire("selectedChange",{index:this.model.pn+-1*this.dataManager.getLowerBound(),subIndex:this.model.spn}))}.bind(this)),n(window).on("resize",function(){this._isFullScreen&&this.model&&this.selectImage(this.model,this.render.bind(this))}.bind(this)),this.bindNavigateActions()},bindNavigateActions:function(){n(document).on("click.navigate",".arrow-wrap",this.setSlider.bind(this)),n(document).on("click.navigate",".list-arrow-wrap",this.setList.bind(this)),n(document).on("click.navigate",".item",this.clickSlider.bind(this))},unbindNavigateActions:function(){n(document).off("click.navigate")},toggle:function(t,i){var e={},s=i||"-switch";return function(i){var o=t+s;return e[t]=void 0===i?!e[t]:i,e[t]?(n(t).hide(),n(o).show()):(n(t).show(),n(o).hide()),this[t.slice(1)+"Status"]=e[t]?o.slice(1):t.slice(1),e[t]}.bind(this)},render:function(){var t,i=n("body"),e=n("#fullscreentpl").html(),o=n(".fullscreen"),a=this.adaptData();t=s(e,a),o.length<=0?i.append(n(t)):o.replaceWith(t),this.loadLargeImage()},pendList:function(t,i){if(!t||!t.list||!t.list.length)return void(i&&i());var e=(this.config.thumbGapWidth,n("#fullscreentpl").html());this.animateList(t,n(".fullscreen .list"),n(s(e,this.adaptData(t))).find(".list"),function(){i&&i()}.bind(this))},animateList:function(t,i,e,n){var s=i.parent(),o=e.parent().clone(),a=parseInt(i.css("left"),10),h=this.config.thumbGapWidth,r=t.list.map(function(t){return t.key}).indexOf(this.list["append"===t.type?this.list.length-1:0].key),l=[];"append"===t.type?(i.append(e.children().splice(r+1)),l=this.list.slice().concat(t.list.slice().splice(r+1))):(a-=t.list.filter(function(t,i){return r>i}).reduce(function(t,i){return t+i.thumbWidth+h},0),i.prepend(e.children().splice(0,r)),i.css("left",a),l=t.list.slice().splice(0,r).concat(this.list.slice()));var d=l.map(function(t){return[t.pn,t.spn].join(".")}).indexOf([t.sentianel.pn,t.sentianel.spn].join(".")),u=l.filter(function(t,i){return d>i}).reduce(function(t,i){return t+i.thumbWidth+h},h),c="append"===t.type?-u:Math.min(0,window.innerWidth-u-(~d?l[d].thumbWidth:0));i.animate({left:c},Math.floor(Math.abs(c-a))/5,function(){s.replaceWith(o),n&&n()}.bind(this))},getDirection:function(t){var i=n(t.currentTarget);return i.hasClass("left-list-arrow-wrap")||i.hasClass("left-arrow-wrap")?"left":"right"},toggleSlider:function(t,i){var e=n(".slider"),s=t?"-105px":0;i?e.css({bottom:s}):e.animate({bottom:s},300)},loadImagesTrial:function(t,i,e,n){var s=i[e];if(s){var o=new Image;o.onerror=function(){this.loadImagesTrial(t,i,e+1,n)}.bind(this),o.onload=function(){var i=50;return this.width&&this.height&&(Math.abs(this.width-t.width)>i||Math.abs(this.height-t.height)>i)?void o.onerror():void(n&&n(s))},o.src=s}},loadLargeImage:function(){var t=this.model.imgData,i=[t.objURL].concat(t.replaceUrl);this.loadImagesTrial(t,i,0,function(t){this.model.imgData&&~i.indexOf(this.model.imgData.objURL)&&n(".content img").attr("src",t)&&(this.model.imgData.objURL=t)}.bind(this))},toggleSetinterval:function(t){t?this.timerId=setInterval(function(){this.setSlider("right")}.bind(this),4e3):(this.timerId&&clearInterval(this.timerId),this.timerId=void 0)},clickSlider:function(t){var i=n(t.currentTarget);i.hasClass("active")||(this.unbindNavigateActions(),this.selectImage({pn:+i.attr("data-pn"),spn:+i.attr("data-spn")},function(){this.render(),this.bindNavigateActions()}.bind(this)),h.send("5.13",{isSF:1}))},setSlider:function(t){var i=this.getDirection(t);this.getNextPos({pn:this.model.pn,spn:this.model.spn},"left"===i?-1:1).then(function(t){(t.pn!==this.model.pn||t.spn!==this.model.spn)&&(this.unbindNavigateActions(),this.selectImage(t,function(){this.render(),this.bindNavigateActions()}.bind(this)))}.bind(this)),h.send("5.12",{isSF:1})},setList:function(t){var i=this.getDirection(t),e=this.getListVisibleRange(),n=this.getPosFromDom(e[0]),s=this.getPosFromDom(e[e.length-1]),o=Math.ceil(window.innerWidth/(this.config.minThumbWidth+this.config.thumbGapWidth)),a="left"===i,h=a?this.getNextPos(n,-o):this.getNextPos(s,o);h.then(function(t){var i=a?t:t.overflowed?n:s,e=a?t.overflowed?s:n:t;this.unbindNavigateActions(),this.dataManager.getImgsByPnRange(i,e,this.model.pn,function(t){this.pendList({list:t.list||[],type:a?"prepend":"append",sentianel:a?n:s,align:a?"right":"left"},function(){this.list=t.list||[],this.bindNavigateActions()}.bind(this))}.bind(this))}.bind(this))},selectImage:function(t,i){t=n.extend({pn:0,spn:0},t);var e=Math.ceil(window.innerWidth/(this.config.minThumbWidth+this.config.thumbGapWidth));this.dataManager.getImgsByMiddle(t,e,function(e){n.extend(this.model,{pn:t.pn,spn:t.spn,imgData:e.imgData,rootImg:e.rootImg,total:e.exhausted&&e.lastImg?e.lastImg.pn+1:this.model.total}),this.list=e.list,i&&i()}.bind(this))},getPosFromDom:function(t){return{pn:~~n(t).data("pn"),spn:~~n(t).data("spn")}},getNextPos:function(t,i){var e=new n.Deferred,s=this.model.rootImg,o=t.pn,a=t.spn,h=!1,r=this.dataManager.getLowerBound(),l=this.dataManager.getUpperBound();if(o!==this.model.pn||this.isOutOfBoundary(a+i,0,~~s.bdSetImgNum-1))if(i>=0&&!this.isOutOfBoundary(o+i,r,l))o+=i,a=0;else{if(!this.isOutOfBoundary(o+i,r,l))return o+=i,this.dataManager.getImgsInBatch({offset:o,limit:1}).then(function(t){e.resolve({pn:o,spn:t.length&&Math.max(0,t[0].bdSetImgNum-1),overflowed:!1})}),e;if(i>0)return o=l,this.dataManager.getImgsInBatch({offset:o,limit:1}).then(function(t){e.resolve({pn:o,spn:t.length&&Math.max(0,t[0].bdSetImgNum-1),overflowed:!0})}),e;h=!0,o=r,a=0}else a+=i;return e.resolve({pn:o,spn:a,overflowed:h})},isOutOfBoundary:function(t,i,e){return i>t||t>e},adaptData:function(t){t=t||{};var i=this.model.rootImg,e=this.model.imgData,s=t.list||this.list,o=this.unfoldStatus||"unfold",a=this.playStatus||"play",h=window.innerWidth,r=window.innerHeight,l=h/r,d=this.config.minThumbWidth,u=this.config.maxThumbWidth,c=(this.config.thumbGapWidth,this.config.thumbHeight);n.each(s.concat(e),function(t,i){var e=i&&i.width,n=i&&i.height;if(e&&n&&!(i.thumbWidth&&i.contentStyle&&i.thumbClass)){var s=e/n;i.thumbWidth=Math.floor(Math.max(d,Math.min(u,s*c))),i.thumbClass=i.thumbWidth===d?"narrow":i.thumbWidth===u?"wide":"normal",i.contentStyle=h>e&&r>n?{width:e,height:n}:s>l?{width:h,height:n*h/e}:{width:e*r/n,height:r}}});var g=this.getListPosition(t),m=this.getListSurrounding(s,g);return{curr:e,currIndex:e.spn+1,currTotal:i.bdSetImgNum||1,list:s,offset:g.offset,surrounding:m,unfold:o,play:a,pn:this.model.pn,spn:this.model.spn,total:this.model.total,lowerBound:this.dataManager.getLowerBound(),upperBound:this.dataManager.getUpperBound()}},getListSurrounding:function(t,i){if(!t.length)return{noPrev:!0,noNext:!0};var e=this.model.rootImg,n=t[0],s=t[t.length-1],o=this.dataManager.getLowerBound(),a=this.dataManager.getUpperBound(),h=this.config.thumbGapWidth,r=i.offset>=-h&&n.pn===o&&!n.spn,l=i.total+i.offset-window.innerWidth<=h&&s.pn===a&&s.spn===(e.pn===s.pn?(e.bdSetImgNum||1)-1:0);return{noPrev:r,noNext:l}},getListPosition:function(t){var i=this.config.thumbGapWidth,e=window.innerWidth,n=t.list||this.list,s=t.sentianel||this.model,o=t.align||"middle",a=0,h=0,r=n.reduce(function(t,e){return e.pn===s.pn&&e.spn===s.spn&&(a=t,h=t+e.thumbWidth),t+e.thumbWidth+i}.bind(this),i),l=e>r?(e-r)/2:"left"===o?-a:"right"===o?Math.min(0,e-h):Math.min(0,e/2-(a+h)/2);return{offset:l,total:r}},getListVisibleRange:function(){var t=n(".fullscreen .item"),i=window.innerWidth;return Array.prototype.filter.call(t,function(t){var e=n(t),s=e.offset().left,o=s+e.width();return o>=0&&i>s}.bind(this))},toggleFullscreen:function(){var t=window.document,i=t.documentElement,e=i.requestFullscreen||i.mozRequestFullScreen||i.webkitRequestFullscreen||i.msRequestFullscreen,n=t.exitFullscreen||t.mozCancelFullScreen||t.webkitExitFullscreen||t.msExitFullscreen;t.fullscreenElement||t.mozFullScreenElement||t.webkitFullscreenElement||t.msFullscreenElement?n.call(t):(e.call(i),this.selectImage(this.model,this.render.bind(this)))}});var r=null,l=!1;return{init:function(t,i,n){var s=window.document,o=s.fullscreenEnabled||s.mozFullScreenEnabled||s.webkitFullscreenEnabled||s.msFullscreenEnabled;return r||l||(o?(r=new e(t,i,n),r.init()):n.hide()),r},update:function(t){r.update(t)}}});
;/*!searchdetail:widget/ui/controls/responsive/responsive.js*/
define("searchdetail:widget/ui/controls/responsive/responsive",function(e){function t(e){return n.UI.getCssDigitValueSum(e,["margin-left","margin-right"])}function i(e,i){i=i||[];var n=0,r=0,a=[],h=[];s(i).each(function(e,i){n+=t(i)+i[0].offsetWidth}),a.push(n),h.push(i),r=n;var o=i;s(e).each(function(e,i){r+=t(i)+i[0].offsetWidth,a.push(r),o=o.concat([i]),h.push(o)}),this.minSize=n,this.maxSize=r,this.sortedSizeArea=a,this.areaElements=h,this.elements=h[h.length-1]||[],this.curAreaSize=a[a.length-1]}var s=e("common:widget/ui/base/base"),n=e("common:widget/ui/utils/utils");return s.extend(i.prototype,{resize:function(e){for(var t=this.sortedSizeArea,i=-1,s=0,n=t.length;n>s&&e>=t[s];s++)i=s;this._updateState(i)},_updateState:function(e){var t=e>=0?this.sortedSizeArea[e]:0;if(t!=this.curAreaSize){this.curAreaSize=t;var i=e>=0?this.areaElements[e]:[];s(this.elements).each(function(e,t){t.hide()}),s(i).each(function(e,t){t.show()})}}}),i});
;/*!searchdetail:widget/ui/controls/imgtoolbar/imgtoolbar.js*/
define("searchdetail:widget/ui/controls/imgtoolbar/imgtoolbar",function(t){function e(t,e,o){this.$pnl=t,this.imgModel=null,this.elements=i.extend({wallpaperBtn:"",zoomScale:"",zoomIn:"",zoomOut:"",zoomToggle:"",downloadLink:"",toPhoneBtn:"",favoBtn:"",fullScreenBtn:"",dutuSwitcher:"",reportLink:"",shituBtn:".btn-shitu"},e),this.opts=i.extend({imgPnl:"",img:""},o),this.zoomViewCtrl=null,this.fullScreenCtrl=null,this.qrcodePopCtrl=null,this.downloadPopCtrl=null,this.favoViewCtrl=null,this.wallpaperCtrl=null,this.responsiveCtrl=null}var i=t("common:widget/ui/base/base"),o=(t("common:widget/ui/utils/utils"),t("common:widget/ui/base/events")),n=t("searchdetail:widget/ui/databinder/databind"),l=t("searchdetail:widget/ui/controls/imgtoolbar/zoomview/zoomview"),s=t("searchdetail:widget/ui/controls/imgtoolbar/qrcodepop/qrcodepop"),r=t("searchdetail:widget/ui/controls/imgtoolbar/downloadpop/downloadpop"),a=t("searchdetail:widget/ui/controls/imgtoolbar/favo/favoview"),d=t("searchdetail:widget/ui/controls/imgtoolbar/feedbacknew/feedbacknew"),h=t("searchdetail:widget/ui/controls/imgtoolbar/wallpaper/wallpaper"),u=t("searchdetail:widget/ui/controls/fullscreen/fullscreen"),c=t("searchdetail:widget/ui/models/settingmodel"),p=t("searchdetail:widget/ui/controls/responsive/responsive"),m=t("searchdetail:widget/ui/app/pagemodel"),w=t("searchdetail:widget/ui/statistic/statistic-core");return i.extend(e.prototype,o,{init:function(t,e){this.imgModel=e,this.$pnl=i(this.$pnl);var o=this.elements,n=this.$pnl;for(var d in o)o.hasOwnProperty(d)&&(o[d]=n.find(o[d]));this.zoomViewCtrl=new l({scale:o.zoomScale,zoomIn:o.zoomIn,zoomOut:o.zoomOut,zoomToggle:o.zoomToggle,img:this.opts.img,imgPnl:this.opts.imgPnl}),this.zoomViewCtrl.init(),this.qrcodePopCtrl=new s,this.qrcodePopCtrl.setTrigger(o.toPhoneBtn),window.downloadPopCtrl=this.downloadPopCtrl=new r,this.downloadPopCtrl.setTrigger(o.downloadLink),this.favoViewCtrl=new a(o.favoBtn),this.favoViewCtrl.init(),this.setDutuSwitcherText(),this._bindEvent()},_bindEvent:function(){var t=this.elements,e=this;t.toPhoneBtn.on("click",function(t){t.preventDefault(),e.qrcodePopCtrl.visible||e.qrcodePopCtrl.show()}),t.downloadLink.on("click",function(t){t.preventDefault(),e.downloadPopCtrl.visible||e.downloadPopCtrl.show()}),t.reportLink.on("click",function(){if(!document.getElementById("fb_baidu_right_dialog")){var e=t.reportLink.offset(),o=342,n=i(window).height()-e.top,l=e.left+41-o/2,s=encodeURIComponent(m.get("queryWord")),r={product_id:103,showPosition:"custom",dialogPosition:{left:l,bottom:n},cutImg:"//img1.bdstatic.com/static/searchdetail/widget/ui/controls/imgtoolbar/feedbacknew/img/jietu_98b303c.png"};d.qa.ShortCut.initRightBar(r,s)}}),t.dutuSwitcher.on("click",function(){var t=e.toggleDutuSetting();w.send("5.1009109",{tn:"baiduimagedetail",fm:"face",act:t?"open":"close"})}),t.shituBtn.click(function(){i.cookie("uploadTime",Date.now(),{path:"/"})})},bindModel:function(t,e){n.bind(t,"scale",this.zoomViewCtrl,"updateScale","changeScale"),n.bind(t,"imgData",this,"update"),n.bind(t,"bigImgUrl",this,"refreshState"),this._initFullScreenCtrl(e,t),u&&n.bind(t,"imgData",u,"update"),this.wallpaperCtrl=h.init(this.elements.wallpaperBtn),this.wallpaperCtrl&&n.bind(t,"imgData",this.wallpaperCtrl,"update"),this.downloadPopCtrl&&n.bind(t,"imgData",this.downloadPopCtrl,"updateShallow"),this.downloadPopCtrl&&n.bind(t,"imgDeepData",this.downloadPopCtrl,"update")},_initFullScreenCtrl:function(t,e){return this.fullScreenCtrl=u.init(t,e,this.elements.fullScreenBtn),this.fullScreenCtrl},_initResponsive:function(){var t=this.elements,e=[t.toPhoneBtn,t.favoBtn,t.reportLink],i=[t.zoomOut,t.zoomScale,t.zoomIn,t.downloadLink];this.wallpaperCtrl&&i.push(t.wallpaperBtn),this.fullScreenCtrl&&i.push(t.fullScreenBtn),this.responsiveCtrl=new p(e,i)},update:function(t,e){function i(){var e=t.group,i=t.star_face,o=t.auto_info,n="clothcard"==e?t.cloth:null,l=t.wiki_face_entity,s=t.srv_auto,r=[],a=[];if(o&&1==o.length&&s&&a.push(o[0]),i&&i.length>0&&l&&l.length>0){var d,h;for(d=l.length-1;d>=0;d--)for(h=i.length-1;h>=0;h--)i[h].entity===l[d].ne&&r.unshift(i[h])}var u=a.length>0||r.length>0||n;return u}this.responsiveCtrl||(this.$pnl.show(),this._initResponsive(),this.responsiveCtrl.resize(this.$pnl.parent().width()));var o=this.elements;"1"===t.youtuType?o.downloadLink.addClass("bar-btn-disabled").attr("href","javascript:void(0);"):o.downloadLink.removeClass("bar-btn-disabled").attr("href","/search/down?tn=download&word=download&ie=utf8&fr=detail&url="+encodeURIComponent(t.objURL)+"&thumburl="+encodeURIComponent(t.thumbURL)),this.qrcodePopCtrl&&this.qrcodePopCtrl.update(t,e),this.favoViewCtrl.update(t,e),i(),o.dutuSwitcher.hide(),this.showSetNum(e);var n="/pcdutu?queryImageUrl="+encodeURIComponent(t.thumbURL||t.bigImgUrl||t.objURL)+"&querySign="+encodeURIComponent(t.cs||t.querysign||"")+"&simid="+encodeURIComponent(t.simid)+"&fm=searchdetail&pos=&uptype=imginfo";o.shituBtn.attr("href",n)},refreshState:function(t){var e=["wallpaperBtn","zoomScale","zoomIn","zoomOut","downloadLink","toPhoneBtn"],o="disabled",n=!!t,l=this.elements;i(e).each(function(t,e){var i=l[e];n&&i.hasClass(o)?i.removeClass(o):n||i.hasClass(o)||i.addClass(o)})},showSetNum:function(t){var e=t.data.spn+1,o=t.data.rootImg.bdSetImgNum;i(".btn-setnum-index").text(e),i(".btn-setnum-total").text(o),0==o?i(".btn-setnum").css("display","none"):i(".btn-setnum").css("display","inline-block")},resetSize:function(){var t=this.$pnl.parent().width();this.responsiveCtrl&&this.responsiveCtrl.resize(t),this.qrcodePopCtrl&&this.qrcodePopCtrl.refreshPos(),this.downloadPopCtrl&&this.downloadPopCtrl.refreshPos(),this.favoViewCtrl&&(this.favoViewCtrl.pop&&this.favoViewCtrl.pop.refreshPos(),this.favoViewCtrl.tip&&this.favoViewCtrl.tip.refreshPos()),this.zoomViewCtrl&&this.zoomViewCtrl.resetImgPnlSize();var e=this.elements,o=e.reportLink.offset();d.qa.ShortCut.is_feedbacking&&(d.qa.ShortCut.showPosition="custom",d.qa.ShortCut.dialogPosition={bottom:i(window).height()-o.top,left:o.left+41-171},d.qa.ShortCut._repaint())},setReportLinkState:function(t){var e=this.elements.reportLink;t&&e.hasClass("disabled")?e.removeClass("disabled"):t||e.hasClass("disabled")||e.addClass("disabled")},setDutuSwitcherText:function(){var t=!!c.getValue(c.DUTU_TAG_CLOSE),e=t?"打开图上标签":"关闭图上标签";this.elements.dutuSwitcher.html('<span class="b-before"></span>'+e+"<i></i>").attr("title",e)},toggleDutuSetting:function(){var t=!!c.getValue(c.DUTU_TAG_CLOSE);return c.setValue(c.DUTU_TAG_CLOSE,t?"":"1"),this.setDutuSwitcherText(),t&&i("#dutu-anchor-wrapper").css("display",""),t&&this.elements.dutuSwitcher.trigger("mouseover"),!!t}}),e});
;/*!searchdetail:widget/ui/controls/imgtoolbarnew/zoomview/zoomview.js*/
define("searchdetail:widget/ui/controls/imgtoolbarnew/zoomview/zoomview",function(t){function i(t,i){this.elements={zoomIn:t.zoomIn,zoomOut:t.zoomOut,scale:t.scale,zoomToggle:t.zoomToggle,img:t.img,imgPnl:t.imgPnl},this.lastImgModel=null,this.zoomInBtn=null,this.zoomOutBtn=null,this.zoomToggle=null,this._timerFrag=e("<div></div>"),this.options=e.extend({minScale:.1,maxScale:10,step:.25},i),this.scale=1}var e=t("common:widget/ui/base/base"),n=t("common:widget/ui/base/events"),o=t("searchdetail:widget/ui/controls/pressbtn/pressbtn");return e.extend(i.prototype,n,{init:function(){var t=this.elements;for(var i in t)t.hasOwnProperty(i)&&(this.elements[i]=e(t[i]));this.zoomInBtn=new o(t.zoomIn),this.zoomInBtn.init(),this.zoomOutBtn=new o(t.zoomOut),this.zoomOutBtn.init(),this._bindEvent()},_bindEvent:function(){this._bindBtnEvent(this.zoomInBtn,!0),this._bindBtnEvent(this.zoomOutBtn,!1);var t=this;this.elements.zoomToggle.on("click",function(){var i=e(this);if(!i.hasClass("btn-imgtoggle-disable")){var n="1"==i.attr("data-adapt");t.fire("viewModeChanged",{mode:n?"adapt":"origin"})}})},_bindBtnEvent:function(t,i){var e=this,n=this.options.step*(i?1:-1),o=i?this.options.maxScale:this.options.minScale;t.on("clicked",function(){e._timerFrag.stop(),e.changeScale(n,!0)}),t.on("pressing",function(){e._startChangeTimer(o)}),t.on("pressEnd",function(){e._timerFrag.stop()})},_getZoomDuration:function(t,i,e){return 1>i?1>=t?(t-i)*e:(1-i+(t-1)/this.options.maxScale)*e:t>=1?(i-t)/this.options.maxScale*e:((i-1)/this.options.maxScale+(1-t))*e},_startChangeTimer:function(t){var i=this;this._timerFrag.width(this.scale).animate({width:t},{duration:this._getZoomDuration(this.scale,t,2e3),easing:"linear",step:function(t){i.changeScale(t,!1)}})},changeScale:function(t,i){var e=i?(1+t)*this.scale:t;return e=Math.min(e,this.options.maxScale),e=Math.max(e,this.options.minScale)},updateScale:function(t){this.scale=t,this.elements.scale.text(Math.floor(100*t)+"%"),this._updateToggleBtnState()},resetImgPnlSize:function(){this._updateToggleBtnState()},_updateToggleBtnState:function(){var t=this.elements,i=t.img.width(),e=t.img.height(),n=t.imgPnl.width(),o=t.imgPnl.height();i>n||e>o||1==this.scale?t.zoomToggle.html('<span class="b-before"></span>合适尺寸<i></i>').attr("data-adapt","1").attr("title","合适尺寸"):t.zoomToggle.html('<span class="b-before"></span>原始尺寸<i></i>').attr("data-adapt","").attr("title","原始尺寸");var s="btn-imgtoggle-disable";n>=i&&o>=e&&1==this.scale?t.zoomToggle.hasClass(s)||t.zoomToggle.addClass(s):t.zoomToggle.hasClass(s)&&t.zoomToggle.removeClass(s)}}),i});
;/*!searchdetail:widget/ui/controls/imgtoolbarnew/materialinfo/materialinfo.js*/
define("searchdetail:widget/ui/controls/imgtoolbarnew/materialinfo/materialinfo",function(t){function i(t,i){i=e.extend({dataKey:"sucai_info",sucaiTpl:['<div class="material">',"<span>其他格式:",'<span class="size-info">','<span class="info-text info-type"></span>','<span class="vsep">|</span><span class="info-text info-type"></span>','<span class="vsep">|</span><span class="info-text info-dpi"></span>','<span class="vsep">|</span><span class="info-text info-size"></span>',"</span>","</span>",'<p class="url-info">','<a class="cardbtn cardbtn-small linkbtn" href="javascript:void(0);" target="_blank">前往下载</a>',"</p>","</div>"].join("")},i),this._validData=null,t=e.extend({list:".info-list"},t)}var e=t("common:widget/ui/base/base"),a=t("common:widget/ui/utils/utils"),s=(t("common:widget/ui/base/events"),t("searchdetail:widget/ui/utils/lib")),n=t("searchdetail:widget/ui/utils/imghelper"),p=t("searchdetail:widget/ui/controls/card/base/base");return e.extend(i.prototype,p.prototype,{checkState:function(t){var i=p.prototype.checkState.call(this,t);if(i.hasContent&&i.changed){var a=this;this._validData=e(i.dataObj).filter(function(t,i){return i.fm?a.isEmpty(i.w)&&a.isEmpty(i.dpi)&&a.isEmpty(i.filesize)?!1:!0:!1}),i.hasContent=!(!this._validData||!this._validData.length)}return i},isEmpty:function(t){return!t||"0"==t},updateView:function(t){var i,p=e("<ul></ul>"),l=this;e(t).each(function(t,o){if(t>0)return!1;i=e(l.opts.itemTpl).appendTo(p);var r=i.find(".material .info-dpi"),d=i.find(".material .info-type"),f=i.find(".material .info-size"),c=i.find(".info-bytes");linkbtn=i.find(".linkbtn"),infoSite=i.find(".src-site"),infoExt={s:(o.w||"0")+"x"+(o.h||"0")},d.text(o.fm.toUpperCase()),r.text((o.dpi||"")+"dpi"),l.isEmpty(o.dpi)?r.hide().prev().hide():r.show().prev().show(),l.isEmpty(o.w)?f.hide().prev().hide():f.html(o.w+"&#215;"+o.h).prev().show();var h=1*(o.filesize||0);h?c.text(n.formatBytes(h).toUpperCase()).show().prev().show():c.hide().prev().hide(),linkbtn.attr("href",o.furl);var u=o.siteName||s.getSiteName(o.site);infoSite.attr("href","http://"+o.site).find("span").text(a.cutHtmlText(u,14,"...")),i.find("a").attr("log-ext",e.json.stringify(infoExt))}),this.elements.list.empty().append(p.children())}}),i});
;/*!searchdetail:widget/ui/controls/imgtoolbarnew/qrcodepop/qrcodepop.js*/
define("searchdetail:widget/ui/controls/imgtoolbarnew/qrcodepop/qrcodepop",function(t){function e(t){t=i.extend({className:"qrcode-pop",hasArrow:!0,hasClose:!0},t),a.call(this,t),this.codeImgSize={width:130,height:130},this.setContent(n),this.imgData=null,this._validData=null,this.imgChanged=!1,this.qrcodeBuilder=new s(this.codeImgSize)}var i=t("common:widget/ui/base/base"),a=t("searchdetail:widget/ui/controls/pop/pop"),s=t("searchdetail:widget/ui/qrcode/qrcode");BaseCardControl=t("searchdetail:widget/ui/controls/card/base/base"),MaterialInfoControl=t("searchdetail:widget/ui/controls/imgtoolbarnew/materialinfo/materialinfo"),utils=t("common:widget/ui/utils/utils"),events=t("common:widget/ui/base/events"),lib=t("searchdetail:widget/ui/utils/lib"),baiduSwf=t("searchdetail:widget/ui/utils/swf"),imghelper=t("searchdetail:widget/ui/utils/imghelper"),statistic=t("searchdetail:widget/ui/statistic/statistic-core");var n=['<div class="top">','<div class="left">','<div class="download-img">',"</div>",'<p class="download-btn">','<a id="btnDownload" logkey="download" class="cardbtn cardbtn-small" href="#" title="保存原图到电脑" hidefocus="true">下载原图至本地</a>',"</p>","</div>",'<div class="vsep"></div>','<div class="right">','<p class="title-row">扫一扫到手机</p>','<div class="qrcode"></div>',"</div>","</div>",'<div class="bottom">','<div class="wallpaper">',"</div>",'<div class="center">',"</div>",'<div class="material">',"</div>","</div>"].join(""),l=['<p class="sucai-title">图片格式:</p>','<div class="size-info">','<p class="info-first info-text info-type"></p>','<p class="text2"><span class="vsepnew vsep2">|</span><span class="info-text info-dpi"></span></p>','<p class="text2"><span class="vsepnew">|</span><span class="info-text info-size"></span></p>',"</div>",'<p class="url-info clearfix">','<a logkey="meterial" class="cardbtn cardbtn-small linkbtn" href="javascript:void(0);" target="_blank">前往下载</a>',"</p>"].join(""),o=['<p class="bizhi-title">壁纸下载:</p>','<div class="size-info">','<p class="info-first info-text info-size"></p>','<p class="text2"><span class="vsepnew vsep2">|</span><span class="info-text info-bytes"></span></p>','<p class="text2"><span class="vsepnew">|</span><span class="info-text info-type"></span></p>',"</div>",'<p class="url-info clearfix">','<a logkey="wallpaper" class="cardbtn cardbtn-small preview-btn" href="javascript:void(0);">预览<span class="flashcon"></span></a>','<a logkey="wallpaper" class="cardbtn cardbtn-small download-btn" href="javascript:void(0);">下载</a>',"</p>"].join("");return i.extend(e.prototype,a.prototype,{_validMaterial:function(t){var e=null,a=this;return this._validData=i(t).filter(function(t,e){return e.fm?a.isEmpty(e.w)&&a.isEmpty(e.dpi)&&a.isEmpty(e.filesize)?!1:!0:!1}),e=this._validData[0]},_validWallpaper:function(t){var e=window.screen.width,a=window.screen.height;validWallpaper=null;return this._validData=i(t).filter(function(t,i){return i.w>=e&&i.h>=a}),this._validData=i(this._validData).sort(function(t,e){return t.w!=e.w?t.w>e.w:t.h>e.h}),validWallpaper=this._validData[0]},isEmpty:function(t){return!t||"0"==t},updateMaterial:function(t){var e,a=i("<ul></ul>"),s=this;return i(t).each(function(t,n){if(t>0)return!1;e=i(l).appendTo(a);var o=e.find(".info-dpi"),r=e.find(".info-type"),d=e.find(".info-size"),h=e.find(".info-bytes"),p=e.find(".linkbtn"),c=e.find(".src-site"),f={s:(n.w||"0")+"x"+(n.h||"0")};r.text(n.fm.toUpperCase()),o.text((n.dpi||"")+"dpi"),s.isEmpty(n.dpi)?o.hide().prev().hide():o.show().prev().show(),s.isEmpty(n.w)?d.hide().prev().hide():d.html(n.w+"&#215;"+n.h).prev().show();var m=1*(n.filesize||0);m?h.text(imghelper.formatBytes(m).toUpperCase()).show().prev().show():h.hide().prev().hide(),p.attr("href",n.furl);var w=n.siteName||lib.getSiteName(n.site);c.attr("href","http://"+n.site).find("span").text(utils.cutHtmlText(w,14,"...")),e.find("a").attr("log-ext",i.json.stringify(f))}),s.statisticBlocks.push("meterial"),a},updateWallpaper:function(t){var e,a=i("<ul></ul>"),s=this,n=[];return i(t).each(function(t,s){if(t>0)return!1;e=i(o).appendTo(a);var l=e.find(".info-type"),r=e.find(".info-size"),d=e.find(".info-bytes"),h=e.find(".preview-btn"),p=e.find(".download-btn"),c=e.find(".src-site"),f={s:(s.w||"0")+"x"+(s.h||"0")},m=s.fm||imghelper.getFileType(s.objurl);l.text(m.toUpperCase()),r.html(s.w+"&#215;"+s.h);var w=1*(s.size||0);w?d.text(imghelper.formatBytes(w,0,Math.floor).toUpperCase()).show().prev().show():d.hide().prev().hide(),h.attr("data-src",s.objurl),p.attr("href","/search/down?tn=download&word=download&ie=utf8&fr=detail&url="+encodeURIComponent(s.objurl)),c.attr("href","http://"+s.s).find("span").text(s.siteName||lib.getSiteName(s.s)),n.push({id:"wallpcard_preview_"+t,width:s.w,height:s.h,imgSrc:s.objurl,flashCon:e.find(".preview-btn .flashcon")}),e.find("a").attr("log-ext",i.json.stringify(f))}),i(n).each(function(t,e){s.initPreview(e.id,e.imgSrc,e.width,e.height,e.flashCon.get(0))}),s.statisticBlocks.push("wallpaper"),a},initPreview:function(t,e,i,a,s){e="/search/down?tn=download&word=download&ie=utf8&fr=detailWall&url="+encodeURIComponent(e)+"&height="+a+"&width="+i,baiduSwf.swf.create({id:t,width:"74",height:"30",ver:"9.0.28",errorMessage:"请下载最新的Flash播放器！",url:"/static/flash/WallpaperImagesv103.swf",bgcolor:"#ffffff",wmode:"transparent",allowfullscreen:"true",vars:{preview:2,system:this.gatSystem(),imagesurl:e}},s)},gatSystem:function(){var t="";return t="Win32"==navigator.platform?navigator.userAgent.indexOf("Windows NT 5")>-1?"xp":"win7":"xp"},update:function(t){this.imgData=t,this.imgChanged=!0},_beforeShow:function(){var t=this;if(this.imgChanged){this.statisticBlocks=["download","qrcode"],this.imgChanged=!1;{var e=this.imgData,a=this.$element,t=this;this.elementSize,this.codeImgSize}downloadThisLink=i("#btnDownload");{e.width+"&#215;"+e.height}downloadThisLink.attr("href","/search/down?tn=download&word=download&ie=utf8&fr=detail&url="+encodeURIComponent(e.objURL)+"&thumburl="+encodeURIComponent(e.thumbURL)),i(downloadThisLink).on("click",function(t){t.stopPropagation(),t.preventDefault();i(this).attr("href");window.open(i(this).attr("href"))}),this.qrcodeBuilder.get(e.objURL).then(function(t){a.find(".qrcode").html(t.dom).css({width:t.width,height:t.height})});var n=t._validMaterial(e.sucai_info),l=t._validWallpaper(e.wallp_info);if(n&&"0"!=n&&(!l||0==l.length)){t.elementSize={width:330,height:286},t.$element.css(t.elementSize),t.qrcodeBuilder=new s(t.codeImgSize);var o=this.updateMaterial(n);i(".bottom").addClass("line"),i(".bottom").removeClass("double"),i(".bottom .material").html(o.children()),i(".bottom .wallpaper").html(""),this.opts.contentHeight=286}if(l&&"0"!=l&&(!n||0==n.length)){t.elementSize={width:330,height:286},t.$element.css(t.elementSize),t.qrcodeBuilder=new s(t.codeImgSize);var o=this.updateWallpaper(l);i(".bottom").removeClass("double"),i(".bottom .wallpaper").html(o.children()),i(".bottom .material").html(""),i(".bottom").addClass("line"),this.opts.contentHeight=286}if(l&&"0"!=l&&n&&"0"!=n){t.elementSize={width:330,height:307},t.$element.css(t.elementSize),t.qrcodeBuilder=new s(t.codeImgSize);var r=this.updateMaterial(n),d=this.updateWallpaper(l);i(".bottom .material").html(r.children()),i(".bottom .wallpaper").html(d.children()),i(".bottom").addClass("line"),i(".bottom").addClass("double"),this.opts.contentHeight=307}else l||n||(t.elementSize={width:330,height:196},t.$element.css(t.elementSize),t.qrcodeBuilder=new s(t.codeImgSize),i(".bottom .material").html(""),i(".bottom .wallpaper").html(""),i(".bottom").removeClass("line"),this.opts.contentHeight=196);statistic.send("5.1010000",{tn:"baiduimagedetail",tag:"card",fm:t.statisticBlocks.join(",")}),t.$element.find("a").each(function(t,e){var e=i(e),a=e.attr("href");e.on("click",function(){statistic.send("5.15",{tn:"baiduimagedetail",tag:"card",fm:e.attr("logkey"),site:encodeURIComponent(a)})})}),t.refreshPos()}}}),e});
;/*!searchdetail:widget/ui/controls/imgtoolbarnew/downloadtip/downloadtip.js*/
define("searchdetail:widget/ui/controls/imgtoolbarnew/downloadtip/downloadtip",function(e){function t(){this.$element=i('<div class="download-tip-content"><span class="tip-close"></span></div>'),this.$close=this.$element.find(".tip-close")}var i=e("common:widget/ui/base/base");return i.extend(t.prototype,{init:function(e){this.$element=this.$element.appendTo(e),i.cookie("closedownloadtip")||(this.$element.show(),this.$close.on("click",function(){i(this).parent().remove(),i.cookie("closedownloadtip",!0)}))},repos:function(e){e?this.$element.css("margin-left","125px"):this.$element.css("margin-left","200px")}}),t});
;/*!searchdetail:widget/ui/controls/imgtoolbarnew/favo/favopop.js*/
define("searchdetail:widget/ui/controls/imgtoolbarnew/favo/favopop",function(t){function e(t){t=l.extend({className:"favo-pop",hasArrow:!0,hasClose:!0},t),n.call(this,t),this.setContent(a),this.descInput=null,this.albumListCtrl=null,this.newAlbumNameEle=null}var l=t("common:widget/ui/base/base"),i=(t("common:widget/ui/utils/utils"),t("common:widget/ui/dropdownlist/dropdownlist")),n=t("searchdetail:widget/ui/controls/pop/pop"),a=['<div class="favo-content">','<div class="album-row"><label>专辑：</label><select name="albumId"></select></div>','<div class="desc-row"><label>描述：</label><textarea name="desc"></textarea></div>','<p class="button-row"><a href="#" class="pop-okbtn">确定</a></p>',"</div>"].join("");return l.extend(e.prototype,n.prototype,{init:function(){n.prototype.init.call(this);var t=this;this.$element.find(".pop-okbtn").on("click",function(e){e.preventDefault(),t.fire("onok",{data:t._collectFormData()})}),this.descInput=this.$element.find(".desc-row textarea"),this.albumListCtrl=this._initAlbumDDLCtrl()},_initAlbumDDLCtrl:function(){var t=i.create({select:this.$element.find(".album-row select"),attrs:{column:5,width:170},box:l(['<div class="x-createalbum">','<div class="box-ipt clearfix">','<input type="text" name="albumName" title="创建新相册">','<button class="btn-new-album">创建</button>',"</div>","<div>"].join(""))}),e=this;return this.newAlbumNameEle=this.$element.find("[name=albumName]"),this.$element.find(".btn-new-album").on("click",this._onNewAlbumClick.bind(this)),t.change(function(){e.fire("albumSelectChange",{value:t.val()})}),t},addAlbumOption:function(t){this.albumListCtrl.add(t)},resetNewAlbumName:function(){this.newAlbumNameEle&&this.newAlbumNameEle.val("")},setDesc:function(t){this.descInput.val(t||"")},_collectFormData:function(){return{albumId:this.albumListCtrl.val(),desc:this.descInput.val()}},_onNewAlbumClick:function(){this.fire("newAlbumClicked",{albumName:this.newAlbumNameEle.val()})}}),e});
;/*!searchdetail:widget/ui/controls/imgtoolbarnew/favo/favotip.js*/
define("searchdetail:widget/ui/controls/imgtoolbarnew/favo/favotip",function(t){function e(t){t=i.extend({className:"favotip-pop",hasArrow:!0,hasClose:!0},t),a.call(this,t),this.setContent(n),this.$text=this.$element.find(".tip-text"),this.$link=this.$element.find(".tip-link")}var i=t("common:widget/ui/base/base"),a=t("searchdetail:widget/ui/controls/pop/pop"),n=['<div class="tip-content">','<span class="tip-text"></span>','<a class="tip-link" href="http://image.baidu.com/picturefav/fav" target="_blank">去我的图片查看</a>',"</div>"].join("");return i.extend(e.prototype,a.prototype,{setTipText:function(t){this.$text.html(t)}}),e});
;/*!searchdetail:widget/ui/controls/imgtoolbarnew/favo/favoview.js*/
define("searchdetail:widget/ui/controls/imgtoolbarnew/favo/favoview",function(t){function i(t){this.$button=t,this.imgData=null,this.pop=null,this.tip=null}var e=t("common:widget/ui/base/base"),o=t("common:widget/ui/utils/utils"),a=t("common:widget/ui/base/events"),n=t("common:widget/ui/browser-storage/browser-storage"),s=t("common:widget/ui/message/message"),l=t("searchdetail:widget/ui/app/pagemodel"),c=t("searchdetail:widget/ui/statistic/statistic-core"),p=t("searchdetail:widget/ui/collections/albumcollection"),u=t("searchdetail:widget/ui/controls/imgtoolbarnew/favo/favopop"),r=t("searchdetail:widget/ui/controls/imgtoolbarnew/favo/favotip");return e.extend(i.prototype,a,{init:function(){var t=this;this.$button.on("click",function(i){i.preventDefault(),l.data.userName?t.albumCollection?(t.albumCollection.userName=l.data.userName,t.albumCollection.bdstoken=l.data.bdstoken,t.albumCollection.dataProxy.reqParams.uid=encodeURIComponent(l.data.userName),t.albumCollection.get().then(function(i){i&&i.length?t._showInputPop(i):t._savePic()})):t._saveToLocal():t.popLogin()})},popLogin:function(){var t=this;e.getScript("//passport.baidu.com/passApi/js/uni_login_wrapper.js?cdnversion="+(new Date).getTime(),function(){var i=e("#passLog");if(i){i.attr("href","javascript:void(0);");var o={tangram:!0,cache:!1,apiOpt:{product:"im",staticPage:location.protocol+"//"+location.host+"/static/searchresult/html/v3Jump.html",memberPass:!0,u:location.href,qrcode:3},authsite:["tsina","renren","qzone"],authsiteCfg:{tpl:"im",display:"popup",act:"optional",jumpUrl:location.protocol+"//"+location.host+"/static/imgsearch/html/xd.html",onBindSuccess:function(){return e.cookie("BDIMGISLOGIN",1),c&&c.send("5.1010200",{tn:"baiduimagedetail",act:"loginsucess"}),location.reload(),!1}},onLoginSuccess:function(t){e.cookie("BDIMGISLOGIN",1),c&&c.send("5.1010200",{tn:"baiduimagedetail",act:"loginsucess"}),t.returnValue=!1,location.reload()},onShow:function(){t.trigger("loginPop.show"),c&&c.send("5.1010200",{tn:"baiduimagedetail",act:"loginshow"})},onHide:function(){t.trigger("loginPop.hide"),e("#passport-login-pop").remove()}},a=passport.pop.init(o);a.show()}})},setAlbumCollection:function(t){this.albumCollection=t},userNameChanged:function(){this.setAlbumCollection(new p(l.data.userName,l.data.bdstoken))},update:function(t){var i=this;this.imgData=t,this._updatePop(t);var o=parseInt(e.cookie("BDIMGISLOGIN"));1===o&&i.$button.trigger("click"),e.cookie("BDIMGISLOGIN",0)},_updatePop:function(t){if(this.pop){var i=t.fromPageTitle||"";this.pop.setDesc(o.trimTags(i))}},_initPop:function(t){var i,e=new u,o=n.api.get({key:"_local_album_key_"}),a=o&&o.value,s=t&&t.length&&t[0].id,l=this;e.init();for(var c=0,p=t.length;p>c;c++)i=t[c],e.addAlbumOption({text:i.name,value:i.id}),i.id==a&&(s=a);return e.albumListCtrl.val(s),e.setTrigger(this.$button),this.pop=e,e.on("onok",function(t){l._savePic(t.data)}),e.on("newAlbumClicked",this._onPopNewAlbumClicked.bind(this)),e.on("albumSelectChange",this._onPopAlbumSelectChange.bind(this)),e},_onPopNewAlbumClicked:function(t){if(t.albumName){var i=this;this.albumCollection.addAlbum(t.albumName).done(function(t){i.pop.addAlbumOption({text:t.name,value:t.id}),i.pop.resetNewAlbumName(),i.pop.albumListCtrl.val(t.id+""),i.pop.albumListCtrl.hide(),new s("创建相册成功",{type:"info"})}).fail(function(t){var e=t&&t.status&&t.status.msg||"创建相册失败，请选择其他相册";t&&t.data&&(i.pop.albumListCtrl.val(t.data.id),e="相册已存在"),new s(e,{type:"error"})})}else new s("请输入名称",{type:"error"})},_onPopAlbumSelectChange:function(t){n.api.set({key:"_local_album_key_",value:t.value,expires:2592e3})},_showInputPop:function(t){this.imgData&&(this.pop||(this._initPop(t),this._updatePop(this.imgData)),this.pop.visible||this.pop.show())},_savePic:function(t){t=t||{desc:o.trimTags(this.imgData.fromPageTitle||"")};var i=this.albumCollection.getPicCollection(t.albumId),e=this.imgData,a=this;i.addPic(e.objURLHttp,{desc:t.desc,surl:e.fromURL,contsign:e.cs}).always(function(){a.pop&&a.pop.hide(),a._showEffect(),a._showSuccessTip(t,i)})},_showSuccessTip:function(t,i){this.tip?t.albumId||this.tip.setTipText('已临时收藏<span class="tip-num">'+i.getTotal()+"</span>张图片，"):(this.tip=new r,this.tip.setTipText(t.albumId?"收藏成功，":'已临时收藏<span class="tip-num">'+i.getTotal()+"</span>张图片，"),this.tip.setTrigger(this.$button)),this.tip.show()},_showAddOne:function(t){var i=e("#fav-add-one"),o=new e.Deferred;return i[0]||(i=e('<span id="fav-add-one">+1</span>').appendTo("body")),i.css({position:"absolute",top:t.top+3,left:t.left-22,"z-index":1020,display:"block",width:"30px",height:"30px","font-size":"30px","font-family":"TAHOMA",color:"#000",opacity:1}).delay(100).animate({top:"-=30",opacity:0},500,function(){i.hide(),o.resolve()}),o},_showEffect:function(){var t=e("#container").find(".img-container img"),i=t.offset(),o=this.$button,a=o.offset(),n=e("<img />").attr({src:this.imgData.bigImgUrl||this.imgData.thumbURL}),s=this,l=new e.Deferred,c=function(){n.css({position:"absolute",top:i.top,left:i.left,width:t.width(),height:t.height(),"z-index":1020}).animate({top:a.top+10,left:a.left+50,width:0,height:0},500,"linear",function(){n.remove(),s._showAddOne(a).then(function(){l.resolve()})})};return n.ready(c),n.appendTo("body"),l}}),i});
;/*!searchdetail:widget/ui/controls/imgtoolbarnew/feedbacknew/feedbacknew.js*/
define("searchdetail:widget/ui/controls/imgtoolbarnew/feedbacknew/feedbacknew",function(require,exports,module){var bds=bds||{};bds.qa=bds.qa||{},bds.qa.ShortCut={base_url_path:"http://f3.baidu.com",up_file:!1,is_feedbacking:!1,product_id:0,entrance_id:0,send_img:!1,img_data:"",onlyUpFile:!1,pro_data:"",plugintitle:'意见反馈&nbsp;<font style="font-size:13px;color:#2d9ef8;line-height:13px;">|&nbsp;<a style="font-size:14px;color:#2d9ef8;line-height:26px;text-decoration:underline;margin-left:20px;height:26px;" href="http://f3.baidu.com/index.php/feedback/f/index" target="_blank">我的反馈</a></font>',issueTips:"反馈内容",issuePlaceholder:"欢迎提出您在使用过程中遇到的问题或宝贵建议（400字以内），感谢您对百度的支持。",emailPlaceholder:"请留下您的联系方式，以便我们及时回复您。",guide:'<span>申请删除百度快照内容，请在<a style="text-decoration:underline;" href="http://tousu.baidu.com/webmaster/add" target="_blank">网页搜索投诉中心</a>提交。</span><br><span>网站收录、流量等站长相关问题，请在<a style="text-decoration:underline;" href="http://zhanzhang.baidu.com/feedback/index" target="_blank">站长平台</a>反馈。</span>',cutFileTips:"&nbsp;点我，可以上传图片哦~",cutCanvasTips:'&nbsp;点我，可以在当前页面截图哦~&nbsp;<a style="text-decoration:underline;" href="http://f3.baidu.com/index.php/feedback/tiyan/steps" target="_blank">使用方法</a>',emailTips:"联系方式",showPosition:"right",skinStyle:"flat",needLevelType:!0,needIssueTips:!0,needIssue:!0,needCut:!0,needEmail:!0,needGuide:!1,defaultCut:!1,cutImg:"jietu.png",upImg:"upload.png",win_width:"",queryWord:"",dialogPosition:{left:"5px",right:"5px",bottom:"5px"},initRightBar:function(fb_styles,fb_data){return bds.qa.ShortCut.is_feedbacking?!0:(bds.qa.ShortCut.is_feedbacking=!0,bds.qa.ShortCut._disposeHttps(),bds.qa.ShortCut._getMyJquery(),bds.qa.ShortCut.queryWord=fb_data,bds.qa.ShortCut.load_first(fb_styles),void 0!=fb_data?bds.qa.ShortCut._getProData(fb_data):"",void(bds.qa.ShortCut._isIE()&&("object"!=typeof JSON&&(JSON={}),function(){function f(t){return 10>t?"0"+t:t}function quote(t){return escapable.lastIndex=0,escapable.test(t)?'"'+t.replace(escapable,function(t){var e=meta[t];return"string"==typeof e?e:"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+t+'"'}function str(t,e){var n,i,o,r,a,s=gap,l=e[t];switch(l&&"object"==typeof l&&"function"==typeof l.toJSON&&(l=l.toJSON(t)),"function"==typeof rep&&(l=rep.call(e,t,l)),typeof l){case"string":return quote(l);case"number":return isFinite(l)?String(l):"null";case"boolean":case"null":return String(l);case"object":if(!l)return"null";if(gap+=indent,a=[],"[object Array]"===Object.prototype.toString.apply(l)){for(r=l.length,n=0;r>n;n+=1)a[n]=str(n,l)||"null";return o=0===a.length?"[]":gap?"[\n"+gap+a.join(",\n"+gap)+"\n"+s+"]":"["+a.join(",")+"]",gap=s,o}if(rep&&"object"==typeof rep)for(r=rep.length,n=0;r>n;n+=1)"string"==typeof rep[n]&&(i=rep[n],o=str(i,l),o&&a.push(quote(i)+(gap?": ":":")+o));else for(i in l)Object.prototype.hasOwnProperty.call(l,i)&&(o=str(i,l),o&&a.push(quote(i)+(gap?": ":":")+o));return o=0===a.length?"{}":gap?"{\n"+gap+a.join(",\n"+gap)+"\n"+s+"}":"{"+a.join(",")+"}",gap=s,o}}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var cx,escapable,gap,indent,meta,rep;"function"!=typeof JSON.stringify&&(escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,meta={"\b":"\\b","   ":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},JSON.stringify=function(t,e,n){var i;if(gap="",indent="","number"==typeof n)for(i=0;n>i;i+=1)indent+=" ";else"string"==typeof n&&(indent=n);if(rep=e,e&&"function"!=typeof e&&("object"!=typeof e||"number"!=typeof e.length))throw new Error("JSON.stringify");return str("",{"":t})}),"function"!=typeof JSON.parse&&(cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,JSON.parse=function(text,reviver){function walk(t,e){var n,i,o=t[e];if(o&&"object"==typeof o)for(n in o)Object.prototype.hasOwnProperty.call(o,n)&&(i=walk(o,n),void 0!==i?o[n]=i:delete o[n]);return reviver.call(t,e,o)}var j;if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(t){return"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}())))},load_first:function(t){t||(t=bds.qa.ShortCut.default_options),bds.qa.ShortCut.initialize(t),bds.qa.ShortCut.getPrepare(),bds.qa.ShortCut.init(),bds.qa.ShortCut.imgLog(bds.qa.ShortCut.base_url_path+"/index.php/feedback/zx/clickcount/pro_id/"+bds.qa.ShortCut.product_id+"/entra_id/"+bds.qa.ShortCut.entrance_id)},_getMyJquery:function(){!function(t,e){e(t)}("undefined"!=typeof window?window:this,function(t,e){function n(t){var e=t.length,n=oe.type(t);return"function"===n||oe.isWindow(t)?!1:1===t.nodeType&&e?!0:"array"===n||0===e||"number"==typeof e&&e>0&&e-1 in t}function i(t,e,n){if(oe.isFunction(e))return oe.grep(t,function(t,i){return!!e.call(t,i,t)!==n});if(e.nodeType)return oe.grep(t,function(t){return t===e!==n});if("string"==typeof e){if(fe.test(e))return oe.filter(e,t,n);e=oe.filter(e,t)}return oe.grep(t,function(t){return oe.inArray(t,e)>=0!==n})}function o(t,e){do t=t[e];while(t&&1!==t.nodeType);return t}function r(t){var e=xe[t]={};return oe.each(t.match(ye)||[],function(t,n){e[n]=!0}),e}function a(){pe.addEventListener?(pe.removeEventListener("DOMContentLoaded",s,!1),t.removeEventListener("load",s,!1)):(pe.detachEvent("onreadystatechange",s),t.detachEvent("onload",s))}function s(){(pe.addEventListener||"load"===event.type||"complete"===pe.readyState)&&(a(),oe.ready())}function l(t,e,n){if(void 0===n&&1===t.nodeType){var i="data-"+e.replace(qe,"-$1").toLowerCase();if(n=t.getAttribute(i),"string"==typeof n){try{n="true"===n?!0:"false"===n?!1:"null"===n?null:+n+""===n?+n:_e.test(n)?oe.parseJSON(n):n}catch(o){}oe.data(t,e,n)}else n=void 0}return n}function u(t){var e;for(e in t)if(("data"!==e||!oe.isEmptyObject(t[e]))&&"toJSON"!==e)return!1;return!0}function d(t,e,n,i){if(oe.acceptData(t)){var o,r,a=oe.expando,s=t.nodeType,l=s?oe.cache:t,u=s?t[a]:t[a]&&a;if(u&&l[u]&&(i||l[u].data)||void 0!==n||"string"!=typeof e)return u||(u=s?t[a]=X.pop()||oe.guid++:a),l[u]||(l[u]=s?{}:{toJSON:oe.noop}),("object"==typeof e||"function"==typeof e)&&(i?l[u]=oe.extend(l[u],e):l[u].data=oe.extend(l[u].data,e)),r=l[u],i||(r.data||(r.data={}),r=r.data),void 0!==n&&(r[oe.camelCase(e)]=n),"string"==typeof e?(o=r[e],null==o&&(o=r[oe.camelCase(e)])):o=r,o}}function c(t,e,n){if(oe.acceptData(t)){var i,o,r=t.nodeType,a=r?oe.cache:t,s=r?t[oe.expando]:oe.expando;if(a[s]){if(e&&(i=n?a[s]:a[s].data)){oe.isArray(e)?e=e.concat(oe.map(e,oe.camelCase)):e in i?e=[e]:(e=oe.camelCase(e),e=e in i?[e]:e.split(" ")),o=e.length;for(;o--;)delete i[e[o]];if(n?!u(i):!oe.isEmptyObject(i))return}(n||(delete a[s].data,u(a[s])))&&(r?oe.cleanData([t],!0):ne.deleteExpando||a!=a.window?delete a[s]:a[s]=null)}}}function f(){return!0}function h(){return!1}function p(){try{return pe.activeElement}catch(t){}}function g(t){var e=Me.split("|"),n=t.createDocumentFragment();if(n.createElement)for(;e.length;)n.createElement(e.pop());return n}function m(t,e){var n,i,o=0,r=typeof t.getElementsByTagName!==Se?t.getElementsByTagName(e||"*"):typeof t.querySelectorAll!==Se?t.querySelectorAll(e||"*"):void 0;if(!r)for(r=[],n=t.childNodes||t;null!=(i=n[o]);o++)!e||oe.nodeName(i,e)?r.push(i):oe.merge(r,m(i,e));return void 0===e||e&&oe.nodeName(t,e)?oe.merge([t],r):r}function b(t){De.test(t.type)&&(t.defaultChecked=t.checked)}function v(t,e){return oe.nodeName(t,"table")&&oe.nodeName(11!==e.nodeType?e:e.firstChild,"tr")?t.getElementsByTagName("tbody")[0]||t.appendChild(t.ownerDocument.createElement("tbody")):t}function y(t){return t.type=(null!==oe.find.attr(t,"type"))+"/"+t.type,t}function x(t){var e=$e.exec(t.type);return e?t.type=e[1]:t.removeAttribute("type"),t}function C(t,e){for(var n,i=0;null!=(n=t[i]);i++)oe._data(n,"globalEval",!e||oe._data(e[i],"globalEval"))}function w(t,e){if(1===e.nodeType&&oe.hasData(t)){var n,i,o,r=oe._data(t),a=oe._data(e,r),s=r.events;if(s){delete a.handle,a.events={};for(n in s)for(i=0,o=s[n].length;o>i;i++)oe.event.add(e,n,s[n][i])}a.data&&(a.data=oe.extend({},a.data))}}function S(t,e){var n,i,o;if(1===e.nodeType){if(n=e.nodeName.toLowerCase(),!ne.noCloneEvent&&e[oe.expando]){o=oe._data(e);for(i in o.events)oe.removeEvent(e,i,o.handle);e.removeAttribute(oe.expando)}"script"===n&&e.text!==t.text?(y(e).text=t.text,x(e)):"object"===n?(e.parentNode&&(e.outerHTML=t.outerHTML),ne.html5Clone&&t.innerHTML&&!oe.trim(e.innerHTML)&&(e.innerHTML=t.innerHTML)):"input"===n&&De.test(t.type)?(e.defaultChecked=e.checked=t.checked,e.value!==t.value&&(e.value=t.value)):"option"===n?e.defaultSelected=e.selected=t.defaultSelected:("input"===n||"textarea"===n)&&(e.defaultValue=t.defaultValue)}}function _(e,n){var i,o=oe(n.createElement(e)).appendTo(n.body),r=t.getDefaultComputedStyle&&(i=t.getDefaultComputedStyle(o[0]))?i.display:oe.css(o[0],"display");return o.detach(),r}function q(t){var e=pe,n=Ze[t];return n||(n=_(t,e),"none"!==n&&n||(Ke=(Ke||oe("<iframe frameborder='0' width='0' height='0'/>")).appendTo(e.documentElement),e=(Ke[0].contentWindow||Ke[0].contentDocument).document,e.write(),e.close(),n=_(t,e),Ke.detach()),Ze[t]=n),n}function T(t,e){return{get:function(){var n=t();if(null!=n)return n?void delete this.get:(this.get=e).apply(this,arguments)}}}function k(t,e){if(e in t)return e;for(var n=e.charAt(0).toUpperCase()+e.slice(1),i=e,o=hn.length;o--;)if(e=hn[o]+n,e in t)return e;return i}function E(t,e){for(var n,i,o,r=[],a=0,s=t.length;s>a;a++)i=t[a],i.style&&(r[a]=oe._data(i,"olddisplay"),n=i.style.display,e?(r[a]||"none"!==n||(i.style.display=""),""===i.style.display&&Ee(i)&&(r[a]=oe._data(i,"olddisplay",q(i.nodeName)))):(o=Ee(i),(n&&"none"!==n||!o)&&oe._data(i,"olddisplay",o?n:oe.css(i,"display"))));for(a=0;s>a;a++)i=t[a],i.style&&(e&&"none"!==i.style.display&&""!==i.style.display||(i.style.display=e?r[a]||"":"none"));return t}function N(t,e,n){var i=un.exec(e);return i?Math.max(0,i[1]-(n||0))+(i[2]||"px"):e}function D(t,e,n,i,o){for(var r=n===(i?"border":"content")?4:"width"===e?1:0,a=0;4>r;r+=2)"margin"===n&&(a+=oe.css(t,n+ke[r],!0,o)),i?("content"===n&&(a-=oe.css(t,"padding"+ke[r],!0,o)),"margin"!==n&&(a-=oe.css(t,"border"+ke[r]+"Width",!0,o))):(a+=oe.css(t,"padding"+ke[r],!0,o),"padding"!==n&&(a+=oe.css(t,"border"+ke[r]+"Width",!0,o)));return a}function L(t,e,n){var i=!0,o="width"===e?t.offsetWidth:t.offsetHeight,r=tn(t),a=ne.boxSizing&&"border-box"===oe.css(t,"boxSizing",!1,r);if(0>=o||null==o){if(o=en(t,e,r),(0>o||null==o)&&(o=t.style[e]),on.test(o))return o;i=a&&(ne.boxSizingReliable()||o===t.style[e]),o=parseFloat(o)||0}return o+D(t,e,n||(a?"border":"content"),i,r)+"px"}function J(t,e,n,i,o){return new J.prototype.init(t,e,n,i,o)}function A(){return setTimeout(function(){pn=void 0}),pn=oe.now()}function I(t,e){var n,i={height:t},o=0;for(e=e?1:0;4>o;o+=2-e)n=ke[o],i["margin"+n]=i["padding"+n]=t;return e&&(i.opacity=i.width=t),i}function P(t,e,n){for(var i,o=(xn[e]||[]).concat(xn["*"]),r=0,a=o.length;a>r;r++)if(i=o[r].call(n,e,t))return i}function M(t,e,n){var i,o,r,a,s,l,u,d,c=this,f={},h=t.style,p=t.nodeType&&Ee(t),g=oe._data(t,"fxshow");n.queue||(s=oe._queueHooks(t,"fx"),null==s.unqueued&&(s.unqueued=0,l=s.empty.fire,s.empty.fire=function(){s.unqueued||l()}),s.unqueued++,c.always(function(){c.always(function(){s.unqueued--,oe.queue(t,"fx").length||s.empty.fire()})})),1===t.nodeType&&("height"in e||"width"in e)&&(n.overflow=[h.overflow,h.overflowX,h.overflowY],u=oe.css(t,"display"),d="none"===u?oe._data(t,"olddisplay")||q(t.nodeName):u,"inline"===d&&"none"===oe.css(t,"float")&&(ne.inlineBlockNeedsLayout&&"inline"!==q(t.nodeName)?h.zoom=1:h.display="inline-block")),n.overflow&&(h.overflow="hidden",ne.shrinkWrapBlocks()||c.always(function(){h.overflow=n.overflow[0],h.overflowX=n.overflow[1],h.overflowY=n.overflow[2]}));for(i in e)if(o=e[i],mn.exec(o)){if(delete e[i],r=r||"toggle"===o,o===(p?"hide":"show")){if("show"!==o||!g||void 0===g[i])continue;p=!0}f[i]=g&&g[i]||oe.style(t,i)}else u=void 0;if(oe.isEmptyObject(f))"inline"===("none"===u?q(t.nodeName):u)&&(h.display=u);else{g?"hidden"in g&&(p=g.hidden):g=oe._data(t,"fxshow",{}),r&&(g.hidden=!p),p?oe(t).show():c.done(function(){oe(t).hide()}),c.done(function(){var e;oe._removeData(t,"fxshow");for(e in f)oe.style(t,e,f[e])});for(i in f)a=P(p?g[i]:0,i,c),i in g||(g[i]=a.start,p&&(a.end=a.start,a.start="width"===i||"height"===i?1:0))}}function Q(t,e){var n,i,o,r,a;for(n in t)if(i=oe.camelCase(n),o=e[i],r=t[n],oe.isArray(r)&&(o=r[1],r=t[n]=r[0]),n!==i&&(t[i]=r,delete t[n]),a=oe.cssHooks[i],a&&"expand"in a){r=a.expand(r),delete t[i];for(n in r)n in t||(t[n]=r[n],e[n]=o)}else e[i]=o}function O(t,e,n){var i,o,r=0,a=yn.length,s=oe.Deferred().always(function(){delete l.elem}),l=function(){if(o)return!1;for(var e=pn||A(),n=Math.max(0,u.startTime+u.duration-e),i=n/u.duration||0,r=1-i,a=0,l=u.tweens.length;l>a;a++)u.tweens[a].run(r);return s.notifyWith(t,[u,r,n]),1>r&&l?n:(s.resolveWith(t,[u]),!1)},u=s.promise({elem:t,props:oe.extend({},e),opts:oe.extend(!0,{specialEasing:{}},n),originalProperties:e,originalOptions:n,startTime:pn||A(),duration:n.duration,tweens:[],createTween:function(e,n){var i=oe.Tween(t,u.opts,e,n,u.opts.specialEasing[e]||u.opts.easing);return u.tweens.push(i),i},stop:function(e){var n=0,i=e?u.tweens.length:0;if(o)return this;for(o=!0;i>n;n++)u.tweens[n].run(1);return e?s.resolveWith(t,[u,e]):s.rejectWith(t,[u,e]),this}}),d=u.props;for(Q(d,u.opts.specialEasing);a>r;r++)if(i=yn[r].call(u,t,d,u.opts))return i;return oe.map(d,P,u),oe.isFunction(u.opts.start)&&u.opts.start.call(t,u),oe.fx.timer(oe.extend(l,{elem:t,anim:u,queue:u.opts.queue})),u.progress(u.opts.progress).done(u.opts.done,u.opts.complete).fail(u.opts.fail).always(u.opts.always)}function R(t){return function(e,n){"string"!=typeof e&&(n=e,e="*");var i,o=0,r=e.toLowerCase().match(ye)||[];if(oe.isFunction(n))for(;i=r[o++];)"+"===i.charAt(0)?(i=i.slice(1)||"*",(t[i]=t[i]||[]).unshift(n)):(t[i]=t[i]||[]).push(n)}}function j(t,e,n,i){function o(s){var l;return r[s]=!0,oe.each(t[s]||[],function(t,s){var u=s(e,n,i);return"string"!=typeof u||a||r[u]?a?!(l=u):void 0:(e.dataTypes.unshift(u),o(u),!1)}),l}var r={},a=t===Bn;return o(e.dataTypes[0])||!r["*"]&&o("*")}function H(t,e){var n,i,o=oe.ajaxSettings.flatOptions||{};for(i in e)void 0!==e[i]&&((o[i]?t:n||(n={}))[i]=e[i]);return n&&oe.extend(!0,t,n),t}function F(t,e,n){for(var i,o,r,a,s=t.contents,l=t.dataTypes;"*"===l[0];)l.shift(),void 0===o&&(o=t.mimeType||e.getResponseHeader("Content-Type"));if(o)for(a in s)if(s[a]&&s[a].test(o)){l.unshift(a);break}if(l[0]in n)r=l[0];else{for(a in n){if(!l[0]||t.converters[a+" "+l[0]]){r=a;break}i||(i=a)}r=r||i}return r?(r!==l[0]&&l.unshift(r),n[r]):void 0}function z(t,e,n,i){var o,r,a,s,l,u={},d=t.dataTypes.slice();if(d[1])for(a in t.converters)u[a.toLowerCase()]=t.converters[a];for(r=d.shift();r;)if(t.responseFields[r]&&(n[t.responseFields[r]]=e),!l&&i&&t.dataFilter&&(e=t.dataFilter(e,t.dataType)),l=r,r=d.shift())if("*"===r)r=l;else if("*"!==l&&l!==r){if(a=u[l+" "+r]||u["* "+r],!a)for(o in u)if(s=o.split(" "),s[1]===r&&(a=u[l+" "+s[0]]||u["* "+s[0]])){a===!0?a=u[o]:u[o]!==!0&&(r=s[0],d.unshift(s[1]));break}if(a!==!0)if(a&&t["throws"])e=a(e);else try{e=a(e)}catch(c){return{state:"parsererror",error:a?c:"No conversion from "+l+" to "+r}}}return{state:"success",data:e}}function B(t,e,n,i){var o;if(oe.isArray(e))oe.each(e,function(e,o){n||Xn.test(t)?i(t,o):B(t+"["+("object"==typeof o?e:"")+"]",o,n,i)});else if(n||"object"!==oe.type(e))i(t,e);else for(o in e)B(t+"["+o+"]",e[o],n,i)}function W(){try{return new t.XMLHttpRequest}catch(e){}}function U(){try{return new t.ActiveXObject("Microsoft.XMLHTTP")}catch(e){}}function $(t){return oe.isWindow(t)?t:9===t.nodeType?t.defaultView||t.parentWindow:!1}var X=[],G=X.slice,V=X.concat,Y=X.push,K=X.indexOf,Z={},te=Z.toString,ee=Z.hasOwnProperty,ne={},ie="1.11.2",oe=function(t,e){return new oe.fn.init(t,e)},re=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,ae=/^-ms-/,se=/-([\da-z])/gi,le=function(t,e){return e.toUpperCase()};oe.fn=oe.prototype={jquery:ie,constructor:oe,selector:"",length:0,toArray:function(){return G.call(this)},get:function(t){return null!=t?0>t?this[t+this.length]:this[t]:G.call(this)},pushStack:function(t){var e=oe.merge(this.constructor(),t);return e.prevObject=this,e.context=this.context,e},each:function(t,e){return oe.each(this,t,e)},map:function(t){return this.pushStack(oe.map(this,function(e,n){return t.call(e,n,e)}))},slice:function(){return this.pushStack(G.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(t){var e=this.length,n=+t+(0>t?e:0);return this.pushStack(n>=0&&e>n?[this[n]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:Y,sort:X.sort,splice:X.splice},oe.extend=oe.fn.extend=function(){var t,e,n,i,o,r,a=arguments[0]||{},s=1,l=arguments.length,u=!1;for("boolean"==typeof a&&(u=a,a=arguments[s]||{},s++),"object"==typeof a||oe.isFunction(a)||(a={}),s===l&&(a=this,s--);l>s;s++)if(null!=(o=arguments[s]))for(i in o)t=a[i],n=o[i],a!==n&&(u&&n&&(oe.isPlainObject(n)||(e=oe.isArray(n)))?(e?(e=!1,r=t&&oe.isArray(t)?t:[]):r=t&&oe.isPlainObject(t)?t:{},a[i]=oe.extend(u,r,n)):void 0!==n&&(a[i]=n));return a},oe.extend({expando:"jQuery"+(ie+Math.random()).replace(/\D/g,""),isReady:!0,error:function(t){throw new Error(t)},noop:function(){},isFunction:function(t){return"function"===oe.type(t)},isArray:Array.isArray||function(t){return"array"===oe.type(t)},isWindow:function(t){return null!=t&&t==t.window},isNumeric:function(t){return!oe.isArray(t)&&t-parseFloat(t)+1>=0},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},isPlainObject:function(t){var e;if(!t||"object"!==oe.type(t)||t.nodeType||oe.isWindow(t))return!1;try{if(t.constructor&&!ee.call(t,"constructor")&&!ee.call(t.constructor.prototype,"isPrototypeOf"))return!1}catch(n){return!1}if(ne.ownLast)for(e in t)return ee.call(t,e);for(e in t);return void 0===e||ee.call(t,e)},type:function(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?Z[te.call(t)]||"object":typeof t},globalEval:function(e){e&&oe.trim(e)&&(t.execScript||function(e){t.eval.call(t,e)})(e)},camelCase:function(t){return t.replace(ae,"ms-").replace(se,le)},nodeName:function(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()},each:function(t,e,i){var o,r=0,a=t.length,s=n(t);if(i){if(s)for(;a>r&&(o=e.apply(t[r],i),o!==!1);r++);else for(r in t)if(o=e.apply(t[r],i),o===!1)break}else if(s)for(;a>r&&(o=e.call(t[r],r,t[r]),o!==!1);r++);else for(r in t)if(o=e.call(t[r],r,t[r]),o===!1)break;return t},trim:function(t){return null==t?"":(t+"").replace(re,"")},makeArray:function(t,e){var i=e||[];return null!=t&&(n(Object(t))?oe.merge(i,"string"==typeof t?[t]:t):Y.call(i,t)),i},inArray:function(t,e,n){var i;if(e){if(K)return K.call(e,t,n);for(i=e.length,n=n?0>n?Math.max(0,i+n):n:0;i>n;n++)if(n in e&&e[n]===t)return n}return-1},merge:function(t,e){for(var n=+e.length,i=0,o=t.length;n>i;)t[o++]=e[i++];if(n!==n)for(;void 0!==e[i];)t[o++]=e[i++];return t.length=o,t},grep:function(t,e,n){for(var i,o=[],r=0,a=t.length,s=!n;a>r;r++)i=!e(t[r],r),i!==s&&o.push(t[r]);return o},map:function(t,e,i){var o,r=0,a=t.length,s=n(t),l=[];if(s)for(;a>r;r++)o=e(t[r],r,i),null!=o&&l.push(o);else for(r in t)o=e(t[r],r,i),null!=o&&l.push(o);return V.apply([],l)},guid:1,proxy:function(t,e){var n,i,o;return"string"==typeof e&&(o=t[e],e=t,t=o),oe.isFunction(t)?(n=G.call(arguments,2),i=function(){return t.apply(e||this,n.concat(G.call(arguments)))},i.guid=t.guid=t.guid||oe.guid++,i):void 0},now:function(){return+new Date},support:ne}),oe.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(t,e){Z["[object "+e+"]"]=e.toLowerCase()});var ue=function(t){function e(t,e,n,i){var o,r,a,s,l,u,c,h,p,g;if((e?e.ownerDocument||e:j)!==J&&L(e),e=e||J,n=n||[],s=e.nodeType,"string"!=typeof t||!t||1!==s&&9!==s&&11!==s)return n;if(!i&&I){if(11!==s&&(o=ve.exec(t)))if(a=o[1]){if(9===s){if(r=e.getElementById(a),!r||!r.parentNode)return n;if(r.id===a)return n.push(r),n}else if(e.ownerDocument&&(r=e.ownerDocument.getElementById(a))&&O(e,r)&&r.id===a)return n.push(r),n}else{if(o[2])return K.apply(n,e.getElementsByTagName(t)),n;if((a=o[3])&&C.getElementsByClassName)return K.apply(n,e.getElementsByClassName(a)),n}if(C.qsa&&(!P||!P.test(t))){if(h=c=R,p=e,g=1!==s&&t,1===s&&"object"!==e.nodeName.toLowerCase()){for(u=q(t),(c=e.getAttribute("id"))?h=c.replace(xe,"\\$&"):e.setAttribute("id",h),h="[id='"+h+"'] ",l=u.length;l--;)u[l]=h+f(u[l]);p=ye.test(t)&&d(e.parentNode)||e,g=u.join(",")}if(g)try{return K.apply(n,p.querySelectorAll(g)),n}catch(m){}finally{c||e.removeAttribute("id")}}}return k(t.replace(le,"$1"),e,n,i)}function n(){function t(n,i){return e.push(n+" ")>w.cacheLength&&delete t[e.shift()],t[n+" "]=i}var e=[];return t}function i(t){return t[R]=!0,t}function o(t){var e=J.createElement("div");try{return!!t(e)}catch(n){return!1}finally{e.parentNode&&e.parentNode.removeChild(e),e=null}}function r(t,e){for(var n=t.split("|"),i=t.length;i--;)w.attrHandle[n[i]]=e}function a(t,e){var n=e&&t,i=n&&1===t.nodeType&&1===e.nodeType&&(~e.sourceIndex||$)-(~t.sourceIndex||$);if(i)return i;if(n)for(;n=n.nextSibling;)if(n===e)return-1;return t?1:-1}function s(t){return function(e){var n=e.nodeName.toLowerCase();return"input"===n&&e.type===t}}function l(t){return function(e){var n=e.nodeName.toLowerCase();return("input"===n||"button"===n)&&e.type===t}}function u(t){return i(function(e){return e=+e,i(function(n,i){for(var o,r=t([],n.length,e),a=r.length;a--;)n[o=r[a]]&&(n[o]=!(i[o]=n[o]))})})}function d(t){return t&&"undefined"!=typeof t.getElementsByTagName&&t}function c(){}function f(t){for(var e=0,n=t.length,i="";n>e;e++)i+=t[e].value;return i}function h(t,e,n){var i=e.dir,o=n&&"parentNode"===i,r=F++;return e.first?function(e,n,r){for(;e=e[i];)if(1===e.nodeType||o)return t(e,n,r)}:function(e,n,a){var s,l,u=[H,r];if(a){for(;e=e[i];)if((1===e.nodeType||o)&&t(e,n,a))return!0}else for(;e=e[i];)if(1===e.nodeType||o){if(l=e[R]||(e[R]={}),(s=l[i])&&s[0]===H&&s[1]===r)return u[2]=s[2];if(l[i]=u,u[2]=t(e,n,a))return!0}}}function p(t){return t.length>1?function(e,n,i){for(var o=t.length;o--;)if(!t[o](e,n,i))return!1;return!0}:t[0]}function g(t,n,i){for(var o=0,r=n.length;r>o;o++)e(t,n[o],i);return i}function m(t,e,n,i,o){for(var r,a=[],s=0,l=t.length,u=null!=e;l>s;s++)(r=t[s])&&(!n||n(r,i,o))&&(a.push(r),u&&e.push(s));return a}function b(t,e,n,o,r,a){return o&&!o[R]&&(o=b(o)),r&&!r[R]&&(r=b(r,a)),i(function(i,a,s,l){var u,d,c,f=[],h=[],p=a.length,b=i||g(e||"*",s.nodeType?[s]:s,[]),v=!t||!i&&e?b:m(b,f,t,s,l),y=n?r||(i?t:p||o)?[]:a:v;if(n&&n(v,y,s,l),o)for(u=m(y,h),o(u,[],s,l),d=u.length;d--;)(c=u[d])&&(y[h[d]]=!(v[h[d]]=c));if(i){if(r||t){if(r){for(u=[],d=y.length;d--;)(c=y[d])&&u.push(v[d]=c);r(null,y=[],u,l)}for(d=y.length;d--;)(c=y[d])&&(u=r?te(i,c):f[d])>-1&&(i[u]=!(a[u]=c))}}else y=m(y===a?y.splice(p,y.length):y),r?r(null,a,y,l):K.apply(a,y)})}function v(t){for(var e,n,i,o=t.length,r=w.relative[t[0].type],a=r||w.relative[" "],s=r?1:0,l=h(function(t){return t===e},a,!0),u=h(function(t){return te(e,t)>-1},a,!0),d=[function(t,n,i){var o=!r&&(i||n!==E)||((e=n).nodeType?l(t,n,i):u(t,n,i));return e=null,o}];o>s;s++)if(n=w.relative[t[s].type])d=[h(p(d),n)];else{if(n=w.filter[t[s].type].apply(null,t[s].matches),n[R]){for(i=++s;o>i&&!w.relative[t[i].type];i++);return b(s>1&&p(d),s>1&&f(t.slice(0,s-1).concat({value:" "===t[s-2].type?"*":""})).replace(le,"$1"),n,i>s&&v(t.slice(s,i)),o>i&&v(t=t.slice(i)),o>i&&f(t))}d.push(n)}return p(d)}function y(t,n){var o=n.length>0,r=t.length>0,a=function(i,a,s,l,u){var d,c,f,h=0,p="0",g=i&&[],b=[],v=E,y=i||r&&w.find.TAG("*",u),x=H+=null==v?1:Math.random()||.1,C=y.length;for(u&&(E=a!==J&&a);p!==C&&null!=(d=y[p]);p++){if(r&&d){for(c=0;f=t[c++];)if(f(d,a,s)){l.push(d);break}u&&(H=x)}o&&((d=!f&&d)&&h--,i&&g.push(d))}if(h+=p,o&&p!==h){for(c=0;f=n[c++];)f(g,b,a,s);if(i){if(h>0)for(;p--;)g[p]||b[p]||(b[p]=V.call(l));b=m(b)}K.apply(l,b),u&&!i&&b.length>0&&h+n.length>1&&e.uniqueSort(l)}return u&&(H=x,E=v),g};return o?i(a):a}var x,C,w,S,_,q,T,k,E,N,D,L,J,A,I,P,M,Q,O,R="sizzle"+1*new Date,j=t.document,H=0,F=0,z=n(),B=n(),W=n(),U=function(t,e){return t===e&&(D=!0),0},$=1<<31,X={}.hasOwnProperty,G=[],V=G.pop,Y=G.push,K=G.push,Z=G.slice,te=function(t,e){for(var n=0,i=t.length;i>n;n++)if(t[n]===e)return n;return-1},ee="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",ne="[\\x20\\t\\r\\n\\f]",ie="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",oe=ie.replace("w","w#"),re="\\["+ne+"*("+ie+")(?:"+ne+"*([*^$|!~]?=)"+ne+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+oe+"))|)"+ne+"*\\]",ae=":("+ie+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+re+")*)|.*)\\)|)",se=new RegExp(ne+"+","g"),le=new RegExp("^"+ne+"+|((?:^|[^\\\\])(?:\\\\.)*)"+ne+"+$","g"),ue=new RegExp("^"+ne+"*,"+ne+"*"),de=new RegExp("^"+ne+"*([>+~]|"+ne+")"+ne+"*"),ce=new RegExp("="+ne+"*([^\\]'\"]*?)"+ne+"*\\]","g"),fe=new RegExp(ae),he=new RegExp("^"+oe+"$"),pe={ID:new RegExp("^#("+ie+")"),CLASS:new RegExp("^\\.("+ie+")"),TAG:new RegExp("^("+ie.replace("w","w*")+")"),ATTR:new RegExp("^"+re),PSEUDO:new RegExp("^"+ae),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+ne+"*(even|odd|(([+-]|)(\\d*)n|)"+ne+"*(?:([+-]|)"+ne+"*(\\d+)|))"+ne+"*\\)|)","i"),bool:new RegExp("^(?:"+ee+")$","i"),needsContext:new RegExp("^"+ne+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+ne+"*((?:-\\d)?\\d*)"+ne+"*\\)|)(?=[^-]|$)","i")},ge=/^(?:input|select|textarea|button)$/i,me=/^h\d$/i,be=/^[^{]+\{\s*\[native \w/,ve=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ye=/[+~]/,xe=/'|\\/g,Ce=new RegExp("\\\\([\\da-f]{1,6}"+ne+"?|("+ne+")|.)","ig"),we=function(t,e,n){var i="0x"+e-65536;return i!==i||n?e:0>i?String.fromCharCode(i+65536):String.fromCharCode(i>>10|55296,1023&i|56320)},Se=function(){L()};try{K.apply(G=Z.call(j.childNodes),j.childNodes),G[j.childNodes.length].nodeType}catch(_e){K={apply:G.length?function(t,e){Y.apply(t,Z.call(e))}:function(t,e){for(var n=t.length,i=0;t[n++]=e[i++];);t.length=n-1}}}C=e.support={},_=e.isXML=function(t){var e=t&&(t.ownerDocument||t).documentElement;return e?"HTML"!==e.nodeName:!1},L=e.setDocument=function(t){var e,n,i=t?t.ownerDocument||t:j;return i!==J&&9===i.nodeType&&i.documentElement?(J=i,A=i.documentElement,n=i.defaultView,n&&n!==n.top&&(n.addEventListener?n.addEventListener("unload",Se,!1):n.attachEvent&&n.attachEvent("onunload",Se)),I=!_(i),C.attributes=o(function(t){return t.className="i",!t.getAttribute("className")}),C.getElementsByTagName=o(function(t){return t.appendChild(i.createComment("")),!t.getElementsByTagName("*").length}),C.getElementsByClassName=be.test(i.getElementsByClassName),C.getById=o(function(t){return A.appendChild(t).id=R,!i.getElementsByName||!i.getElementsByName(R).length}),C.getById?(w.find.ID=function(t,e){if("undefined"!=typeof e.getElementById&&I){var n=e.getElementById(t);return n&&n.parentNode?[n]:[]}},w.filter.ID=function(t){var e=t.replace(Ce,we);return function(t){return t.getAttribute("id")===e}}):(delete w.find.ID,w.filter.ID=function(t){var e=t.replace(Ce,we);return function(t){var n="undefined"!=typeof t.getAttributeNode&&t.getAttributeNode("id");return n&&n.value===e}}),w.find.TAG=C.getElementsByTagName?function(t,e){return"undefined"!=typeof e.getElementsByTagName?e.getElementsByTagName(t):C.qsa?e.querySelectorAll(t):void 0}:function(t,e){var n,i=[],o=0,r=e.getElementsByTagName(t);if("*"===t){for(;n=r[o++];)1===n.nodeType&&i.push(n);return i}return r},w.find.CLASS=C.getElementsByClassName&&function(t,e){return I?e.getElementsByClassName(t):void 0},M=[],P=[],(C.qsa=be.test(i.querySelectorAll))&&(o(function(t){A.appendChild(t).innerHTML="<a id='"+R+"'></a><select id='"+R+"-\f]' msallowcapture=''><option selected=''></option></select>",t.querySelectorAll("[msallowcapture^='']").length&&P.push("[*^$]="+ne+"*(?:''|\"\")"),t.querySelectorAll("[selected]").length||P.push("\\["+ne+"*(?:value|"+ee+")"),t.querySelectorAll("[id~="+R+"-]").length||P.push("~="),t.querySelectorAll(":checked").length||P.push(":checked"),t.querySelectorAll("a#"+R+"+*").length||P.push(".#.+[+~]")}),o(function(t){var e=i.createElement("input");e.setAttribute("type","hidden"),t.appendChild(e).setAttribute("name","D"),t.querySelectorAll("[name=d]").length&&P.push("name"+ne+"*[*^$|!~]?="),t.querySelectorAll(":enabled").length||P.push(":enabled",":disabled"),t.querySelectorAll("*,:x"),P.push(",.*:")})),(C.matchesSelector=be.test(Q=A.matches||A.webkitMatchesSelector||A.mozMatchesSelector||A.oMatchesSelector||A.msMatchesSelector))&&o(function(t){C.disconnectedMatch=Q.call(t,"div"),Q.call(t,"[s!='']:x"),M.push("!=",ae)}),P=P.length&&new RegExp(P.join("|")),M=M.length&&new RegExp(M.join("|")),e=be.test(A.compareDocumentPosition),O=e||be.test(A.contains)?function(t,e){var n=9===t.nodeType?t.documentElement:t,i=e&&e.parentNode;return t===i||!(!i||1!==i.nodeType||!(n.contains?n.contains(i):t.compareDocumentPosition&&16&t.compareDocumentPosition(i)))}:function(t,e){if(e)for(;e=e.parentNode;)if(e===t)return!0;return!1},U=e?function(t,e){if(t===e)return D=!0,0;var n=!t.compareDocumentPosition-!e.compareDocumentPosition;return n?n:(n=(t.ownerDocument||t)===(e.ownerDocument||e)?t.compareDocumentPosition(e):1,1&n||!C.sortDetached&&e.compareDocumentPosition(t)===n?t===i||t.ownerDocument===j&&O(j,t)?-1:e===i||e.ownerDocument===j&&O(j,e)?1:N?te(N,t)-te(N,e):0:4&n?-1:1)}:function(t,e){if(t===e)return D=!0,0;var n,o=0,r=t.parentNode,s=e.parentNode,l=[t],u=[e];if(!r||!s)return t===i?-1:e===i?1:r?-1:s?1:N?te(N,t)-te(N,e):0;if(r===s)return a(t,e);for(n=t;n=n.parentNode;)l.unshift(n);for(n=e;n=n.parentNode;)u.unshift(n);for(;l[o]===u[o];)o++;return o?a(l[o],u[o]):l[o]===j?-1:u[o]===j?1:0},i):J},e.matches=function(t,n){return e(t,null,null,n)},e.matchesSelector=function(t,n){if((t.ownerDocument||t)!==J&&L(t),n=n.replace(ce,"='$1']"),!(!C.matchesSelector||!I||M&&M.test(n)||P&&P.test(n)))try{var i=Q.call(t,n);if(i||C.disconnectedMatch||t.document&&11!==t.document.nodeType)return i}catch(o){}return e(n,J,null,[t]).length>0},e.contains=function(t,e){return(t.ownerDocument||t)!==J&&L(t),O(t,e)},e.attr=function(t,e){(t.ownerDocument||t)!==J&&L(t);var n=w.attrHandle[e.toLowerCase()],i=n&&X.call(w.attrHandle,e.toLowerCase())?n(t,e,!I):void 0;return void 0!==i?i:C.attributes||!I?t.getAttribute(e):(i=t.getAttributeNode(e))&&i.specified?i.value:null},e.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)},e.uniqueSort=function(t){var e,n=[],i=0,o=0;if(D=!C.detectDuplicates,N=!C.sortStable&&t.slice(0),t.sort(U),D){for(;e=t[o++];)e===t[o]&&(i=n.push(o));for(;i--;)t.splice(n[i],1)}return N=null,t},S=e.getText=function(t){var e,n="",i=0,o=t.nodeType;if(o){if(1===o||9===o||11===o){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)n+=S(t)}else if(3===o||4===o)return t.nodeValue}else for(;e=t[i++];)n+=S(e);return n},w=e.selectors={cacheLength:50,createPseudo:i,match:pe,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(Ce,we),t[3]=(t[3]||t[4]||t[5]||"").replace(Ce,we),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)
},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||e.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&e.error(t[0]),t},PSEUDO:function(t){var e,n=!t[6]&&t[2];return pe.CHILD.test(t[0])?null:(t[3]?t[2]=t[4]||t[5]||"":n&&fe.test(n)&&(e=q(n,!0))&&(e=n.indexOf(")",n.length-e)-n.length)&&(t[0]=t[0].slice(0,e),t[2]=n.slice(0,e)),t.slice(0,3))}},filter:{TAG:function(t){var e=t.replace(Ce,we).toLowerCase();return"*"===t?function(){return!0}:function(t){return t.nodeName&&t.nodeName.toLowerCase()===e}},CLASS:function(t){var e=z[t+" "];return e||(e=new RegExp("(^|"+ne+")"+t+"("+ne+"|$)"))&&z(t,function(t){return e.test("string"==typeof t.className&&t.className||"undefined"!=typeof t.getAttribute&&t.getAttribute("class")||"")})},ATTR:function(t,n,i){return function(o){var r=e.attr(o,t);return null==r?"!="===n:n?(r+="","="===n?r===i:"!="===n?r!==i:"^="===n?i&&0===r.indexOf(i):"*="===n?i&&r.indexOf(i)>-1:"$="===n?i&&r.slice(-i.length)===i:"~="===n?(" "+r.replace(se," ")+" ").indexOf(i)>-1:"|="===n?r===i||r.slice(0,i.length+1)===i+"-":!1):!0}},CHILD:function(t,e,n,i,o){var r="nth"!==t.slice(0,3),a="last"!==t.slice(-4),s="of-type"===e;return 1===i&&0===o?function(t){return!!t.parentNode}:function(e,n,l){var u,d,c,f,h,p,g=r!==a?"nextSibling":"previousSibling",m=e.parentNode,b=s&&e.nodeName.toLowerCase(),v=!l&&!s;if(m){if(r){for(;g;){for(c=e;c=c[g];)if(s?c.nodeName.toLowerCase()===b:1===c.nodeType)return!1;p=g="only"===t&&!p&&"nextSibling"}return!0}if(p=[a?m.firstChild:m.lastChild],a&&v){for(d=m[R]||(m[R]={}),u=d[t]||[],h=u[0]===H&&u[1],f=u[0]===H&&u[2],c=h&&m.childNodes[h];c=++h&&c&&c[g]||(f=h=0)||p.pop();)if(1===c.nodeType&&++f&&c===e){d[t]=[H,h,f];break}}else if(v&&(u=(e[R]||(e[R]={}))[t])&&u[0]===H)f=u[1];else for(;(c=++h&&c&&c[g]||(f=h=0)||p.pop())&&((s?c.nodeName.toLowerCase()!==b:1!==c.nodeType)||!++f||(v&&((c[R]||(c[R]={}))[t]=[H,f]),c!==e)););return f-=o,f===i||f%i===0&&f/i>=0}}},PSEUDO:function(t,n){var o,r=w.pseudos[t]||w.setFilters[t.toLowerCase()]||e.error("unsupported pseudo: "+t);return r[R]?r(n):r.length>1?(o=[t,t,"",n],w.setFilters.hasOwnProperty(t.toLowerCase())?i(function(t,e){for(var i,o=r(t,n),a=o.length;a--;)i=te(t,o[a]),t[i]=!(e[i]=o[a])}):function(t){return r(t,0,o)}):r}},pseudos:{not:i(function(t){var e=[],n=[],o=T(t.replace(le,"$1"));return o[R]?i(function(t,e,n,i){for(var r,a=o(t,null,i,[]),s=t.length;s--;)(r=a[s])&&(t[s]=!(e[s]=r))}):function(t,i,r){return e[0]=t,o(e,null,r,n),e[0]=null,!n.pop()}}),has:i(function(t){return function(n){return e(t,n).length>0}}),contains:i(function(t){return t=t.replace(Ce,we),function(e){return(e.textContent||e.innerText||S(e)).indexOf(t)>-1}}),lang:i(function(t){return he.test(t||"")||e.error("unsupported lang: "+t),t=t.replace(Ce,we).toLowerCase(),function(e){var n;do if(n=I?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return n=n.toLowerCase(),n===t||0===n.indexOf(t+"-");while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var n=t.location&&t.location.hash;return n&&n.slice(1)===e.id},root:function(t){return t===A},focus:function(t){return t===J.activeElement&&(!J.hasFocus||J.hasFocus())&&!!(t.type||t.href||~t.tabIndex)},enabled:function(t){return t.disabled===!1},disabled:function(t){return t.disabled===!0},checked:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&!!t.checked||"option"===e&&!!t.selected},selected:function(t){return t.parentNode&&t.parentNode.selectedIndex,t.selected===!0},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeType<6)return!1;return!0},parent:function(t){return!w.pseudos.empty(t)},header:function(t){return me.test(t.nodeName)},input:function(t){return ge.test(t.nodeName)},button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},text:function(t){var e;return"input"===t.nodeName.toLowerCase()&&"text"===t.type&&(null==(e=t.getAttribute("type"))||"text"===e.toLowerCase())},first:u(function(){return[0]}),last:u(function(t,e){return[e-1]}),eq:u(function(t,e,n){return[0>n?n+e:n]}),even:u(function(t,e){for(var n=0;e>n;n+=2)t.push(n);return t}),odd:u(function(t,e){for(var n=1;e>n;n+=2)t.push(n);return t}),lt:u(function(t,e,n){for(var i=0>n?n+e:n;--i>=0;)t.push(i);return t}),gt:u(function(t,e,n){for(var i=0>n?n+e:n;++i<e;)t.push(i);return t})}},w.pseudos.nth=w.pseudos.eq;for(x in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})w.pseudos[x]=s(x);for(x in{submit:!0,reset:!0})w.pseudos[x]=l(x);return c.prototype=w.filters=w.pseudos,w.setFilters=new c,q=e.tokenize=function(t,n){var i,o,r,a,s,l,u,d=B[t+" "];if(d)return n?0:d.slice(0);for(s=t,l=[],u=w.preFilter;s;){(!i||(o=ue.exec(s)))&&(o&&(s=s.slice(o[0].length)||s),l.push(r=[])),i=!1,(o=de.exec(s))&&(i=o.shift(),r.push({value:i,type:o[0].replace(le," ")}),s=s.slice(i.length));for(a in w.filter)!(o=pe[a].exec(s))||u[a]&&!(o=u[a](o))||(i=o.shift(),r.push({value:i,type:a,matches:o}),s=s.slice(i.length));if(!i)break}return n?s.length:s?e.error(t):B(t,l).slice(0)},T=e.compile=function(t,e){var n,i=[],o=[],r=W[t+" "];if(!r){for(e||(e=q(t)),n=e.length;n--;)r=v(e[n]),r[R]?i.push(r):o.push(r);r=W(t,y(o,i)),r.selector=t}return r},k=e.select=function(t,e,n,i){var o,r,a,s,l,u="function"==typeof t&&t,c=!i&&q(t=u.selector||t);if(n=n||[],1===c.length){if(r=c[0]=c[0].slice(0),r.length>2&&"ID"===(a=r[0]).type&&C.getById&&9===e.nodeType&&I&&w.relative[r[1].type]){if(e=(w.find.ID(a.matches[0].replace(Ce,we),e)||[])[0],!e)return n;u&&(e=e.parentNode),t=t.slice(r.shift().value.length)}for(o=pe.needsContext.test(t)?0:r.length;o--&&(a=r[o],!w.relative[s=a.type]);)if((l=w.find[s])&&(i=l(a.matches[0].replace(Ce,we),ye.test(r[0].type)&&d(e.parentNode)||e))){if(r.splice(o,1),t=i.length&&f(r),!t)return K.apply(n,i),n;break}}return(u||T(t,c))(i,e,!I,n,ye.test(t)&&d(e.parentNode)||e),n},C.sortStable=R.split("").sort(U).join("")===R,C.detectDuplicates=!!D,L(),C.sortDetached=o(function(t){return 1&t.compareDocumentPosition(J.createElement("div"))}),o(function(t){return t.innerHTML="<a href='#'></a>","#"===t.firstChild.getAttribute("href")})||r("type|href|height|width",function(t,e,n){return n?void 0:t.getAttribute(e,"type"===e.toLowerCase()?1:2)}),C.attributes&&o(function(t){return t.innerHTML="<input/>",t.firstChild.setAttribute("value",""),""===t.firstChild.getAttribute("value")})||r("value",function(t,e,n){return n||"input"!==t.nodeName.toLowerCase()?void 0:t.defaultValue}),o(function(t){return null==t.getAttribute("disabled")})||r(ee,function(t,e,n){var i;return n?void 0:t[e]===!0?e.toLowerCase():(i=t.getAttributeNode(e))&&i.specified?i.value:null}),e}(t);oe.find=ue,oe.expr=ue.selectors,oe.expr[":"]=oe.expr.pseudos,oe.unique=ue.uniqueSort,oe.text=ue.getText,oe.isXMLDoc=ue.isXML,oe.contains=ue.contains;var de=oe.expr.match.needsContext,ce=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,fe=/^.[^:#\[\.,]*$/;oe.filter=function(t,e,n){var i=e[0];return n&&(t=":not("+t+")"),1===e.length&&1===i.nodeType?oe.find.matchesSelector(i,t)?[i]:[]:oe.find.matches(t,oe.grep(e,function(t){return 1===t.nodeType}))},oe.fn.extend({find:function(t){var e,n=[],i=this,o=i.length;if("string"!=typeof t)return this.pushStack(oe(t).filter(function(){for(e=0;o>e;e++)if(oe.contains(i[e],this))return!0}));for(e=0;o>e;e++)oe.find(t,i[e],n);return n=this.pushStack(o>1?oe.unique(n):n),n.selector=this.selector?this.selector+" "+t:t,n},filter:function(t){return this.pushStack(i(this,t||[],!1))},not:function(t){return this.pushStack(i(this,t||[],!0))},is:function(t){return!!i(this,"string"==typeof t&&de.test(t)?oe(t):t||[],!1).length}});var he,pe=t.document,ge=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,me=oe.fn.init=function(t,e){var n,i;if(!t)return this;if("string"==typeof t){if(n="<"===t.charAt(0)&&">"===t.charAt(t.length-1)&&t.length>=3?[null,t,null]:ge.exec(t),!n||!n[1]&&e)return!e||e.jquery?(e||he).find(t):this.constructor(e).find(t);if(n[1]){if(e=e instanceof oe?e[0]:e,oe.merge(this,oe.parseHTML(n[1],e&&e.nodeType?e.ownerDocument||e:pe,!0)),ce.test(n[1])&&oe.isPlainObject(e))for(n in e)oe.isFunction(this[n])?this[n](e[n]):this.attr(n,e[n]);return this}if(i=pe.getElementById(n[2]),i&&i.parentNode){if(i.id!==n[2])return he.find(t);this.length=1,this[0]=i}return this.context=pe,this.selector=t,this}return t.nodeType?(this.context=this[0]=t,this.length=1,this):oe.isFunction(t)?"undefined"!=typeof he.ready?he.ready(t):t(oe):(void 0!==t.selector&&(this.selector=t.selector,this.context=t.context),oe.makeArray(t,this))};me.prototype=oe.fn,he=oe(pe);var be=/^(?:parents|prev(?:Until|All))/,ve={children:!0,contents:!0,next:!0,prev:!0};oe.extend({dir:function(t,e,n){for(var i=[],o=t[e];o&&9!==o.nodeType&&(void 0===n||1!==o.nodeType||!oe(o).is(n));)1===o.nodeType&&i.push(o),o=o[e];return i},sibling:function(t,e){for(var n=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&n.push(t);return n}}),oe.fn.extend({has:function(t){var e,n=oe(t,this),i=n.length;return this.filter(function(){for(e=0;i>e;e++)if(oe.contains(this,n[e]))return!0})},closest:function(t,e){for(var n,i=0,o=this.length,r=[],a=de.test(t)||"string"!=typeof t?oe(t,e||this.context):0;o>i;i++)for(n=this[i];n&&n!==e;n=n.parentNode)if(n.nodeType<11&&(a?a.index(n)>-1:1===n.nodeType&&oe.find.matchesSelector(n,t))){r.push(n);break}return this.pushStack(r.length>1?oe.unique(r):r)},index:function(t){return t?"string"==typeof t?oe.inArray(this[0],oe(t)):oe.inArray(t.jquery?t[0]:t,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,e){return this.pushStack(oe.unique(oe.merge(this.get(),oe(t,e))))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),oe.each({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return oe.dir(t,"parentNode")},parentsUntil:function(t,e,n){return oe.dir(t,"parentNode",n)},next:function(t){return o(t,"nextSibling")},prev:function(t){return o(t,"previousSibling")},nextAll:function(t){return oe.dir(t,"nextSibling")},prevAll:function(t){return oe.dir(t,"previousSibling")},nextUntil:function(t,e,n){return oe.dir(t,"nextSibling",n)},prevUntil:function(t,e,n){return oe.dir(t,"previousSibling",n)},siblings:function(t){return oe.sibling((t.parentNode||{}).firstChild,t)},children:function(t){return oe.sibling(t.firstChild)},contents:function(t){return oe.nodeName(t,"iframe")?t.contentDocument||t.contentWindow.document:oe.merge([],t.childNodes)}},function(t,e){oe.fn[t]=function(n,i){var o=oe.map(this,e,n);return"Until"!==t.slice(-5)&&(i=n),i&&"string"==typeof i&&(o=oe.filter(i,o)),this.length>1&&(ve[t]||(o=oe.unique(o)),be.test(t)&&(o=o.reverse())),this.pushStack(o)}});var ye=/\S+/g,xe={};oe.Callbacks=function(t){t="string"==typeof t?xe[t]||r(t):oe.extend({},t);var e,n,i,o,a,s,l=[],u=!t.once&&[],d=function(r){for(n=t.memory&&r,i=!0,a=s||0,s=0,o=l.length,e=!0;l&&o>a;a++)if(l[a].apply(r[0],r[1])===!1&&t.stopOnFalse){n=!1;break}e=!1,l&&(u?u.length&&d(u.shift()):n?l=[]:c.disable())},c={add:function(){if(l){var i=l.length;!function r(e){oe.each(e,function(e,n){var i=oe.type(n);"function"===i?t.unique&&c.has(n)||l.push(n):n&&n.length&&"string"!==i&&r(n)})}(arguments),e?o=l.length:n&&(s=i,d(n))}return this},remove:function(){return l&&oe.each(arguments,function(t,n){for(var i;(i=oe.inArray(n,l,i))>-1;)l.splice(i,1),e&&(o>=i&&o--,a>=i&&a--)}),this},has:function(t){return t?oe.inArray(t,l)>-1:!(!l||!l.length)},empty:function(){return l=[],o=0,this},disable:function(){return l=u=n=void 0,this},disabled:function(){return!l},lock:function(){return u=void 0,n||c.disable(),this},locked:function(){return!u},fireWith:function(t,n){return!l||i&&!u||(n=n||[],n=[t,n.slice?n.slice():n],e?u.push(n):d(n)),this},fire:function(){return c.fireWith(this,arguments),this},fired:function(){return!!i}};return c},oe.extend({Deferred:function(t){var e=[["resolve","done",oe.Callbacks("once memory"),"resolved"],["reject","fail",oe.Callbacks("once memory"),"rejected"],["notify","progress",oe.Callbacks("memory")]],n="pending",i={state:function(){return n},always:function(){return o.done(arguments).fail(arguments),this},then:function(){var t=arguments;return oe.Deferred(function(n){oe.each(e,function(e,r){var a=oe.isFunction(t[e])&&t[e];o[r[1]](function(){var t=a&&a.apply(this,arguments);t&&oe.isFunction(t.promise)?t.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[r[0]+"With"](this===i?n.promise():this,a?[t]:arguments)})}),t=null}).promise()},promise:function(t){return null!=t?oe.extend(t,i):i}},o={};return i.pipe=i.then,oe.each(e,function(t,r){var a=r[2],s=r[3];i[r[1]]=a.add,s&&a.add(function(){n=s},e[1^t][2].disable,e[2][2].lock),o[r[0]]=function(){return o[r[0]+"With"](this===o?i:this,arguments),this},o[r[0]+"With"]=a.fireWith}),i.promise(o),t&&t.call(o,o),o},when:function(t){var e,n,i,o=0,r=G.call(arguments),a=r.length,s=1!==a||t&&oe.isFunction(t.promise)?a:0,l=1===s?t:oe.Deferred(),u=function(t,n,i){return function(o){n[t]=this,i[t]=arguments.length>1?G.call(arguments):o,i===e?l.notifyWith(n,i):--s||l.resolveWith(n,i)}};if(a>1)for(e=new Array(a),n=new Array(a),i=new Array(a);a>o;o++)r[o]&&oe.isFunction(r[o].promise)?r[o].promise().done(u(o,i,r)).fail(l.reject).progress(u(o,n,e)):--s;return s||l.resolveWith(i,r),l.promise()}});var Ce;oe.fn.ready=function(t){return oe.ready.promise().done(t),this},oe.extend({isReady:!1,readyWait:1,holdReady:function(t){t?oe.readyWait++:oe.ready(!0)},ready:function(t){if(t===!0?!--oe.readyWait:!oe.isReady){if(!pe.body)return setTimeout(oe.ready);oe.isReady=!0,t!==!0&&--oe.readyWait>0||(Ce.resolveWith(pe,[oe]),oe.fn.triggerHandler&&(oe(pe).triggerHandler("ready"),oe(pe).off("ready")))}}}),oe.ready.promise=function(e){if(!Ce)if(Ce=oe.Deferred(),"complete"===pe.readyState)setTimeout(oe.ready);else if(pe.addEventListener)pe.addEventListener("DOMContentLoaded",s,!1),t.addEventListener("load",s,!1);else{pe.attachEvent("onreadystatechange",s),t.attachEvent("onload",s);var n=!1;try{n=null==t.frameElement&&pe.documentElement}catch(i){}n&&n.doScroll&&!function o(){if(!oe.isReady){try{n.doScroll("left")}catch(t){return setTimeout(o,50)}a(),oe.ready()}}()}return Ce.promise(e)};var we,Se="undefined";for(we in oe(ne))break;ne.ownLast="0"!==we,ne.inlineBlockNeedsLayout=!1,oe(function(){var t,e,n,i;n=pe.getElementsByTagName("body")[0],n&&n.style&&(e=pe.createElement("div"),i=pe.createElement("div"),i.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",n.appendChild(i).appendChild(e),typeof e.style.zoom!==Se&&(e.style.cssText="display:inline;margin:0;border:0;padding:1px;width:1px;zoom:1",ne.inlineBlockNeedsLayout=t=3===e.offsetWidth,t&&(n.style.zoom=1)),n.removeChild(i))}),function(){var t=pe.createElement("div");if(null==ne.deleteExpando){ne.deleteExpando=!0;try{delete t.test}catch(e){ne.deleteExpando=!1}}t=null}(),oe.acceptData=function(t){var e=oe.noData[(t.nodeName+" ").toLowerCase()],n=+t.nodeType||1;return 1!==n&&9!==n?!1:!e||e!==!0&&t.getAttribute("classid")===e};var _e=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,qe=/([A-Z])/g;oe.extend({cache:{},noData:{"applet ":!0,"embed ":!0,"object ":"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"},hasData:function(t){return t=t.nodeType?oe.cache[t[oe.expando]]:t[oe.expando],!!t&&!u(t)},data:function(t,e,n){return d(t,e,n)},removeData:function(t,e){return c(t,e)},_data:function(t,e,n){return d(t,e,n,!0)},_removeData:function(t,e){return c(t,e,!0)}}),oe.fn.extend({data:function(t,e){var n,i,o,r=this[0],a=r&&r.attributes;if(void 0===t){if(this.length&&(o=oe.data(r),1===r.nodeType&&!oe._data(r,"parsedAttrs"))){for(n=a.length;n--;)a[n]&&(i=a[n].name,0===i.indexOf("data-")&&(i=oe.camelCase(i.slice(5)),l(r,i,o[i])));oe._data(r,"parsedAttrs",!0)}return o}return"object"==typeof t?this.each(function(){oe.data(this,t)}):arguments.length>1?this.each(function(){oe.data(this,t,e)}):r?l(r,t,oe.data(r,t)):void 0},removeData:function(t){return this.each(function(){oe.removeData(this,t)})}}),oe.extend({queue:function(t,e,n){var i;return t?(e=(e||"fx")+"queue",i=oe._data(t,e),n&&(!i||oe.isArray(n)?i=oe._data(t,e,oe.makeArray(n)):i.push(n)),i||[]):void 0},dequeue:function(t,e){e=e||"fx";var n=oe.queue(t,e),i=n.length,o=n.shift(),r=oe._queueHooks(t,e),a=function(){oe.dequeue(t,e)};"inprogress"===o&&(o=n.shift(),i--),o&&("fx"===e&&n.unshift("inprogress"),delete r.stop,o.call(t,a,r)),!i&&r&&r.empty.fire()},_queueHooks:function(t,e){var n=e+"queueHooks";return oe._data(t,n)||oe._data(t,n,{empty:oe.Callbacks("once memory").add(function(){oe._removeData(t,e+"queue"),oe._removeData(t,n)})})}}),oe.fn.extend({queue:function(t,e){var n=2;return"string"!=typeof t&&(e=t,t="fx",n--),arguments.length<n?oe.queue(this[0],t):void 0===e?this:this.each(function(){var n=oe.queue(this,t,e);oe._queueHooks(this,t),"fx"===t&&"inprogress"!==n[0]&&oe.dequeue(this,t)})},dequeue:function(t){return this.each(function(){oe.dequeue(this,t)})},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,e){var n,i=1,o=oe.Deferred(),r=this,a=this.length,s=function(){--i||o.resolveWith(r,[r])};for("string"!=typeof t&&(e=t,t=void 0),t=t||"fx";a--;)n=oe._data(r[a],t+"queueHooks"),n&&n.empty&&(i++,n.empty.add(s));return s(),o.promise(e)}});var Te=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,ke=["Top","Right","Bottom","Left"],Ee=function(t,e){return t=e||t,"none"===oe.css(t,"display")||!oe.contains(t.ownerDocument,t)},Ne=oe.access=function(t,e,n,i,o,r,a){var s=0,l=t.length,u=null==n;if("object"===oe.type(n)){o=!0;for(s in n)oe.access(t,e,s,n[s],!0,r,a)}else if(void 0!==i&&(o=!0,oe.isFunction(i)||(a=!0),u&&(a?(e.call(t,i),e=null):(u=e,e=function(t,e,n){return u.call(oe(t),n)})),e))for(;l>s;s++)e(t[s],n,a?i:i.call(t[s],s,e(t[s],n)));return o?t:u?e.call(t):l?e(t[0],n):r},De=/^(?:checkbox|radio)$/i;!function(){var t=pe.createElement("input"),e=pe.createElement("div"),n=pe.createDocumentFragment();if(e.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",ne.leadingWhitespace=3===e.firstChild.nodeType,ne.tbody=!e.getElementsByTagName("tbody").length,ne.htmlSerialize=!!e.getElementsByTagName("link").length,ne.html5Clone="<:nav></:nav>"!==pe.createElement("nav").cloneNode(!0).outerHTML,t.type="checkbox",t.checked=!0,n.appendChild(t),ne.appendChecked=t.checked,e.innerHTML="<textarea>x</textarea>",ne.noCloneChecked=!!e.cloneNode(!0).lastChild.defaultValue,n.appendChild(e),e.innerHTML="<input type='radio' checked='checked' name='t'/>",ne.checkClone=e.cloneNode(!0).cloneNode(!0).lastChild.checked,ne.noCloneEvent=!0,e.attachEvent&&(e.attachEvent("onclick",function(){ne.noCloneEvent=!1}),e.cloneNode(!0).click()),null==ne.deleteExpando){ne.deleteExpando=!0;try{delete e.test}catch(i){ne.deleteExpando=!1}}}(),function(){var e,n,i=pe.createElement("div");for(e in{submit:!0,change:!0,focusin:!0})n="on"+e,(ne[e+"Bubbles"]=n in t)||(i.setAttribute(n,"t"),ne[e+"Bubbles"]=i.attributes[n].expando===!1);i=null}();var Le=/^(?:input|select|textarea)$/i,Je=/^key/,Ae=/^(?:mouse|pointer|contextmenu)|click/,Ie=/^(?:focusinfocus|focusoutblur)$/,Pe=/^([^.]*)(?:\.(.+)|)$/;oe.event={global:{},add:function(t,e,n,i,o){var r,a,s,l,u,d,c,f,h,p,g,m=oe._data(t);if(m){for(n.handler&&(l=n,n=l.handler,o=l.selector),n.guid||(n.guid=oe.guid++),(a=m.events)||(a=m.events={}),(d=m.handle)||(d=m.handle=function(t){return typeof oe===Se||t&&oe.event.triggered===t.type?void 0:oe.event.dispatch.apply(d.elem,arguments)},d.elem=t),e=(e||"").match(ye)||[""],s=e.length;s--;)r=Pe.exec(e[s])||[],h=g=r[1],p=(r[2]||"").split(".").sort(),h&&(u=oe.event.special[h]||{},h=(o?u.delegateType:u.bindType)||h,u=oe.event.special[h]||{},c=oe.extend({type:h,origType:g,data:i,handler:n,guid:n.guid,selector:o,needsContext:o&&oe.expr.match.needsContext.test(o),namespace:p.join(".")},l),(f=a[h])||(f=a[h]=[],f.delegateCount=0,u.setup&&u.setup.call(t,i,p,d)!==!1||(t.addEventListener?t.addEventListener(h,d,!1):t.attachEvent&&t.attachEvent("on"+h,d))),u.add&&(u.add.call(t,c),c.handler.guid||(c.handler.guid=n.guid)),o?f.splice(f.delegateCount++,0,c):f.push(c),oe.event.global[h]=!0);t=null}},remove:function(t,e,n,i,o){var r,a,s,l,u,d,c,f,h,p,g,m=oe.hasData(t)&&oe._data(t);if(m&&(d=m.events)){for(e=(e||"").match(ye)||[""],u=e.length;u--;)if(s=Pe.exec(e[u])||[],h=g=s[1],p=(s[2]||"").split(".").sort(),h){for(c=oe.event.special[h]||{},h=(i?c.delegateType:c.bindType)||h,f=d[h]||[],s=s[2]&&new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"),l=r=f.length;r--;)a=f[r],!o&&g!==a.origType||n&&n.guid!==a.guid||s&&!s.test(a.namespace)||i&&i!==a.selector&&("**"!==i||!a.selector)||(f.splice(r,1),a.selector&&f.delegateCount--,c.remove&&c.remove.call(t,a));l&&!f.length&&(c.teardown&&c.teardown.call(t,p,m.handle)!==!1||oe.removeEvent(t,h,m.handle),delete d[h])}else for(h in d)oe.event.remove(t,h+e[u],n,i,!0);oe.isEmptyObject(d)&&(delete m.handle,oe._removeData(t,"events"))}},trigger:function(e,n,i,o){var r,a,s,l,u,d,c,f=[i||pe],h=ee.call(e,"type")?e.type:e,p=ee.call(e,"namespace")?e.namespace.split("."):[];if(s=d=i=i||pe,3!==i.nodeType&&8!==i.nodeType&&!Ie.test(h+oe.event.triggered)&&(h.indexOf(".")>=0&&(p=h.split("."),h=p.shift(),p.sort()),a=h.indexOf(":")<0&&"on"+h,e=e[oe.expando]?e:new oe.Event(h,"object"==typeof e&&e),e.isTrigger=o?2:3,e.namespace=p.join("."),e.namespace_re=e.namespace?new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=i),n=null==n?[e]:oe.makeArray(n,[e]),u=oe.event.special[h]||{},o||!u.trigger||u.trigger.apply(i,n)!==!1)){if(!o&&!u.noBubble&&!oe.isWindow(i)){for(l=u.delegateType||h,Ie.test(l+h)||(s=s.parentNode);s;s=s.parentNode)f.push(s),d=s;d===(i.ownerDocument||pe)&&f.push(d.defaultView||d.parentWindow||t)}for(c=0;(s=f[c++])&&!e.isPropagationStopped();)e.type=c>1?l:u.bindType||h,r=(oe._data(s,"events")||{})[e.type]&&oe._data(s,"handle"),r&&r.apply(s,n),r=a&&s[a],r&&r.apply&&oe.acceptData(s)&&(e.result=r.apply(s,n),e.result===!1&&e.preventDefault());if(e.type=h,!o&&!e.isDefaultPrevented()&&(!u._default||u._default.apply(f.pop(),n)===!1)&&oe.acceptData(i)&&a&&i[h]&&!oe.isWindow(i)){d=i[a],d&&(i[a]=null),oe.event.triggered=h;try{i[h]()}catch(g){}oe.event.triggered=void 0,d&&(i[a]=d)}return e.result}},dispatch:function(t){t=oe.event.fix(t);var e,n,i,o,r,a=[],s=G.call(arguments),l=(oe._data(this,"events")||{})[t.type]||[],u=oe.event.special[t.type]||{};if(s[0]=t,t.delegateTarget=this,!u.preDispatch||u.preDispatch.call(this,t)!==!1){for(a=oe.event.handlers.call(this,t,l),e=0;(o=a[e++])&&!t.isPropagationStopped();)for(t.currentTarget=o.elem,r=0;(i=o.handlers[r++])&&!t.isImmediatePropagationStopped();)(!t.namespace_re||t.namespace_re.test(i.namespace))&&(t.handleObj=i,t.data=i.data,n=((oe.event.special[i.origType]||{}).handle||i.handler).apply(o.elem,s),void 0!==n&&(t.result=n)===!1&&(t.preventDefault(),t.stopPropagation()));return u.postDispatch&&u.postDispatch.call(this,t),t.result}},handlers:function(t,e){var n,i,o,r,a=[],s=e.delegateCount,l=t.target;if(s&&l.nodeType&&(!t.button||"click"!==t.type))for(;l!=this;l=l.parentNode||this)if(1===l.nodeType&&(l.disabled!==!0||"click"!==t.type)){for(o=[],r=0;s>r;r++)i=e[r],n=i.selector+" ",void 0===o[n]&&(o[n]=i.needsContext?oe(n,this).index(l)>=0:oe.find(n,this,null,[l]).length),o[n]&&o.push(i);o.length&&a.push({elem:l,handlers:o})}return s<e.length&&a.push({elem:this,handlers:e.slice(s)}),a},fix:function(t){if(t[oe.expando])return t;var e,n,i,o=t.type,r=t,a=this.fixHooks[o];for(a||(this.fixHooks[o]=a=Ae.test(o)?this.mouseHooks:Je.test(o)?this.keyHooks:{}),i=a.props?this.props.concat(a.props):this.props,t=new oe.Event(r),e=i.length;e--;)n=i[e],t[n]=r[n];return t.target||(t.target=r.srcElement||pe),3===t.target.nodeType&&(t.target=t.target.parentNode),t.metaKey=!!t.metaKey,a.filter?a.filter(t,r):t},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(t,e){return null==t.which&&(t.which=null!=e.charCode?e.charCode:e.keyCode),t}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(t,e){var n,i,o,r=e.button,a=e.fromElement;return null==t.pageX&&null!=e.clientX&&(i=t.target.ownerDocument||pe,o=i.documentElement,n=i.body,t.pageX=e.clientX+(o&&o.scrollLeft||n&&n.scrollLeft||0)-(o&&o.clientLeft||n&&n.clientLeft||0),t.pageY=e.clientY+(o&&o.scrollTop||n&&n.scrollTop||0)-(o&&o.clientTop||n&&n.clientTop||0)),!t.relatedTarget&&a&&(t.relatedTarget=a===t.target?e.toElement:a),t.which||void 0===r||(t.which=1&r?1:2&r?3:4&r?2:0),t}},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==p()&&this.focus)try{return this.focus(),!1}catch(t){}},delegateType:"focusin"},blur:{trigger:function(){return this===p()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return oe.nodeName(this,"input")&&"checkbox"===this.type&&this.click?(this.click(),!1):void 0},_default:function(t){return oe.nodeName(t.target,"a")}},beforeunload:{postDispatch:function(t){void 0!==t.result&&t.originalEvent&&(t.originalEvent.returnValue=t.result)}}},simulate:function(t,e,n,i){var o=oe.extend(new oe.Event,n,{type:t,isSimulated:!0,originalEvent:{}});i?oe.event.trigger(o,null,e):oe.event.dispatch.call(e,o),o.isDefaultPrevented()&&n.preventDefault()}},oe.removeEvent=pe.removeEventListener?function(t,e,n){t.removeEventListener&&t.removeEventListener(e,n,!1)}:function(t,e,n){var i="on"+e;t.detachEvent&&(typeof t[i]===Se&&(t[i]=null),t.detachEvent(i,n))},oe.Event=function(t,e){return this instanceof oe.Event?(t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||void 0===t.defaultPrevented&&t.returnValue===!1?f:h):this.type=t,e&&oe.extend(this,e),this.timeStamp=t&&t.timeStamp||oe.now(),void(this[oe.expando]=!0)):new oe.Event(t,e)},oe.Event.prototype={isDefaultPrevented:h,isPropagationStopped:h,isImmediatePropagationStopped:h,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=f,t&&(t.preventDefault?t.preventDefault():t.returnValue=!1)},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=f,t&&(t.stopPropagation&&t.stopPropagation(),t.cancelBubble=!0)},stopImmediatePropagation:function(){var t=this.originalEvent;this.isImmediatePropagationStopped=f,t&&t.stopImmediatePropagation&&t.stopImmediatePropagation(),this.stopPropagation()}},oe.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(t,e){oe.event.special[t]={delegateType:e,bindType:e,handle:function(t){var n,i=this,o=t.relatedTarget,r=t.handleObj;return(!o||o!==i&&!oe.contains(i,o))&&(t.type=r.origType,n=r.handler.apply(this,arguments),t.type=e),n}}}),ne.submitBubbles||(oe.event.special.submit={setup:function(){return oe.nodeName(this,"form")?!1:void oe.event.add(this,"click._submit keypress._submit",function(t){var e=t.target,n=oe.nodeName(e,"input")||oe.nodeName(e,"button")?e.form:void 0;n&&!oe._data(n,"submitBubbles")&&(oe.event.add(n,"submit._submit",function(t){t._submit_bubble=!0}),oe._data(n,"submitBubbles",!0))})},postDispatch:function(t){t._submit_bubble&&(delete t._submit_bubble,this.parentNode&&!t.isTrigger&&oe.event.simulate("submit",this.parentNode,t,!0))},teardown:function(){return oe.nodeName(this,"form")?!1:void oe.event.remove(this,"._submit")}}),ne.changeBubbles||(oe.event.special.change={setup:function(){return Le.test(this.nodeName)?(("checkbox"===this.type||"radio"===this.type)&&(oe.event.add(this,"propertychange._change",function(t){"checked"===t.originalEvent.propertyName&&(this._just_changed=!0)}),oe.event.add(this,"click._change",function(t){this._just_changed&&!t.isTrigger&&(this._just_changed=!1),oe.event.simulate("change",this,t,!0)})),!1):void oe.event.add(this,"beforeactivate._change",function(t){var e=t.target;Le.test(e.nodeName)&&!oe._data(e,"changeBubbles")&&(oe.event.add(e,"change._change",function(t){!this.parentNode||t.isSimulated||t.isTrigger||oe.event.simulate("change",this.parentNode,t,!0)}),oe._data(e,"changeBubbles",!0))})},handle:function(t){var e=t.target;return this!==e||t.isSimulated||t.isTrigger||"radio"!==e.type&&"checkbox"!==e.type?t.handleObj.handler.apply(this,arguments):void 0},teardown:function(){return oe.event.remove(this,"._change"),!Le.test(this.nodeName)}}),ne.focusinBubbles||oe.each({focus:"focusin",blur:"focusout"},function(t,e){var n=function(t){oe.event.simulate(e,t.target,oe.event.fix(t),!0)};oe.event.special[e]={setup:function(){var i=this.ownerDocument||this,o=oe._data(i,e);o||i.addEventListener(t,n,!0),oe._data(i,e,(o||0)+1)},teardown:function(){var i=this.ownerDocument||this,o=oe._data(i,e)-1;o?oe._data(i,e,o):(i.removeEventListener(t,n,!0),oe._removeData(i,e))}}}),oe.fn.extend({on:function(t,e,n,i,o){var r,a;if("object"==typeof t){"string"!=typeof e&&(n=n||e,e=void 0);for(r in t)this.on(r,e,n,t[r],o);return this}if(null==n&&null==i?(i=e,n=e=void 0):null==i&&("string"==typeof e?(i=n,n=void 0):(i=n,n=e,e=void 0)),i===!1)i=h;else if(!i)return this;return 1===o&&(a=i,i=function(t){return oe().off(t),a.apply(this,arguments)},i.guid=a.guid||(a.guid=oe.guid++)),this.each(function(){oe.event.add(this,t,i,n,e)})},one:function(t,e,n,i){return this.on(t,e,n,i,1)},off:function(t,e,n){var i,o;if(t&&t.preventDefault&&t.handleObj)return i=t.handleObj,oe(t.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if("object"==typeof t){for(o in t)this.off(o,e,t[o]);return this}return(e===!1||"function"==typeof e)&&(n=e,e=void 0),n===!1&&(n=h),this.each(function(){oe.event.remove(this,t,n,e)})},trigger:function(t,e){return this.each(function(){oe.event.trigger(t,e,this)})},triggerHandler:function(t,e){var n=this[0];return n?oe.event.trigger(t,e,n,!0):void 0}});var Me="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",Qe=/ jQuery\d+="(?:null|\d+)"/g,Oe=new RegExp("<(?:"+Me+")[\\s/>]","i"),Re=/^\s+/,je=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,He=/<([\w:]+)/,Fe=/<tbody/i,ze=/<|&#?\w+;/,Be=/<(?:script|style|link)/i,We=/checked\s*(?:[^=]|=\s*.checked.)/i,Ue=/^$|\/(?:java|ecma)script/i,$e=/^true\/(.*)/,Xe=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,Ge={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:ne.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},Ve=g(pe),Ye=Ve.appendChild(pe.createElement("div"));Ge.optgroup=Ge.option,Ge.tbody=Ge.tfoot=Ge.colgroup=Ge.caption=Ge.thead,Ge.th=Ge.td,oe.extend({clone:function(t,e,n){var i,o,r,a,s,l=oe.contains(t.ownerDocument,t);if(ne.html5Clone||oe.isXMLDoc(t)||!Oe.test("<"+t.nodeName+">")?r=t.cloneNode(!0):(Ye.innerHTML=t.outerHTML,Ye.removeChild(r=Ye.firstChild)),!(ne.noCloneEvent&&ne.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||oe.isXMLDoc(t)))for(i=m(r),s=m(t),a=0;null!=(o=s[a]);++a)i[a]&&S(o,i[a]);if(e)if(n)for(s=s||m(t),i=i||m(r),a=0;null!=(o=s[a]);a++)w(o,i[a]);else w(t,r);return i=m(r,"script"),i.length>0&&C(i,!l&&m(t,"script")),i=s=o=null,r},buildFragment:function(t,e,n,i){for(var o,r,a,s,l,u,d,c=t.length,f=g(e),h=[],p=0;c>p;p++)if(r=t[p],r||0===r)if("object"===oe.type(r))oe.merge(h,r.nodeType?[r]:r);else if(ze.test(r)){for(s=s||f.appendChild(e.createElement("div")),l=(He.exec(r)||["",""])[1].toLowerCase(),d=Ge[l]||Ge._default,s.innerHTML=d[1]+r.replace(je,"<$1></$2>")+d[2],o=d[0];o--;)s=s.lastChild;if(!ne.leadingWhitespace&&Re.test(r)&&h.push(e.createTextNode(Re.exec(r)[0])),!ne.tbody)for(r="table"!==l||Fe.test(r)?"<table>"!==d[1]||Fe.test(r)?0:s:s.firstChild,o=r&&r.childNodes.length;o--;)oe.nodeName(u=r.childNodes[o],"tbody")&&!u.childNodes.length&&r.removeChild(u);
for(oe.merge(h,s.childNodes),s.textContent="";s.firstChild;)s.removeChild(s.firstChild);s=f.lastChild}else h.push(e.createTextNode(r));for(s&&f.removeChild(s),ne.appendChecked||oe.grep(m(h,"input"),b),p=0;r=h[p++];)if((!i||-1===oe.inArray(r,i))&&(a=oe.contains(r.ownerDocument,r),s=m(f.appendChild(r),"script"),a&&C(s),n))for(o=0;r=s[o++];)Ue.test(r.type||"")&&n.push(r);return s=null,f},cleanData:function(t,e){for(var n,i,o,r,a=0,s=oe.expando,l=oe.cache,u=ne.deleteExpando,d=oe.event.special;null!=(n=t[a]);a++)if((e||oe.acceptData(n))&&(o=n[s],r=o&&l[o])){if(r.events)for(i in r.events)d[i]?oe.event.remove(n,i):oe.removeEvent(n,i,r.handle);l[o]&&(delete l[o],u?delete n[s]:typeof n.removeAttribute!==Se?n.removeAttribute(s):n[s]=null,X.push(o))}}}),oe.fn.extend({text:function(t){return Ne(this,function(t){return void 0===t?oe.text(this):this.empty().append((this[0]&&this[0].ownerDocument||pe).createTextNode(t))},null,t,arguments.length)},append:function(){return this.domManip(arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=v(this,t);e.appendChild(t)}})},prepend:function(){return this.domManip(arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=v(this,t);e.insertBefore(t,e.firstChild)}})},before:function(){return this.domManip(arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this)})},after:function(){return this.domManip(arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)})},remove:function(t,e){for(var n,i=t?oe.filter(t,this):this,o=0;null!=(n=i[o]);o++)e||1!==n.nodeType||oe.cleanData(m(n)),n.parentNode&&(e&&oe.contains(n.ownerDocument,n)&&C(m(n,"script")),n.parentNode.removeChild(n));return this},empty:function(){for(var t,e=0;null!=(t=this[e]);e++){for(1===t.nodeType&&oe.cleanData(m(t,!1));t.firstChild;)t.removeChild(t.firstChild);t.options&&oe.nodeName(t,"select")&&(t.options.length=0)}return this},clone:function(t,e){return t=null==t?!1:t,e=null==e?t:e,this.map(function(){return oe.clone(this,t,e)})},html:function(t){return Ne(this,function(t){var e=this[0]||{},n=0,i=this.length;if(void 0===t)return 1===e.nodeType?e.innerHTML.replace(Qe,""):void 0;if(!("string"!=typeof t||Be.test(t)||!ne.htmlSerialize&&Oe.test(t)||!ne.leadingWhitespace&&Re.test(t)||Ge[(He.exec(t)||["",""])[1].toLowerCase()])){t=t.replace(je,"<$1></$2>");try{for(;i>n;n++)e=this[n]||{},1===e.nodeType&&(oe.cleanData(m(e,!1)),e.innerHTML=t);e=0}catch(o){}}e&&this.empty().append(t)},null,t,arguments.length)},replaceWith:function(){var t=arguments[0];return this.domManip(arguments,function(e){t=this.parentNode,oe.cleanData(m(this)),t&&t.replaceChild(e,this)}),t&&(t.length||t.nodeType)?this:this.remove()},detach:function(t){return this.remove(t,!0)},domManip:function(t,e){t=V.apply([],t);var n,i,o,r,a,s,l=0,u=this.length,d=this,c=u-1,f=t[0],h=oe.isFunction(f);if(h||u>1&&"string"==typeof f&&!ne.checkClone&&We.test(f))return this.each(function(n){var i=d.eq(n);h&&(t[0]=f.call(this,n,i.html())),i.domManip(t,e)});if(u&&(s=oe.buildFragment(t,this[0].ownerDocument,!1,this),n=s.firstChild,1===s.childNodes.length&&(s=n),n)){for(r=oe.map(m(s,"script"),y),o=r.length;u>l;l++)i=s,l!==c&&(i=oe.clone(i,!0,!0),o&&oe.merge(r,m(i,"script"))),e.call(this[l],i,l);if(o)for(a=r[r.length-1].ownerDocument,oe.map(r,x),l=0;o>l;l++)i=r[l],Ue.test(i.type||"")&&!oe._data(i,"globalEval")&&oe.contains(a,i)&&(i.src?oe._evalUrl&&oe._evalUrl(i.src):oe.globalEval((i.text||i.textContent||i.innerHTML||"").replace(Xe,"")));s=n=null}return this}}),oe.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(t,e){oe.fn[t]=function(t){for(var n,i=0,o=[],r=oe(t),a=r.length-1;a>=i;i++)n=i===a?this:this.clone(!0),oe(r[i])[e](n),Y.apply(o,n.get());return this.pushStack(o)}});var Ke,Ze={};!function(){var t;ne.shrinkWrapBlocks=function(){if(null!=t)return t;t=!1;var e,n,i;return n=pe.getElementsByTagName("body")[0],n&&n.style?(e=pe.createElement("div"),i=pe.createElement("div"),i.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",n.appendChild(i).appendChild(e),typeof e.style.zoom!==Se&&(e.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:1px;width:1px;zoom:1",e.appendChild(pe.createElement("div")).style.width="5px",t=3!==e.offsetWidth),n.removeChild(i),t):void 0}}();var tn,en,nn=/^margin/,on=new RegExp("^("+Te+")(?!px)[a-z%]+$","i"),rn=/^(top|right|bottom|left)$/;t.getComputedStyle?(tn=function(e){return e.ownerDocument.defaultView.opener?e.ownerDocument.defaultView.getComputedStyle(e,null):t.getComputedStyle(e,null)},en=function(t,e,n){var i,o,r,a,s=t.style;return n=n||tn(t),a=n?n.getPropertyValue(e)||n[e]:void 0,n&&(""!==a||oe.contains(t.ownerDocument,t)||(a=oe.style(t,e)),on.test(a)&&nn.test(e)&&(i=s.width,o=s.minWidth,r=s.maxWidth,s.minWidth=s.maxWidth=s.width=a,a=n.width,s.width=i,s.minWidth=o,s.maxWidth=r)),void 0===a?a:a+""}):pe.documentElement.currentStyle&&(tn=function(t){return t.currentStyle},en=function(t,e,n){var i,o,r,a,s=t.style;return n=n||tn(t),a=n?n[e]:void 0,null==a&&s&&s[e]&&(a=s[e]),on.test(a)&&!rn.test(e)&&(i=s.left,o=t.runtimeStyle,r=o&&o.left,r&&(o.left=t.currentStyle.left),s.left="fontSize"===e?"1em":a,a=s.pixelLeft+"px",s.left=i,r&&(o.left=r)),void 0===a?a:a+""||"auto"}),function(){function e(){var e,n,i,o;n=pe.getElementsByTagName("body")[0],n&&n.style&&(e=pe.createElement("div"),i=pe.createElement("div"),i.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",n.appendChild(i).appendChild(e),e.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute",r=a=!1,l=!0,t.getComputedStyle&&(r="1%"!==(t.getComputedStyle(e,null)||{}).top,a="4px"===(t.getComputedStyle(e,null)||{width:"4px"}).width,o=e.appendChild(pe.createElement("div")),o.style.cssText=e.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",o.style.marginRight=o.style.width="0",e.style.width="1px",l=!parseFloat((t.getComputedStyle(o,null)||{}).marginRight),e.removeChild(o)),e.innerHTML="<table><tr><td></td><td>t</td></tr></table>",o=e.getElementsByTagName("td"),o[0].style.cssText="margin:0;border:0;padding:0;display:none",s=0===o[0].offsetHeight,s&&(o[0].style.display="",o[1].style.display="none",s=0===o[0].offsetHeight),n.removeChild(i))}var n,i,o,r,a,s,l;n=pe.createElement("div"),n.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",o=n.getElementsByTagName("a")[0],i=o&&o.style,i&&(i.cssText="float:left;opacity:.5",ne.opacity="0.5"===i.opacity,ne.cssFloat=!!i.cssFloat,n.style.backgroundClip="content-box",n.cloneNode(!0).style.backgroundClip="",ne.clearCloneStyle="content-box"===n.style.backgroundClip,ne.boxSizing=""===i.boxSizing||""===i.MozBoxSizing||""===i.WebkitBoxSizing,oe.extend(ne,{reliableHiddenOffsets:function(){return null==s&&e(),s},boxSizingReliable:function(){return null==a&&e(),a},pixelPosition:function(){return null==r&&e(),r},reliableMarginRight:function(){return null==l&&e(),l}}))}(),oe.swap=function(t,e,n,i){var o,r,a={};for(r in e)a[r]=t.style[r],t.style[r]=e[r];o=n.apply(t,i||[]);for(r in e)t.style[r]=a[r];return o};var an=/alpha\([^)]*\)/i,sn=/opacity\s*=\s*([^)]*)/,ln=/^(none|table(?!-c[ea]).+)/,un=new RegExp("^("+Te+")(.*)$","i"),dn=new RegExp("^([+-])=("+Te+")","i"),cn={position:"absolute",visibility:"hidden",display:"block"},fn={letterSpacing:"0",fontWeight:"400"},hn=["Webkit","O","Moz","ms"];oe.extend({cssHooks:{opacity:{get:function(t,e){if(e){var n=en(t,"opacity");return""===n?"1":n}}}},cssNumber:{columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":ne.cssFloat?"cssFloat":"styleFloat"},style:function(t,e,n,i){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var o,r,a,s=oe.camelCase(e),l=t.style;if(e=oe.cssProps[s]||(oe.cssProps[s]=k(l,s)),a=oe.cssHooks[e]||oe.cssHooks[s],void 0===n)return a&&"get"in a&&void 0!==(o=a.get(t,!1,i))?o:l[e];if(r=typeof n,"string"===r&&(o=dn.exec(n))&&(n=(o[1]+1)*o[2]+parseFloat(oe.css(t,e)),r="number"),null!=n&&n===n&&("number"!==r||oe.cssNumber[s]||(n+="px"),ne.clearCloneStyle||""!==n||0!==e.indexOf("background")||(l[e]="inherit"),!(a&&"set"in a&&void 0===(n=a.set(t,n,i)))))try{l[e]=n}catch(u){}}},css:function(t,e,n,i){var o,r,a,s=oe.camelCase(e);return e=oe.cssProps[s]||(oe.cssProps[s]=k(t.style,s)),a=oe.cssHooks[e]||oe.cssHooks[s],a&&"get"in a&&(r=a.get(t,!0,n)),void 0===r&&(r=en(t,e,i)),"normal"===r&&e in fn&&(r=fn[e]),""===n||n?(o=parseFloat(r),n===!0||oe.isNumeric(o)?o||0:r):r}}),oe.each(["height","width"],function(t,e){oe.cssHooks[e]={get:function(t,n,i){return n?ln.test(oe.css(t,"display"))&&0===t.offsetWidth?oe.swap(t,cn,function(){return L(t,e,i)}):L(t,e,i):void 0},set:function(t,n,i){var o=i&&tn(t);return N(t,n,i?D(t,e,i,ne.boxSizing&&"border-box"===oe.css(t,"boxSizing",!1,o),o):0)}}}),ne.opacity||(oe.cssHooks.opacity={get:function(t,e){return sn.test((e&&t.currentStyle?t.currentStyle.filter:t.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":e?"1":""},set:function(t,e){var n=t.style,i=t.currentStyle,o=oe.isNumeric(e)?"alpha(opacity="+100*e+")":"",r=i&&i.filter||n.filter||"";n.zoom=1,(e>=1||""===e)&&""===oe.trim(r.replace(an,""))&&n.removeAttribute&&(n.removeAttribute("filter"),""===e||i&&!i.filter)||(n.filter=an.test(r)?r.replace(an,o):r+" "+o)}}),oe.cssHooks.marginRight=T(ne.reliableMarginRight,function(t,e){return e?oe.swap(t,{display:"inline-block"},en,[t,"marginRight"]):void 0}),oe.each({margin:"",padding:"",border:"Width"},function(t,e){oe.cssHooks[t+e]={expand:function(n){for(var i=0,o={},r="string"==typeof n?n.split(" "):[n];4>i;i++)o[t+ke[i]+e]=r[i]||r[i-2]||r[0];return o}},nn.test(t)||(oe.cssHooks[t+e].set=N)}),oe.fn.extend({css:function(t,e){return Ne(this,function(t,e,n){var i,o,r={},a=0;if(oe.isArray(e)){for(i=tn(t),o=e.length;o>a;a++)r[e[a]]=oe.css(t,e[a],!1,i);return r}return void 0!==n?oe.style(t,e,n):oe.css(t,e)},t,e,arguments.length>1)},show:function(){return E(this,!0)},hide:function(){return E(this)},toggle:function(t){return"boolean"==typeof t?t?this.show():this.hide():this.each(function(){Ee(this)?oe(this).show():oe(this).hide()})}}),oe.Tween=J,J.prototype={constructor:J,init:function(t,e,n,i,o,r){this.elem=t,this.prop=n,this.easing=o||"swing",this.options=e,this.start=this.now=this.cur(),this.end=i,this.unit=r||(oe.cssNumber[n]?"":"px")},cur:function(){var t=J.propHooks[this.prop];return t&&t.get?t.get(this):J.propHooks._default.get(this)},run:function(t){var e,n=J.propHooks[this.prop];return this.pos=e=this.options.duration?oe.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):t,this.now=(this.end-this.start)*e+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):J.propHooks._default.set(this),this}},J.prototype.init.prototype=J.prototype,J.propHooks={_default:{get:function(t){var e;return null==t.elem[t.prop]||t.elem.style&&null!=t.elem.style[t.prop]?(e=oe.css(t.elem,t.prop,""),e&&"auto"!==e?e:0):t.elem[t.prop]},set:function(t){oe.fx.step[t.prop]?oe.fx.step[t.prop](t):t.elem.style&&(null!=t.elem.style[oe.cssProps[t.prop]]||oe.cssHooks[t.prop])?oe.style(t.elem,t.prop,t.now+t.unit):t.elem[t.prop]=t.now}}},J.propHooks.scrollTop=J.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},oe.easing={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2}},oe.fx=J.prototype.init,oe.fx.step={};var pn,gn,mn=/^(?:toggle|show|hide)$/,bn=new RegExp("^(?:([+-])=|)("+Te+")([a-z%]*)$","i"),vn=/queueHooks$/,yn=[M],xn={"*":[function(t,e){var n=this.createTween(t,e),i=n.cur(),o=bn.exec(e),r=o&&o[3]||(oe.cssNumber[t]?"":"px"),a=(oe.cssNumber[t]||"px"!==r&&+i)&&bn.exec(oe.css(n.elem,t)),s=1,l=20;if(a&&a[3]!==r){r=r||a[3],o=o||[],a=+i||1;do s=s||".5",a/=s,oe.style(n.elem,t,a+r);while(s!==(s=n.cur()/i)&&1!==s&&--l)}return o&&(a=n.start=+a||+i||0,n.unit=r,n.end=o[1]?a+(o[1]+1)*o[2]:+o[2]),n}]};oe.Animation=oe.extend(O,{tweener:function(t,e){oe.isFunction(t)?(e=t,t=["*"]):t=t.split(" ");for(var n,i=0,o=t.length;o>i;i++)n=t[i],xn[n]=xn[n]||[],xn[n].unshift(e)},prefilter:function(t,e){e?yn.unshift(t):yn.push(t)}}),oe.speed=function(t,e,n){var i=t&&"object"==typeof t?oe.extend({},t):{complete:n||!n&&e||oe.isFunction(t)&&t,duration:t,easing:n&&e||e&&!oe.isFunction(e)&&e};return i.duration=oe.fx.off?0:"number"==typeof i.duration?i.duration:i.duration in oe.fx.speeds?oe.fx.speeds[i.duration]:oe.fx.speeds._default,(null==i.queue||i.queue===!0)&&(i.queue="fx"),i.old=i.complete,i.complete=function(){oe.isFunction(i.old)&&i.old.call(this),i.queue&&oe.dequeue(this,i.queue)},i},oe.fn.extend({fadeTo:function(t,e,n,i){return this.filter(Ee).css("opacity",0).show().end().animate({opacity:e},t,n,i)},animate:function(t,e,n,i){var o=oe.isEmptyObject(t),r=oe.speed(e,n,i),a=function(){var e=O(this,oe.extend({},t),r);(o||oe._data(this,"finish"))&&e.stop(!0)};return a.finish=a,o||r.queue===!1?this.each(a):this.queue(r.queue,a)},stop:function(t,e,n){var i=function(t){var e=t.stop;delete t.stop,e(n)};return"string"!=typeof t&&(n=e,e=t,t=void 0),e&&t!==!1&&this.queue(t||"fx",[]),this.each(function(){var e=!0,o=null!=t&&t+"queueHooks",r=oe.timers,a=oe._data(this);if(o)a[o]&&a[o].stop&&i(a[o]);else for(o in a)a[o]&&a[o].stop&&vn.test(o)&&i(a[o]);for(o=r.length;o--;)r[o].elem!==this||null!=t&&r[o].queue!==t||(r[o].anim.stop(n),e=!1,r.splice(o,1));(e||!n)&&oe.dequeue(this,t)})},finish:function(t){return t!==!1&&(t=t||"fx"),this.each(function(){var e,n=oe._data(this),i=n[t+"queue"],o=n[t+"queueHooks"],r=oe.timers,a=i?i.length:0;for(n.finish=!0,oe.queue(this,t,[]),o&&o.stop&&o.stop.call(this,!0),e=r.length;e--;)r[e].elem===this&&r[e].queue===t&&(r[e].anim.stop(!0),r.splice(e,1));for(e=0;a>e;e++)i[e]&&i[e].finish&&i[e].finish.call(this);delete n.finish})}}),oe.each(["toggle","show","hide"],function(t,e){var n=oe.fn[e];oe.fn[e]=function(t,i,o){return null==t||"boolean"==typeof t?n.apply(this,arguments):this.animate(I(e,!0),t,i,o)}}),oe.each({slideDown:I("show"),slideUp:I("hide"),slideToggle:I("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(t,e){oe.fn[t]=function(t,n,i){return this.animate(e,t,n,i)}}),oe.timers=[],oe.fx.tick=function(){var t,e=oe.timers,n=0;for(pn=oe.now();n<e.length;n++)t=e[n],t()||e[n]!==t||e.splice(n--,1);e.length||oe.fx.stop(),pn=void 0},oe.fx.timer=function(t){oe.timers.push(t),t()?oe.fx.start():oe.timers.pop()},oe.fx.interval=13,oe.fx.start=function(){gn||(gn=setInterval(oe.fx.tick,oe.fx.interval))},oe.fx.stop=function(){clearInterval(gn),gn=null},oe.fx.speeds={slow:600,fast:200,_default:400},oe.fn.delay=function(t,e){return t=oe.fx?oe.fx.speeds[t]||t:t,e=e||"fx",this.queue(e,function(e,n){var i=setTimeout(e,t);n.stop=function(){clearTimeout(i)}})},function(){var t,e,n,i,o;e=pe.createElement("div"),e.setAttribute("className","t"),e.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",i=e.getElementsByTagName("a")[0],n=pe.createElement("select"),o=n.appendChild(pe.createElement("option")),t=e.getElementsByTagName("input")[0],i.style.cssText="top:1px",ne.getSetAttribute="t"!==e.className,ne.style=/top/.test(i.getAttribute("style")),ne.hrefNormalized="/a"===i.getAttribute("href"),ne.checkOn=!!t.value,ne.optSelected=o.selected,ne.enctype=!!pe.createElement("form").enctype,n.disabled=!0,ne.optDisabled=!o.disabled,t=pe.createElement("input"),t.setAttribute("value",""),ne.input=""===t.getAttribute("value"),t.value="t",t.setAttribute("type","radio"),ne.radioValue="t"===t.value}();var Cn=/\r/g;oe.fn.extend({val:function(t){var e,n,i,o=this[0];{if(arguments.length)return i=oe.isFunction(t),this.each(function(n){var o;1===this.nodeType&&(o=i?t.call(this,n,oe(this).val()):t,null==o?o="":"number"==typeof o?o+="":oe.isArray(o)&&(o=oe.map(o,function(t){return null==t?"":t+""})),e=oe.valHooks[this.type]||oe.valHooks[this.nodeName.toLowerCase()],e&&"set"in e&&void 0!==e.set(this,o,"value")||(this.value=o))});if(o)return e=oe.valHooks[o.type]||oe.valHooks[o.nodeName.toLowerCase()],e&&"get"in e&&void 0!==(n=e.get(o,"value"))?n:(n=o.value,"string"==typeof n?n.replace(Cn,""):null==n?"":n)}}}),oe.extend({valHooks:{option:{get:function(t){var e=oe.find.attr(t,"value");return null!=e?e:oe.trim(oe.text(t))}},select:{get:function(t){for(var e,n,i=t.options,o=t.selectedIndex,r="select-one"===t.type||0>o,a=r?null:[],s=r?o+1:i.length,l=0>o?s:r?o:0;s>l;l++)if(n=i[l],!(!n.selected&&l!==o||(ne.optDisabled?n.disabled:null!==n.getAttribute("disabled"))||n.parentNode.disabled&&oe.nodeName(n.parentNode,"optgroup"))){if(e=oe(n).val(),r)return e;a.push(e)}return a},set:function(t,e){for(var n,i,o=t.options,r=oe.makeArray(e),a=o.length;a--;)if(i=o[a],oe.inArray(oe.valHooks.option.get(i),r)>=0)try{i.selected=n=!0}catch(s){i.scrollHeight}else i.selected=!1;return n||(t.selectedIndex=-1),o}}}}),oe.each(["radio","checkbox"],function(){oe.valHooks[this]={set:function(t,e){return oe.isArray(e)?t.checked=oe.inArray(oe(t).val(),e)>=0:void 0}},ne.checkOn||(oe.valHooks[this].get=function(t){return null===t.getAttribute("value")?"on":t.value})});var wn,Sn,_n=oe.expr.attrHandle,qn=/^(?:checked|selected)$/i,Tn=ne.getSetAttribute,kn=ne.input;oe.fn.extend({attr:function(t,e){return Ne(this,oe.attr,t,e,arguments.length>1)},removeAttr:function(t){return this.each(function(){oe.removeAttr(this,t)})}}),oe.extend({attr:function(t,e,n){var i,o,r=t.nodeType;if(t&&3!==r&&8!==r&&2!==r)return typeof t.getAttribute===Se?oe.prop(t,e,n):(1===r&&oe.isXMLDoc(t)||(e=e.toLowerCase(),i=oe.attrHooks[e]||(oe.expr.match.bool.test(e)?Sn:wn)),void 0===n?i&&"get"in i&&null!==(o=i.get(t,e))?o:(o=oe.find.attr(t,e),null==o?void 0:o):null!==n?i&&"set"in i&&void 0!==(o=i.set(t,n,e))?o:(t.setAttribute(e,n+""),n):void oe.removeAttr(t,e))},removeAttr:function(t,e){var n,i,o=0,r=e&&e.match(ye);if(r&&1===t.nodeType)for(;n=r[o++];)i=oe.propFix[n]||n,oe.expr.match.bool.test(n)?kn&&Tn||!qn.test(n)?t[i]=!1:t[oe.camelCase("default-"+n)]=t[i]=!1:oe.attr(t,n,""),t.removeAttribute(Tn?n:i)},attrHooks:{type:{set:function(t,e){if(!ne.radioValue&&"radio"===e&&oe.nodeName(t,"input")){var n=t.value;return t.setAttribute("type",e),n&&(t.value=n),e}}}}}),Sn={set:function(t,e,n){return e===!1?oe.removeAttr(t,n):kn&&Tn||!qn.test(n)?t.setAttribute(!Tn&&oe.propFix[n]||n,n):t[oe.camelCase("default-"+n)]=t[n]=!0,n}},oe.each(oe.expr.match.bool.source.match(/\w+/g),function(t,e){var n=_n[e]||oe.find.attr;_n[e]=kn&&Tn||!qn.test(e)?function(t,e,i){var o,r;return i||(r=_n[e],_n[e]=o,o=null!=n(t,e,i)?e.toLowerCase():null,_n[e]=r),o}:function(t,e,n){return n?void 0:t[oe.camelCase("default-"+e)]?e.toLowerCase():null}}),kn&&Tn||(oe.attrHooks.value={set:function(t,e,n){return oe.nodeName(t,"input")?void(t.defaultValue=e):wn&&wn.set(t,e,n)}}),Tn||(wn={set:function(t,e,n){var i=t.getAttributeNode(n);return i||t.setAttributeNode(i=t.ownerDocument.createAttribute(n)),i.value=e+="","value"===n||e===t.getAttribute(n)?e:void 0}},_n.id=_n.name=_n.coords=function(t,e,n){var i;return n?void 0:(i=t.getAttributeNode(e))&&""!==i.value?i.value:null},oe.valHooks.button={get:function(t,e){var n=t.getAttributeNode(e);return n&&n.specified?n.value:void 0},set:wn.set},oe.attrHooks.contenteditable={set:function(t,e,n){wn.set(t,""===e?!1:e,n)}},oe.each(["width","height"],function(t,e){oe.attrHooks[e]={set:function(t,n){return""===n?(t.setAttribute(e,"auto"),n):void 0}}})),ne.style||(oe.attrHooks.style={get:function(t){return t.style.cssText||void 0},set:function(t,e){return t.style.cssText=e+""}});var En=/^(?:input|select|textarea|button|object)$/i,Nn=/^(?:a|area)$/i;oe.fn.extend({prop:function(t,e){return Ne(this,oe.prop,t,e,arguments.length>1)},removeProp:function(t){return t=oe.propFix[t]||t,this.each(function(){try{this[t]=void 0,delete this[t]}catch(e){}})}}),oe.extend({propFix:{"for":"htmlFor","class":"className"},prop:function(t,e,n){var i,o,r,a=t.nodeType;if(t&&3!==a&&8!==a&&2!==a)return r=1!==a||!oe.isXMLDoc(t),r&&(e=oe.propFix[e]||e,o=oe.propHooks[e]),void 0!==n?o&&"set"in o&&void 0!==(i=o.set(t,n,e))?i:t[e]=n:o&&"get"in o&&null!==(i=o.get(t,e))?i:t[e]},propHooks:{tabIndex:{get:function(t){var e=oe.find.attr(t,"tabindex");return e?parseInt(e,10):En.test(t.nodeName)||Nn.test(t.nodeName)&&t.href?0:-1}}}}),ne.hrefNormalized||oe.each(["href","src"],function(t,e){oe.propHooks[e]={get:function(t){return t.getAttribute(e,4)}}}),ne.optSelected||(oe.propHooks.selected={get:function(t){var e=t.parentNode;return e&&(e.selectedIndex,e.parentNode&&e.parentNode.selectedIndex),null}}),oe.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){oe.propFix[this.toLowerCase()]=this}),ne.enctype||(oe.propFix.enctype="encoding");var Dn=/[\t\r\n\f]/g;oe.fn.extend({addClass:function(t){var e,n,i,o,r,a,s=0,l=this.length,u="string"==typeof t&&t;if(oe.isFunction(t))return this.each(function(e){oe(this).addClass(t.call(this,e,this.className))});if(u)for(e=(t||"").match(ye)||[];l>s;s++)if(n=this[s],i=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(Dn," "):" ")){for(r=0;o=e[r++];)i.indexOf(" "+o+" ")<0&&(i+=o+" ");a=oe.trim(i),n.className!==a&&(n.className=a)}return this},removeClass:function(t){var e,n,i,o,r,a,s=0,l=this.length,u=0===arguments.length||"string"==typeof t&&t;if(oe.isFunction(t))return this.each(function(e){oe(this).removeClass(t.call(this,e,this.className))});if(u)for(e=(t||"").match(ye)||[];l>s;s++)if(n=this[s],i=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(Dn," "):"")){for(r=0;o=e[r++];)for(;i.indexOf(" "+o+" ")>=0;)i=i.replace(" "+o+" "," ");a=t?oe.trim(i):"",n.className!==a&&(n.className=a)}return this},toggleClass:function(t,e){var n=typeof t;return"boolean"==typeof e&&"string"===n?e?this.addClass(t):this.removeClass(t):this.each(oe.isFunction(t)?function(n){oe(this).toggleClass(t.call(this,n,this.className,e),e)}:function(){if("string"===n)for(var e,i=0,o=oe(this),r=t.match(ye)||[];e=r[i++];)o.hasClass(e)?o.removeClass(e):o.addClass(e);else(n===Se||"boolean"===n)&&(this.className&&oe._data(this,"__className__",this.className),this.className=this.className||t===!1?"":oe._data(this,"__className__")||"")})},hasClass:function(t){for(var e=" "+t+" ",n=0,i=this.length;i>n;n++)if(1===this[n].nodeType&&(" "+this[n].className+" ").replace(Dn," ").indexOf(e)>=0)return!0;return!1}}),oe.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(t,e){oe.fn[e]=function(t,n){return arguments.length>0?this.on(e,null,t,n):this.trigger(e)}}),oe.fn.extend({hover:function(t,e){return this.mouseenter(t).mouseleave(e||t)},bind:function(t,e,n){return this.on(t,null,e,n)},unbind:function(t,e){return this.off(t,null,e)},delegate:function(t,e,n,i){return this.on(e,t,n,i)},undelegate:function(t,e,n){return 1===arguments.length?this.off(t,"**"):this.off(e,t||"**",n)}});var Ln=oe.now(),Jn=/\?/,An=/(,)|(\[|{)|(}|])|"(?:[^"\\\r\n]|\\["\\\/bfnrt]|\\u[\da-fA-F]{4})*"\s*:?|true|false|null|-?(?!0\d)\d+(?:\.\d+|)(?:[eE][+-]?\d+|)/g;oe.parseJSON=function(e){if(t.JSON&&t.JSON.parse)return t.JSON.parse(e+"");var n,i=null,o=oe.trim(e+"");return o&&!oe.trim(o.replace(An,function(t,e,o,r){return n&&e&&(i=0),0===i?t:(n=o||e,i+=!r-!o,"")}))?Function("return "+o)():oe.error("Invalid JSON: "+e)},oe.parseXML=function(e){var n,i;if(!e||"string"!=typeof e)return null;try{t.DOMParser?(i=new DOMParser,n=i.parseFromString(e,"text/xml")):(n=new ActiveXObject("Microsoft.XMLDOM"),n.async="false",n.loadXML(e))}catch(o){n=void 0}return n&&n.documentElement&&!n.getElementsByTagName("parsererror").length||oe.error("Invalid XML: "+e),n};var In,Pn,Mn=/#.*$/,Qn=/([?&])_=[^&]*/,On=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,Rn=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,jn=/^(?:GET|HEAD)$/,Hn=/^\/\//,Fn=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,zn={},Bn={},Wn="*/".concat("*");try{Pn=location.href}catch(Un){Pn=pe.createElement("a"),Pn.href="",Pn=Pn.href}In=Fn.exec(Pn.toLowerCase())||[],oe.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Pn,type:"GET",isLocal:Rn.test(In[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Wn,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":oe.parseJSON,"text xml":oe.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,e){return e?H(H(t,oe.ajaxSettings),e):H(oe.ajaxSettings,t)},ajaxPrefilter:R(zn),ajaxTransport:R(Bn),ajax:function(t,e){function n(t,e,n,i){var o,d,b,v,x,w=e;2!==y&&(y=2,s&&clearTimeout(s),u=void 0,a=i||"",C.readyState=t>0?4:0,o=t>=200&&300>t||304===t,n&&(v=F(c,C,n)),v=z(c,v,C,o),o?(c.ifModified&&(x=C.getResponseHeader("Last-Modified"),x&&(oe.lastModified[r]=x),x=C.getResponseHeader("etag"),x&&(oe.etag[r]=x)),204===t||"HEAD"===c.type?w="nocontent":304===t?w="notmodified":(w=v.state,d=v.data,b=v.error,o=!b)):(b=w,(t||!w)&&(w="error",0>t&&(t=0))),C.status=t,C.statusText=(e||w)+"",o?p.resolveWith(f,[d,w,C]):p.rejectWith(f,[C,w,b]),C.statusCode(m),m=void 0,l&&h.trigger(o?"ajaxSuccess":"ajaxError",[C,c,o?d:b]),g.fireWith(f,[C,w]),l&&(h.trigger("ajaxComplete",[C,c]),--oe.active||oe.event.trigger("ajaxStop")))}"object"==typeof t&&(e=t,t=void 0),e=e||{};var i,o,r,a,s,l,u,d,c=oe.ajaxSetup({},e),f=c.context||c,h=c.context&&(f.nodeType||f.jquery)?oe(f):oe.event,p=oe.Deferred(),g=oe.Callbacks("once memory"),m=c.statusCode||{},b={},v={},y=0,x="canceled",C={readyState:0,getResponseHeader:function(t){var e;if(2===y){if(!d)for(d={};e=On.exec(a);)d[e[1].toLowerCase()]=e[2];e=d[t.toLowerCase()]}return null==e?null:e},getAllResponseHeaders:function(){return 2===y?a:null},setRequestHeader:function(t,e){var n=t.toLowerCase();return y||(t=v[n]=v[n]||t,b[t]=e),this},overrideMimeType:function(t){return y||(c.mimeType=t),this},statusCode:function(t){var e;if(t)if(2>y)for(e in t)m[e]=[m[e],t[e]];else C.always(t[C.status]);return this},abort:function(t){var e=t||x;return u&&u.abort(e),n(0,e),this}};if(p.promise(C).complete=g.add,C.success=C.done,C.error=C.fail,c.url=((t||c.url||Pn)+"").replace(Mn,"").replace(Hn,In[1]+"//"),c.type=e.method||e.type||c.method||c.type,c.dataTypes=oe.trim(c.dataType||"*").toLowerCase().match(ye)||[""],null==c.crossDomain&&(i=Fn.exec(c.url.toLowerCase()),c.crossDomain=!(!i||i[1]===In[1]&&i[2]===In[2]&&(i[3]||("http:"===i[1]?"80":"443"))===(In[3]||("http:"===In[1]?"80":"443")))),c.data&&c.processData&&"string"!=typeof c.data&&(c.data=oe.param(c.data,c.traditional)),j(zn,c,e,C),2===y)return C;l=oe.event&&c.global,l&&0===oe.active++&&oe.event.trigger("ajaxStart"),c.type=c.type.toUpperCase(),c.hasContent=!jn.test(c.type),r=c.url,c.hasContent||(c.data&&(r=c.url+=(Jn.test(r)?"&":"?")+c.data,delete c.data),c.cache===!1&&(c.url=Qn.test(r)?r.replace(Qn,"$1_="+Ln++):r+(Jn.test(r)?"&":"?")+"_="+Ln++)),c.ifModified&&(oe.lastModified[r]&&C.setRequestHeader("If-Modified-Since",oe.lastModified[r]),oe.etag[r]&&C.setRequestHeader("If-None-Match",oe.etag[r])),(c.data&&c.hasContent&&c.contentType!==!1||e.contentType)&&C.setRequestHeader("Content-Type",c.contentType),C.setRequestHeader("Accept",c.dataTypes[0]&&c.accepts[c.dataTypes[0]]?c.accepts[c.dataTypes[0]]+("*"!==c.dataTypes[0]?", "+Wn+"; q=0.01":""):c.accepts["*"]);for(o in c.headers)C.setRequestHeader(o,c.headers[o]);if(c.beforeSend&&(c.beforeSend.call(f,C,c)===!1||2===y))return C.abort();x="abort";for(o in{success:1,error:1,complete:1})C[o](c[o]);if(u=j(Bn,c,e,C)){C.readyState=1,l&&h.trigger("ajaxSend",[C,c]),c.async&&c.timeout>0&&(s=setTimeout(function(){C.abort("timeout")},c.timeout));try{y=1,u.send(b,n)}catch(w){if(!(2>y))throw w;n(-1,w)}}else n(-1,"No Transport");return C},getJSON:function(t,e,n){return oe.get(t,e,n,"json")},getScript:function(t,e){return oe.get(t,void 0,e,"script")}}),oe.each(["get","post"],function(t,e){oe[e]=function(t,n,i,o){return oe.isFunction(n)&&(o=o||i,i=n,n=void 0),oe.ajax({url:t,type:e,dataType:o,data:n,success:i})}}),oe._evalUrl=function(t){return oe.ajax({url:t,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})},oe.fn.extend({wrapAll:function(t){if(oe.isFunction(t))return this.each(function(e){oe(this).wrapAll(t.call(this,e))});if(this[0]){var e=oe(t,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&e.insertBefore(this[0]),e.map(function(){for(var t=this;t.firstChild&&1===t.firstChild.nodeType;)t=t.firstChild;return t}).append(this)}return this},wrapInner:function(t){return this.each(oe.isFunction(t)?function(e){oe(this).wrapInner(t.call(this,e))}:function(){var e=oe(this),n=e.contents();n.length?n.wrapAll(t):e.append(t)})},wrap:function(t){var e=oe.isFunction(t);return this.each(function(n){oe(this).wrapAll(e?t.call(this,n):t)})},unwrap:function(){return this.parent().each(function(){oe.nodeName(this,"body")||oe(this).replaceWith(this.childNodes)}).end()}}),oe.expr.filters.hidden=function(t){return t.offsetWidth<=0&&t.offsetHeight<=0||!ne.reliableHiddenOffsets()&&"none"===(t.style&&t.style.display||oe.css(t,"display"))},oe.expr.filters.visible=function(t){return!oe.expr.filters.hidden(t)};var $n=/%20/g,Xn=/\[\]$/,Gn=/\r?\n/g,Vn=/^(?:submit|button|image|reset|file)$/i,Yn=/^(?:input|select|textarea|keygen)/i;oe.param=function(t,e){var n,i=[],o=function(t,e){e=oe.isFunction(e)?e():null==e?"":e,i[i.length]=encodeURIComponent(t)+"="+encodeURIComponent(e)};if(void 0===e&&(e=oe.ajaxSettings&&oe.ajaxSettings.traditional),oe.isArray(t)||t.jquery&&!oe.isPlainObject(t))oe.each(t,function(){o(this.name,this.value)});else for(n in t)B(n,t[n],e,o);return i.join("&").replace($n,"+")},oe.fn.extend({serialize:function(){return oe.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var t=oe.prop(this,"elements");return t?oe.makeArray(t):this}).filter(function(){var t=this.type;return this.name&&!oe(this).is(":disabled")&&Yn.test(this.nodeName)&&!Vn.test(t)&&(this.checked||!De.test(t))}).map(function(t,e){var n=oe(this).val();return null==n?null:oe.isArray(n)?oe.map(n,function(t){return{name:e.name,value:t.replace(Gn,"\r\n")}}):{name:e.name,value:n.replace(Gn,"\r\n")}}).get()}}),oe.ajaxSettings.xhr=void 0!==t.ActiveXObject?function(){return!this.isLocal&&/^(get|post|head|put|delete|options)$/i.test(this.type)&&W()||U()}:W;var Kn=0,Zn={},ti=oe.ajaxSettings.xhr();t.attachEvent&&t.attachEvent("onunload",function(){for(var t in Zn)Zn[t](void 0,!0)}),ne.cors=!!ti&&"withCredentials"in ti,ti=ne.ajax=!!ti,ti&&oe.ajaxTransport(function(t){if(!t.crossDomain||ne.cors){var e;return{send:function(n,i){var o,r=t.xhr(),a=++Kn;if(r.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(o in t.xhrFields)r[o]=t.xhrFields[o];t.mimeType&&r.overrideMimeType&&r.overrideMimeType(t.mimeType),t.crossDomain||n["X-Requested-With"]||(n["X-Requested-With"]="XMLHttpRequest");for(o in n)void 0!==n[o]&&r.setRequestHeader(o,n[o]+"");r.send(t.hasContent&&t.data||null),e=function(n,o){var s,l,u;if(e&&(o||4===r.readyState))if(delete Zn[a],e=void 0,r.onreadystatechange=oe.noop,o)4!==r.readyState&&r.abort();else{u={},s=r.status,"string"==typeof r.responseText&&(u.text=r.responseText);try{l=r.statusText}catch(d){l=""}s||!t.isLocal||t.crossDomain?1223===s&&(s=204):s=u.text?200:404}u&&i(s,l,u,r.getAllResponseHeaders())},t.async?4===r.readyState?setTimeout(e):r.onreadystatechange=Zn[a]=e:e()},abort:function(){e&&e(void 0,!0)}}
}}),oe.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(t){return oe.globalEval(t),t}}}),oe.ajaxPrefilter("script",function(t){void 0===t.cache&&(t.cache=!1),t.crossDomain&&(t.type="GET",t.global=!1)}),oe.ajaxTransport("script",function(t){if(t.crossDomain){var e,n=pe.head||oe("head")[0]||pe.documentElement;return{send:function(i,o){e=pe.createElement("script"),e.async=!0,t.scriptCharset&&(e.charset=t.scriptCharset),e.src=t.url,e.onload=e.onreadystatechange=function(t,n){(n||!e.readyState||/loaded|complete/.test(e.readyState))&&(e.onload=e.onreadystatechange=null,e.parentNode&&e.parentNode.removeChild(e),e=null,n||o(200,"success"))},n.insertBefore(e,n.firstChild)},abort:function(){e&&e.onload(void 0,!0)}}}});var ei=[],ni=/(=)\?(?=&|$)|\?\?/;oe.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=ei.pop()||oe.expando+"_"+Ln++;return this[t]=!0,t}}),oe.ajaxPrefilter("json jsonp",function(e,n,i){var o,r,a,s=e.jsonp!==!1&&(ni.test(e.url)?"url":"string"==typeof e.data&&!(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&ni.test(e.data)&&"data");return s||"jsonp"===e.dataTypes[0]?(o=e.jsonpCallback=oe.isFunction(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,s?e[s]=e[s].replace(ni,"$1"+o):e.jsonp!==!1&&(e.url+=(Jn.test(e.url)?"&":"?")+e.jsonp+"="+o),e.converters["script json"]=function(){return a||oe.error(o+" was not called"),a[0]},e.dataTypes[0]="json",r=t[o],t[o]=function(){a=arguments},i.always(function(){t[o]=r,e[o]&&(e.jsonpCallback=n.jsonpCallback,ei.push(o)),a&&oe.isFunction(r)&&r(a[0]),a=r=void 0}),"script"):void 0}),oe.parseHTML=function(t,e,n){if(!t||"string"!=typeof t)return null;"boolean"==typeof e&&(n=e,e=!1),e=e||pe;var i=ce.exec(t),o=!n&&[];return i?[e.createElement(i[1])]:(i=oe.buildFragment([t],e,o),o&&o.length&&oe(o).remove(),oe.merge([],i.childNodes))};var ii=oe.fn.load;oe.fn.load=function(t,e,n){if("string"!=typeof t&&ii)return ii.apply(this,arguments);var i,o,r,a=this,s=t.indexOf(" ");return s>=0&&(i=oe.trim(t.slice(s,t.length)),t=t.slice(0,s)),oe.isFunction(e)?(n=e,e=void 0):e&&"object"==typeof e&&(r="POST"),a.length>0&&oe.ajax({url:t,type:r,dataType:"html",data:e}).done(function(t){o=arguments,a.html(i?oe("<div>").append(oe.parseHTML(t)).find(i):t)}).complete(n&&function(t,e){a.each(n,o||[t.responseText,e,t])}),this},oe.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(t,e){oe.fn[e]=function(t){return this.on(e,t)}}),oe.expr.filters.animated=function(t){return oe.grep(oe.timers,function(e){return t===e.elem}).length};var oi=t.document.documentElement;oe.offset={setOffset:function(t,e,n){var i,o,r,a,s,l,u,d=oe.css(t,"position"),c=oe(t),f={};"static"===d&&(t.style.position="relative"),s=c.offset(),r=oe.css(t,"top"),l=oe.css(t,"left"),u=("absolute"===d||"fixed"===d)&&oe.inArray("auto",[r,l])>-1,u?(i=c.position(),a=i.top,o=i.left):(a=parseFloat(r)||0,o=parseFloat(l)||0),oe.isFunction(e)&&(e=e.call(t,n,s)),null!=e.top&&(f.top=e.top-s.top+a),null!=e.left&&(f.left=e.left-s.left+o),"using"in e?e.using.call(t,f):c.css(f)}},oe.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each(function(e){oe.offset.setOffset(this,t,e)});var e,n,i={top:0,left:0},o=this[0],r=o&&o.ownerDocument;if(r)return e=r.documentElement,oe.contains(e,o)?(typeof o.getBoundingClientRect!==Se&&(i=o.getBoundingClientRect()),n=$(r),{top:i.top+(n.pageYOffset||e.scrollTop)-(e.clientTop||0),left:i.left+(n.pageXOffset||e.scrollLeft)-(e.clientLeft||0)}):i},position:function(){if(this[0]){var t,e,n={top:0,left:0},i=this[0];return"fixed"===oe.css(i,"position")?e=i.getBoundingClientRect():(t=this.offsetParent(),e=this.offset(),oe.nodeName(t[0],"html")||(n=t.offset()),n.top+=oe.css(t[0],"borderTopWidth",!0),n.left+=oe.css(t[0],"borderLeftWidth",!0)),{top:e.top-n.top-oe.css(i,"marginTop",!0),left:e.left-n.left-oe.css(i,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent||oi;t&&!oe.nodeName(t,"html")&&"static"===oe.css(t,"position");)t=t.offsetParent;return t||oi})}}),oe.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,e){var n=/Y/.test(e);oe.fn[t]=function(i){return Ne(this,function(t,i,o){var r=$(t);return void 0===o?r?e in r?r[e]:r.document.documentElement[i]:t[i]:void(r?r.scrollTo(n?oe(r).scrollLeft():o,n?o:oe(r).scrollTop()):t[i]=o)},t,i,arguments.length,null)}}),oe.each(["top","left"],function(t,e){oe.cssHooks[e]=T(ne.pixelPosition,function(t,n){return n?(n=en(t,e),on.test(n)?oe(t).position()[e]+"px":n):void 0})}),oe.each({Height:"height",Width:"width"},function(t,e){oe.each({padding:"inner"+t,content:e,"":"outer"+t},function(n,i){oe.fn[i]=function(i,o){var r=arguments.length&&(n||"boolean"!=typeof i),a=n||(i===!0||o===!0?"margin":"border");return Ne(this,function(e,n,i){var o;return oe.isWindow(e)?e.document.documentElement["client"+t]:9===e.nodeType?(o=e.documentElement,Math.max(e.body["scroll"+t],o["scroll"+t],e.body["offset"+t],o["offset"+t],o["client"+t])):void 0===i?oe.css(e,n,a):oe.style(e,n,i,a)},e,r?i:void 0,r,null)}})}),oe.fn.size=function(){return this.length},oe.fn.andSelf=oe.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return oe});var ri=t.jQuery,ai=t.$;return oe.noConflict=function(e){return t.$===oe&&(t.$=ai),e&&t.jQuery===oe&&(t.jQuery=ri),oe},typeof e===Se&&(t.jQuery2=t.$2=oe),oe}),bds.qa.ShortCut.fbJQ=$2.noConflict()},initialize:function(t){this.product_id=t.product_id?t.product_id:bds.qa.ShortCut.default_options.product_id,this.entrance_id=void 0!=t.entrance_id?t.entrance_id:bds.qa.ShortCut.default_options.entrance_id,this.needIssueTips=void 0!=t.needIssueTips?t.needIssueTips:bds.qa.ShortCut.default_options.needIssueTips,this.needLevelType=void 0!=t.needLevelType?t.needLevelType:bds.qa.ShortCut.default_options.needLevelType,this.needIssue=void 0!=t.needIssue?t.needIssue:bds.qa.ShortCut.default_options.needIssue,this.needCut=void 0!=t.needCut?t.needCut:bds.qa.ShortCut.default_options.needCut,this.needEmail=void 0!=t.needEmail?t.needEmail:bds.qa.ShortCut.default_options.needEmail,this.defaultCut=void 0!=t.defaultCut?t.defaultCut:bds.qa.ShortCut.default_options.defaultCut,this.needGuide=void 0!=t.needGuide?t.needGuide:bds.qa.ShortCut.default_options.needGuide,this.plugintitle=void 0!=t.plugintitle?t.plugintitle:bds.qa.ShortCut.default_options.plugintitle,this.issueTips=void 0!=t.issueTips?t.issueTips:bds.qa.ShortCut.default_options.issueTips,this.issuePlaceholder=void 0!=t.issuePlaceholder?t.issuePlaceholder:bds.qa.ShortCut.default_options.issuePlaceholder,this.emailPlaceholder=void 0!=t.emailPlaceholder?t.emailPlaceholder:bds.qa.ShortCut.default_options.emailPlaceholder,this.guide=void 0!=t.guide?t.guide:bds.qa.ShortCut.default_options.guide,this.cutFileTips=void 0!=t.cutFileTips?t.cutFileTips:bds.qa.ShortCut.default_options.cutFileTips,this.cutCanvasTips=void 0!=t.cutCanvasTips?t.cutCanvasTips:bds.qa.ShortCut.default_options.cutCanvasTips,this.emailTips=void 0!=t.emailTips?t.emailTips:bds.qa.ShortCut.default_options.emailTips,this.onlyUpFile=void 0!=t.onlyUpFile?t.onlyUpFile:bds.qa.ShortCut.default_options.onlyUpFile,this.showPosition=void 0!=t.showPosition?t.showPosition:bds.qa.ShortCut.default_options.showPosition,this.skinStyle=void 0!=t.skinStyle?t.skinStyle:bds.qa.ShortCut.default_options.skinStyle,this.cutImg=void 0!=t.cutImg?t.cutImg:bds.qa.ShortCut.default_options.cutImg,this.upImg=void 0!=t.upImg?t.upImg:bds.qa.ShortCut.default_options.upImg,this.win_width=parseInt(Math.max(document.body.scrollWidth,document.documentElement.clientWidth,document.body.clientWidth)),this.dialogPosition=t.dialogPosition?t.dialogPosition:bds.qa.ShortCut.default_options.dialogPosition,bds.qa.ShortCut._getImg(),"pad"==bds.qa.ShortCut.skinStyle&&(this.needCut=bds.qa.ShortCut._isUpperIos6())},getPrepare:function(){bds.qa.ShortCut.up_file=!bds.qa.ShortCut._identifyBrowser(),bds.qa.ShortCut.onlyUpFile>0&&(bds.qa.ShortCut.up_file=!0),"pad"==bds.qa.ShortCut.skinStyle&&(bds.qa.ShortCut.up_file=!0,bds.qa.ShortCut.upImg="padUp.png")},init:function(){bds.qa.ShortCut.init_action_dialog(),bds.qa.ShortCut.init_bind_action(),bds.qa.ShortCut._isIE6()||bds.qa.ShortCut.init_drag(),bds.qa.ShortCut.init_post_data()},init_action_dialog:function(){var t=document.getElementById("fb_baidu_right_dialog");if(!t){var e="",n=bds.qa.ShortCut.needIssueTips?'<div  class ="fb-tips-block"><span class="fb-content-tips">'+bds.qa.ShortCut.issueTips+'</span><span class="fb-danger-tips">(*必填)</span></div>':"",i=bds.qa.ShortCut.needLevelType?'<div class="fb-level-type-block"><div class="fb-level-title"><span>您遇到的问题类型</span><span class="fb-danger-tips">(*必选)</span></div><ul><li data-value="1482"><div class="fb-radio"></div><span>图片无法显示</span></li><li data-value="1665"><div class="fb-radio"></div><span>个人隐私图片</span></li><li data-value="1483"><div class="fb-radio"></div><span>加载速度慢</span></li><li data-value="1487"><div class="fb-radio"></div><span>图片品质太差</span></li><li data-value="1484"><div class="fb-radio"></div><span>下载不了图片</span></li><li data-value="1248"><div class="fb-radio"></div><span>找不到想要的图片</span></li><li data-value="1485"><div class="fb-radio"></div><span>色情、暴力图片</span></li><li data-value="1249"><div class="fb-radio"></div><span>其它</span></li></ul></div>':"",o=bds.qa.ShortCut.needIssue?'<div class="fb-textarea fb-content-block"><textarea maxlength="400" class ="fb-des-content" name="issuedesc" id="fb_des_content" data-exclude="true">'+bds.qa.ShortCut.issuePlaceholder+"</textarea></div>":"",r=bds.qa.ShortCut.needEmail?'<div class="fb-block fb-email-block"><div class="fb-phone-txt">'+bds.qa.ShortCut.emailTips+'</div><div><input type="text" class="fb-email" maxlength="100" value="'+bds.qa.ShortCut.emailPlaceholder+'" id="feedback_email"></div></div>':"",a=bds.qa.ShortCut.needGuide?'<div class="fb-guide fb-guide-block">'+bds.qa.ShortCut.guide+"</div>":"";if(bds.qa.ShortCut.up_file)s=bds.qa.ShortCut.needCut?'<div class="fb-block fb-cut-block" ><div class="fb-cut-block-ie" style="background: url('+bds.qa.ShortCut.base_url_path+"/feedback/images/"+bds.qa.ShortCut.upImg+')"><input class="fb-cut-input" type="file" id="fb_shangchuan" name="issueimage" onchange="bds.qa.ShortCut._checkFileType(this)"></div><span id="fb_shangchuan_txt" class="fb-shangchuan">'+bds.qa.ShortCut.cutFileTips+"</span></div>":"",e='<div class="fb-modal " data-html2canvas-ignore="true"><div class="fb-header" id="fb_dialog_header" unselectable="on" onselectstart="return false;"><a class="fb-close" id="fb_close_x">×</a><h3  class="fb-header-tips">'+bds.qa.ShortCut.plugintitle+'</h3></div><div class="fb-body" id="fb_qa_feedback_body"><div class="fb-action"><form id="fb_right_post_form" enctype="multipart/form-data" action="'+bds.qa.ShortCut.base_url_path+'/index.php/feedback/zx/getData" method="post" onsubmit = "return false;">'+i+n+o+s+r+'</form></div><div class="fb-footer"><div class="fb-btn fb-btn-primary" id="fb_right_post_save">提交反馈</div><a style="font-size:14px;color:#2d9ef8;line-height:26px;text-decoration:underline;margin-left:20px;height:26px;" href="http://f3.baidu.com/index.php/feedback/f/index" target="_blank">我的反馈</a></font></div>'+a+'</div><div class="arrow"><div class="arrow-bd"></div><div class="arrow-bg"></div></div></div>';else{bds.qa.ShortCut.up_file=!1;var s=bds.qa.ShortCut.needCut?'<div class="fb-block fb-cut-block"><div><input type="button" class="fb-btn fb-cut-btn" style="background: url('+bds.qa.ShortCut.cutImg+') no-repeat center" id="fb_jietu" value=""/><span id = "fb_tips_span" >'+bds.qa.ShortCut.cutCanvasTips+"</span></div></div> ":"";e='<div class="fb-modal " data-html2canvas-ignore="true"><div class="fb-header" id="fb_dialog_header" unselectable="on" onselectstart="return false;"><a class="fb-close" id="fb_close_x">×</a><h3  class = "fb-header-tips">'+bds.qa.ShortCut.plugintitle+'</h3></div><div class="fb-body" id="fb_qa_feedback_body"><div class="fb-action">'+i+n+o+s+r+'</div><div class="fb-footer"><div class="fb-btn fb-btn-primary" id="fb_right_canvas_save">提交反馈</div><a style="font-size:14px;color:#2d9ef8;line-height:26px;text-decoration:underline; margin-left:20px;height:26px;" href="http://f3.baidu.com/index.php/feedback/f/index" target="_blank">我的反馈</a></font></div>'+a+'</div><div class="arrow"><div class="arrow-bd"></div><div class="arrow-bg"></div></div></div>'}var l=document.createElement("div");l.id="fb_baidu_right_dialog",l.className="fb-feedback-right-dialog",bds.qa.ShortCut._isIE6()||(l.style.display="none",l.style.position="fixed"),l.style.zIndex=999999,l.innerHTML=e;var u=document.createElement("div");u.id="fb_baidu_wizard",u.className="fb-baidu-wizard",bds.qa.ShortCut.fbJQ("body").append(u),bds.qa.ShortCut._getWizardPosition(),bds.qa.ShortCut.fbJQ("body").append(l),bds.qa.ShortCut._fixedPage()}},init_bind_action:function(){bds.qa.ShortCut.fbJQ(document).on("mousedown",function(t){if(bds.qa.ShortCut.fbJQ(t.target).hasClass("reportlink")||bds.qa.ShortCut.fbJQ(t.target).closest(".reportlink").size()>0);else{var e=bds.qa.ShortCut.fbJQ("#fb_baidu_right_dialog");(0==e.length||0==bds.qa.ShortCut.fbJQ(t.target).closest("#fb_baidu_right_dialog").length&&"fb_right_dialog_canvas"!=t.target.id)&&bds.qa.ShortCut.fbJQ("#fb_close_x").click()}}),bds.qa.ShortCut.fbJQ(".fb-level-type-block li").click(function(){bds.qa.ShortCut.fbJQ(this).hasClass("fb-check")?bds.qa.ShortCut.fbJQ(this).removeClass("fb-check"):bds.qa.ShortCut.fbJQ(this).addClass("fb-check").siblings().removeClass("fb-check")}),bds.qa.ShortCut.fbJQ(".fb-modal textarea").focus(function(){bds.qa.ShortCut.fbJQ(this).val()==bds.qa.ShortCut.issuePlaceholder&&(bds.qa.ShortCut.fbJQ(this).val(""),bds.qa.ShortCut.fbJQ("#fb_pop_tips")&&bds.qa.ShortCut.fbJQ("#fb_pop_tips").remove())}),bds.qa.ShortCut.fbJQ(".fb-modal textarea").blur(function(){""==bds.qa.ShortCut.fbJQ(this).val()&&(bds.qa.ShortCut.fbJQ(this).css("color","#9a9a9a"),bds.qa.ShortCut.fbJQ(this).val(bds.qa.ShortCut.issuePlaceholder))}),bds.qa.ShortCut.fbJQ(".fb-modal textarea").keydown(function(){bds.qa.ShortCut.fbJQ(this).val()!=bds.qa.ShortCut.issuePlaceholder&&(bds.qa.ShortCut.fbJQ(this).css("color","black"),bds.qa.ShortCut.fbJQ("#fb_pop_tips")&&bds.qa.ShortCut.fbJQ("#fb_pop_tips").remove())}),bds.qa.ShortCut.fbJQ(".fb-modal .fb-email").focus(function(){bds.qa.ShortCut.fbJQ(this).val()==bds.qa.ShortCut.emailPlaceholder&&bds.qa.ShortCut.fbJQ(this).val("")}),bds.qa.ShortCut.fbJQ(".fb-modal .fb-email").blur(function(){""==bds.qa.ShortCut.fbJQ(this).val()&&(bds.qa.ShortCut.fbJQ(this).css("color","#9a9a9a"),bds.qa.ShortCut.fbJQ(this).val(bds.qa.ShortCut.emailPlaceholder))}),bds.qa.ShortCut.fbJQ(".fb-modal textarea").keyup(function(){if(bds.qa.ShortCut.fbJQ(this).val().length>=400){var t=bds.qa.ShortCut.fbJQ(this).val().substr(0,400);bds.qa.ShortCut.fbJQ(this).val(t)}}),bds.qa.ShortCut.fbJQ(".fb-modal .fb-email").keydown(function(){bds.qa.ShortCut.fbJQ(this).val()!=bds.qa.ShortCut.emailPlaceholder&&bds.qa.ShortCut.fbJQ(this).css("color","black")}),bds.qa.ShortCut.fbJQ("#fb_close_x").click(function(){var t=function(){bds.qa.ShortCut.fbJQ("#fb_baidu_right_dialog").remove(),bds.qa.ShortCut.fbJQ("#ShortCut_wizard").remove(),bds.qa.ShortCut.fbJQ("#fb_base_wizard_canvas").remove(),bds.qa.ShortCut.fbJQ("#fb_baidu_wizard").remove(),bds.qa.ShortCut.fbJQ("#fb_right_dialog_canvas").remove(),bds.qa.ShortCut.fbJQ("#fb_right_dialog_pagecanvas").remove(),bds.qa.ShortCut.fbJQ("#fb_right_dialog_pagecanvas2").remove(),bds.qa.ShortCut.fbJQ(".fb_cancel_flag").remove(),bds.qa.ShortCut.fbJQ("#fb_popwindow").remove(),bds.qa.ShortCut.is_feedbacking=!1};"pad"==bds.qa.ShortCut.skinStyle?t():(bds.qa.ShortCut.fbJQ("#fb_baidu_right_dialog").hide(),t()),bds.qa.ShortCut.send_img=!1}),bds.qa.ShortCut.fbJQ("#fb_jietu").click(function(){0==bds.qa.ShortCut.send_img&&(bds.qa.ShortCut.defaultCut=!0,bds.qa.ShortCut.fbJQ("#fb_right_dialog_canvas").css("cursor","crosshair"),bds.qa.ShortCut.fbJQ("#fb_jietu").css("cursor","crosshair"),bds.qa.ShortCut.init_img_render())}),"pad"==bds.qa.ShortCut.skinStyle&&(bds.qa.ShortCut.fbJQ(window).on("orientationchange",function(){bds.qa.ShortCut._repaint()}),bds.qa.ShortCut.fbJQ(".fb-des-content").on("focus",function(){bds.qa.ShortCut.fbJQ("#fb_baidu_right_dialog").css("position","absolute")}),bds.qa.ShortCut.fbJQ(".fb-email").on("focus",function(){bds.qa.ShortCut.fbJQ("#fb_baidu_right_dialog").css("position","absolute")})),bds.qa.ShortCut.bindclick=0,bds.qa.ShortCut._isIE6()&&(("right"==bds.qa.ShortCut.showPosition||"bottom_left"==bds.qa.ShortCut.showPosition||"bottom_right"==bds.qa.ShortCut.showPosition)&&bds.qa.ShortCut.fbJQ(window).scroll(function(){bds.qa.ShortCut.fbJQ("#fb_baidu_right_dialog").css("top",parseInt(document.documentElement.clientHeight+document.documentElement.scrollTop-bds.qa.ShortCut.fbJQ("#fb_baidu_right_dialog").height()-5)+"px")}),"center"==bds.qa.ShortCut.showPosition&&bds.qa.ShortCut.fbJQ(window).scroll(function(){bds.qa.ShortCut.fbJQ("#fb_baidu_right_dialog").css("top",parseInt((bds.qa.ShortCut._getClientWidth()-bds.qa.ShortCut.fbJQ("#fb_baidu_right_dialog").width())/2)+"px")})),bds.qa.ShortCut.fbJQ(window).on("index_off",function(){bds.qa.ShortCut.fbJQ("#fb_baidu_right_dialog").remove(),bds.qa.ShortCut.fbJQ("#ShortCut_wizard").remove(),bds.qa.ShortCut.fbJQ("#fb_base_wizard_canvas").remove(),bds.qa.ShortCut.fbJQ("#fb_baidu_wizard").remove(),bds.qa.ShortCut.fbJQ("#fb_right_dialog_canvas").remove(),bds.qa.ShortCut.fbJQ("#fb_right_dialog_pagecanvas").remove(),bds.qa.ShortCut.fbJQ("#fb_right_dialog_pagecanvas2").remove(),bds.qa.ShortCut.fbJQ(".fb_cancel_flag").remove(),bds.qa.ShortCut.fbJQ("#fb_popwindow").remove(),bds.qa.ShortCut.is_feedbacking=!1,bds.qa.ShortCut.send_img=!1})},init_drag:function(){function t(t,e,n){t.addEventListener?t.addEventListener(e,n,!1):t.attachEvent?t.attachEvent("on"+e,n):t["on"+e]=n}function e(t,e,n){t.removeEventListener?t.removeEventListener(e,n,!1):t.detachEvent?t.detachEvent("on"+e,n):t["on"+e]=null}var n=(document.all?!0:!1,function(t){return"string"==typeof t?document.getElementById(t):t}),i={create:function(){return function(){this.initialize.apply(this,arguments)}}},o=function(t,e){return function(){return e.apply(t,arguments)}},r=function(t,e){return function(n){return e.call(t,n||window.event)}};bds.qa.ShortCut.SimpleDrag=i.create(),bds.qa.ShortCut.SimpleDrag.prototype={initialize:function(e,i){this.Drag=n(e),this.beDrag=n(i),this._x=this._y=0,this._fM=r(this,this.Move),this._fS=o(this,this.Stop),t(this.Drag,"mousedown",r(this,this.Start))},Start:function(e){e.preventDefault?e.preventDefault():e.returnValue=!1,this._x=e.clientX-this.beDrag.offsetLeft,this._y=e.clientY-this.beDrag.offsetTop,t(document,"mousemove",this._fM),t(document,"mouseup",this._fS)},Move:function(t){if(bds.qa.ShortCut._isIE6())this.beDrag.style.left=t.clientX-this._x+"px",this.beDrag.style.top=t.clientY-this._y+"px",this.Drag.style.left=t.clientX-this._x+1+"px",this.Drag.style.top=t.clientY-this._y+2+"px";else{var e=bds.qa.ShortCut.fbJQ("#fb_baidu_right_dialog").height(),n=bds.qa.ShortCut.fbJQ("#fb_baidu_right_dialog").width(),i=0;document.documentElement&&document.documentElement.clientWidth?i=document.documentElement.clientWidth:document.body&&(i=document.body.clientWidth);var o=0;document.documentElement&&document.documentElement.clientHeight?o=document.documentElement.clientHeight:document.body&&(o=document.body.clientHeight);var r=t.clientX-this._x,a=t.clientY-this._y,s=e,l=n;bds.qa.ShortCut._isIE()&&(s=e,l=n),0>r&&(r=0),r>i-l&&(r=i-l),0>a&&(a=0),a>o-s&&(a=o-s),this.beDrag.style.left=r+"px",this.beDrag.style.top=a+"px",this.Drag.style.left=r+1+"px",this.Drag.style.top=bds.qa.ShortCut._isIE()?a+1+"px":a+2+"px"}this.beDrag.style.bottom="",this.beDrag.style.right=""},Stop:function(){e(document,"mousemove",this._fM),e(document,"mouseup",this._fS)}},new bds.qa.ShortCut.SimpleDrag("fb_dialog_header","fb_baidu_right_dialog")},init_post_data:function(){bds.qa.ShortCut.fbJQ("#fb_right_canvas_save").click(function(){if(0==bds.qa.ShortCut.send_img){var t=bds.qa.ShortCut.fbJQ("#fb_des_content").val();if(""==t||t==bds.qa.ShortCut.issuePlaceholder)return bds.qa.ShortCut.popwindow("请填写反馈内容",200),!1;var e=bds.qa.ShortCut.fbJQ(".fb-level-type-block .fb-check").length;if(""==e||1>e)return bds.qa.ShortCut.popwindow("请选择问题类型",200),!1;bds.qa.ShortCut.sendCanvasData()}}),bds.qa.ShortCut.fbJQ("#fb_right_post_save").click(function(){var t=bds.qa.ShortCut.fbJQ("#fb_des_content").val();if(""==t||t==bds.qa.ShortCut.issuePlaceholder)return bds.qa.ShortCut.popwindow("请填写反馈内容",200),!1;var e=bds.qa.ShortCut.fbJQ(".fb-level-type-block .fb-check").length;if(""==e||1>e)return bds.qa.ShortCut.popwindow("请选择问题类型",200),!1;var n=bds.qa.ShortCut.fbJQ("#fb_shangchuan").val()||"",i=bds.qa.ShortCut.checkImage(n);return n&&!i?(bds.qa.ShortCut.popwindow("请上传PNG,JPEG,GIF等图片文件",200),bds.qa.ShortCut.fbJQ("#fb_shangchuan").val(""),bds.qa.ShortCut.fbJQ(".fb_shangchuan_txt").html(""),!1):void bds.qa.ShortCut.postCrossDomainDataForm(bds.qa.ShortCut.sendDataResult)})},get_Snapshot:function(){!function(t,e,n){function i(e){u.logging&&t.console&&t.console.log&&t.console.log(e)}function o(t,e,n,i,o,r){var a,s,l,d,c=u.Util.getCSS(e,t,o);if(1===c.length&&(d=c[0],c=[],c[0]=d,c[1]=d),-1!==c[0].toString().indexOf("%"))l=parseFloat(c[0])/100,s=n.width*l,"backgroundSize"!==t&&(s-=(r||i).width*l);else if("backgroundSize"===t)if("auto"===c[0])s=i.width;else if(c[0].match(/contain|cover/)){var f=u.Util.resizeBounds(i.width,i.height,n.width,n.height,c[0]);s=f.width,a=f.height}else s=parseInt(c[0],10);else s=parseInt(c[0],10);return"auto"===c[1]?a=s/i.width*i.height:-1!==c[1].toString().indexOf("%")?(l=parseFloat(c[1])/100,a=n.height*l,"backgroundSize"!==t&&(a-=(r||i).height*l)):a=parseInt(c[1],10),[s,a]}function r(t,e){var n=[];return{storage:n,width:t,height:e,clip:function(){n.push({type:"function",name:"clip",arguments:arguments})},translate:function(){n.push({type:"function",name:"translate",arguments:arguments})},fill:function(){n.push({type:"function",name:"fill",arguments:arguments})},save:function(){n.push({type:"function",name:"save",arguments:arguments})},restore:function(){n.push({type:"function",name:"restore",arguments:arguments})},fillRect:function(){n.push({type:"function",name:"fillRect",arguments:arguments})},createPattern:function(){n.push({type:"function",name:"createPattern",arguments:arguments})},drawShape:function(){var t=[];return n.push({type:"function",name:"drawShape",arguments:t}),{moveTo:function(){t.push({name:"moveTo",arguments:arguments})},lineTo:function(){t.push({name:"lineTo",arguments:arguments})},arcTo:function(){t.push({name:"arcTo",arguments:arguments})},bezierCurveTo:function(){t.push({name:"bezierCurveTo",arguments:arguments})},quadraticCurveTo:function(){t.push({name:"quadraticCurveTo",arguments:arguments})}}},drawImage:function(){n.push({type:"function",name:"drawImage",arguments:arguments})},fillText:function(){n.push({type:"function",name:"fillText",arguments:arguments})},setVariable:function(t,e){n.push({type:"variable",name:t,arguments:e})}}}function a(t){return{zindex:t,children:[]}}var s,l,u={};u.Util={},u.Util.trimText=function(t){return function(e){return t?t.apply(e):((e||"")+"").replace(/^\s+|\s+$/g,"")}}(String.prototype.trim),u.Util.parseBackgroundImage=function(t){var e,n,i,o,r,a,s,l,u=" \r\n	",d=[],c=0,f=0,h=function(){e&&('"'===n.substr(0,1)&&(n=n.substr(1,n.length-2)),n&&l.push(n),"-"===e.substr(0,1)&&(o=e.indexOf("-",1)+1)>0&&(i=e.substr(0,o),e=e.substr(o)),d.push({prefix:i,method:e.toLowerCase(),value:r,args:l})),l=[],e=i=n=r=""};h();for(var p=0,g=t.length;g>p;p++)if(a=t[p],!(0===c&&u.indexOf(a)>-1)){switch(a){case'"':s?s===a&&(s=null):s=a;break;case"(":if(s)break;if(0===c){c=1,r+=a;continue}f++;break;case")":if(s)break;if(1===c){if(0===f){c=0,r+=a,h();continue}f--}break;case",":if(s)break;if(0===c){h();continue}if(1===c&&0===f&&!e.match(/^url$/i)){l.push(n),n="",r+=a;continue}}r+=a,0===c?e+=a:n+=a}return h(),d},u.Util.Bounds=function(t){var e,n={};return t.getBoundingClientRect?(e=t.getBoundingClientRect(),n.top=e.top,n.bottom=e.bottom||e.top+e.height,n.left=e.left,n.width=e.width||e.right-e.left,n.height=e.height||e.bottom-e.top,n):void 0},u.Util.getCSS=function(t,i,o){function r(e,n){var i,o=t.runtimeStyle&&t.runtimeStyle[e],r=t.style;return!/^-?[0-9]+\.?[0-9]*(?:px)?$/i.test(n)&&/^-?\d/.test(n)&&(i=r.left,o&&(t.runtimeStyle.left=t.currentStyle.left),r.left="fontSize"===e?"1em":n||0,n=r.pixelLeft+"px",r.left=i,o&&(t.runtimeStyle.left=o)),/^(thin|medium|thick)$/i.test(n)?n:Math.round(parseFloat(n))+"px"}var a,d=i.match(/^background(Size|Position)$/);if(s!==t&&(l=e.defaultView.getComputedStyle(t,null)),a=l[i],d)if(a=(a||"").split(","),a=a[o||0]||a[0]||"auto",a=u.Util.trimText(a).split(" "),"backgroundSize"!==i||a[0]&&!a[0].match(/cover|contain|auto/)){if(a[0]=-1===a[0].indexOf("%")?r(i+"X",a[0]):a[0],a[1]===n){if("backgroundSize"===i)return a[1]="auto",a;a[1]=a[0]}a[1]=-1===a[1].indexOf("%")?r(i+"Y",a[1]):a[1]}else;else if(/border(Top|Bottom)(Left|Right)Radius/.test(i)){var c=a.split(" ");c.length<=1&&(c[1]=c[0]),c[0]=parseInt(c[0],10),c[1]=parseInt(c[1],10),a=c}return a},u.Util.resizeBounds=function(t,e,n,i,o){var r,a,s=n/i,l=t/e;return o&&"auto"!==o?l>s^"contain"===o?(a=i,r=i*l):(r=n,a=n/l):(r=n,a=i),{width:r,height:a}},u.Util.BackgroundPosition=function(t,e,n,i,r){var a=o("backgroundPosition",t,e,n,i,r);return{left:a[0],top:a[1]}},u.Util.BackgroundSize=function(t,e,n,i){var r=o("backgroundSize",t,e,n,i);return{width:r[0],height:r[1]}},u.Util.Extend=function(t,e){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e},u.Util.Children=function(t){var e;try{e=t.nodeName&&"IFRAME"===t.nodeName.toUpperCase()?t.contentDocument||t.contentWindow.document:function(t){var e=[];return null!==t&&!function(t,e){var i=t.length,o=0;if("number"==typeof e.length)for(var r=e.length;r>o;o++)t[i++]=e[o];else for(;e[o]!==n;)t[i++]=e[o++];return t.length=i,t}(e,t),e}(t.childNodes)}catch(o){i("html2canvas.Util.Children failed with exception: "+o.message),e=[]}return e},u.Util.Font=function(){var t={};return function(e,i,o){if(t[e+"-"+i]!==n)return t[e+"-"+i];var r,a,s,l=o.createElement("div"),u=o.createElement("img"),d=o.createElement("span"),c="Hidden Text";return l.style.visibility="hidden",l.style.fontFamily=e,l.style.fontSize=i,l.style.margin=0,l.style.padding=0,o.body.appendChild(l),u.src="data:image/gif;base64,R0lGODlhAQABAIABAP///wAAACwAAAAAAQABAAACAkQBADs=",u.width=1,u.height=1,u.style.margin=0,u.style.padding=0,u.style.verticalAlign="baseline",d.style.fontFamily=e,d.style.fontSize=i,d.style.margin=0,d.style.padding=0,d.appendChild(o.createTextNode(c)),l.appendChild(d),l.appendChild(u),r=u.offsetTop-d.offsetTop+1,l.removeChild(d),l.appendChild(o.createTextNode(c)),l.style.lineHeight="normal",u.style.verticalAlign="super",a=u.offsetTop-l.offsetTop+1,s={baseline:r,lineWidth:1,middle:a},t[e+"-"+i]=s,o.body.removeChild(l),s}}(),function(){u.Generate={};var t=[/^(-webkit-linear-gradient)\(([a-z\s]+)([\w\d\.\s,%\(\)]+)\)$/,/^(-o-linear-gradient)\(([a-z\s]+)([\w\d\.\s,%\(\)]+)\)$/,/^(-webkit-gradient)\((linear|radial),\s((?:\d{1,3}%?)\s(?:\d{1,3}%?),\s(?:\d{1,3}%?)\s(?:\d{1,3}%?))([\w\d\.\s,%\(\)\-]+)\)$/,/^(-moz-linear-gradient)\(((?:\d{1,3}%?)\s(?:\d{1,3}%?))([\w\d\.\s,%\(\)]+)\)$/,/^(-webkit-radial-gradient)\(((?:\d{1,3}%?)\s(?:\d{1,3}%?)),\s(\w+)\s([a-z\-]+)([\w\d\.\s,%\(\)]+)\)$/,/^(-moz-radial-gradient)\(((?:\d{1,3}%?)\s(?:\d{1,3}%?)),\s(\w+)\s?([a-z\-]*)([\w\d\.\s,%\(\)]+)\)$/,/^(-o-radial-gradient)\(((?:\d{1,3}%?)\s(?:\d{1,3}%?)),\s(\w+)\s([a-z\-]+)([\w\d\.\s,%\(\)]+)\)$/];u.Generate.parseGradient=function(e,n){var i,o,r,a,s,l,u,d,c,f,h,p,g=t.length;for(o=0;g>o&&!(r=e.match(t[o]));o+=1);if(r)switch(r[1]){case"-webkit-linear-gradient":case"-o-linear-gradient":if(i={type:"linear",x0:null,y0:null,x1:null,y1:null,colorStops:[]},s=r[2].match(/\w+/g))for(l=s.length,o=0;l>o;o+=1)switch(s[o]){case"top":i.y0=0,i.y1=n.height;break;case"right":i.x0=n.width,i.x1=0;break;case"bottom":i.y0=n.height,i.y1=0;break;case"left":i.x0=0,i.x1=n.width}if(null===i.x0&&null===i.x1&&(i.x0=i.x1=n.width/2),null===i.y0&&null===i.y1&&(i.y0=i.y1=n.height/2),s=r[3].match(/((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\)(?:\s\d{1,3}(?:%|px))?)+/g))for(l=s.length,u=1/Math.max(l-1,1),o=0;l>o;o+=1)d=s[o].match(/((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\))\s*(\d{1,3})?(%|px)?/),d[2]?(a=parseFloat(d[2]),a/="%"===d[3]?100:n.width):a=o*u,i.colorStops.push({color:d[1],stop:a});break;case"-webkit-gradient":if(i={type:"radial"===r[2]?"circle":r[2],x0:0,y0:0,x1:0,y1:0,colorStops:[]},s=r[3].match(/(\d{1,3})%?\s(\d{1,3})%?,\s(\d{1,3})%?\s(\d{1,3})%?/),s&&(i.x0=s[1]*n.width/100,i.y0=s[2]*n.height/100,i.x1=s[3]*n.width/100,i.y1=s[4]*n.height/100),s=r[4].match(/((?:from|to|color-stop)\((?:[0-9\.]+,\s)?(?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\)\))+/g))for(l=s.length,o=0;l>o;o+=1)d=s[o].match(/(from|to|color-stop)\(([0-9\.]+)?(?:,\s)?((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\))\)/),a=parseFloat(d[2]),"from"===d[1]&&(a=0),"to"===d[1]&&(a=1),i.colorStops.push({color:d[3],stop:a});break;case"-moz-linear-gradient":if(i={type:"linear",x0:0,y0:0,x1:0,y1:0,colorStops:[]},s=r[2].match(/(\d{1,3})%?\s(\d{1,3})%?/),s&&(i.x0=s[1]*n.width/100,i.y0=s[2]*n.height/100,i.x1=n.width-i.x0,i.y1=n.height-i.y0),s=r[3].match(/((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\)(?:\s\d{1,3}%)?)+/g))for(l=s.length,u=1/Math.max(l-1,1),o=0;l>o;o+=1)d=s[o].match(/((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\))\s*(\d{1,3})?(%)?/),d[2]?(a=parseFloat(d[2]),d[3]&&(a/=100)):a=o*u,i.colorStops.push({color:d[1],stop:a});break;case"-webkit-radial-gradient":case"-moz-radial-gradient":case"-o-radial-gradient":if(i={type:"circle",x0:0,y0:0,x1:n.width,y1:n.height,cx:0,cy:0,rx:0,ry:0,colorStops:[]},s=r[2].match(/(\d{1,3})%?\s(\d{1,3})%?/),s&&(i.cx=s[1]*n.width/100,i.cy=s[2]*n.height/100),s=r[3].match(/\w+/),d=r[4].match(/[a-z\-]*/),s&&d)switch(d[0]){case"farthest-corner":case"cover":case"":c=Math.sqrt(Math.pow(i.cx,2)+Math.pow(i.cy,2)),f=Math.sqrt(Math.pow(i.cx,2)+Math.pow(i.y1-i.cy,2)),h=Math.sqrt(Math.pow(i.x1-i.cx,2)+Math.pow(i.y1-i.cy,2)),p=Math.sqrt(Math.pow(i.x1-i.cx,2)+Math.pow(i.cy,2)),i.rx=i.ry=Math.max(c,f,h,p);break;case"closest-corner":c=Math.sqrt(Math.pow(i.cx,2)+Math.pow(i.cy,2)),f=Math.sqrt(Math.pow(i.cx,2)+Math.pow(i.y1-i.cy,2)),h=Math.sqrt(Math.pow(i.x1-i.cx,2)+Math.pow(i.y1-i.cy,2)),p=Math.sqrt(Math.pow(i.x1-i.cx,2)+Math.pow(i.cy,2)),i.rx=i.ry=Math.min(c,f,h,p);break;case"farthest-side":"circle"===s[0]?i.rx=i.ry=Math.max(i.cx,i.cy,i.x1-i.cx,i.y1-i.cy):(i.type=s[0],i.rx=Math.max(i.cx,i.x1-i.cx),i.ry=Math.max(i.cy,i.y1-i.cy));break;case"closest-side":case"contain":"circle"===s[0]?i.rx=i.ry=Math.min(i.cx,i.cy,i.x1-i.cx,i.y1-i.cy):(i.type=s[0],i.rx=Math.min(i.cx,i.x1-i.cx),i.ry=Math.min(i.cy,i.y1-i.cy))}if(s=r[5].match(/((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\)(?:\s\d{1,3}(?:%|px))?)+/g))for(l=s.length,u=1/Math.max(l-1,1),o=0;l>o;o+=1)d=s[o].match(/((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\))\s*(\d{1,3})?(%|px)?/),d[2]?(a=parseFloat(d[2]),a/="%"===d[3]?100:n.width):a=o*u,i.colorStops.push({color:d[1],stop:a})}return i},u.Generate.Gradient=function(t,n){if(0!==n.width&&0!==n.height){var o,r,a,s,l=e.createElement("canvas"),d=l.getContext("2d");if(l.width=n.width,l.height=n.height,o=u.Generate.parseGradient(t,n))if("linear"===o.type){for(r=d.createLinearGradient(o.x0,o.y0,o.x1,o.y1),a=0,s=o.colorStops.length;s>a;a+=1)try{r.addColorStop(o.colorStops[a].stop,o.colorStops[a].color)}catch(c){i(["failed to add color stop: ",c,"; tried to add: ",o.colorStops[a],"; stop: ",a,"; in: ",t])}d.fillStyle=r,d.fillRect(0,0,n.width,n.height)}else if("circle"===o.type){for(r=d.createRadialGradient(o.cx,o.cy,0,o.cx,o.cy,o.rx),a=0,s=o.colorStops.length;s>a;a+=1)try{r.addColorStop(o.colorStops[a].stop,o.colorStops[a].color)
}catch(c){i(["failed to add color stop: ",c,"; tried to add: ",o.colorStops[a],"; stop: ",a,"; in: ",t])}d.fillStyle=r,d.fillRect(0,0,n.width,n.height)}else if("ellipse"===o.type){var f=e.createElement("canvas"),h=f.getContext("2d"),p=Math.max(o.rx,o.ry),g=2*p;for(f.width=f.height=g,r=h.createRadialGradient(o.rx,o.ry,0,o.rx,o.ry,p),a=0,s=o.colorStops.length;s>a;a+=1)try{r.addColorStop(o.colorStops[a].stop,o.colorStops[a].color)}catch(c){i(["failed to add color stop: ",c,"; tried to add: ",o.colorStops[a],"; stop: ",a,"; in: ",t])}h.fillStyle=r,h.fillRect(0,0,g,g),d.fillStyle=o.colorStops[a-1].color,d.fillRect(0,0,l.width,l.height),d.drawImage(f,o.cx-o.rx,o.cy-o.ry,2*o.rx,2*o.ry)}return l}},u.Generate.ListAlpha=function(t){var e,n="";do e=t%26,n=String.fromCharCode(e+64)+n,t/=26;while(26*t>26);return n},u.Generate.ListRoman=function(t){var e,n=["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"],i=[1e3,900,500,400,100,90,50,40,10,9,5,4,1],o="",r=n.length;if(0>=t||t>=4e3)return t;for(e=0;r>e;e+=1)for(;t>=i[e];)t-=i[e],o+=n[e];return o}}(),u.Parse=function(o,s){function l(){return Math.max(Math.max(se.body.scrollWidth,se.documentElement.scrollWidth),Math.max(se.body.offsetWidth,se.documentElement.offsetWidth),Math.max(se.body.clientWidth,se.documentElement.clientWidth))}function d(){return Math.max(Math.max(se.body.scrollHeight,se.documentElement.scrollHeight),Math.max(se.body.offsetHeight,se.documentElement.offsetHeight),Math.max(se.body.clientHeight,se.documentElement.clientHeight))}function c(t,e){var n=parseInt(ce(t,e),10);return isNaN(n)?0:n}function f(t,e,n,i,o,r){"transparent"!==r&&(t.setVariable("fillStyle",r),t.fillRect(e,n,i,o),ae+=1)}function h(t,e){switch(e){case"lowercase":return t.toLowerCase();case"capitalize":return t.replace(/(^|\s|:|-|\(|\))([a-z])/g,function(t,e,n){return t.length>0?e+n.toUpperCase():void 0});case"uppercase":return t.toUpperCase();default:return t}}function p(t){return/^(normal|none|0px)$/.test(t)}function g(t,e,n,i){null!==t&&u.Util.trimText(t).length>0&&(i.fillText(t,e,n),ae+=1)}function m(t,e,n,i){var o=!1,r=ce(e,"fontWeight"),a=ce(e,"fontFamily"),s=ce(e,"fontSize");switch(parseInt(r,10)){case 401:r="bold";break;case 400:r="normal"}return t.setVariable("fillStyle",i),t.setVariable("font",[ce(e,"fontStyle"),ce(e,"fontVariant"),r,s,a].join(" ")),t.setVariable("textAlign",o?"right":"left"),"none"!==n?u.Util.Font(a,s,se):void 0}function b(t,e,n,i,o){switch(e){case"underline":f(t,n.left,Math.round(n.top+i.baseline+i.lineWidth),n.width,1,o);break;case"overline":f(t,n.left,Math.round(n.top),n.width,1,o);break;case"line-through":f(t,n.left,Math.ceil(n.top+i.middle+i.lineWidth),n.width,1,o)}}function v(t,e,n,i){var o;if(le.rangeBounds)("none"!==n||0!==u.Util.trimText(e).length)&&(o=y(e,t.node,t.textOffset)),t.textOffset+=e.length;else if(t.node&&"string"==typeof t.node.nodeValue){var r=i?t.node.splitText(e.length):null;o=x(t.node),t.node=r}return o}function y(t,e,n){var i=se.createRange();return i.setStart(e,n),i.setEnd(e,n+t.length),i.getBoundingClientRect()}function x(t){var e=t.parentNode,n=se.createElement("wrapper"),i=t.cloneNode(!0);n.appendChild(t.cloneNode(!0)),e.replaceChild(n,t);var o=u.Util.Bounds(n);return e.replaceChild(i,n),o}function C(t,e,n){var i,o,r=n.ctx,a=ce(t,"color"),l=ce(t,"textDecoration"),d=ce(t,"textAlign"),c={node:e,textOffset:0};u.Util.trimText(e.nodeValue).length>0&&(e.nodeValue=h(e.nodeValue,ce(t,"textTransform")),d=d.replace(["-webkit-auto"],["auto"]),o=e.nodeValue.split(!s.letterRendering&&/^(left|right|justify|auto)$/.test(d)&&p(ce(t,"letterSpacing"))?/(\b| )/:""),i=m(r,t,l,a),s.chinese&&o.forEach(function(t,e){/.*[\u4E00-\u9FA5].*$/.test(t)&&(t=t.split(""),t.unshift(e,1),o.splice.apply(o,t))}),o.forEach(function(t,e){var n=v(c,t,l,e<o.length-1);n&&(g(t,n.left,n.bottom,r),b(r,l,n,i,a))}))}function w(t,e){var n,i,o=se.createElement("boundelement");return o.style.display="inline",n=t.style.listStyleType,t.style.listStyleType="none",o.appendChild(se.createTextNode(e)),t.insertBefore(o,t.firstChild),i=u.Util.Bounds(o),t.removeChild(o),t.style.listStyleType=n,i}function S(t){var e=-1,n=1,i=t.parentNode.childNodes;if(t.parentNode){for(;i[++e]!==t;)1===i[e].nodeType&&n++;return n}return-1}function _(t,e){var n,i=S(t);switch(e){case"decimal":n=i;break;case"decimal-leading-zero":n=1===i.toString().length?i="0"+i.toString():i.toString();break;case"upper-roman":n=u.Generate.ListRoman(i);break;case"lower-roman":n=u.Generate.ListRoman(i).toLowerCase();break;case"lower-alpha":n=u.Generate.ListAlpha(i).toLowerCase();break;case"upper-alpha":n=u.Generate.ListAlpha(i)}return n+=". "}function q(t,e,n){var i,o,r,a=e.ctx,s=ce(t,"listStyleType");if(/^(decimal|decimal-leading-zero|upper-alpha|upper-latin|upper-roman|lower-alpha|lower-greek|lower-latin|lower-roman)$/i.test(s)){if(o=_(t,s),r=w(t,o),m(a,t,"none",ce(t,"color")),"inside"!==ce(t,"listStylePosition"))return;a.setVariable("textAlign","left"),i=n.left,g(o,i,r.bottom,a)}}function T(t){var e=o[t];return e&&e.succeeded===!0?e.img:!1}function k(t,e){var n=Math.max(t.left,e.left),i=Math.max(t.top,e.top),o=Math.min(t.left+t.width,e.left+e.width),r=Math.min(t.top+t.height,e.top+e.height);return{left:n,top:i,width:o-n,height:r-i}}function E(t,e){var n;return e?"auto"!==t?(n=a(t),e.children.push(n),n):e:n=a(0)}function N(t,e,n,i,o){var r=c(e,"paddingLeft"),a=c(e,"paddingTop"),s=c(e,"paddingRight"),l=c(e,"paddingBottom");H(t,n,0,0,n.width,n.height,i.left+r+o[3].width,i.top+a+o[0].width,i.width-(o[1].width+o[3].width+r+s),i.height-(o[0].width+o[2].width+a+l))}function D(t){return["Top","Right","Bottom","Left"].map(function(e){return{width:c(t,"border"+e+"Width"),color:ce(t,"border"+e+"Color")}})}function L(t){return["TopLeft","TopRight","BottomRight","BottomLeft"].map(function(e){return ce(t,"border"+e+"Radius")})}function J(t,e,n,i){var o=function(t,e,n){return{x:t.x+(e.x-t.x)*n,y:t.y+(e.y-t.y)*n}};return{start:t,startControl:e,endControl:n,end:i,subdivide:function(r){var a=o(t,e,r),s=o(e,n,r),l=o(n,i,r),u=o(a,s,r),d=o(s,l,r),c=o(u,d,r);return[J(t,a,u,c),J(c,d,l,i)]},curveTo:function(t){t.push(["bezierCurve",e.x,e.y,n.x,n.y,i.x,i.y])},curveToReversed:function(i){i.push(["bezierCurve",n.x,n.y,e.x,e.y,t.x,t.y])}}}function A(t,e,n,i,o,r,a){e[0]>0||e[1]>0?(t.push(["line",i[0].start.x,i[0].start.y]),i[0].curveTo(t),i[1].curveTo(t)):t.push(["line",r,a]),(n[0]>0||n[1]>0)&&t.push(["line",o[0].start.x,o[0].start.y])}function I(t,e,n,i,o,r,a){var s=[];return e[0]>0||e[1]>0?(s.push(["line",i[1].start.x,i[1].start.y]),i[1].curveTo(s)):s.push(["line",t.c1[0],t.c1[1]]),n[0]>0||n[1]>0?(s.push(["line",r[0].start.x,r[0].start.y]),r[0].curveTo(s),s.push(["line",a[0].end.x,a[0].end.y]),a[0].curveToReversed(s)):(s.push(["line",t.c2[0],t.c2[1]]),s.push(["line",t.c3[0],t.c3[1]])),e[0]>0||e[1]>0?(s.push(["line",o[1].end.x,o[1].end.y]),o[1].curveToReversed(s)):s.push(["line",t.c4[0],t.c4[1]]),s}function P(t,e,n){var i=t.left,o=t.top,r=t.width,a=t.height,s=e[0][0],l=e[0][1],u=e[1][0],d=e[1][1],c=e[2][0],f=e[2][1],h=e[3][0],p=e[3][1],g=r-u,m=a-c,b=r-f,v=a-p;return{topLeftOuter:pe(i,o,s,l).topLeft.subdivide(.5),topLeftInner:pe(i+n[3].width,o+n[0].width,Math.max(0,s-n[3].width),Math.max(0,l-n[0].width)).topLeft.subdivide(.5),topRightOuter:pe(i+g,o,u,d).topRight.subdivide(.5),topRightInner:pe(i+Math.min(g,r+n[3].width),o+n[0].width,g>r+n[3].width?0:u-n[3].width,d-n[0].width).topRight.subdivide(.5),bottomRightOuter:pe(i+b,o+m,f,c).bottomRight.subdivide(.5),bottomRightInner:pe(i+Math.min(b,r+n[3].width),o+Math.min(m,a+n[0].width),Math.max(0,f-n[1].width),Math.max(0,c-n[2].width)).bottomRight.subdivide(.5),bottomLeftOuter:pe(i,o+v,h,p).bottomLeft.subdivide(.5),bottomLeftInner:pe(i+n[3].width,o+v,Math.max(0,h-n[3].width),Math.max(0,p-n[2].width)).bottomLeft.subdivide(.5)}}function M(t,e,n,i,o){var r=ce(t,"backgroundClip"),a=[];switch(r){case"content-box":case"padding-box":A(a,i[0],i[1],e.topLeftInner,e.topRightInner,o.left+n[3].width,o.top+n[0].width),A(a,i[1],i[2],e.topRightInner,e.bottomRightInner,o.left+o.width-n[1].width,o.top+n[0].width),A(a,i[2],i[3],e.bottomRightInner,e.bottomLeftInner,o.left+o.width-n[1].width,o.top+o.height-n[2].width),A(a,i[3],i[0],e.bottomLeftInner,e.topLeftInner,o.left+n[3].width,o.top+o.height-n[2].width);break;default:A(a,i[0],i[1],e.topLeftOuter,e.topRightOuter,o.left,o.top),A(a,i[1],i[2],e.topRightOuter,e.bottomRightOuter,o.left+o.width,o.top),A(a,i[2],i[3],e.bottomRightOuter,e.bottomLeftOuter,o.left+o.width,o.top+o.height),A(a,i[3],i[0],e.bottomLeftOuter,e.topLeftOuter,o.left,o.top+o.height)}return a}function Q(t,e,n){var i,o,r,a,s,l,u=e.left,d=e.top,c=e.width,f=e.height,h=L(t),p=P(e,h,n),g={clip:M(t,p,n,h,e),borders:[]};for(i=0;4>i;i++)if(n[i].width>0){switch(o=u,r=d,a=c,s=f-n[2].width,i){case 0:s=n[0].width,l=I({c1:[o,r],c2:[o+a,r],c3:[o+a-n[1].width,r+s],c4:[o+n[3].width,r+s]},h[0],h[1],p.topLeftOuter,p.topLeftInner,p.topRightOuter,p.topRightInner);break;case 1:o=u+c-n[1].width,a=n[1].width,l=I({c1:[o+a,r],c2:[o+a,r+s+n[2].width],c3:[o,r+s],c4:[o,r+n[0].width]},h[1],h[2],p.topRightOuter,p.topRightInner,p.bottomRightOuter,p.bottomRightInner);break;case 2:r=r+f-n[2].width,s=n[2].width,l=I({c1:[o+a,r+s],c2:[o,r+s],c3:[o+n[3].width,r],c4:[o+a-n[2].width,r]},h[2],h[3],p.bottomRightOuter,p.bottomRightInner,p.bottomLeftOuter,p.bottomLeftInner);break;case 3:a=n[3].width,l=I({c1:[o,r+s+n[2].width],c2:[o,r],c3:[o+a,r+n[0].width],c4:[o+a,r+s]},h[3],h[0],p.bottomLeftOuter,p.bottomLeftInner,p.topLeftOuter,p.topLeftInner)}g.borders.push({args:l,color:n[i].color})}return g}function O(t,e){var n=t.drawShape();return e.forEach(function(t,e){n[0===e?"moveTo":t[0]+"To"].apply(null,t.slice(1))}),n}function R(t,e,n){"transparent"!==n&&(t.setVariable("fillStyle",n),O(t,e),t.fill(),ae+=1)}function j(t,e,n){var o,r,a=se.createElement("valuewrap"),s=["lineHeight","textAlign","fontFamily","color","fontSize","paddingLeft","paddingTop","width","height","border","borderLeftWidth","borderTopWidth"];s.forEach(function(e){try{a.style[e]=ce(t,e)}catch(n){i("html2canvas: Parse: Exception caught in renderFormValue: "+n.message)}}),a.style.borderColor="black",a.style.borderStyle="solid",a.style.display="block",a.style.position="absolute",(/^(submit|reset|button|text|password)$/.test(t.type)||"SELECT"===t.nodeName)&&(a.style.lineHeight=ce(t,"height")),a.style.top=e.top+"px",a.style.left=e.left+"px",o="SELECT"===t.nodeName?(t.options[t.selectedIndex]||0).text:t.value,o||(o=t.placeholder),r=se.createTextNode(o),a.appendChild(r),de.appendChild(a),C(t,r,n),de.removeChild(a)}function H(t){t.drawImage.apply(t,Array.prototype.slice.call(arguments,1)),ae+=1}function F(n,o){var r=t.getComputedStyle(n,o);if(r&&r.content&&"none"!==r.content&&"-moz-alt-content"!==r.content){var a=r.content+"",s=a.substr(0,1);s===a.substr(a.length-1)&&s.match(/'|"/)&&(a=a.substr(1,a.length-2));var l="url"===a.substr(0,3),d=e.createElement(l?"img":"span");return d.className=fe+"-before "+fe+"-after",Object.keys(r).filter(z).forEach(function(t){try{d.style[t]=r[t]}catch(e){i(["Tried to assign readonly property ",t,"Error:",e])}}),l?d.src=u.Util.parseBackgroundImage(a)[0].args[0]:d.innerHTML=a,d}}function z(e){return isNaN(t.parseInt(e,10))}function B(t,e){var n=F(t,":before"),i=F(t,":after");(n||i)&&(n&&(t.className+=" "+fe+"-before",t.parentNode.insertBefore(n,t),ne(n,e,!0),t.parentNode.removeChild(n),t.className=t.className.replace(fe+"-before","").trim()),i&&(t.className+=" "+fe+"-after",t.appendChild(i),ne(i,e,!0),t.removeChild(i),t.className=t.className.replace(fe+"-after","").trim()))}function W(t,e,n,i){var o=Math.round(i.left+n.left),r=Math.round(i.top+n.top);t.createPattern(e),t.translate(o,r),t.fill(),t.translate(-o,-r)}function U(t,e,n,i,o,r,a,s){var l=[];l.push(["line",Math.round(o),Math.round(r)]),l.push(["line",Math.round(o+a),Math.round(r)]),l.push(["line",Math.round(o+a),Math.round(s+r)]),l.push(["line",Math.round(o),Math.round(s+r)]),O(t,l),t.save(),t.clip(),W(t,e,n,i),t.restore()}function $(t,e,n){f(t,e.left,e.top,e.width,e.height,n)}function X(t,e,n,i,o){var r=u.Util.BackgroundSize(t,e,i,o),a=u.Util.BackgroundPosition(t,e,i,o,r),s=ce(t,"backgroundRepeat").split(",").map(function(t){return t.trim()});switch(i=V(i,r),s=s[o]||s[0]){case"repeat-x":U(n,i,a,e,e.left,e.top+a.top,99999,i.height);break;case"repeat-y":U(n,i,a,e,e.left+a.left,e.top,i.width,99999);break;case"no-repeat":U(n,i,a,e,e.left+a.left,e.top+a.top,i.width,i.height);break;default:W(n,i,a,{top:e.top,left:e.left,width:i.width,height:i.height})}}function G(t,e,n){for(var o,r=ce(t,"backgroundImage"),a=u.Util.parseBackgroundImage(r),s=a.length;s--;)if(r=a[s],r.args&&0!==r.args.length){var l="url"===r.method?r.args[0]:r.value;o=T(l),o?X(t,e,n,o,s):i("html2canvas: Error loading background:",r)}}function V(t,e){if(t.width===e.width&&t.height===e.height)return t;var n,i=se.createElement("canvas");return i.width=e.width,i.height=e.height,n=i.getContext("2d"),H(n,t,0,0,t.width,t.height,0,0,e.width,e.height),i}function Y(t,e,n){var i=ce(e,"opacity")*(n?n.opacity:1);return t.setVariable("globalAlpha",i),i}function K(t,e,n){var i=r(e?n.width:l(),e?n.height:d()),o={ctx:i,zIndex:E(ce(t,"zIndex"),e?e.zIndex:null),opacity:Y(i,t,e),cssPosition:ce(t,"position"),borders:D(t),clip:e&&e.clip?u.Util.Extend({},e.clip):null};return s.useOverflow===!0&&/(hidden|scroll|auto)/.test(ce(t,"overflow"))===!0&&/(BODY)/i.test(t.nodeName)===!1&&(o.clip=o.clip?k(o.clip,n):n),o.zIndex.children.push(o),o}function Z(t,e,n){var i={left:e.left+t[3].width,top:e.top+t[0].width,width:e.width-(t[1].width+t[3].width),height:e.height-(t[0].width+t[2].width)};return n&&(i=k(i,n)),i}function te(t,e,n){var o,r=u.Util.Bounds(t),a=ue.test(t.nodeName)?"#efefef":ce(t,"backgroundColor"),s=K(t,e,r),l=s.borders,d=s.ctx,c=Z(l,r,s.clip),f=Q(t,r,l);switch(O(d,f.clip),d.save(),d.clip(),c.height>0&&c.width>0&&($(d,r,a),G(t,c,d)),d.restore(),f.borders.forEach(function(t){R(d,t.args,t.color)}),n||B(t,s),t.nodeName){case"IMG":(o=T(t.getAttribute("src")))?N(d,t,o,r,l):i("html2canvas: Error loading <img>:"+t.getAttribute("src"));break;case"INPUT":/^(text|url|email|submit|button|reset)$/.test(t.type)&&(t.value||t.placeholder).length>0&&j(t,r,s);break;case"TEXTAREA":(t.value||t.placeholder||"").length>0&&j(t,r,s);break;case"SELECT":(t.options||t.placeholder||"").length>0&&j(t,r,s);break;case"LI":q(t,s,c);break;case"CANVAS":N(d,t,t,r,l)}return s}function ee(t){return"none"!==ce(t,"display")&&"hidden"!==ce(t,"visibility")&&!t.hasAttribute("data-html2canvas-ignore")}function ne(t,e,n){ee(t)&&(e=te(t,e,n)||e,ue.test(t.nodeName)||u.Util.Children(t).forEach(function(i){1===i.nodeType?ne(i,e,n):3===i.nodeType&&C(t,i,e)}))}function ie(t,e){function n(t){var e,i,o,r,s,l=u.Util.Children(t),d=l.length;for(s=0;d>s;s+=1)if(r=l[s],3===r.nodeType)a+=r.nodeValue.replace(/</g,"&lt;").replace(/>/g,"&gt;");else if(1===r.nodeType&&!/^(script|meta|title)$/.test(r.nodeName.toLowerCase())){if(a+="<"+r.nodeName.toLowerCase(),r.hasAttributes())for(e=r.attributes,o=e.length,i=0;o>i;i+=1)a+=" "+e[i].name+'="'+e[i].value+'"';a+=">",n(r),a+="</"+r.nodeName.toLowerCase()+">"}}var i=new Image,o=l(),r=d(),a="";n(t),i.src=["data:image/svg+xml,","<svg xmlns='http://www.w3.org/2000/svg' version='1.1' width='"+o+"' height='"+r+"'>","<foreignObject width='"+o+"' height='"+r+"'>","<html xmlns='http://www.w3.org/1999/xhtml' style='margin:0;'>",a.replace(/\#/g,"%23"),"</html>","</foreignObject>","</svg>"].join(""),i.onload=function(){e.svgRender=i}}function oe(){var t=te(re,null);return le.svgRendering&&ie(e.documentElement,t),Array.prototype.slice.call(re.children,0).forEach(function(e){ne(e,t)}),t.backgroundColor=ce(e.documentElement,"backgroundColor"),de.removeChild(he),t}bds.qa.ShortCut.scrollTop=t.pageYOffset||e.documentElement.scrollTop||e.body.scrollTop,t.scroll(0,0);var re=s.elements===n?e.body:s.elements[0],ae=0,se=re.ownerDocument,le=u.Util.Support(s,se),ue=new RegExp("("+s.ignoreElements+")"),de=se.body,ce=u.Util.getCSS,fe="___html2canvas___pseudoelement",he=se.createElement("style");he.innerHTML="."+fe+'-before:before { content: "" !important; display: none !important; }.'+fe+'-after:after { content: "" !important; display: none !important; }',de.appendChild(he),o=o||{};var pe=function(t){return function(e,n,i,o){var r=i*t,a=o*t,s=e+i,l=n+o;return{topLeft:J({x:e,y:l},{x:e,y:l-a},{x:s-r,y:n},{x:s,y:n}),topRight:J({x:e,y:n},{x:e+r,y:n},{x:s,y:l-a},{x:s,y:l}),bottomRight:J({x:s,y:n},{x:s,y:n+a},{x:e+r,y:l},{x:e,y:l}),bottomLeft:J({x:s,y:l},{x:s-r,y:l},{x:e,y:n+a},{x:e,y:n})}}}(4*((Math.sqrt(2)-1)/3));return oe()},u.Preload=function(o){function r(t){T.href=t,T.href=T.href;var e=T.protocol+T.host;return e===m}function a(){i("html2canvas: start: images: "+x.numLoaded+" / "+x.numTotal+" (failed: "+x.numFailed+")"),!x.firstRun&&x.numLoaded>=x.numTotal&&(i("Finished loading images: # "+x.numTotal+" (failed: "+x.numFailed+")"),"function"==typeof o.complete&&o.complete(x))}function s(e,i,r){var s,l,u=o.proxy;T.href=e,e=T.href,s="html2canvas_"+C++,r.callbackname=s,u+=u.indexOf("?")>-1?"&":"?",u+="url="+encodeURIComponent(e)+"&callback="+s,l=S.createElement("script"),t[s]=function(e){"error:"===e.substring(0,6)?(r.succeeded=!1,x.numLoaded++,x.numFailed++,a()):(g(i,r),i.src=e),t[s]=n;try{delete t[s]}catch(o){}l.parentNode.removeChild(l),l=null,delete r.script,delete r.callbackname},l.setAttribute("type","text/javascript"),l.setAttribute("src",u),r.script=l,t.document.body.appendChild(l)}function l(e,n){var i=t.getComputedStyle(e,n),o=i.content;"url"===o.substr(0,3)&&b.loadImage(u.Util.parseBackgroundImage(o)[0].args[0]),h(i.backgroundImage,e)}function d(t){l(t,":before"),l(t,":after")}function c(t,e){var i=u.Generate.Gradient(t,e);i!==n&&(x[t]={img:i,succeeded:!0},x.numTotal++,x.numLoaded++,a())}function f(t){return t&&t.method&&t.args&&t.args.length>0}function h(t,e){var i;u.Util.parseBackgroundImage(t).filter(f).forEach(function(t){"url"===t.method?b.loadImage(t.args[0]):t.method.match(/\-?gradient$/)&&(i===n&&(i=u.Util.Bounds(e)),c(t.value,i))})}function p(t){var e=!1;try{u.Util.Children(t).forEach(function(t){p(t)})}catch(o){}try{e=t.nodeType}catch(r){e=!1,i("html2canvas: failed to access some element's nodeType - Exception: "+r.message)}if(1===e||e===n){d(t);try{h(u.Util.getCSS(t,"backgroundImage"),t)}catch(o){i("html2canvas: failed to get background-image - Exception: "+o.message)}h(t)}}function g(e,i){e.onload=function(){i.timer!==n&&t.clearTimeout(i.timer),x.numLoaded++,i.succeeded=!0,e.onerror=e.onload=null,a()},e.onerror=function(){if("anonymous"===e.crossOrigin&&(t.clearTimeout(i.timer),o.proxy)){var n=e.src;return e=new Image,i.img=e,e.src=n,void s(e.src,e,i)}x.numLoaded++,x.numFailed++,i.succeeded=!1,e.onerror=e.onload=null,a()}}var m,b,v,y,x={numLoaded:0,numFailed:0,numTotal:0,cleanupDone:!1},C=0,w=o.elements[0]||e.body,S=w.ownerDocument,_=S.images,q=_.length,T=S.createElement("a"),k=function(t){return t.crossOrigin!==n}(new Image);for(T.href=t.location.href,m=T.protocol+T.host,b={loadImage:function(e){var i,a;e&&x[e]===n&&(i=new Image,e.match(/data:image\/.*;base64,/i)?(i.src=e.replace(/url\(['"]{0,}|['"]{0,}\)$/gi,""),a=x[e]={img:i},x.numTotal++,g(i,a)):r(e)||o.allowTaint===!0?(a=x[e]={img:i},x.numTotal++,g(i,a),i.src=e):k&&!o.allowTaint&&o.useCORS?(i.crossOrigin="anonymous",a=x[e]={img:i},x.numTotal++,g(i,a),i.src=e,i.customComplete=function(){this.img.complete?this.img.onerror():this.timer=t.setTimeout(this.img.customComplete,100)}.bind(a),i.customComplete()):o.proxy&&(a=x[e]={img:i},x.numTotal++,s(e,i,a)))},cleanupDOM:function(r){var s,l;if(!x.cleanupDone){i(r&&"string"==typeof r?"html2canvas: Cleanup because: "+r:"html2canvas: Cleanup after timeout: "+o.timeout+" ms.");for(l in x)if(x.hasOwnProperty(l)&&(s=x[l],"object"==typeof s&&s.callbackname&&s.succeeded===n)){t[s.callbackname]=n;try{delete t[s.callbackname]}catch(u){}s.script&&s.script.parentNode&&(s.script.setAttribute("src","about:blank"),s.script.parentNode.removeChild(s.script)),x.numLoaded++,x.numFailed++,i("html2canvas: Cleaned up failed img: '"+l+"' Steps: "+x.numLoaded+" / "+x.numTotal)}t.stop!==n?t.stop():e.execCommand!==n&&e.execCommand("Stop",!1),e.close!==n&&e.close(),x.cleanupDone=!0,r&&"string"==typeof r||a()}},renderingDone:function(){y&&t.clearTimeout(y)}},o.timeout>0&&(y=t.setTimeout(b.cleanupDOM,o.timeout)),i("html2canvas: Preload starts: finding background-images"),x.firstRun=!0,p(w),i("html2canvas: Preload: Finding images"),v=0;q>v;v+=1)b.loadImage(_[v].getAttribute("src"));return x.firstRun=!1,i("html2canvas: Preload: Done."),x.numTotal===x.numLoaded&&a(),b},u.Renderer=function(t,i){function o(t){var e=[],n=function(t){var i=[],o=[];t.children.forEach(function(t){t.children&&t.children.length>0?(i.push(t),o.push(t.zindex)):e.push(t)}),o.sort(function(t,e){return t-e}),o.forEach(function(t){var e;i.some(function(n,i){return e=i,n.zindex===t}),n(i.splice(e,1)[0])})};return t&&t.zIndex&&n(t.zIndex),e}function r(t){var e;if("string"==typeof i.renderer&&u.Renderer[t]!==n)e=u.Renderer[t](i);else{if("function"!=typeof t)throw new Error("Unknown renderer");e=t(i)}if("function"!=typeof e)throw new Error("Invalid renderer defined");return e}return r(i.renderer)(t,i,e,o(t),u)},u.Util.Support=function(t,e){function o(){var t=new Image,o=e.createElement("canvas"),r=o.getContext===n?!1:o.getContext("2d");if(r===!1)return!1;o.width=o.height=10,t.src=["data:image/svg+xml,","<svg xmlns='http://www.w3.org/2000/svg' width='10' height='10'>","<foreignObject width='10' height='10'>","<div xmlns='http://www.w3.org/1999/xhtml' style='width:10;height:10;'>","sup","</div>","</foreignObject>","</svg>"].join("");try{r.drawImage(t,0,0),o.toDataURL()}catch(a){return!1}return i("html2canvas: Parse: SVG powered rendering available"),!0}function r(){var t,n,i,o,r=!1;return e.createRange&&(t=e.createRange(),t.getBoundingClientRect&&(n=e.createElement("boundtest"),n.style.height="123px",n.style.display="block",e.body.appendChild(n),t.selectNode(n),i=t.getBoundingClientRect(),o=i.height,123===o&&(r=!0),e.body.removeChild(n))),r}return{rangeBounds:r(),svgRendering:t.svgRendering&&o()}},t.html2canvas=function(e,n){e=e.length?e:[e];var o,r,a={logging:!1,elements:e,background:"#fff",proxy:null,timeout:0,useCORS:!1,allowTaint:!1,svgRendering:!1,ignoreElements:"IFRAME|OBJECT|PARAM",useOverflow:!0,letterRendering:!1,chinese:!1,width:null,height:null,taintTest:!0,renderer:"Canvas"};return a=u.Util.Extend(n,a),u.logging=a.logging,a.complete=function(t){("function"!=typeof a.onpreloaded||a.onpreloaded(t)!==!1)&&(o=u.Parse(t,a),("function"!=typeof a.onparsed||a.onparsed(o)!==!1)&&(r=u.Renderer(o,a),"function"==typeof a.onrendered&&a.onrendered(r)))},t.setTimeout(function(){u.Preload(a)},0),{render:function(t,e){return u.Renderer(t,u.Util.Extend(e,a))},parse:function(t,e){return u.Parse(t,u.Util.Extend(e,a))},preload:function(t){return u.Preload(u.Util.Extend(t,a))},log:i}},t.html2canvas.log=i,t.html2canvas.Renderer={Canvas:n},u.Renderer.Canvas=function(t){function o(t,e){t.beginPath(),e.forEach(function(e){t[e.name].apply(t,e.arguments)}),t.closePath()}function r(t){if(-1===u.indexOf(t.arguments[0].src)){c.drawImage(t.arguments[0],0,0);try{c.getImageData(0,0,1,1)}catch(e){return d=l.createElement("canvas"),c=d.getContext("2d"),!1}u.push(t.arguments[0].src)}return!0}function a(t){return"transparent"===t||"rgba(0, 0, 0, 0)"===t}function s(e,n){switch(n.type){case"variable":e[n.name]=n.arguments;break;case"function":if("createPattern"===n.name){if(n.arguments[0].width>0&&n.arguments[0].height>0)try{e.fillStyle=e.createPattern(n.arguments[0],"repeat")}catch(a){i("html2canvas: Renderer: Error creating pattern",a.message)}}else"drawShape"===n.name?o(e,n.arguments):"drawImage"===n.name?n.arguments[8]>0&&n.arguments[7]>0&&(!t.taintTest||t.taintTest&&r(n))&&e.drawImage.apply(e,n.arguments):e[n.name].apply(e,n.arguments)}}t=t||{};var l=e,u=[],d=e.createElement("canvas"),c=d.getContext("2d"),f=t.canvas||l.createElement("canvas");return function(t,e,o,r,l){var u,d,c,h,p,g,m=f.getContext("2d");if(f.width=f.style.width=e.width||t.ctx.width,f.height=f.style.height=e.height||t.ctx.height,g=m.fillStyle,m.fillStyle=a(t.backgroundColor)&&e.background!==n?e.background:t.backgroundColor,m.fillRect(0,0,f.width,f.height),m.fillStyle=g,e.svgRendering&&t.svgRender!==n)m.drawImage(t.svgRender,0,0);else for(d=0,c=r.length;c>d;d+=1)u=r.splice(0,1)[0],u.canvasPosition=u.canvasPosition||{},m.textBaseline="bottom",u.clip&&(m.save(),m.beginPath(),m.rect(u.clip.left,u.clip.top,u.clip.width,u.clip.height),m.clip()),u.ctx.storage&&u.ctx.storage.forEach(s.bind(null,m)),u.clip&&m.restore();return i("html2canvas: Renderer: Canvas renderer done - returning canvas obj"),c=e.elements.length,1===c&&"object"==typeof e.elements[0]&&"BODY"!==e.elements[0].nodeName?(p=l.Util.Bounds(e.elements[0]),h=o.createElement("canvas"),h.width=p.width,h.height=p.height,m=h.getContext("2d"),m.drawImage(f,p.left,p.top,p.width,p.height,0,0,p.width,p.height),f=null,h):f}}}(window,document);var t=function(){html2canvas(document.body,{proxy:bds.qa.ShortCut.base_url_path+"/getProxyImage.php",onrendered:function(t){t.id="fb_right_dialog_pagecanvas2",t.style.top=0,t.style.left=0,t.style.position="absolute",document.body.appendChild(t),bds.qa.ShortCut.img_data=t.toDataURL("image/png")}})};t()},init_img_render:function(){bds.qa.ShortCut.send_img=!0;var t=function(){var t={init:function(){var e=function(){var e=document.getElementById("fb_right_dialog_canvas");e&&bds.qa.ShortCut.fbJQ(e).remove(),bds.qa.ShortCut.fbJQ("#fb_baidu_wizard").remove();var n=document.createElement("canvas"),i=Math.max(Math.max(document.body.scrollHeight,document.documentElement.scrollHeight),Math.max(document.body.offsetHeight,document.documentElement.offsetHeight),Math.max(document.body.clientHeight,document.documentElement.clientHeight)),o=Math.max(Math.max(document.body.scrollWidth,document.documentElement.scrollWidth),Math.max(document.body.offsetWidth,document.documentElement.offsetWidth),Math.max(document.body.clientWidth,document.documentElement.clientWidth));n.width=o,n.height=i,n.style.top=0,n.style.left=0,n.style.position="absolute",n.style.zIndex="999989",n.id="fb_right_dialog_canvas",document.body.appendChild(n),t.load(),t.bind(),bds.qa.ShortCut.fbJQ("#fb_right_dialog_canvas").css("cursor","crosshair")};e()},load:function(){this.x=[],this.y=[],this.clickDrag=[],this.Rectangles=[],this.rectangleNo="",this.lock=!1,this.hasCover=!1,this.canvas=document.getElementById("fb_right_dialog_canvas"),this.cxt=this.canvas.getContext("2d"),this.cxt.fillStyle="rgba(85,85,85,0.5)",this.cxt.fillRect(0,0,document.body.clientWidth,document.body.scrollHeight>window.screen.availHeight?document.body.scrollHeight:window.screen.availHeight),this.cxt.globalCompositeOperation="destination-out",this.StartEvent="mousedown",this.MoveEvent="mousemove",this.EndEvent="mouseup"},bind:function(){var t=this;bds.qa.ShortCut.fbJQ("#fb_right_canvas_save").click(function(){if(1==bds.qa.ShortCut.send_img){var t=bds.qa.ShortCut.fbJQ("#fb_des_content").val();if(""==t||t==bds.qa.ShortCut.issuePlaceholder)return bds.qa.ShortCut.popwindow("请填写反馈内容",200),!1;var e=bds.qa.ShortCut.fbJQ(".fb-level-type-block .fb-check").length;if(""==e||1>e)return bds.qa.ShortCut.popwindow("请选择问题类型",200),!1;bds.qa.ShortCut.sendCanvasData()}}),this.canvas["on"+t.StartEvent]=function(e){var n=t.touch?e.touches[0]:e,i=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop;if(t.movePoint(n.clientX-n.target.offsetLeft,n.clientY-n.target.offsetTop+i),t.hasCover){var o="#fb_cancel_"+t.rectangleNo;bds.qa.ShortCut.fbJQ(o).remove()}t.lock=!0},this.canvas["on"+t.MoveEvent]=function(e){e=e?e:window.event;var n=t.touch?e.touches[0]:e,i=n.clientX-n.target.offsetLeft,o=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop,r=n.clientY-n.target.offsetTop+o;t.lock?(bds.qa.ShortCut.fbJQ("#fb_baidu_right_dialog").hide(),t.movePoint(i,r,!0),t.drawRectangle()):t.showRectangle(i,r,t)},this.canvas["on"+t.EndEvent]=function(){bds.qa.ShortCut.fbJQ("#fb_baidu_right_dialog").show(),t.lock=!1,t.Rectangles.push([t.x[0],t.y[0],t.x[t.x.length-1]-t.x[0],t.y[t.y.length-1]-t.y[0]]),t.x=[],t.y=[],t.clickDrag=[],t.drawRectangle()}},createCancel:function(t,e,n){var i=document.createElement("div");i.id="fb_cancel_"+n.rectangleNo,i.className="fb_cancel_flag",i.style.background="url("+bds.qa.ShortCut.base_url_path+"/feedback/images/cancel.png)",i.style.top=parseInt(t-8)+"px",i.style.left=parseInt(e-8)+"px",i.style.width="16px",i.style.height="16px",i.style.position="absolute",i.style.zIndex="999989",i.style.cursor="pointer",bds.qa.ShortCut.fbJQ("body").append(i),bds.qa.ShortCut.fbJQ("#fb_cancel_"+n.rectangleNo).click(function(){n.Rectangles[n.rectangleNo]=0,bds.qa.ShortCut.fbJQ("#fb_cancel_"+n.rectangleNo).remove(),n.hasCover=!1,n.drawRectangle()})},movePoint:function(t,e){this.x.push(t),this.y.push(e),this.clickDrag.push(e)},showRectangle:function(t,e,n){for(i=0;i<this.Rectangles.length;i++){var o=n.hasCover?this.Rectangles[n.rectangleNo]:this.Rectangles[i],r=o[3]>0?o[1]:o[1]+o[3],a=o[3]>0?o[1]+o[3]:o[1],s=o[2]>0?o[0]:o[0]+o[2],l=o[2]>0?o[0]+o[2]:o[0];if(n.hasCover){var u=s>t||t>l||r>e||e>a;if(u){this.cxt.globalAlpha=1,this.cxt.globalCompositeOperation="source-over",this.cxt.strokeStyle="#FF7F7D",this.cxt.lineWidth="5",this.cxt.strokeRect(o[0],o[1],o[2],o[3]),this.cxt.globalCompositeOperation="destination-out",this.cxt.fillStyle="rgba(255,255,255,1)",this.cxt.fillRect(o[0],o[1],o[2],o[3]),n.hasCover=!1;var d="#fb_cancel_"+n.rectangleNo;bds.qa.ShortCut.fbJQ(d).remove()}}else{var c=t>s&&l>t&&e>r&&a>e;if(c){this.cxt.globalCompositeOperation="source-over",this.cxt.strokeStyle="#FF7F7D",this.cxt.lineWidth="5",this.cxt.strokeRect(o[0],o[1],o[2],o[3]),this.cxt.globalCompositeOperation="destination-out",this.cxt.fillStyle="rgba(255,255,255,1)",this.cxt.fillRect(o[0],o[1],o[2],o[3]),n.hasCover=!0,n.rectangleNo=i,n.createCancel(r,l,n);break}}}},drawRectangle:function(){var t=this.x[this.x.length-1]-this.x[0],e=this.y[this.y.length-1]-this.y[0];this.clear(),this.drawBackground();var n=this.Rectangles.length;if(this.cxt.globalAlpha=1,n)for(n-=1;n>=0;n--){var i=this.Rectangles[n],o=i[0],r=i[1],a=i[2],s=i[3];this.cxt.globalCompositeOperation="source-over",this.cxt.strokeStyle="#FF7F7D",this.cxt.lineWidth="5",this.cxt.strokeRect(o,r,a,s),this.cxt.globalCompositeOperation="destination-out",this.cxt.fillStyle="rgba(255,255,255,1)",this.cxt.fillRect(o,r,a,s)}this.cxt.globalCompositeOperation="source-over",this.cxt.strokeStyle="#FF7F7D",this.cxt.lineWidth="5",this.cxt.strokeRect(this.x[0],this.y[0],t,e),this.cxt.globalCompositeOperation="destination-out",this.cxt.fillStyle="rgba(255,255,255,1)",this.cxt.fillRect(this.x[0],this.y[0],t,e)},clear:function(){this.cxt.clearRect(0,0,this.w,this.h)},removeNode:function(t){t&&t.parentNode&&t.parentNode.removeChild(t)},drawBackground:function(){this.cxt.globalCompositeOperation="copy",this.cxt.fillStyle="rgba(85,85,85,0.5)",this.cxt.fillRect(0,0,document.body.clientWidth,document.body.scrollHeight>window.screen.availHeight?document.body.scrollHeight:window.screen.availHeight),this.cxt.globalCompositeOperation="destination-out"}};t.init()};t()},_getNecData:function(){var t=bds.qa.ShortCut.fbJQ("#feedback_email").val();t==bds.qa.ShortCut.emailPlaceholder&&(t="");var e=bds.qa.ShortCut.fbJQ("#fb_des_content").val();e==bds.qa.ShortCut.issuePlaceholder&&(e="");var n={product_id:bds.qa.ShortCut.product_id,userAgent:navigator.userAgent,issuedesc:encodeURIComponent(e),issueimage:bds.qa.ShortCut.img_data,issuehtml:encodeURIComponent(bds.qa.ShortCut.fbJQ("html").html()),email:t,documentcookie:document.cookie,url:document.location.href};return n},_getProData:function(t){bds.qa.ShortCut.pro_data={level1_type_id:bds.qa.ShortCut.fbJQ(".fb-level-type-block .fb-check").attr("data-value"),query:t,fb_from:"pc"}},sendCanvasData:function(){var t=bds.qa.ShortCut._getNecData();bds.qa.ShortCut._getProData(bds.qa.ShortCut.queryWord),bds.qa.ShortCut.sendDataResult(!0),bds.qa.ShortCut.defaultCut?bds.qa.ShortCut.get_Snapshot():"";
var e="",n=function(){var o=document.getElementById("fb_right_dialog_pagecanvas2");o?(t.issueimage=bds.qa.ShortCut.img_data,i(),window.clearTimeout(e)):e=setTimeout(n,1e3)},i=function(){var e=bds.qa.ShortCut.pro_data,n=bds.qa.ShortCut.fbJQ("#shujufasongzhong");n||bds.qa.ShortCut.fbJQ(".fb-action").append('<div id="shujufasongzhong" style="color:grey;text-align:left;">数据发送中...</div>');var i=document.createElement("iframe"),o="fb_qa_feedback_frame_id";bds.qa.ShortCut.fbJQ("#fb_qa_feedback_frame_id").remove(),document.body.appendChild(i),i.style.display="none",i.contentWindow.name=o;var r=document.createElement("form");r.enctype="multipart/form-data",r.target=o,r.action=bds.qa.ShortCut.base_url_path+"/index.php/feedback/zx/getData",r.method="POST";var a=document.createElement("input");a.type="hidden",a.name="necData",a.value=JSON.stringify(t),r.appendChild(a);var a=document.createElement("input");a.type="hidden",a.name="proData",a.value=JSON.stringify(e),r.appendChild(a),document.body.appendChild(r),r.submit(),i.onload=function(){bds.qa.ShortCut.fbJQ(i).remove(),bds.qa.ShortCut.fbJQ(r).remove(),bds.qa.ShortCut._removeAllElement()}};bds.qa.ShortCut.defaultCut?n():i()},postCrossDomainDataForm:function(){bds.qa.ShortCut._getProData(bds.qa.ShortCut.queryWord);var t=bds.qa.ShortCut._getNecData(),e=bds.qa.ShortCut.pro_data,n=document.createElement("iframe"),i="fb_qa_feedback_frame_id";bds.qa.ShortCut.fbJQ("#fb_qa_feedback_frame_id").remove(),document.body.appendChild(n),n.style.display="none",n.contentWindow.name=i;var o=document.getElementById("fb_right_post_form");if(o){o.enctype="multipart/form-data",o.target=i,o.method="POST";var r=document.createElement("input");r.type="hidden",r.name="necData",r.value=JSON.stringify(t),o.appendChild(r);var r=document.createElement("input");r.type="hidden",r.name="proData",r.value=JSON.stringify(e),o.appendChild(r),o.submit(),bds.qa.ShortCut.sendDataResult(!0),n.onload=function(){bds.qa.ShortCut.fbJQ(n).remove(),bds.qa.ShortCut.fbJQ(o).remove(),bds.qa.ShortCut._removeAllElement()}}},sendDataResult:function(){return bds.qa.ShortCut.popwindowEnd(),!0},_disposeHttps:function(){var t=bds&&bds.util&&bds.util.domain&&bds.util.domain.get;t&&(bds.qa.ShortCut.base_url_path=bds.util.domain.get("http://f3.baidu.com"))},imgLog:function(t){var e="imglog__"+(new Date).getTime(),n=window[e]=new Image;n.onload=n.onerror=function(){window[e]=null},n.src=t,n=null},checkImage:function(t){var e=t.lastIndexOf("."),n=t.substring(e+1).toUpperCase();return!("JPG"!=n&&"GIF"!=n&&"PNG"!=n&&"JPEG"!=n)},_isIE:function(){var t=document.all?!0:!1;return t},_isIE6:function(){var t=document.all?!0:!1,e=t&&!window.XMLHttpRequest;return e},_isIE7:function(){var t=navigator.appName,e=navigator.appVersion,n=e.split(";");if(n.length<=1)return!1;var i=n[1].replace(/[ ]/g,"");return"Microsoft Internet Explorer"==t&&"MSIE7.0"==i},_identifyBrowser:function(){if(window.ActiveXObject)return!1;try{var t=document.createElement("canvas").getContext("2d");return t=null,!0}catch(e){return!1}},_checkFileType:function(t){var e=t.value,n=bds.qa.ShortCut.checkImage(e);if(!n)return bds.qa.ShortCut.popwindow("请上传PNG,JPEG,JPG,GIF等图片文件",100),bds.qa.ShortCut.fbJQ("#fb_shangchuan").val(""),bds.qa.ShortCut.fbJQ(".fb_shangchuan_txt").html(""),!1;var i=t.value.lastIndexOf("\\");document.getElementById("fb_shangchuan_txt").innerHTML=t.value.substring(i+1)},hidwindow:function(){bds.qa.ShortCut.fbJQ("#fb_popwindow").slideUp(500);var t=function(){bds.qa.ShortCut.fbJQ("#fb_popwindow").remove()};setTimeout(t,1e3)},_removeAllElement:function(){bds.qa.ShortCut.fbJQ("#ShortCut_wizard").remove(),bds.qa.ShortCut.fbJQ("#fb_base_wizard_canvas").remove(),bds.qa.ShortCut.fbJQ("#fb_baidu_wizard").remove(),bds.qa.ShortCut.fbJQ("#fb_baidu_right_dialog").remove(),bds.qa.ShortCut.fbJQ("#fb_right_post_form").remove(),bds.qa.ShortCut.fbJQ("#fb_popwindow").remove(),bds.qa.ShortCut.fbJQ("#fb_right_dialog_canvas").remove(),bds.qa.ShortCut.fbJQ("#fb_right_dialog_pagecanvas").remove(),bds.qa.ShortCut.fbJQ("#fb_right_dialog_pagecanvas2").remove(),bds.qa.ShortCut.fbJQ(".fb_cancel_flag").remove(),bds.qa.ShortCut.is_feedbacking=!1},hidwindowEnd:function(){"pad"==bds.qa.ShortCut.skinStyle?(bds.qa.ShortCut.fbJQ("#fb_baidu_right_dialog").css("display","none"),bds.qa.ShortCut.fbJQ("#ShortCut_wizard").css("display","none"),bds.qa.ShortCut.fbJQ("#fb_base_wizard_canvas").css("display","none"),bds.qa.ShortCut.fbJQ("#fb_baidu_wizard").css("display","none"),bds.qa.ShortCut.fbJQ("#fb_right_post_form").css("display","none"),bds.qa.ShortCut.fbJQ("#fb_popwindow").css("display","none"),bds.qa.ShortCut.fbJQ("#fb_right_dialog_canvas").css("display","none"),bds.qa.ShortCut.fbJQ("#fb_right_dialog_pagecanvas").css("display","none"),bds.qa.ShortCut.fbJQ("#fb_right_dialog_pagecanvas2").css("display","none"),bds.qa.ShortCut.fbJQ(".fb_cancel_flag").css("display","none")):(bds.qa.ShortCut.fbJQ("#fb_baidu_right_dialog").fadeOut(500),bds.qa.ShortCut.fbJQ("#ShortCut_wizard").fadeOut(500),bds.qa.ShortCut.fbJQ("#fb_base_wizard_canvas").fadeOut(500),bds.qa.ShortCut.fbJQ("#fb_baidu_wizard").fadeOut(500),bds.qa.ShortCut.fbJQ("#fb_right_post_form").fadeOut(500),bds.qa.ShortCut.fbJQ("#fb_popwindow").fadeOut(500),bds.qa.ShortCut.fbJQ("#fb_right_dialog_canvas").fadeOut(500),bds.qa.ShortCut.fbJQ("#fb_right_dialog_pagecanvas").fadeOut(500),bds.qa.ShortCut.fbJQ("#fb_right_dialog_pagecanvas2").fadeOut(500),bds.qa.ShortCut.fbJQ(".fb_cancel_flag").fadeOut(500))},popwindow:function(t){var e=document.getElementById("fb_pop_tips");e||bds.qa.ShortCut.fbJQ(".fb-action").append("<div id='fb_pop_tips' style='height:25px;line-height:20px; padding-top: 3px;'><span style='color:red;'>"+t+"</span></div>"),("center"==bds.qa.ShortCut.showPosition||"top"==bds.qa.ShortCut.showPosition)&&bds.qa.ShortCut.fbJQ("#fb_pop_tips").css("text-align","center"),bds.qa.ShortCut.fbJQ("#fb_pop_tips").fadeOut(3500);var n=function(){bds.qa.ShortCut.fbJQ("#fb_pop_tips").remove()};setTimeout(n,4e3)},popwindowEnd:function(){document.getElementById("fb_qa_feedback_body").style.height="auto",bds.qa.ShortCut.fbJQ(".fb-modal").css("margin-top","150px"),bds.qa.ShortCut.fbJQ(".fb-action").css("height","auto"),bds.qa.ShortCut.fbJQ(".fb-action").css("width",bds.qa.ShortCut.fbJQ("#fb_qa_feedback_body").width()+20+"px"),bds.qa.ShortCut.fbJQ("#fb_dialog_header").css("margin-top","0px"),bds.qa.ShortCut.fbJQ("#fb_dialog_header").css("bottom","inherit"),bds.qa.ShortCut.fbJQ(".fb-footer").remove(),bds.qa.ShortCut.fbJQ(".fb-guide").remove(),bds.qa.ShortCut.fbJQ(".fb-action").css({"margin-left":"0px","text-align":"center"}),bds.qa.ShortCut.fbJQ(".fb-action").html('<div class="fb-finished" ><img src="'+bds.qa.ShortCut.base_url_path+'/feedback/images/fb_ok.png" style="float: left;margin-left: 30px;margin-top: 25px;"><p style="line-height: 80px;font-size: 16px;">您的意见我们已经收到，谢谢！</p><div>'),setTimeout(bds.qa.ShortCut.hidwindowEnd,2500)},_getWizardPosition:function(){bds.qa.ShortCut.fbJQ(".fb-baidu-wizard").css("height",parseInt(Math.max(document.body.scrollHeight,document.documentElement.clientHeight,document.body.clientHeight))+"px"),bds.qa.ShortCut.fbJQ(".fb-baidu-wizard").css("width",this.win_width+"px")},_getDialogPosition:function(){var t=bds.qa.ShortCut._getClientHeight()-bds.qa.ShortCut.fbJQ("#fb_baidu_right_dialog").height();0>t&&(t=0);var e=bds.qa.ShortCut._getClientWidth()-bds.qa.ShortCut.fbJQ("#fb_baidu_right_dialog").width();0>e&&(e=0),"right"==bds.qa.ShortCut.showPosition?(bds.qa.ShortCut.fbJQ("#fb_baidu_right_dialog").css("right","5px"),bds.qa.ShortCut.fbJQ("#fb_baidu_right_dialog").css("bottom","5px")):"center"==bds.qa.ShortCut.showPosition?(bds.qa.ShortCut.fbJQ("#fb_baidu_right_dialog").css("top",parseInt(t/2)+"px"),bds.qa.ShortCut.fbJQ("#fb_baidu_right_dialog").css("left",parseInt(e/2)+"px")):"top"==bds.qa.ShortCut.showPosition?(bds.qa.ShortCut.fbJQ("#fb_baidu_right_dialog").css("top","15px"),bds.qa.ShortCut.fbJQ("#fb_baidu_right_dialog").css("left",parseInt(e/2)+"px")):"custom"==bds.qa.ShortCut.showPosition?(bds.qa.ShortCut.fbJQ("#fb_baidu_right_dialog").css("bottom",this.dialogPosition.bottom?this.dialogPosition.bottom:"5px"),bds.qa.ShortCut.fbJQ("#fb_baidu_right_dialog").css("left",this.dialogPosition.left?this.dialogPosition.left:"5px")):"bottom_right"==bds.qa.ShortCut.showPosition?(bds.qa.ShortCut.fbJQ("#fb_baidu_right_dialog").css("right",this.dialogPosition.right?this.dialogPosition.right:"5px"),bds.qa.ShortCut.fbJQ("#fb_baidu_right_dialog").css("bottom",this.dialogPosition.bottom?this.dialogPosition.bottom:"5px")):"bottom_left"==bds.qa.ShortCut.showPosition&&(bds.qa.ShortCut.fbJQ("#fb_baidu_right_dialog").css("left",this.dialogPosition.left?this.dialogPosition.left:"5px"),bds.qa.ShortCut.fbJQ("#fb_baidu_right_dialog").css("bottom",this.dialogPosition.bottom?this.dialogPosition.bottom:"5px")),bds.qa.ShortCut.fbJQ("#fb_baidu_right_dialog").css("position","fixed")},_isUpperIos6:function(){return navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPod/i)?Boolean(navigator.userAgent.match(/OS [6-9]_\d[_\d]* like Mac OS X/i)):!1},_getCss:function(){!function(){if(!document.getElementById("fb_css")){var t=bds.qa.ShortCut._getCssName(),e=document.createElement("link");e.type="text/css",e.rel="stylesheet",e.id="fb_css",e.media="screen",e.href=bds.qa.ShortCut.base_url_path+"/feedback/css/"+t;var n=document.getElementsByTagName("head")[0];n.appendChild(e)}}()},_getCssName:function(){var t="";return t=t+"fb_"+bds.qa.ShortCut.skinStyle+"_0.3.css"},_getImg:function(){var t=function(t){var e=new Image;e.src=t,e.complete||(e.onload=function(){e.onload=null})};t(bds.qa.ShortCut.base_url_path+"/feedback/images/cancel.png"),t(bds.qa.ShortCut.base_url_path+"/feedback/images/"+bds.qa.ShortCut.upImg),t(bds.qa.ShortCut.base_url_path+"/feedback/images/fb_ok.png"),t(bds.qa.ShortCut.base_url_path+"/feedback/images/fb_mouse.png")},_repaint:function(){bds.qa.ShortCut._getWizardPosition(),bds.qa.ShortCut._getDialogPosition()},_getClientHeight:function(){var t=0;return document.documentElement&&document.documentElement.clientHeight?t=document.documentElement.clientHeight:document.body&&(t=document.body.clientHeight),parseInt(t)},_getClientWidth:function(){var t=0;return document.documentElement&&document.documentElement.clientWidth?t=document.documentElement.clientWidth:document.body&&(t=document.body.clientWidth),parseInt(t)},_fixedPage:function(){bds.qa.ShortCut._getDialogPosition(),("center"==bds.qa.ShortCut.showPosition||"top"==bds.qa.ShortCut.showPosition)&&bds.qa.ShortCut.fbJQ(".fb-footer").css("text-align","center"),bds.qa.ShortCut._isIE6()&&(bds.qa.ShortCut.fbJQ("#fb_baidu_right_dialog").css("position","absolute"),("right"==bds.qa.ShortCut.showPosition||"bottom_left"==bds.qa.ShortCut.showPosition||"bottom_right"==bds.qa.ShortCut.showPosition)&&bds.qa.ShortCut.fbJQ("#fb_baidu_right_dialog").css("top",parseInt(document.documentElement.clientHeight+document.documentElement.scrollTop-bds.qa.ShortCut.fbJQ("#fb_baidu_right_dialog").height()-5)+"px")),bds.qa.ShortCut.fbJQ("#fb_baidu_right_dialog").css({width:100}).animate({width:342},{duration:200,step:function(t,e){"width"==e.prop&&bds.qa.ShortCut.fbJQ("#fb_baidu_right_dialog").css({opacity:parseInt(t/360/2)})},done:function(){bds.qa.ShortCut.fbJQ("#fb_baidu_right_dialog").css({opacity:1,display:"block"})}})},default_options:{product_id:0,entrance_id:0,plugintitle:"",issueTips:"反馈内容",issuePlaceholder:"欢迎提出您在使用过程中遇到的问题或宝贵建议（400字以内），感谢您对百度的支持。",emailPlaceholder:"请留下您的联系方式，以便我们及时回复您。",guide:'<span>申请删除百度快照内容，请在<a style="text-decoration:underline;" href="http://tousu.baidu.com/webmaster/add" target="_blank">网页搜索投诉中心</a>提交。</span><br><span>网站收录、流量等站长相关问题，请在<a style="text-decoration:underline;" href="http://zhanzhang.baidu.com/feedback/index" target="_blank">站长平台</a>反馈。</span>',cutFileTips:"点我可以上传图片哦~",cutCanvasTips:'&nbsp;点我可以在当前页面截图哦~&nbsp;<a style="text-decoration:underline;color:#2d9ef8;" href="http://f3.baidu.com/index.php/feedback/tiyan/steps" target="_blank">使用方法</a>',emailTips:"联系方式",needIssueTips:!0,needLevelType:!0,needIssue:!0,needCut:!0,needEmail:!0,needGuide:!1,defaultCut:!1,showPosition:"right",onlyUpFile:!1,cutImg:"jietu.png",upImg:"upload.png",skinStyle:"flat"}},module.exports=bds});
;/*!searchdetail:widget/ui/controls/imgtoolbarnew/wallpaper/checkax.js*/
define("searchdetail:widget/ui/controls/imgtoolbarnew/wallpaper/checkax",function(e,t,i){var n=function(e){var t=function(){return"Win32"==e.navigator.platform&&e.navigator.userAgent.toLowerCase().indexOf("wow64")<=0?!0:!1},i=function(){if(t())if(e.navigator.userAgent.indexOf("MSIE")>0)try{if(document.getElementById("BDWallpaper"))return document.getElementById("BDWallpaper");var i=document.createElement("div");return i.style.display="none",document.body.appendChild(i),i.innerHTML='<OBJECT ID="BDWallpaper" CLASSID="CLSID:03D2BA47-F4B2-45ba-BD3A-4DE2D5797DAC" ></OBJECT>',document.getElementById("BDWallpaper")}catch(n){}else{var a=e.navigator.mimeTypes["application/baiduwp-activex"];if(a){var r=e.navigator.mimeTypes["application/baiduwp-activex"];if(r){if(document.getElementById("BDWallpaper"))return document.getElementById("BDWallpaper");var o=document.createElement("embed");return o.style.visibility="hidden",o.type="application/baiduwp-activex",o.width=0,o.height=0,o.setAttribute("progid","wpbpluginAX.BrowserControl.1"),o.setAttribute("id","BDWallpaper"),document.body.appendChild(o),o}}}},n=function(){if(t()){if(e.navigator.userAgent.indexOf("MSIE")>0)try{{new ActiveXObject("wpbpluginAX.BrowserControl.1")}}catch(i){return!1}else{var n=e.navigator.mimeTypes["application/baiduwp-activex"];if(!n){if(navigator.plugins){navigator.plugins.refresh(!1);for(var a=0;a<navigator.plugins.length;a++)if(navigator.plugins[a][0].type&&"application/baiduwp-activex"==navigator.plugins[a][0].type)return!0}return!1}}return!0}return alert("Only support windows 32bit!"),!1},a=!1,r=function(e,t){n()?e&&"function"==typeof e&&!a&&(e(),a=!0):(t||(t=100),setTimeout(function(){r(e,t)},t))};return{exist:n,instance:i,checkSys:t,pollingCheck:r}}(window);i.exports=n});
;/*!searchdetail:widget/ui/controls/imgtoolbarnew/wallpaper/wallpaper.js*/
define("searchdetail:widget/ui/controls/imgtoolbarnew/wallpaper/wallpaper",function(t){function i(){this.imgData={}}function e(t,i){this.$pnl=t,this.$btn=t.find(".btn-wallp-in"),this.$flashPnl=t.find(".flashpnl"),this.$tip=n(null),this._tipHideTimer=!1,this.flashCtrl=null,this.opts=n.extend({popUrl:"http://bizhi.baidu.com/imagepreview/index.html",redirectUrl:location.protocol+"//"+location.host+"/static/searchdetail/html/crosswallpaper.html"},i)}var n=t("common:widget/ui/base/base"),r=t("common:widget/ui/base/events"),a=t("searchdetail:widget/ui/utils/swf"),l=t("searchdetail:widget/ui/controls/imgtoolbarnew/wallpaper/checkax");n.extend(i.prototype,r,{init:function(){var t=this,i=window.BD||{};i.IMG=i.IMG||{},window.WP9278A0FC9F485dB8C86BAA1688E99F=function(){t.pluginProc()},i.IMG.getCurrImgURL=function(){return t.getCurrImgURL()},i.IMG.setWallPaper=function(){t.setWallPaper()}},pluginProc:function(){var t=l.instance(),i=t.GetErrorCode();this.fire("pluginExit",{errCode:i})},getCurrImgURL:function(){var t="/search/down?tn=download&word=download&ie=utf8&fr=detailWall&url=",i=this.imgData;return t+encodeURIComponent(i.objURL)+"&height="+i.height+"&width="+i.width},setWallPaper:function(){l&&l.exist()?l.instance().WebSetWallpaper(this.getCurrImgURL()):this.fire("trySetWallPaper")}}),n.extend(e.prototype,r,{init:function(){a.swf.create({id:"flashPreView",url:"/static/searchdetail/flash/WallpaperImages.swf?v=1",width:"72",height:"30",wmode:"transparent",allowFullScreen:"true",errorMessage:"载入FLASH出错",ver:"9.0.0",vars:{preview:1,system:this._getSystemVar(),imagesurl:""}},this.$flashPnl[0]);var t=!!this.$flashPnl.find("object").length;return t&&(this._initBtnState(),this.flashCtrl=new i,this.flashCtrl.on("trySetWallPaper",this._setWallPaperHandler.bind(this)),this.flashCtrl.on("pluginExit",this._pluginExitHandler.bind(this))),t},_initBtnState:function(){if(l.exist())this.$btn.hide(),this.$flashPnl.show();else{var t=this;this.$flashPnl.hide(),this.$btn.show().on("click",function(i){i.preventDefault(),t.showPop()})}},_getSystemVar:function(){var t="";return t="Win32"==navigator.platform?navigator.userAgent.indexOf("Windows NT 5")>-1?"xp":"win7":"xp"},update:function(t){this.flashCtrl&&(this.flashCtrl.imgData=t),t.bigImgUrl&&t.width>=1024&&t.height>=640&&!/\.nipic\.com/.test(t.objURL)?this.$pnl.show():this.$pnl.hide()},showPop:function(){var t=this.flashCtrl.getCurrImgURL(),i=this,e='<div id="iframeBg" class="iframeBg"></div><div id="disIframe" class="disIframe"><iframe id="bizi-iframe" frameborder="0" width="907px" height="452px"></iframe></div>';if(document.getElementById("iframeBg"));else{window.__closeWallPaperPop__=function(t){i._pluginExitHandler({errCode:t})},n(document.body).append(e);var r=this.opts.popUrl+"?redirecturl="+encodeURIComponent(this.opts.redirectUrl)+"&imageurl="+encodeURIComponent(t)+"&"+(new Date).getTime();document.getElementById("bizi-iframe").src=r,n("#iframeBg").on("click",function(){i.hidePop()})}},hidePop:function(){document.getElementById("iframeBg")&&n("#iframeBg").remove(),document.getElementById("disIframe")&&n("#disIframe").remove()},showTip:function(t){this.$tip.length||(this.$tip=n('<div class="wallpaper-info"></div>').appendTo(document.body)),this._tipHideTimer&&(this._tipHideTimer=clearTimeout(this._tipHideTimer)),this.$tip.text(t).show();var i=this;this._tipHideTimer=setTimeout(function(){i.$tip.hide()},1500)},_setWallPaperHandler:function(){this.showPop()},_pluginExitHandler:function(t){t.errCode&&this.showTip(1==t.errCode?"设置成功":"设置失败"),this.hidePop(),this._initBtnState()}});var s=null,o=!1;return{init:function(t){return s||o||(l&&l.checkSys()&&(s=new e(t),s.init()||(s=null)),s||(o=!0,t.hide())),s}}});
;/*!searchdetail:widget/ui/controls/imgtoolbarnew/imgtoolbarnew.js*/
define("searchdetail:widget/ui/controls/imgtoolbarnew/imgtoolbarnew",function(t){function e(t,e,o){this.$pnl=t,this.imgModel=null,this.elements=i.extend({wallpaperBtn:"",zoomScale:"",zoomIn:"",zoomOut:"",zoomToggle:"",downloadLink:"",toPhoneBtn:"",favoBtn:"",fullScreenBtn:"",dutuSwitcher:"",reportLink:""},e),this.opts=i.extend({imgPnl:"",img:""},o),this.zoomViewCtrl=null,this.fullScreenCtrl=null,this.qrcodePopCtrl=null,this.favoViewCtrl=null,this.wallpaperCtrl=null,this.responsiveCtrl=null}var i=t("common:widget/ui/base/base"),o=(t("common:widget/ui/utils/utils"),t("common:widget/ui/base/events")),n=t("searchdetail:widget/ui/databinder/databind"),l=t("searchdetail:widget/ui/controls/imgtoolbarnew/zoomview/zoomview"),s=t("searchdetail:widget/ui/controls/imgtoolbarnew/qrcodepop/qrcodepop"),r=t("searchdetail:widget/ui/controls/imgtoolbarnew/downloadtip/downloadtip"),a=t("searchdetail:widget/ui/controls/imgtoolbarnew/favo/favoview"),d=t("searchdetail:widget/ui/controls/imgtoolbarnew/feedbacknew/feedbacknew"),h=t("searchdetail:widget/ui/controls/imgtoolbarnew/wallpaper/wallpaper"),u=t("searchdetail:widget/ui/controls/fullscreen/fullscreen"),c=t("searchdetail:widget/ui/models/settingmodel"),p=t("searchdetail:widget/ui/controls/responsive/responsive"),w=t("searchdetail:widget/ui/app/pagemodel"),m=t("searchdetail:widget/ui/statistic/statistic-core");return i.extend(e.prototype,o,{init:function(t,e){this.imgModel=e,this.$pnl=i(this.$pnl);var o=this.elements,n=this.$pnl;for(var d in o)o.hasOwnProperty(d)&&(o[d]=n.find(o[d]));this.zoomViewCtrl=new l({scale:o.zoomScale,zoomIn:o.zoomIn,zoomOut:o.zoomOut,zoomToggle:o.zoomToggle,img:this.opts.img,imgPnl:this.opts.imgPnl}),this.zoomViewCtrl.init(),this.qrcodePopCtrl=new s,this.qrcodePopCtrl.setTrigger(o.toPhoneBtn),this.favoViewCtrl=new a(o.favoBtn),this.favoViewCtrl.init(),this.downloadTopControl=new r,this.downloadTopControl.init(this.$pnl.parent().parent()),this.setDutuSwitcherText(),this._bindEvent()},_bindEvent:function(){var t=this.elements,e=this;t.downloadLink.on("click",function(t){t.preventDefault(),e.qrcodePopCtrl.visible||e.qrcodePopCtrl.show()}),t.reportLink.on("click",function(){var e=t.reportLink.offset(),o=342,n=i(window).height()-e.top,l=e.left+41-o/2,s=encodeURIComponent(w.get("queryWord")),r={product_id:103,showPosition:"custom",dialogPosition:{left:l,bottom:n},cutImg:"//img0.bdstatic.com/static/searchdetail/widget/ui/controls/imgtoolbarnew/feedbacknew/img/jietu_98b303c.png"};d.qa.ShortCut.initRightBar(r,s)}),t.dutuSwitcher.on("click",function(){var t=e.toggleDutuSetting();m.send("5.1009109",{tn:"baiduimagedetail",fm:"face",act:t?"open":"close"})})},bindModel:function(t,e,i){n.bind(t,"scale",this.zoomViewCtrl,"updateScale","changeScale"),i?n.bind(t,"imgDeepData",this,"update"):n.bind(t,"imgData",this,"update"),n.bind(t,"bigImgUrl",this,"refreshState"),this._initFullScreenCtrl(e,t),this.wallpaperCtrl=h.init(this.elements.wallpaperBtn),this.wallpaperCtrl&&n.bind(t,"imgData",this.wallpaperCtrl,"update")},_initFullScreenCtrl:function(t,e){return this.fullScreenCtrl=u.init(t,e,this.elements.fullScreenBtn),this.fullScreenCtrl},_initResponsive:function(){var t=this.elements,e=[t.toPhoneBtn,t.favoBtn,t.reportLink],i=[t.zoomOut,t.zoomScale,t.zoomIn,t.downloadLink];this.wallpaperCtrl&&i.push(t.wallpaperBtn),this.fullScreenCtrl&&i.push(t.fullScreenBtn),this.responsiveCtrl=new p(e,i)},update:function(t,e){function i(){var e=(t.group,t.star_face),i=t.auto_info,o=t.cloth,n=t.wiki_face_entity,l=t.srv_auto,s=[],r=[];if(i&&1==i.length&&l&&r.push(i[0]),e&&e.length>0&&n&&n.length>0){var a,d;for(a=n.length-1;a>=0;a--)for(d=e.length-1;d>=0;d--)e[d].entity===n[a].ne&&s.unshift(e[d])}var h=r.length>0||s.length>0||t.default_auto_info||t.default_star_face||o||0==s.length&&n&&n.length>0;return h}this.responsiveCtrl||(this.$pnl.show(),this._initResponsive(),this.responsiveCtrl.resize(this.$pnl.parent().width()));var o=this.elements;o.downloadLink.attr("href","/search/down?tn=download&word=download&ie=utf8&fr=detail&url="+encodeURIComponent(t.objURL)+"&thumburl="+encodeURIComponent(t.thumbURL));var n=this.qrcodePopCtrl._validMaterial(t.sucai_info),l=this.qrcodePopCtrl._validWallpaper(t.wallp_info);l||n?o.downloadLink.find(".hdicon").show():o.downloadLink.find(".hdicon").hide(),this.qrcodePopCtrl&&this.qrcodePopCtrl.update(t,e),this.favoViewCtrl.update(t,e),i()?(o.dutuSwitcher.show(),this.downloadTopControl.repos(1)):(o.dutuSwitcher.hide(),this.downloadTopControl.repos(0)),this.showSetNum(e)},refreshState:function(t){var e=["wallpaperBtn","zoomScale","zoomIn","zoomOut","downloadLink","toPhoneBtn"],o="disabled",n=!!t,l=this.elements;i(e).each(function(t,e){var i=l[e];n&&i.hasClass(o)?i.removeClass(o):n||i.hasClass(o)||i.addClass(o)})},showSetNum:function(t){var e=t.data.spn+1,o=t.data.rootImg.bdSetImgNum;i(".btn-setnum-index").text(e),i(".btn-setnum-total").text(o),0==o?i(".btn-setnum").css("display","none"):i(".btn-setnum").css("display","inline-block")},resetSize:function(){var t=this.$pnl.parent().width();this.responsiveCtrl&&this.responsiveCtrl.resize(t),this.qrcodePopCtrl&&this.qrcodePopCtrl.refreshPos(),this.favoViewCtrl&&(this.favoViewCtrl.pop&&this.favoViewCtrl.pop.refreshPos(),this.favoViewCtrl.tip&&this.favoViewCtrl.tip.refreshPos()),this.zoomViewCtrl&&this.zoomViewCtrl.resetImgPnlSize();var e=this.elements,o=e.reportLink.offset();d.qa.ShortCut.is_feedbacking&&(d.qa.ShortCut.showPosition="custom",d.qa.ShortCut.dialogPosition={bottom:i(window).height()-o.top,left:o.left+41-171},d.qa.ShortCut._repaint())},setReportLinkState:function(t){var e=this.elements.reportLink;t&&e.hasClass("disabled")?e.removeClass("disabled"):t||e.hasClass("disabled")||e.addClass("disabled")},setDutuSwitcherText:function(){var t=!!c.getValue(c.DUTU_TAG_CLOSE),e=t?"打开图上标签":"关闭图上标签";this.elements.dutuSwitcher.html('<span class="b-before"></span>'+e+"<i></i>").attr("title",e)},toggleDutuSetting:function(){var t=!!c.getValue(c.DUTU_TAG_CLOSE);return c.setValue(c.DUTU_TAG_CLOSE,t?"":"1"),this.setDutuSwitcherText(),t&&i("#dutu-anchor-wrapper").css("display",""),t&&this.elements.dutuSwitcher.trigger("mouseover"),!!t}}),e});
;/*!searchdetail:widget/ui/controls/albumslider/imgselectedlist/item.js*/
define("searchdetail:widget/ui/controls/albumslider/imgselectedlist/item",function(i){function t(i,t){this.$element=e(t),this.$img=e(null),this.$imgBox=e(null),this.view=e.extend({className:"imgitem",focusClass:"focus",focusClass4Ie6:"imgitem-focus",imgMaxSize:{width:70,height:70},imgFocusSize:{width:76,height:76},html:'<li><div class="img-box"><img /></div></li>',diableTitle:!1},i),this.imgData=null}var e=i("common:widget/ui/base/base"),s=i("common:widget/ui/utils/utils"),a=i("common:widget/ui/base/events"),h=i("searchdetail:widget/ui/utils/imghelper");return e.extend(t.prototype,a,{render:function(i){var t=this.view,a=e(t.html);return t.className&&a.addClass(t.className),t.diableTitle||a.attr("title",s.trimTags(i.fromPageTitle||i.fromPageTitleEnc||"")),this.$imgBox=a.find(".img-box"),this.$img=a.find("img"),this.$element=a,this.setImage(i),a},init:function(){this.$img=this.$element.find("img"),this.$imgBox=this.$element.find(".img-box")},getWidth:function(){return this.$element.width()},getFocusedWidth:function(){return this.getWidth()},isFocus:function(){return this.$element.hasClass(this.view.focusClass)},focus:function(){var i=this.$element,t=this.view.focusClass,e=i.find("img");i.hasClass(t)||i.addClass(t).addClass(this.view.focusClass4Ie6);var s=h.zoom(this.imgData,this.view.imgFocusSize);1===e.length&&e.attr({width:s.width,height:s.height})},display:function(){},blur:function(){var i=this.$element,t=this.view.focusClass,e=i.find("img");i.hasClass(t)&&i.removeClass(t).removeClass(this.view.focusClass4Ie6);var s=h.zoom(this.imgData,this.view.imgMaxSize);1===e.length&&e.attr({width:s.width,height:s.height})},setImage:function(i){var t=h.zoom(i,this.view.imgMaxSize);if(i.key&&i.objURL&&i.imgUrl!=i.objURL){var e=this.$img[0],a=this;e.onerror=function(){i.key==a.imgData.key&&(e.src=i.objURL),setTimeout(function(){e.onerror=null})}}this.$img.attr({src:i.imgUrl,width:t.width,height:t.height}),this.view.diableTitle||this.$element.attr("title",s.trimTags(i.fromPageTitle||i.fromPageTitleEnc||"")),this.imgData=i}}),t});
;/*!searchdetail:widget/ui/controls/albumslider/imgselectedlist/list.js*/
define("searchdetail:widget/ui/controls/albumslider/imgselectedlist/list",function(t){function e(t,e){this.$element=t,this.itemConf=i.extend({selector:">li.imgitem",selectedClass:"focus",indexTpl:"",width:80,marginRight:10,total:0},e),this.selectedItem={ctrl:null,index:-1},this.indexs={start:0,end:0},this.controls={}}var i=t("common:widget/ui/base/base"),n=t("common:widget/ui/utils/utils"),s=t("common:widget/ui/base/events"),r=t("searchdetail:widget/ui/controls/albumslider/imgselectedlist/item");return i.extend(e.prototype,s,{getElement:function(){return this.$element},getWidth:function(){this.$element.width()},setTotal:function(t){this.itemConf.total=t},getTotal:function(){return this.itemConf.total},getItemCount:function(){return this.indexs.end-this.indexs.start+1},render:function(){return this.$element=i("<ul></ul>"),this.$element},init:function(){var t=this;this.$element=i(this.$element),this.$element.delegate(this.itemConf.selector,"click",function(e){var n=i(this),s=n.attr("data-idx");s&&!n.hasClass(t.itemConf.selectedClass)&&t.selectItem(s),e.stopPropagation()})},selectItem:function(t){var e=this.selectedItem,i=this.controls[t];e.index!==t&&i?(this.dispatchEvent("selectedChanging",{index:t,item:i}),e.ctrl&&e.ctrl.blur(),e.ctrl=i,e.index=t,i&&i.imgData&&i.imgData.spn,e.ctrl&&e.ctrl.focus(),this.dispatchEvent("selectedChange",{index:t,item:i,subIndex:e.subIndex||0})):e.ctrl||(e.ctrl=i,e.ctrl&&e.ctrl.focus())},getSelectedIndex:function(){return this.selectedItem.index},appendItems:function(t){var e=this.indexs.end+t.length;if(e>=this.itemConf.total-1&&(t=t.slice(0,this.itemConf.total-this.indexs.end-1),e=this.itemConf.total-1),!t.length)return 0;var i=this,n=function(t){return i.indexs.end+t+1},s=this._renderItems(t,n);return s.appendTo(this.$element),this._initItemCtrls(t,n),this.indexs.end=e,t.length},prependItems:function(t){var e=this.indexs.start-t.length;if(0>e&&(t=t.slice(-1*this.indexs.start),e=0),!t.length)return 0;var i=this,n=function(t){return i.indexs.start-t-1},s=this._renderItems(t,n);return s.prependTo(this.$element),this._initItemCtrls(t,n),this.indexs.start=e,t.length},insertItems:function(t,e){return this.indexs.start=t,this.indexs.end=t-1,this.appendItems(e)},_renderItems:function(t,e){for(var s,r,l,d,h=i("<ul></ul>"),o=this.itemConf,c=(o.selectedClass,o.total||t.length),m=t.length-1;m>=0;m--)s=t[m],d=e(m),r=this._createItem(s),l=r.render(i.extend({imgUrl:s.thumbURL,imgWidth:s.width,imgHeight:s.height},s)),l.attr("data-idx",d),o.indexTpl&&i(n.format(o.indexTpl,{index:d+1,total:c})).appendTo(l),l.prependTo(h),this._setItemCtrl(d,r);return h.children()},_createItem:function(){return new r({focusClass:this.itemConf.selectedClass})},_setItemCtrl:function(t,e){t==this.getSelectedIndex()&&(this.selectedItem.ctrl=e),this.controls[t]=e},_initItemCtrls:function(t,e){for(var i,n,s=0;s<t.length;s++)n=e(s),i=this.controls[n],i&&i.init()},emptyItems:function(){this.indexs.start=0,this.indexs.end=0,this.controls={},this.selectedItem.ctrl=null,this.$element.empty()},shiftItems:function(t){if(!t)return 0;var e=this.$element.find(this.itemConf.selector).filter(function(e){return e>=0&&t>e}),t=e.length;return this.indexs.start+=t,this._removeItems(e),t},popItems:function(t){if(!t)return 0;var e=this.$element.find(this.itemConf.selector),i=Math.max(e.length-t,0),n=e.filter(function(t){return t>=i}),t=n.length;return this.indexs.end-=t,this._removeItems(n),t},_removeItems:function(t){var e,n=this.controls;t.each(function(t,s){e=i(s).attr("data-idx"),e&&n[e]&&delete n[e]}),n[this.getSelectedIndex()]||(this.selectedItem.ctrl=null),t.remove()}}),e});
;/*!searchdetail:widget/ui/controls/albumslider/imgselectedlist/setitem.js*/
define("searchdetail:widget/ui/controls/albumslider/imgselectedlist/setitem",function(t){function i(t,i,e,l){t=s.extend({className:"imgsetitem",focusClassNoSub4Ie6:"imgitem-focus",focusClass4Ie6:"imgsetitem-focus",listSwitchBtnWidth:54,minShowSubCount:2,maxShowSubCount:5},t),n.call(this,t,e),this.listControl=i,this._listCtrlDataReady=!1,this.subIndex=l||0,this._initListPro=null}var s=t("common:widget/ui/base/base"),e=t("common:widget/ui/utils/utils"),n=t("searchdetail:widget/ui/controls/albumslider/imgselectedlist/item");return s.extend(i.prototype,n.prototype,{render:function(t){var i=n.prototype.render.call(this,t);return s.browser.msie&&s.browser.version<=6&&i.append('<span class="seti-after"></span>'),i},init:function(){n.prototype.init.call(this);var t=this.view.className;t&&(this.$element.addClass(t)||this.$element.addClass(t))},setSize:function(t){var i=this.getWidth(),s=this.getFocusedWidth(t),e=s-i;0!=e&&(this.$element.width(s),this.setListSize(s),this.fire("sizeChanged",{diff:e}))},setListSize:function(t){this.listControl&&this.listControl.isInited&&(t||(t=this.$element.width()+(s.browser.msie&&6==s.browser.version?2:0)),this.listControl.setPnlWidth(t-this.view.listPadding))},resetSize:function(t){this.setSize(t),this.listControl&&this.listControl.isInited&&this.listControl.resetSize()},getFocusedWidth:function(t){var i=this.listControl?this.listControl.getTotal():1;if(i>1){var s=this.view,e=this.listControl.getItemPlaceWidth(),n=Math.floor((t-s.listSwitchBtnWidth)/e),l=Math.min(s.maxShowSubCount,i,Math.max(n,s.minShowSubCount)),o=l*e+s.listSwitchBtnWidth;return o}return this.getWidth()},display:function(t){var i=this;this._listCtrlDataReady?(this.setSize(t),this._showList()):this._initListData(t).then(function(){i._showList()})},_initListCtrl:function(){var t=this.listControl;t.render().appendTo(this.$element),t.init(),this.view.listPadding=e.UI.getCssDigitValueSum(t.$pnl,["padding-left","padding-right"]),this.setListSize()},_initListData:function(t){var i=this;return this._initListPro?this._initListPro:(this._initListPro=this.listControl.load(20).then(function(s){i._listCtrlDataReady=!0,i._initListPro=null,i.listControl.getTotal()<2?(i.$element.removeClass(i.view.className),i.isFocus()&&(i.$element.removeClass(i.view.focusClass4Ie6),i.view.focusClass4Ie6=i.view.focusClassNoSub4Ie6,i.$element.addClass(i.view.focusClass4Ie6))):(i.$element.attr("title",""),i.view.diableTitle=!0,i.setSize(t),i._initListCtrl(),i.listControl.insertItems(0,s))}),this._initListPro)},_showList:function(){var t=this.listControl,i=t.getTotal();i>1&&(t.selectItem(this.subIndex||0),t.getElement().show(),this.$imgBox.hide(),t.resetSize())},blur:function(){var t=this.getWidth();this.$element.width(this.view.imgMaxSize.width),this.$imgBox.show(),this.listControl&&this.listControl.isInited&&this.listControl.getElement().hide(),n.prototype.blur.call(this),this.subIndex=0;var i=this.view.imgMaxSize.width-t;0!=i&&this.fire("sizeChanged",{diff:i})},setImage:function(t){n.prototype.setImage.call(this,t),this.listControl.setTotal(1*(t.bdSetImgNum||2))}}),i});
;/*!searchdetail:widget/ui/controls/albumslider/honscrollpanel.js*/
define("searchdetail:widget/ui/controls/albumslider/honscrollpanel",function(t){function s(t,s,i){this.$pnl=t,this.$content=s,this.offset=0,this.maxOffset=0,this._scrolling={targetOffset:0,pro:null},this.opts=e.extend({step:0},i)}var e=t("common:widget/ui/base/base"),i=t("common:widget/ui/base/events"),n=t("common:widget/ui/arch/behavior/animation");return e.extend(s.prototype,i,{init:function(){this.$pnl=e(this.$pnl),this.$content=e(this.$content),this.offset=this.getOffset(),this._calcMaxOffset()},_adjustOffset:function(t,s,e){t=Math.min(t,0);var i=this.getMaxOffset();i>t+e&&(t=i);var n=this.opts.step;return n>0?(s=s||Math.round,s(t/n)*n):t},_calcMaxOffset:function(){var t=this.$pnl.width(),s=this.$content.width(),i=t%this.opts.step;e.browser.msie&&6==e.browser.version&&5>=i&&(i=0),this.maxOffset=Math.min(t-s-(i>0?this.opts.step:0),0)},getScrollEnable:function(t){var s=this.offset;if(t)return 0!=s;var i=this.$pnl.width(),n=i%this.opts.step,o=this.getMaxOffset();return e.browser.msie&&6==e.browser.version&&5>=n&&(n=0),s>o+(n>0?this.opts.step:0)},getOffset:function(){if(this.$pnl.parent().length)return this.$content.position().left;var t=this.$content.css("left");return t?1*t.replace("px",""):0},setOffset:function(t){t=this._adjustOffset(t),this.offset=t,this.$content.css("left",t)},getMaxOffset:function(){return this.maxOffset},setWidth:function(t){this.$pnl.width(t||0),this._calcMaxOffset()},setContentWidth:function(t){this.$content.width(t||0),this._calcMaxOffset()},scrollToStep:function(t,s){return this.opts.step?this.scrollTo(this.opts.step*t*-1,s):void 0},scrollTo:function(t,s){var i={},o=this;return s=s||{},i.left=this._adjustOffset(t||0,null,s.allowGap||0),i.left==this._scrolling.targetOffset&&this._scrolling.pro?this._scrolling.pro:i.left==this.offset?(o.dispatchEvent("scrollEnd"),(new e.Deferred).resolve()):(this.$content.stop(!0,!0),s.step=function(t){o.dispatchEvent("scrolling",{offset:t})},o.abort(),o.dispatchEvent("scrollStart"),this._scrolling.targetOffset=i.left,this._scrolling.pro=n.animate(this.$content,i,s).then(function(){o.offset=i.left,o._scrolling.pro=null,o.dispatchEvent("scrollEnd")}),this._scrolling.pro)},scrollBy:function(t,s){return this.scrollTo(t+this.offset,s)},abort:function(){this.$content.stop(!0,!0)},stopScroll:function(t){this.$content.stop(),this.offset=this.getOffset();var s=t?Math.ceil:Math.floor,e=this._adjustOffset(this.offset,s);this.scrollBy(e-this.offset)}}),s});
;/*!searchdetail:widget/ui/controls/albumslider/sliderlist.js*/
define("searchdetail:widget/ui/controls/albumslider/sliderlist",function(t){function e(t,e,i,n){s.call(this,t.list,e),this.imgCollection=i,this.$pnl=t.pnl,this.$content=t.content,this.scrollPanel=null,this.slideLeftBtn=null,this.slideRightBtn=null,this._conf={prevBtn:t.prevBtn,nextBtn:t.nextBtn},this.isInited=!1,this._itemsLocked=!0,this.selectedItem.subIndex=0,this.sliderListTimeout=null,this.opts={spn:n&&n.spn||0},this.sliderListFlag=!0}var i=t("common:widget/ui/base/base"),n=t("common:widget/ui/utils/utils"),s=t("searchdetail:widget/ui/controls/albumslider/imgselectedlist/list"),l=t("searchdetail:widget/ui/controls/albumslider/imgselectedlist/item"),o=t("searchdetail:widget/ui/controls/albumslider/imgselectedlist/setitem"),r=t("searchdetail:widget/ui/controls/pressbtn/pressbtn"),h=t("searchdetail:widget/ui/controls/albumslider/honscrollpanel"),a=['<div class="#{pnl}">','<div class="#{content}">','<ul class="#{list} clearfix"></ul>',"</div>",'<span class="slider-btn #{slidePrev}" href="javascript:void(0);" hidefocus="true"><i></i></span>','<span class="slider-btn #{slideNext}" href="javascript:void(0);" hidefocus="true"><i></i></span>',"</div>"].join(""),d='<div class="set-index"><strong>#{index}</strong><span class="set-total">#{total}</span></div>';return i.extend(e.prototype,s.prototype,{render:function(){var t=this._conf,e=i(n.format(a,{pnl:this.$pnl.substr(1),content:this.$content.substr(1),list:this.$element.substr(1),slidePrev:t.prevBtn.substr(1),slideNext:t.nextBtn.substr(1)}));return this.$pnl=e,this.$element=e.find(this.$element),this.$content=e.find(this.$content),e},init:function(){s.prototype.init.call(this),this.$pnl=i(this.$pnl),this.$content=this.$pnl.find(this.$content),this._conf.contentPadding=n.UI.getCssDigitValueSum(this.$content,["padding-left","padding-right"]),this.$content.width(this.$pnl.width()-this._conf.contentPadding),this._conf.itemCountPerScreen=this._calcItemCountPerScreen();var t=this._conf;this._initScrollPnl(),this.slideLeftBtn=new r(this.$pnl.find(t.prevBtn),{disabledClass:"slider-btn-prev-disabled",disabledTitle:"已经是第一张图"}),this.slideRightBtn=new r(this.$pnl.find(t.nextBtn),{disabledClass:"slider-btn-next-disabled",disabledTitle:"已经是最后一张图"}),this.slideLeftBtn.init(),this.slideRightBtn.init(),this._updateSlideBtnState(),this._bindEvent(),this.isInited=!0},_initScrollPnl:function(){var t=i('<div style="position:relative;"><ul style="position:relative;left:0;"></ul></div>'),e=new h(t,t.find("ul"),{step:this.getItemPlaceWidth()});this.scrollPanel=e,e.init(),this._updateScrollPnlSize()},_updateScrollPnlSize:function(t,e){var i=this.scrollPanel;i&&(t=t||this.getWidth(),e=e||this.getItemPlaceWidth(),i.setWidth(t),i.setContentWidth(e*(this.itemConf.total+(this.itemConf.hasTail?1:0))))},_bindEvent:function(){this.scrollPanel.addEventListener("scrollStart",this._scrollStart.bind(this)),this.scrollPanel.addEventListener("scrolling",this._scrolling.bind(this)),this.scrollPanel.addEventListener("scrollEnd",this._scrollEnd.bind(this)),this._bindSlideBtnEvent(this.slideLeftBtn,!0),this._bindSlideBtnEvent(this.slideRightBtn,!1),this.itemConf.enableWheel&&(!i.browser.mozilla||"onmousewheel"in document.body?this.$content.on("mousewheel",this._wheelHandler.bind(this)):this.$content.on("DOMMouseScroll",this._wheelHandler.bind(this)))},_bindSlideBtnEvent:function(t,e){var i=this;t.addEventListener("clicked",function(){i.switchScreen(e)}),t.addEventListener("pressing",function(){var t=i.scrollPanel.offset,n=e?0:-1*i.getItemPlaceWidth()*(i.itemConf.total+(i.itemConf.hasTail?1:0)),s=/chrome\/(\d+\.\d+)/i.test(navigator.userAgent)?.6:.8;i.scrollPanel.scrollTo(n,{duration:Math.abs(n-t)/s,easing:"linear"})}),t.addEventListener("pressEnd",function(){i.scrollPanel.stopScroll(e)})},getElement:function(){return this.$pnl},setPnlWidth:function(t){var e=t-this._conf.contentPadding,i=this.getItemPlaceWidth();this.$pnl.width(t),this.$content.width(e),this._conf.itemCountPerScreen=this._calcItemCountPerScreen(e,i),this._updateScrollPnlSize(e,i),this._updateSlideBtnState()},getWidth:function(){return this.$content.width()},_calcItemCountPerScreen:function(t,e){t=t||this.getWidth(),e=e||this.getItemPlaceWidth();var i=(t+this.itemConf.marginRight)/e,n=Math.floor(i);return n+(i-n>=.9?1:0)},getItemCountPerScreen:function(){return this._conf.itemCountPerScreen},setTotal:function(t){var e=t-this.itemConf.total;0!=e&&(s.prototype.setTotal.call(this,t),this.scrollPanel&&(this.scrollPanel.setContentWidth("+="+e*this.getItemPlaceWidth()),this._updateSlideBtnState()))},getItemPlaceWidth:function(){return this.itemConf.width+this.itemConf.marginRight},appendItems:function(t){var e=this.indexs.end+t.length,i=this.itemConf,n=s.prototype.appendItems.call(this,t);if(i.hasTail&&e>=i.total-1&&!this.$element.find(">li.imgenditem").length){n+=1;var l=[{key:"imgenditem",placeHolder:"imgenditem"}];this._renderItems(l,function(t){return"enditem_"+t}).appendTo(this.$element)}return n},emptyItems:function(){s.prototype.emptyItems.call(this),this.$element.css("left",0)},popItems:function(t){if(t){var e=0,n=this.$element.find(">li.imgenditem");if(n.length){var l=n.nextAll();e+=1+l.length;for(var o=l.length-1;o>=0;o--)i(l[o]).remove();n.remove()}var r=t-e;return r>0&&s.prototype.popItems.call(this,r),t}return 0},_createItem:function(t){var e;if(t.isSet)e=this._createImgSetItemCtrl(t);else{var i={className:t.thumbURL?"imgitem":t.placeHolder||"empty"};t.thumbURL||(i.html="<li></li>"),e=new l(i)}return e},_createImgSetItemCtrl:function(t,i){var n=this.imgCollection.getImgSetCollection(t.key),s=new e({pnl:".subslider-con",content:".subslider-listcon",list:".subslider-list",prevBtn:".slider-btn-prev",nextBtn:".slider-btn-next"},{width:70,total:n?t.bdSetImgNum:1,indexTpl:d},n),l=this;s.addEventListener("selectedChange",function(t){l.dispatchEvent("selectedChange",{index:l.getSelectedIndex(),subIndex:t.index})});var r=new o({html:'<li class="imgitem"><div class="img-box"><img /></div></li>'},s,i,this.opts.spn);return r.on("sizeChanged",this.itemSizeChangedHandler.bind(this)),r},insertItems:function(t){return this.scrollPanel.setOffset(t*this.getItemPlaceWidth()*-1),s.prototype.insertItems.apply(this,arguments)},lockItems:function(){this._itemsLocked=!0},unlockItems:function(){this._itemsLocked=!1},getMinLoadedCount:function(){return 2*this.getItemCountPerScreen()},_loadDataByFocus:function(t){if(this.imgCollection){var e=this.getItemCount(),n=this.getMinLoadedCount();n>e&&(e=n);var s=this.imgModel.get("pn"),l=this;return this.imgCollection.getByMiddle(s,e).then(function(e){(!t||t(s))&&(l.emptyItems(),l.insertItems(e.offset,e.result),l.lockItems())})}return(new i.Deferred).resolve()},update:function(t,e){var i=e.get("offset"),n=e.get("spn"),s=this;if(this.imgModel=e,i!=this.getSelectedIndex()||n!=this.selectedItem.subIndex){this.selectedItem.subIndex=n;var l=this.controls[i];if(l&&(l.subIndex=n),this.controls[i])s._updateSubIndex(i,n),s.selectItem(i);else{var o=function(t){return t==e.get("pn")};this._loadDataByFocus(o).then(function(){s._updateSubIndex(i,e.get("spn")),s.selectItem(i).then(function(){s.selectedItem.ctrl&&s.selectedItem.ctrl.focus(),s.unlockItems()})})}}},resetSize:function(){this.$content.width(this.$pnl.width()-n.UI.getCssDigitValueSum(this.$content,["padding-left","padding-right"]));var t=this.getWidth(),e=this.getItemPlaceWidth(),i=this.selectedItem.ctrl,s=this;this._conf.itemCountPerScreen=this._calcItemCountPerScreen(t,e),this.imgModel&&(!this.selectedItem.ctrl||this.getItemCount()<this.getMinLoadedCount())?this._loadDataByFocus().then(function(){var t=s.imgModel.get("offset");s._updateSubIndex(t,s.imgModel.get("spn")),s.selectItem(t).then(function(){s.selectedItem.ctrl&&s.selectedItem.ctrl.focus(),s.unlockItems()})}):this.scrollToFocus().then(function(){i&&i.listControl&&i.resetSize(s._getSubAvailableWidth(t,e))})},_updateSubIndex:function(t,e){var i=this.controls[t],n=i&&i.listControl;n&&(i.subIndex=e),n&&n.isInited&&e!=n.getSelectedIndex()&&n.selectItem(e)},selectItem:function(t){var e,i=this.controls[t],n=this.getWidth(),l=this.getItemPlaceWidth(),o=this._getSubAvailableWidth(n,l);return s.prototype.selectItem.call(this,t),e=this.centerIndex(t),i&&this.imgModel&&(i.subIndex=this.imgModel.get("spn")||0),i&&i.display(o),e},_getSubAvailableWidth:function(t,e){return t=t||this.getWidth(),e=e||this.getItemPlaceWidth(),t-2*e},itemSizeChangedHandler:function(t){this.scrollPanel.setContentWidth("+="+t.diff)},load:function(t){var e=this;return this.imgCollection?this.imgCollection.getByOffset(0,t).then(function(t){return e.setTotal(e.imgCollection.getTotal()),e.unlockItems(),t}):(new i.Deferred).resolve([])},_append:function(t){var e=[],i=0,n=this.indexs.end;if(n>=this.itemConf.total)return 0;for(;i++<t;)e.push({thumbURL:"//img0.bdstatic.com/img/image/HLloading.gif",imgWidth:32,imgHeight:32});var s=this.appendItems(e),l=this.getItemCount(),o=this.getMinLoadedCount(),r=Math.min(s,l-o);if(t=this.shiftItems(r),s>0){var h=n+1,a=this;this.imgCollection&&this.imgCollection.getByOffset(h,s).then(function(t){a.setTotal(a.imgCollection.getTotal()),a.updateImage(h,t)})}return t},_prepend:function(t){var e=[],i=0,n=this.indexs.start;if(0==n)return 0;for(;i++<t;)e.push({thumbURL:"//img0.bdstatic.com/img/image/HLloading.gif",imgWidth:32,imgHeight:32});var s=this.prependItems(e),l=this.getItemCount(),o=this.getMinLoadedCount(),r=Math.min(s,l-o);if(t=this.popItems(r),s>0){var h=n-s,a=this;this.imgCollection&&this.imgCollection.getByOffset(h,s).then(function(t){a.updateImage(h,t)})}return t},updateImage:function(t,e){for(var n,s,l,o=this.getSelectedIndex(),r=this.controls,h=this._getSubAvailableWidth(this.getWidth(),this.getItemPlaceWidth()),a=0;a<e.length;a++)s=e[a],s=i.extend({imgUrl:s.thumbURL,imgWidth:s.width,imgHeight:s.height},s),n=t+a,l=r[n],l&&(s.isSet&&!l.listControl&&(l=this._createImgSetItemCtrl(s,l.$element),l.init(),n==o&&(l.subIndex=this.imgModel.get("spn"),l.resetSize(h)),r[n]=l,this._setItemCtrl(n,l)),l.setImage(s),n==o&&(l.focus(),l.display(h)))},_updateSlideBtnState:function(){var t=this.scrollPanel.getScrollEnable(!0),e=this.scrollPanel.getScrollEnable();this.slideLeftBtn.setEnable(t),this.slideRightBtn.setEnable(e)},_wheelHandler:function(t){var e=this,i=/macintosh|mac os x/i.test(navigator.userAgent);t=t.originalEvent||t||window.event;var n=t.deltaY,s=/^([0-9])[0-9]*(\\.\\w*)?$/;if(window.samplekey.match("UI_PC_MOUSEWHEEL:1")&&i&&s.test(n)||window.samplekey.match("UI_PC_MOUSEWHEEL:1")&&!i&&!s.test(n)){var l=i?45:100;if(this.sliderListFlag){var o=0;t.wheelDelta?o=t.wheelDelta/120:t.detail&&(o=-t.detail/3);var r=e.getItemPlaceWidth();o>0?e.scrollPanel.scrollBy(r,{duration:0}):0>o&&e.scrollPanel.scrollBy(-1*r,{duration:0}),t.preventDefault&&t.preventDefault(),t.returnValue=!1,this.sliderListFlag=!1}clearTimeout(this.sliderListTimeout),this.sliderListTimeout=setTimeout(function(){e.sliderListFlag=!0},l)}else{var o=0;t.wheelDelta?o=t.wheelDelta/120:t.detail&&(o=-t.detail/3);var r=e.getItemPlaceWidth();o>0?e.scrollPanel.scrollBy(r,{duration:0}):0>o&&e.scrollPanel.scrollBy(-1*r,{duration:0}),t.preventDefault&&t.preventDefault(),t.returnValue=!1}},_scrollStart:function(){this._scrollStartOffset=this.scrollPanel.offset,this._scrolledStep=0},_scrolling:function(t){var e=t.offset-this._scrollStartOffset,i=this.getItemPlaceWidth(),n=Math.round(e/i),s=t.offset+this.indexs.start*i;if(n!=this._scrolledStep&&!this._itemsLocked){var l=n-this._scrolledStep,o=Math.abs(l),r=i,h=Math.abs(t.offset);l>0?h<-1*this.scrollPanel.getMaxOffset()-r&&(o=this._prepend(o),s-=o*i):h>r&&(o=this._append(o),s+=o*i),this._scrolledStep=n}this.$element.css("left",s)},_scrollEnd:function(){this._updateSlideBtnState()},scrollToFocus:function(){return this.centerIndex(this.getSelectedIndex())},centerIndex:function(t){var e=this.getItemCountPerScreen(),n=this.itemConf.total;if(t>=0&&n>e){var s=this.controls[t],l=this.getWidth(),o=this.getItemPlaceWidth(),r=this._getSubAvailableWidth(l,o),h=s&&s.getWidth(),a=s&&s.getFocusedWidth(r),d=s?this._calcItemCountPerScreen(a):1,c=Math.max(t-Math.floor((e-d)/2),0),u=n-(e-d)+(this.itemConf.hasTail?1:0);return c=Math.min(c,u),this.scrollPanel.scrollToStep(c,{allowGap:d>1?a-h:0})}return(new i.Deferred).resolve()},switchScreen:function(t){var e=this.getItemCountPerScreen(),i=this.getItemPlaceWidth();return this.scrollPanel.scrollBy(e*i*(t?1:-1),{duration:300})}}),e});
;/*!searchdetail:widget/ui/controls/dockpanel/dockpanel.js*/
define("searchdetail:widget/ui/controls/dockpanel/dockpanel",function(t){function o(t,o,e){this.$handler=t,this.opts=s.extend({handlerDockedClass:"docked",sinkHeight:16,autoDockInterval:0,direction:"bottom"},e),this.pnl=o,this.parentPnl=null,this._autoDockTimer=!1,this._autoDockAborted=!1;var n=this;this._pnlMouseOverHandler=function(){n.stopAutoDock()},this._pnlMouseOutHandler=function(){n.startAutoDock()},this._pnlMouseDownHandler=function(){n.abortAutoDock()}}var s=t("common:widget/ui/base/base"),e=t("common:widget/ui/base/events"),n=t("common:widget/ui/arch/behavior/animation"),i={top:{show:"slideDown",hide:"slideUp"},left:{show:"pullOn",hide:"pushOff"}};return i.bottom=i.top,i.right=i.right,s.extend(o.prototype,e,{init:function(){this.$handler=s(this.$handler),this.pnl=s(this.pnl),this.parentPnl=this.pnl.parent(),this.opts.handlerHeight=this.$handler.height();var t=this;this.$handler.on("click",function(o){o.preventDefault(),t.abortAutoDock(),s(this).hasClass(t.opts.handlerDockedClass)?t.showPanel():t.hidePanel()}),this.pnl.on("mouseover",this._pnlMouseOverHandler),this.pnl.on("mouseout",this._pnlMouseOutHandler),this.pnl.on("mousedown",this._pnlMouseDownHandler),this.animate=n.create(this.pnl).init(),this.opts.autoDockInterval?this.startAutoDock():(this.pnl.height(0).css({"padding-top":0,"padding-bottom":0}),this.$handler.addClass(this.opts.handlerDockedClass).html('<span class="b-before"></span>展开缩略图<i></i>'))},showPanel:function(){var t=i[this.opts.direction].show,o=this;window.samplekey.match("UI_PC_DETAIL_DOWNLOAD:1")?(o.$handler.removeClass(o.opts.handlerDockedClass).html('<span class="b-before"></span><i></i>'),o.$handler.addClass("showed")):o.$handler.removeClass(o.opts.handlerDockedClass).html('<span class="b-before"></span>图片列表<i></i>'),o.parentPnl.css("padding-top",""),this.animate[t].call(this.animate).then(function(){o.dispatchEvent("stateChanged"),s(".download-tip").css({bottom:s(".album-pnl").height()+10+"px"})})},hidePanel:function(){var t=i[this.opts.direction].hide,o=this;this.animate[t].call(this.animate).then(function(){window.samplekey.match("UI_PC_DETAIL_DOWNLOAD:1")?(o.$handler.addClass(o.opts.handlerDockedClass).html('<span class="b-before"></span><i></i>'),o.$handler.removeClass("showed")):o.$handler.addClass(o.opts.handlerDockedClass).html('<span class="b-before"></span>图片列表<i></i>'),o.dispatchEvent("stateChanged"),s(".download-tip").css({bottom:s(".album-pnl").height()+10+"px"})})},startAutoDock:function(){if(!this._autoDockAborted&&!this._autoDockTimer&&this.opts.autoDockInterval){var t=this;this._autoDockTimer=window.setTimeout(function(){t.hidePanel(),t.abortAutoDock()},this.opts.autoDockInterval)}},stopAutoDock:function(){this._autoDockTimer&&(this._autoDockTimer=window.clearTimeout(this._autoDockTimer))},abortAutoDock:function(){this.stopAutoDock(),this._autoDockAborted=!0,this.pnl.off("mouseover",this._pnlMouseOverHandler),this.pnl.off("mouseout",this._pnlMouseOutHandler),this.pnl.off("mousedown",this._pnlMouseDownHandler)}}),o});
;/*!searchdetail:widget/ui/controls/pictureinfo/pictureinfo.js*/
define("searchdetail:widget/ui/controls/pictureinfo/pictureinfo",function(e,i,t){function r(e,i){return e+(i&&i.length>=1?i.slice(0,1).toUpperCase()+i.slice(1):"")}function n(e){this._element=o(e),this._innerElements=null}var o=e("common:widget/ui/base/base"),s=e("common:widget/ui/utils/utils"),c=e("searchdetail:widget/ui/utils/lib"),a=e("common:widget/ui/juicer/juicer"),l=e("searchdetail:widget/ui/statistic/statistic-core"),p='<div class="pic-info-box card-box" style="display:none;"><div class="card-title"><i class="pic-info-sticker"></i><span>图片信息</span></div><div class="pic-info-content"><div class="pic-title"><a target="_blank" href="#"></a></div><div class="pic-copyright-detail"></div><div class="pic-source"><a class="pic-from-host" target="_blank" href="#" hidefocus="true"></a><span class="divider"></span><a class="pic-size" target="_blank" href="#" log-click="p=9.urlsearch" hidefocus="true"></a></div><div class="pic-copyright"><span class="copyright-from"></span><span class="copyright-tip"><img src="//img2.bdstatic.com/static/searchdetail/img/icon_copyright_tip_4a93e68.png" /><span class="cr-tip up-arrow"></span></span><div class="cr-tip cr-tip-words"></div></div><div class="pic-copyright-buy"></div></div></div>',d={copyrightDetail:a(["{@if wxh}",'<div class="pic-copyright-detail-line">',"<span>规格：</span>","${width} &times; ${height} px","</div>","{@/if}","{@if imgSize}",'<div class="pic-copyright-detail-line">',"<span>存储大小：</span>","${(imgSize / 1024 / 1024).toFixed(3)} MB","{@if ext}"," - ${ext.toUpperCase()}","{@/if}","</div>","{@/if}","{@if authType}",'<div class="pic-copyright-detail-line">',"<span>授权方式：</span>","${authType}",'{@if authType === "RF"}',"（免版税金使用版权图片）",'{@else if authType === "RM"}',"（特定使用范围版权图片）",'{@else if authType === "RR"}',"（限定用途类版权图片）",'{@else if authType === "CC0"}',"（版权共享图片）","{@/if}","</div>","{@/if}","{@if brand}",'<div class="pic-copyright-detail-line"><span>品牌：</span>${brand}</div>',"{@/if}","{@if author}",'<div class="pic-copyright-detail-line"><span>作者：</span>${author}</div>',"{@/if}","{@if modelRelease}",'<div class="pic-copyright-detail-line"><span>肖像权/物权：</span>${modelRelease}</div>',"{@/if}","{@if imgType}",'<div class="pic-copyright-detail-line"><span>图片类型：</span>${imgType}</div>',"{@/if}"].join("")),copyrightBuy:a(['<a class="pic-copyright-buy-btn" target="_blank" href="${orderLink}" hidefocus="true"',' oncontextmenu="return false" log-click="${orderLog}">购买</a>'].join(""))},h={1:"视觉中国",2:"全景网",3:"东方IC",4:"中国图库",5:"汇图网",6:"壹图网",7:"拍信",8:"美好景象",9:"站酷",10:"麦片网",203:"天极网",205:"易车网",206:"来福岛",207:"秀人网",208:"尤果网",209:"58车",210:"房天下",211:"家图网",212:"摄影网"};o.extend(n.prototype,{init:function(){this._element.append(p),this._element=this._element.find(".pic-info-box"),this._innerElements={title:this._element.find(".pic-title a"),host:this._element.find(".pic-from-host"),moreSize:this._element.find(".pic-size"),copyright:this._element.find(".copyright-from"),copyrightTip:this._element.find(".cr-tip-words")},this._innerAsyncElements={copyrightDetail:this._element.find(".pic-copyright-detail"),copyrightBuy:this._element.find(".pic-copyright-buy")},this._innerElements.moreSize.click(function(){o.cookie("uploadTime",Date.now(),{path:"/"})})},update:function(e,i){if(this._element.hide(),"1"!==e.youtuType){var t=i.getKey();this.syncRender(e,i).then(function(){return this.asyncRender(e,i)}.bind(this)).done(function(){t===i.getKey()&&l.send("5.1010003",{})}).always(function(){t===i.getKey()&&this._element.show()}.bind(this))}},syncRender:function(e,i){var t=new o.Deferred,n=this._getUpdatedInfo(e,i),s=this._innerElements;this._element.removeClass("pic-info-hascopyright"),e.partnerId&&0!==+e.partnerId&&this._element.addClass("pic-info-hascopyright");for(var c in s)if(s.hasOwnProperty(c)){var a=s[c],l=r("titleFor",c),p=r("urlFor",c),d=r("logFor",c);a.html(n[c]||""),a.attr("title",n[l]||""),a.attr("href",n[p]||"#"),n[d]&&a.attr("log-click",n[d])}return t.resolve()},asyncRender:function(e,i){var t=new o.Deferred;o.each(this._innerAsyncElements,function(e,i){i.empty()});var r=i.getKey(),n=i.getPropCollection("copyrightInfo");return e.partnerId&&0!==+e.partnerId&&n?n.getByKey(r,i.data.rootImg&&i.data.rootImg.key,!1).then(function(n){var s=n&&n[e.cs];if(r===i.getKey()&&s){var a=(s.wxh||"").split("x"),l=e.fromURL||"",p=o.extend({},s,{width:~~a[0],height:~~a[1],orderLog:"p=5.15&tn=baiduimagedetail&fm=prodbuy&site="+encodeURIComponent(l),orderLink:c.getRedirectUrl(l,e.objURL)});o.each(this._innerAsyncElements,function(e,i){i.empty().html(d[e].render(p))}),t.resolve()}else t.reject()}.bind(this),function(){t.reject()}):t.reject(),t},_getUpdatedInfo:function(e,i){var t=e.fromPageTitle||e.fromPageTitleEnc||e.picDesc||i.get("word");t=s.trimTags(t);var r=e.fromHost.replace(/^https?:\/\//i,""),n=25;if(r.length>n){var a=r.match(/(.+)(\.[a-z0-9]{1,3})$/i);if(a&&a.length>=3){var l=a[2];r=s.cutHtmlText(a[1],n-l.length,"...")+l}else r=s.cutHtmlText(r,n,"...")}var p=e.fromURL||"",d=e.objURL,f=c.getRedirectUrl(e.fromURL||e.picDescUrl||"",d),g=c.getRedirectUrl(p,d),m="/n/pc_list?queryImageUrl="+encodeURIComponent(e.thumbURL||e.bigImgUrl||d)+"&querySign="+encodeURIComponent(e.cs||e.querysign)+"#activeTab=0",u="p=5.15&tn=baiduimagedetail&fm=ahref&site="+encodeURIComponent(p),y=u+"&ext="+encodeURIComponent(o.json.stringify({desc:e.picDesc}));!e.fromURLHostWord&&e.partnerId&&(e.fromURLHostWord=h[e.partnerId]);var v=function(e){return"本图片版权归"+e.fromURLHostWord+"或"+e.fromURLHostWord+"所代理的著作权人所有，仅限个人基于欣赏、学习、研究目的查看、下载使用，并应注明图片来源"+e.fromURLHostWord+"。如需用于任何公开媒介或商业用途，请联系"+e.fromURLHostWord+"（"+e.fromHost+"）获取图片授权，否则如造成图片侵权，应承担相应法律责任。"};return{title:s.cutHtmlText(t,30,"...",2),host:r,moreSize:e.width+"*"+e.height,copyright:"© "+e.fromURLHostWord+" 版权声明 ",copyrightTip:v(e),urlForTitle:f,urlForHost:g,urlForMoreSize:m,titleForTitle:t,titleForHost:p,titleForMoreSize:"更多尺寸",logForHost:u,logForTitle:y}}}),t.exports=n});
;/*!searchdetail:widget/ui/collections/imgcollection.js*/
define("searchdetail:widget/ui/collections/imgcollection",function(t){function e(){this.url="/search/acjson",this.total=-1,this.resOffsetAdjust=0,this.reqParams=null,this.requestPool={},this.requestedMinOffset=1/0,this.fieldsMap=null,this.parseResponseFunc=null}function n(t){t=t||new e,r.call(this,t),this.configCache({primaryKey:"key"}),this.imgSetCollections={},this.fixedData=[];var n=this;a(["beforeFetch","afterFetch"]).each(function(e,s){t.on(s,function(t){n.fire(s,t)})}),this.imgSetParams=!1}function s(t,s){var i=this,r=new e,o=s.imgSetParams||s.dataProxy.reqParams;r.on("afterFetch",function(){var e=i.getTotal();2>e&&(t.isSet=!1),t.bdSetImgNum=e}),this.albumImgInfo=t,n.call(this,r);var f={is:t.is,cs:t.cs||"",lpn:t.spn||0,adpicid:t.adPicId,bdtype:t.bdSrcType,istype:1};+t.pn===u&&(f.is=o.is||t.is,f.lpn=o.spn||t.lpn,f.adpicid=o.adpicid||t.adPicId,f.cs=o.cs||t.cs),("pcindexnew"===o.catename||"pcindexhot"===o.catename)&&(f.word=t.userData&&t.userData.Query||o.word),this.setReqParams(a.extend({},o,f)),this.setFieldMap(a.extend({},s.dataProxy.fieldsMap,{bdSetImgNum:function(){return 0},isSet:function(){return!1}}))}var a=t("common:widget/ui/base/base"),i=t("common:widget/ui/base/events"),r=t("common:widget/ui/arch/collection"),o=t("searchdetail:widget/ui/app/pagemodel"),f=t("searchdetail:widget/ui/utils/lib"),u=o.get("pn")||0;return a.extend(e.prototype,i,{_putRequest:function(t,e,n){var s=this;n.then(function(n){return s._completeRequest(t,e),n}),this.requestPool[t]={rn:e,promise:n}},_completeRequest:function(t,e){t<this.requestedMinOffset&&(this.requestedMinOffset=t);var n=this.requestPool[t];n&&n.rn==e&&delete this.requestPool[t]},_getRequest:function(t,e){var n=this.requestPool[t];return n&&e<=n.rn?n.promise:null},hasMore:function(t,e){var n=e?e.length:0;return fixedCount=this.resOffsetAdjust-t,fixedCount>0&&(n-=fixedCount),this.total<0||t+n<this.total},fetch:function(t,e,n,s){var i=this.fetchSingle(t,e,n,s),r=i.param;if(i.hasMore&&r.pn+r.rn<e+n+Math.floor(n/2)){var o=0,f={dataSet:[]},u=new a.Deferred,l=this.fetchSingle(t,r.pn+r.rn,30,[]);return i.pro.then(function(t){return o+=1,f.offset=t.offset,f.total=t.total,f.dataSet=t.dataSet.concat(f.dataSet),2==o&&u.resolve(f),t}),l.pro.then(function(t){return o+=1,f.dataSet=f.dataSet.concat(t.dataSet),2==o&&u.resolve(f),t}),u}return i.pro},fetchSingle:function(t,e,n,s){var i=this.parseReqParam(t,e,n,s),r=this,f={param:i,offset:e,limit:n,existDataSet:s};if(!(i.rn&&this.hasMore(e,s)||-1==r.total)){var u=new a.Deferred;return u.resolve({offset:e}),{pro:u,param:i,hasMore:!1}}var l=this._getRequest(i.pn,i.rn),c=this.url;return"avatarnewimagesetpic"===i.tn&&(c="/search/imagesetpic",i.rn=60,i.spn=i.lpn||0),l||(this.fire("beforeFetch",f),o.data.gsms&&o.data.gsms[i.pn]?i.gsm=o.data.gsms[i.pn]:o.data.gsms&&o.data.gsms[i.pn+i.rn]?i.gsm=o.data.gsms[i.pn+i.rn]:(i.gsm=o.data.gsm,o.data.gsms?o.data.gsms[i.pn]=o.data.gsm:(o.data.gsms=[],o.data.gsms[i.pn]=o.data.gsm)),i[(new Date).getTime()]="",l=a.get(c,i,null,"text").then(function(t){var e=r.parseResponse(t,i.pn);return o.set("gsm",e.gsm),o.data.gsms[i.pn+i.rn]=e.gsm,r.total=e.dataSet.length<i.rn?Math.min(e.total,i.pn+e.dataSet.length):e.total,r.fire("afterFetch",a.extend({responseData:e},f)),e}),this._putRequest(i.pn,i.rn,l)),{pro:l,param:i,hasMore:!0}},parseResponse:function(t,e){t=f.parseResponse(t),this.parseResponseFunc&&(t=this.parseResponseFunc(t));var n=t&&t.data,s=t&&t.gsm,i=t&&(t.total||t.displayNum||t.listNum)||-1;if(n&&n.length){var r=n.length-(a.isEmptyObject(n[n.length-1])?1:0);i=Math.max(i,e+r),a(n).each(function(t,s){a.isEmptyObject(s)||(n[t].gsm=o.data.gsms[e])})}return{offset:e+this.resOffsetAdjust,total:i,gsm:s,dataSet:n&&n.length&&null!=n[0]?this.mapList(a.isEmptyObject(n[n.length-1])?n.splice(0,n.length-1):n,e):[]}},mapList:function(t,e){for(var n,s="undefined"!=typeof e,a=t.length-1;a>=0;a--)n=this.mapField(t[a]),s&&(n.pn=e+a,n.offset=n.pn+this.resOffsetAdjust,n.pageNum||(n.pageNum=n.pn));return t},mapField:function(t){if(t&&this.fieldsMap&&!t.key){var e=this.fieldsMap||{};for(var n in e)e.hasOwnProperty(n)&&(fieldValConf=e[n],t[n]="function"==typeof fieldValConf?fieldValConf(t):t[fieldValConf])}return t},parseReqParam:function(t,e,n){var s=a.extend({tn:"resultjson_com"},this.reqParams,t);return this.reqParams.fr&&(this.reqParams.fr=""),e=e||0,s.pn=30*Math.floor(e/30),s.rn=Math.max(30*Math.ceil((n+e-s.pn)/30),30),s.pn<=this.requestedMinOffset&&s.pn+s.rn>this.requestedMinOffset&&(s.pn=s.pn-(s.pn+s.rn-this.requestedMinOffset),s.pn<0&&(s.pn=0,s.rn=this.requestedMinOffset)),s}}),a.extend(n.prototype,r.prototype,i,{setReqUrl:function(t){this.dataProxy.url=t},setReqParams:function(t){this.dataProxy.reqParams=t},getReqParams:function(){return this.dataProxy.reqParams},setFieldMap:function(t){this.dataProxy.fieldsMap=t},setParseResponse:function(t){this.dataProxy.parseResponseFunc=t},getFixDataLength:function(){return this.dataProxy.resOffsetAdjust},putFixData:function(t){if(t&&t.length){for(var e,n=this.dataProxy.resOffsetAdjust,s=this.getTotal(),a=0,i=t.length;i>a;a++)e=t[a],n+=1,e.srcType=e.srcType||"rec",this.dataProxy.mapField(e),e.key=-1*n,e.offset=s+a,this.put(e);this.dataProxy.resOffsetAdjust+=n}},mapField:function(t){return this.dataProxy.mapField(t)},get:function(t,e,n){return"undefined"!=typeof e&&(e=1*e,e+=this.dataProxy.resOffsetAdjust),r.prototype.get.call(this,t,e,n)},getByOffset:function(t,e){return r.prototype.get.call(this,{},t,e)},getByIndex:function(t,e){return this.get({},t,e)},getByKey:function(t){var e={key:t};return this.get(e).then(function(t){return t.length?t[0]:null})},getByMiddle:function(t,e){var n=Math.ceil((e-1)/2),s=Math.max(t-n,-1*this.getFixDataLength()),a=t-s+1+n,i=this;return a=Math.min(a,30*Math.floor(s/30)+60-s),this.getByIndex(s,a).then(function(t){return{offset:s+i.getFixDataLength(),reqCount:a,result:t}})},getTotal:function(){return Math.max(this.dataProxy.total,0)+this.dataProxy.resOffsetAdjust},getSubImg:function(t,e,n){n=n||1;var s=new a.Deferred,i=this;return this.getByIndex(t,1).then(function(t){var a=t[0],r=i._getImgSetCollectionIns(a);r?r.getByIndex(e,n).then(function(t){s.resolve({imgData:a,subList:t})}):s.resolve({imgData:a,subList:null})}),s},getImgSetCollection:function(t){var e=a.isPlainObject(t)?t:null;return e||this.getByKey(t).then(function(t){e=t}),e&&this._getImgSetCollectionIns(e)},_getImgSetCollectionIns:function(t){var e=t&&this.imgSetCollections[t.key];return e||(e=this._createImgSetCollection(t),e&&(this.imgSetCollections[t.key]=e),e&&this.fire("newImgSetCollection",{imgSetCollection:e})),e},_createImgSetCollection:function(t){return t&&t.isSet?new s(t,this):null},setImgSetReqParams:function(t){this.imgSetParams=t},tamperImg:function(t,e,n){var s=new a.Deferred,i=this;return this.getByIndex(t,1).then(function(r){var o=r[0];if(o){var f=o.key;o.di!=e.di||o.objURL!=e.objURL?n?i.checkImgData(t,e).done(function(){a.extend(o,e),o.key=f,i.fire("tamperImg",{offset:t,imgData:o}),s.resolve()}).fail(function(){s.reject()}):(a.extend(o,e),o.key=f,s.resolve(),i.fire("tamperImg",{offset:t,imgData:o})):s.resolve()}else s.reject()}),s},checkImgData:function(t,e){var n=new a.Deferred;if(e.di&&e.objURL){var s=this.getReqParams(),i={ct:"503316480",tn:"resultjson_com",ipn:"dj",word:s.word,cl:s.cl,lm:s.lm,ie:s.ie,st:s.st,z:s.z,ic:s.ic||"",s:s.s||"",se:s.se||"1",tab:s.tab||"",width:s.width||"",height:s.height||"",face:s.face||"",istype:s.istype||"",di:e.di,objURL:encodeURIComponent(e.objURL),pn:t,ln:1,fromURL:f.compile(e.fromURL||""),rpstart:s.rpstart,rpnum:s.rpnum};a.get("/search/acjson",i,null,"text").then(function(t){t=f.parseResponse(t),t&&1!=t.imageInfo?n.resolve():n.reject()})}else n.reject();return n}}),a.extend(s.prototype,n.prototype,{getImgSetCollection:function(){return null}}),n});
;/*!searchdetail:widget/ui/imgloader/imgloadpool.js*/
define("searchdetail:widget/ui/imgloader/imgloadpool",function(t){function i(t){this._queue=[],this._loadingCount=0,this._loadingList={},this._loadingConflict={},this._loadedImgs=[],this._imgInfoCache={},this._waitTimer=!1,this.options=e.extend({loader:a,parallelCount:3,maxQueueCount:50,maxCacheCount:1e3},t)}var e=t("common:widget/ui/base/base"),o=t("common:widget/ui/base/events"),n=t("common:widget/ui/monitorRequest/monitorRequest"),h=t("common:widget/ui/utils/utils"),a={load:function(t,i){var o,a=new e.Deferred,u=new Image,s=this;return u.onload=function(){var e=s.getImgInfo(u);e.loadTime=(new Date).getTime()-o,s.checkResponse(e,i,100)?(e.url=t,a.resolve(e),s.checkResponse(e,i,0)||n("//imgstat.baidu.com/5.gif?p=1012001&refer="+encodeURIComponent(window.location.href)+"&"+h.jsonToQuery({type:"wrongSize",objurl:encodeURIComponent(t),width:e.width,height:e.height,backwidth:i.width,backheight:i.height,fromurl:!!i.imgData&&encodeURIComponent(i.imgData.thumbURL)}))):(a.reject(),n("//imgstat.baidu.com/5.gif?p=1012001&refer="+encodeURIComponent(window.location.href)+"&"+h.jsonToQuery({type:"filter",objurl:encodeURIComponent(t),width:e.width,height:e.height,backwidth:i.width,backheight:i.height,fromurl:!!i.imgData&&encodeURIComponent(i.imgData.thumbURL)})))},u.onerror=function(){a.reject()},o=(new Date).getTime(),u.src=t,a.always(function(){u.onload=u.onerror=null,u=null})},getImgInfo:function(t){var i={url:t.src,width:t.width,height:t.height};return i},checkResponse:function(t,i,e){return this._checkSize(t.width,i.width,e)&&this._checkSize(t.height,i.height,e)},_checkSize:function(t,i,e){return 0>=t||0>=i?!0:(e=e||0,Math.abs(t-i)<=e)}};return e.extend(i.prototype,o,{put:function(t,i){for(var e=[],o=0,n=t.length;n>o;o++)this._needLoad(t[o])&&e.push(t[o]);return e.length&&(!1===i?Array.prototype.push.apply(this._queue,e):Array.prototype.unshift.apply(this._queue,e),this._queue.length>this.options.maxQueueCount&&this._queue.splice(this.options.maxQueueCount),this._load()),!!e.length},immediate:function(t){this.put([t])&&this._loadQueueFirst()},clear:function(){this._queue=[]},_needLoad:function(t){var i=t.url;return i in this._loadingList?(this.addConflict(i,t),!1):i in this._imgInfoCache?(this.dispatchEvent("imgloaded",{imgInfo:this._imgInfoCache[i],reqInfo:t}),!1):!0},_load:function(){var t=this._queue;if(!this._waitTimer&&t.length&&this._loadingCount<this.options.parallelCount){var i=this;this._waitTimer=window.setTimeout(function(){i._waitTimer=!1,i._loadBegin()},200)}},_loadBegin:function(){var t=this._queue;t.length&&this._loadingCount<this.options.parallelCount&&(this._loadQueueFirst(),this._load())},_loadQueueFirst:function(){var t=this._queue.shift();if(t&&this._needLoad(t)){this._loadingCount+=1;var i=this,e=this.options.loader.load(t.url,t);this._loadingList[t.url]=e,this.addConflict(t.url,t),e.then(function(e){i.loadCompeleted(t.url,e)},function(){i.loadCompeleted(t.url,null)})}},loadCompeleted:function(t,i){this._loadingCount-=1;this._loadingList[t];this._putInLoaded(t,i);for(var e=this._loadingConflict[t],o=e.length-1;o>=0;o--)this.dispatchEvent("imgloaded",{imgInfo:i,reqInfo:e[o]});delete this._loadingList[t],delete this._loadingConflict[t],this._load()},_putInLoaded:function(t,i){var e=this._loadedImgs,o=this._imgInfoCache;e.push(t),o[t]=i;for(var n,h=this.options.maxCacheCount;e.length>h;)n=e.shift(),delete o[n]},addConflict:function(t,i){var o=this._loadingConflict[t];o&&~e.map(o,function(t){return t.imgData}).indexOf(i.imgData)||(this._loadingConflict[t]=o||[],this._loadingConflict[t].push(i))}}),i});
;/*!searchdetail:widget/ui/imgloader/imgloadstrategy.js*/
define("searchdetail:widget/ui/imgloader/imgloadstrategy",function(e){function i(e,i,t,o){this.imgCollection=e,this.bigImgLoadPool=new a({parallelCount:5}),this.imgModel=i,this.pageModel=o,this._initialIndex=t||i.get("pn")||0,this._isFirstFetch=!0,this.isLoaded=!0,this.loadedURI=""}var t=e("common:widget/ui/base/base"),o=e("common:widget/ui/base/events"),a=(e("searchdetail:widget/ui/utils/lib"),e("searchdetail:widget/ui/imgloader/imgloadpool"));return t.extend(i.prototype,o,{start:function(){var e=this;this.bigImgLoadPool.addEventListener("imgloaded",this._onBigImageLoaded.bind(this)),this._listenImgCollection(this.imgCollection),this.imgCollection.on("newImgSetCollection",function(i){e._listenImgCollection(i.imgSetCollection)}),"new_dep_tpl"==this.pageModel.get("investTpl")?this.imgModel.on("imgDeepData:changed",this._onImgSwitched.bind(this)):this.imgModel.on("imgData:changed",this._onImgSwitched.bind(this))},_listenImgCollection:function(e){e.on("beforeFetch",this._onBeforeFetchImg.bind(this)),e.on("afterFetch",this._onAfterFetchImg.bind(this)),e.on("tamperImg",this._onTamperImg.bind(this))},_buildLoadReqInfo:function(e){return{imgData:e,url:e.objURL,width:e.width,height:e.height}},_onImgSwitched:function(){var e=this.imgModel.get("imgData"),i=this.imgModel.get("pn"),t=this;this.immediateLoad(e),i>0&&this.imgCollection.get({},i-1,1).then(function(e){var i=e[0];if(t.immediateLoad(i),i.isSet){var o=t.imgCollection.getImgSetCollection(i);o.getByIndex(i.bdSetImgNum-5,5)}"new_dep_tpl"===t.pageModel.get("investTpl")?t.loadDeepPropInfo(i):t.loadPropInfo(i),t.fire("preload",{data:i})}),this.imgCollection.get({},i+1,3).then(function(e){for(var i,o=0;o<e.length;o++){if(i=e[o],t.immediateLoad(i),i.isSet){var a=t.imgCollection.getImgSetCollection(i);a.getByIndex(0,5)}"new_dep_tpl"==t.pageModel.get("investTpl")?t.loadDeepPropInfo(i):t.loadPropInfo(i)}t.fire("preload",{data:e})})},loadPropInfo:function(e){var i=this.imgModel.getPropCollections(e);if(i&&i.length)for(var t=i.length-1;t>=0;t--)i[t].getByKey(e.key)},loadDeepPropInfo:function(e){var i=this.imgModel.getPropCollections(e),t=this;if(i&&i.length){var o=this.imgModel.getPropCollection("imageDeepInfo");if(o)o.getByKey(e.key).done(function(a){var n,g;if(a&&a.cards){n=o.imgCollection.mapField(a.cards),g=o.imgCollection.mapField({}),n.key=a.key;for(var l in n)n.hasOwnProperty(l)&&n[l]&&n[l]!==g[l]&&(e[l]=n[l])}i=t.imgModel.getPropCollections(e);for(var d=i.length-1;d>=0;d--){var l=i[d].dataProxy&&i[d].dataProxy.opts&&i[d].dataProxy.opts.key;"imageDeepInfo"!=l&&i[d].getByKey(e.key)}});else for(var a=i.length-1;a>=0;a--)i[a].getByKey(e.key)}},immediateLoad:function(e){e.bigImgUrl&&e.bigImgUrl!=e.objURL&&this.bigImgLoadPool.immediate(this._buildLoadReqInfo(e))},loadBigImg:function(e,i){for(var t=[],o=e.length-1;o>=0;o--){var a=e[o];a.bigImgUrl&&a.bigImgUrl!==a.objURL&&t.unshift(this._buildLoadReqInfo(a))}t.length&&this.bigImgLoadPool.put(t,i)},_onTamperImg:function(e){var i=this.imgModel.get("pn");e.offset==i&&this.immediateLoad(e.imgData)},_onBeforeFetchImg:function(e){e.existDataSet&&this.loadBigImg(e.existDataSet)},_onAfterFetchImg:function(e){this._loadImages(e,this.pageModel.get("pn")),this._isFirstFetch&&(alog&&alog("speed.set","c_imgfsload",+new Date),alog.fire&&alog.fire("mark")),this._isFirstFetch=!1},_loadImages:function(e,i){var t=e.responseData.dataSet,o=e.param.pn;if(i>=o&&i<o+t.length){var a=i-o,n=[];n=n.concat(t.slice(a,a+4),t.slice(Math.max(a-2,0),a),t.slice(a+4),t.slice(0,Math.max(a-2,0))),this.loadBigImg(n)}else this.loadBigImg(t,!1)},_onBigImageLoaded:function(e){var i=e.reqInfo.imgData,t=e.imgInfo;t?i.objURL===t.url&&(i.bigImgUrl=t.url,i.loadState=1,this.fire("bigimgloaded",{imgData:i,loadInfo:t})):(i.loadState=-2,this.fire("bigimgloadedErr",{imgData:i,loadInfo:{}}))}}),i});
;/*!searchdetail:widget/ui/models/imagemodel.js*/
define("searchdetail:widget/ui/models/imagemodel",function(t){var e=t("common:widget/ui/base/base"),o=(t("common:widget/ui/utils/utils"),t("common:widget/ui/base/events")),i=t("common:widget/ui/arch/model"),n=new i({imgData:null,scale:1,total:0,word:"",pn:0});return e.extend(n,i.prorotype,o,{set:function(t,e,o){var n=i.prototype.set.call(this,t,e);if(o&&(n=[t]),n&&n.length)for(var r=0;r<n.length;r++)this.dispatchEvent(n[r]+":changed")},getKey:function(){var t=this.get("imgData");return t&&t.key},setPropCollections:function(t){this.set("__propcols_",t)},getPropCollection:function(t){var e=this.get("__propcols_");return e&&e[t]},getPropCollections:function(t){var o=this.get("__propcols_"),i=[];if(t)for(var n in o)if(o.hasOwnProperty(n)){var r=t[n],s=r&&(!e.isArray(r)||r.length);s&&i.push(o[n])}return i}}),n});
;/*!searchdetail:widget/ui/app/datacontroller.js*/
define("searchdetail:widget/ui/app/datacontroller",function(e){function t(e,t,i,o){this.pageModel=e,this.imgModel=t,this.imgCollection=i,this.priorDataProc=o}var i=e("common:widget/ui/base/base"),o=e("searchdetail:widget/ui/statistic/avatar-statistic"),g=e("searchdetail:widget/ui/utils/lib");return i.extend(t.prototype,{initialData:function(e){e=e||30;var t=this,o=this.pageModel.get("pn"),g=new i.Deferred,a=this.priorDataProc.getData(),n=a&&a.length||0;n&&this.imgCollection.putFixData(a);var r=-1*n;return this.pageModel.set("minPn",r),r>o&&(this.pageModel.set("pn",r),o=r),this.imgCollection.getByMiddle(o,e).then(function(i){var a=t.imgCollection.getTotal();t.imgModel.set("total",a),a>o?t._overrideData(o,i.result).done(function(){o!=t.pageModel.get("pn")?t.imgCollection.getByMiddle(t.pageModel.get("pn"),e).then(function(e){g.resolve({offset:e.offset,dataSet:e.result})}):g.resolve({offset:i.offset,dataSet:i.result})}).fail(function(){g.reject()}):g.reject()}),g},getInitImgData:function(){var e=this.pageModel.tempData.get("imgInfo"),t=e&&e.imgData;return t&&t.objURL&&t.width?this.imgCollection.mapField(t):null},_overrideData:function(e,t){var o=this.pageModel.tempData.get("imgInfo"),a=o&&o.imgData,n=this.pageModel.uri.hash.data,r={},s=!1;if(a&&a.pn==this.pageModel.get("pn")){var l=!0;if(a.objURL){a.fromURL=i.trim(g.uncompileURL(a.fromURL)),a.hoverURL=i.trim(g.uncompileURL(a.hoverURL)),a.largeTnImageUrl=a.thumbURL||a.hoverURL||a.largeTnImageUrl,a.objURL=i.trim(g.uncompileURL(a.objURL)),a.fromPageTitle=i.trim(a.fromPageTitle),a.is=this.pageModel.get("is"),a.cs=this.pageModel.get("cs")||"",a.os=a.os||this.pageModel.get("os")||"",a.pi=a.pi||this.pageModel.get("pi")||"";var m=this._findImgInList(a,t,e);m&&(this.pageModel.set("pn",m.pn),l=!1)}else l=!1;l&&this.imgCollection.tamperImg(e,this.imgCollection.mapField(a),!1)}return n.di&&(a&&n.di==a.di?n.spn||(r=a,r.bdSetImgNum=0):(r=i.extend(r,n,{objURL:n.objURL||n.objurl,fromURL:g.uncompileURL(n.fromURL||n.fromurl),fromPageTitle:this.pageModel.get("word"),is:"",bdSrcType:"0",bdSetImgNum:0,bdSourceName:"",bdFromPageTitlePrefix:"",width:n.W,height:n.H,filesize:n.S,type:n.TP}),r.thumbURL=r.objURL,r.fromURLHost=g.getHost(r.fromURL),s=!0)),r.di?this.imgCollection.tamperImg(e,r,s):(new i.Deferred).resolve()},isImgDataEqual:function(e,t){return e&&t&&(e.os&&e.os===t.os||e.objURL&&e.objURL===t.objURL||e.objURLHttp&&e.objURLHttp===t.objURLHttp)?!0:!1},_findImgInList:function(e,t,i){if(!e||!e.os&&!e.objURL)return!1;if("undefined"!=typeof i&&i>=0&&i<t.length&&this.isImgDataEqual(e,t[i]))return t[i];for(var o,g=t.length-1;g>=0;g--)if(o=t[g],this.isImgDataEqual(o,e))return o;return!1},freshImgModel:function(){var e=this,t=this.pageModel.get("pn"),i=this.pageModel.get("spn")||0;t<(this.pageModel.get("minPn")||0)||this.imgCollection.getByIndex(t,1).then(function(t){var o=t[0],g=e.imgCollection.getImgSetCollection(o);i>0||e.switchImage(o),g&&g.getByIndex(i,1).then(function(t){var i=t[0],g=e.pageModel.get("pageSrc");"result"!==g||i.objURL!==o.objURL&&i.objURLHttp!==o.objURLHttp||(i.bigImgUrl=o.bigImgUrl),e.switchImage(o,i)})})},freshImgData:function(e){this.imgModel.set("imgData",e,!0)},changePn:function(e,t,o,g){t=t||0;var o=o||1,a=this,n=new i.Deferred;return g||e!=1*this.pageModel.get("pn")||t!=1*this.pageModel.get("spn")?e<(this.pageModel.get("minPn")||0)?(n.reject(),n):!g&&e>=this.imgCollection.getTotal()-this.imgCollection.getFixDataLength()?(n.reject(),n):(this.imgCollection.getByIndex(e,1).then(function(e){var i=e[0],g=a.imgCollection.getImgSetCollection(i);-1!==t&&i.isSet||(t=i.spn,a.switchImage(i,null)),g?(0>o&&0===t&&(t=i.bdSetImgNum>0?i.bdSetImgNum-1:0),g.getByIndex(t,1).then(function(e){a.switchImage(i,e[0]),n.resolve()})):i?n.resolve():n.reject()}),n):(n.reject(),n)},changeImgOffset:function(e){var t=this.imgModel.get("rootImg"),o=1*this.pageModel.get("pn"),g=1*this.pageModel.get("spn"),a=!1;if(t.isSet){var n=g+e;if(n>=0&&n<t.bdSetImgNum)return a=!0,this.changePn(o,n)}return a?(new i.Deferred).reject():this.changePn(o+e,-1,e)},switchImage:function(e,t){if(e){var i="number"==typeof e.offset&&e.offset-this.imgCollection.getFixDataLength()||e.pn,g=t&&t.offset||0,a=t||e,n=this.pageModel;n.set({pn:i,spn:g,lpn:e.spn||0,di:e.di,cs:e.cs,os:e.os,is:e.is||"",simid:e.simid,pi:e.pi||"",gsm:e.gsm||"",adpicid:e.adPicId,fromurl:e.compiledFromURL||e.fromURL,objurl:a.objURLHttp||a.objURL,"imgData.bdSrcType":a.bdSrcType,"imgData.width":a.width,"imgData.height":a.height,"imgData.filesize":a.filesize,"imgData.type":a.type}),e.userData&&e.userData.Query&&n.set({word:e.userData.Query}),this.imgModel.set({word:n.get("word"),gbkword:n.get("gbkword"),imgData:a,rootImg:e,bigImgUrl:a.bigImgUrl,offset:e.offset,pn:i,spn:g}),1===+a.adType&&o(a.adid,"pv")}}}),t});
;/*!searchdetail:widget/ui/app/priordata.js*/
define("searchdetail:widget/ui/app/priordata",function(e){function t(e,t){this.tempData=e,this.sequence=t||["hotWordResult","browserRsData","baikeResult"]}var r=e("common:widget/ui/base/base"),i=e("common:widget/ui/utils/utils");return r.extend(t.prototype,{getData:function(){var e,t,i=this,a=this.tempData;return r(this.sequence).each(function(r,o){return t=i[o],e=t?t.call(i,a.get(o)):a.get(o),e&&e.length?!1:void 0}),e},hotWordResult:function(e){return e},browserRsData:function(e){var t=[];if(e&&e.photos)for(var r=0,i=e.photos.length;i>r;r++){var a=e.photos[r];t[r]={srcType:"browserRsData",bdImgnewsDate:"1970-01-01 08:00",bdSetImgNum:0,bdSourceName:"",bdSrcType:"0",currentIndex:"",di:"0",filesize:"",fromPageTitle:""==a.summary?a.query:a.summary,fromPageTitleEnc:""==a.summary?a.query:a.summary,fromURL:/^http/.test(a.from_url)?a.from_url:"http://"+a.from_url,fromURLHost:"",hasLarge:0,hasThumbData:"0",height:a.height,hoverURL:a.url,is:"0,0",isAspDianjing:0,largeTnImageUrl:a.url,middleURL:a.url,objURL:a.url,pageNum:"",source_type:"",thumbURL:a.url,token:"",type:"jpg",width:a.width}}return t},baikeResult:function(e){var t;return window.data=e,e&&(t=[{thumbURL:e.pic&&i.httpsTimg({imgUrl:e.pic})||"",pageNum:-1,hasLarge:2,objURL:e.pic||"",fromURL:e.original_url||"",fromURLHost:"",currentIndex:"",width:parseInt(e.pic_width)||310,height:parseInt(e.pic_height)||240,type:"jpg",filesize:"",bdSrcType:"0",di:"baikeimg",is:"",fromPageTitle:e.name,token:"",bdSetImgNum:0,bdSourceName:"",bdFromPageTitlePrefix:""}]),t}}),t});
;/*!searchdetail:widget/ui/featuremanager/cardsequence.js*/
define("searchdetail:widget/ui/featuremanager/cardsequence",function(e){function t(e){var t={},i=[];a(e).each(function(e,a){var r=a.opts.logKey;t[r]=a,i.push(r)}),this._cardMap=t,this._defaultSeq=i,this._currentSeq=i}var a=e("common:widget/ui/base/base"),i=e("searchdetail:widget/ui/utils/lib"),r=e("common:widget/ui/base/events");a.extend(t.prototype,r,{_isSeqEual:function(e,t){return e.join(",")==t.join(",")},update:function(e){if(e){var t;if(e.cardSeq&&!this._isSeqEual(e.cardSeq,this._defaultSeq))t=i.mergeSeqArray(this._defaultSeq,e.cardSeq);else{t=[].concat(this._defaultSeq);var r=0,n=0;a.each(t,function(e,t){"relateCase"===t&&(r=e),"relateImg"===t&&(n=e)});var s=l("pc_detail_slider_right_relate_case",e.fbResult),c=!1;0!==r&&s&&0!==s.Items[0].TemplateId&&(c=!0,t.splice(r,1),t.splice(1,0,"relateCase"));var u=l("pc_detail_slider_right_relate_img",e.fbResult);0!==n&&u&&0!==u.Items[0].TemplateId&&(c?(t.splice(n+1,1),t.splice(2,0,"relateImg")):(t.splice(n,1),t.splice(1,0,"relateImg")))}if(!this._isSeqEual(t,this._currentSeq)){var d=this._cardMap;a(t).each(function(e,t){var a=d[t];a.$element.parent().append(a.$element)}),this._currentSeq=t}}}});var l=function(e,t){if(!e||!t)return null;for(var a=null,i=0;i<t.length;i++)t[i].Tag===e&&(a=t[i]);return a};return t});
;/*!searchdetail:widget/ui/featuremanager/cardlogger.js*/
define("searchdetail:widget/ui/featuremanager/cardlogger",function(t){function e(t){this._cards=t,this._startTime=(new Date).getTime(),this._states=[],this._proCount=0}var s=t("common:widget/ui/base/base"),a=t("common:widget/ui/base/events"),i=t("searchdetail:widget/ui/statistic/statistic-core");return s.extend(e.prototype,a,{traceBegin:function(){this._states.length&&this._send(),this._startTime=(new Date).getTime()},traceEnd:function(t,e){var a=this._states,i=this,o=this._startTime,n=[];this._proCount=this._cards.length,this.isShowEcom=e,s(this._cards).each(function(e,r){var h=r.getState();if(h.visible&&"rsResult"!=r.opts.dataKey)a.push({key:r.opts.logKey,state:h.collapse?"0":1}),i._proCount-=1,r.updateLogSeq(a.length),n.push(r.opts.logKey);else if(h.pro){var u={key:r.opts.logKey,state:2};a.push(u);var d=a.length;h.pro.done(function(){o==i._startTime&&(i._proCount-=1,h=r.getState(),h.visible&&(u.state=h.collapse?"0":1,r.updateLogSeq(d)),i._proCount||i._send())}),n.push(r.opts.logKey)}else if(i._proCount-=1,t&&t.cardTest){var c=r.opts.dataKey,g=c?t.cardTest[c]:null;!g||s.isArray(g)&&!g.length||n.push(r.opts.logKey)}}),i._proCount||i._send(e)},_send:function(){var t=this.isShowEcom;if(!this._states.length)return void this.fire("cardlogged",{keys:[],state:[]});var e=[],a=[];if(s(this._states).each(function(t,s){e.push(s.key),a.push(s.state)}),e.length){var o=t?1:0;t&&e.push("adCard"),a.push(o),i.send("5.1010000",{tn:"baiduimagedetail",tag:"card",fm:e.join(","),state:a.join(",")})}this.fire("cardlogged",{keys:e,state:a}),this._states=[]}}),e});
;/*!searchdetail:widget/ui/featuremanager/featuremanager.js*/
define("searchdetail:widget/ui/featuremanager/featuremanager",function(a){function t(a){this.config=e.extend({afterPicInfo:"#siderAdAfterPicInfo",topRecom:"#header .recom",wikiInfoCard:"#wikiInfoCard",cards:"#siderCardsAfterWikiInfo",beforeAdCard:"#beforeAdCard",adCard:"#adCard",imagedetailCards:"#imagedetail-cardswrapper"},a),this.ads=[],this._cardLogger=null,this._cardSeq=null}var e=a("common:widget/ui/base/base"),r=a("common:widget/ui/base/events"),i=a("searchdetail:widget/ui/featuremanager/cardsequence"),s=a("searchdetail:widget/ui/featuremanager/cardlogger");return e.extend(t.prototype,r,{setAds:function(a){var t=this;for(var r in a)if(a.hasOwnProperty(r))if("priority"==r)t.priority=a[r];else{var i=a[r];e.isArray(i)?e(i).each(function(a,e){t.ads.push({pos:r,ctrl:e})}):this.ads.push({pos:r,ctrl:i})}},setLogCards:function(a){this._cardLogger||a&&(this._cardLogger=new s(a))},setCardSeq:function(a){this._cardSeq||a&&(this._cardSeq=new i(a))},init:function(){var a=this.config;for(var t in a)a.hasOwnProperty(t)&&(a[t]=e(a[t]));e(this.ads).each(function(t,e){e.ctrl.init(a[e.pos])})},updateEachCard:function(a,t,e){if(a==this.ads.length)return!1;var r=this.priority[a],i=this;if("cards"!=this.ads[r].pos||this.ads[r].ctrl.opts.notBusinessSort)this.ads[r].ctrl.update&&this.ads[r].ctrl.update(t,e),this.updateEachCard(a+1,t,e);else if(t.hasLoadFirstCard)this.ads[r].ctrl.update&&this.ads[r].ctrl.update(t,e,1),this.updateEachCard(a+1,t,e);else{this.ads[r].ctrl.update&&this.ads[r].ctrl.update(t,e);var s=this.ads[r].ctrl.getState();s.visible?(t.hasLoadFirstCard=!0,this.updateEachCard(a+1,t,e)):s.pro?s.pro.done(function(){s=i.ads[r].ctrl.getState(),s.visible&&(t.hasLoadFirstCard=!0),i.updateEachCard(a+1,t,e)}):this.updateEachCard(a+1,t,e)}},update:function(a,t){var r=this._cardLogger;a.adEcommCardsIndex=0,r&&r.traceBegin(a),a.hasLoadFirstCard=!1,a.is_business_query?this.updateEachCard(this.priority[0],a,t):e(this.ads).each(function(e,r){r.ctrl.update&&r.ctrl.update(a,t)}),this._cardSeq&&this._cardSeq.update(a,t);var i="none"===e("#adCard").css("display")?!1:!0;r&&r.traceEnd(a,i),this.fire("updated")},resetSize:function(){var a=e("#header").width();780>a?this.config.topRecom.hide():this.config.topRecom.show()}}),t});
;/*!searchdetail:widget/ui/app/page.js*/
define("searchdetail:widget/ui/app/page",function(e){var t=e("common:widget/ui/base/base"),i=e("common:widget/ui/base/events"),n=(e("common:widget/ui/base/EventDispatcher").eventCenter,e("searchdetail:widget/ui/app/history")),o=e("common:widget/ui/arch/behavior/pageresizer"),a=(e("common:widget/ui/arch/behavior/animation"),e("searchdetail:widget/ui/app/sizemanager")),r=e("common:widget/ui/arch/handlers"),l=e("searchdetail:widget/ui/controls/imagedetail/imagedetail"),d=e("searchdetail:widget/ui/controls/imgtoolbar/imgtoolbar"),s=e("searchdetail:widget/ui/controls/imgtoolbarnew/imgtoolbarnew"),g=e("searchdetail:widget/ui/controls/albumslider/sliderlist"),m=e("searchdetail:widget/ui/controls/dockpanel/dockpanel"),c=e("searchdetail:widget/ui/controls/pictureinfo/pictureinfo"),u=e("common:widget/ui/userInfo/userInfo"),h=e("searchdetail:widget/ui/collections/imgcollection"),p=(e("searchdetail:widget/ui/collections/albumcollection"),e("searchdetail:widget/ui/imgloader/imgloadstrategy")),f=e("searchdetail:widget/ui/models/imagemodel"),b=e("searchdetail:widget/ui/databinder/databind"),v=e("searchdetail:widget/ui/app/datacontroller"),w=e("searchdetail:widget/ui/app/priordata"),I=e("searchdetail:widget/ui/featuremanager/featuremanager"),C=e("common:widget/ui/admanager/admanager"),D=e("searchdetail:widget/shitutip/tip"),S=(e("searchdetail:widget/ui/models/settingmodel"),e("searchdetail:widget/ui/statistic/statistic-core")),L=e("searchdetail:widget/old/hotInfo/utils/utils"),k=e("common:widget/ui/utils/utils"),y=e("searchdetail:widget/ui/app/pagemodel"),P=t.extend({model:null,imgModel:f,imgCollection:new h,imgInfoObservers:[],history:null,dataController:null,imgLoadStratey:null,featureManager:null,controls:{imgDetail:null,toolbar:null,imgSlidePrevBtn:null,imgSlideNextBtn:null,container:null,slideDockPnl:null,imgSlideList:null,picInfo:null},handlers:new r(this),_isFirstImgLoaded:!1,_isFirstImgLoadedErr:!1,init:function(e){this.model=e,this.dataController=new v(e,this.imgModel,this.imgCollection,new w(e.tempData)),this.imgLoadStratey=new p(this.imgCollection,f,this.model.get("pn"),this.model),this.imgLoadStratey.addEventListener("bigimgloaded",this.onBigImageLoaded.bind(this)),this.imgLoadStratey.addEventListener("bigimgloadedErr",this.onBigImageLoadedErr.bind(this)),this.featureManager=new I,this.initData(),this.history=new n(this.model),this.history.init(),o.init({tick:20}),t(window).on("load",this.onPageLoaded.bind(this)).on("unload",this.handlers.get("onPageUnLoadedHandler")),o.addEventListener("resizeEnd",this.handlers.get("onPageResizeHandler")),this.history.addEventListener("popstate",this.handlers.get("onHistoryChangedHandler")),this.createControls()},initData:function(){var e=this.model.tempData.get("imgInfo");e&&this.imgLoadStratey.immediateLoad(this.imgCollection.mapField(e))},createControls:function(){var e=this.model.tempData.get("imgInfo"),i=this.controls,n=e&&e.imgData&&"1"===e.imgData.youtuType;if(i.imgDetail=new l(".img-container",{pageModel:this.model}),i.imgDetail.dutuAnchor.setQuery(this.model.get("word")),"downloadoptimize"==this.model.getAbTestGroup())D.init(),t(".btn-toPhone").find("i").addClass("downloadicon"),i.toolbar=new s("#toolbar",{wallpaperBtn:".btn-wallpaper",zoomIn:"#btnZoomIn",zoomOut:"#btnZoomOut",zoomScale:"#zoomScale",zoomToggle:".btn-imgtoggle",downloadLink:".btn-toPhone",toPhoneBtn:".btn-toPhone",favoBtn:".btn-favo",fullScreenBtn:".btn-fullscr",dutuSwitcher:".btn-closedutu",reportLink:".reportlink"},{img:"#srcPic img",imgPnl:"#srcPic"});else{D.init(),t(".btn-toPhone").remove();var o='<span class="bar-btn btn-download'+(n?" bar-btn-disabled":"")+'" href="#" title="保存原图到电脑" hidefocus="true"><span class="b-before"></span>下载<i></i></span>';if(window.samplekey.match("UI_PC_DETAIL_DOWNLOAD:1")){t(".btn-fullscr").after(o);var a='<span class="bar-btn btn-toPhone" log-click="p=5.50" href="javascript:void(0);" title="保存原图到手机" hidefocus="true"><span class="b-before"></span><i></i></span>';t(".reportlink").after(a)}else{t(".btn-favo").after(o);var a='<span class="bar-btn btn-toPhone" log-click="p=5.50" href="javascript:void(0);" title="保存原图到手机" hidefocus="true"><span class="b-before"></span>扫描到手机<i></i></span>';t(".btn-fullscr").after(a)}i.toolbar=new d("#toolbar",{wallpaperBtn:".btn-wallpaper",zoomIn:"#btnZoomIn",zoomOut:"#btnZoomOut",zoomScale:"#zoomScale",zoomToggle:".btn-imgtoggle",downloadLink:".btn-download",toPhoneBtn:".btn-toPhone",favoBtn:".btn-favo",fullScreenBtn:".btn-fullscr",dutuSwitcher:".btn-closedutu",reportLink:".reportlink"},{img:"#srcPic img",imgPnl:"#srcPic"})}var r=t("#container");i.container=r,i.imgSlidePrevBtn=r.find(".img-prev"),i.imgSlideNextBtn=r.find(".img-next");var h=parseInt(t.cookie("BDIMGISLOGIN")),p=6e3;(1===h||n)&&(p=0),i.slideDockPnl=new m("#toolbar .btn-handler",".album-container",{autoDockInterval:p}),i.imgSlideList=new g({pnl:".album-container",content:".album-imgs",list:".album-imgs>ul",prevBtn:".slider-btn-prev",nextBtn:".slider-btn-next"},{hasTail:!0,enableWheel:!0,width:70,marginRight:10},this.imgCollection,{spn:this.model.get("spn")||0}),i.picInfo=new c("#picInfoPnl"),i.userInfoBox=new u},run:function(){var e=this;this.initControls(),e.bindModel();var t=e.dataController.priorDataProc.getData(),i=e.model.get("pn"),n=0>i?e.imgCollection.mapField(t[t.length+i]):e.dataController.getInitImgData();this._detectPicReplace()&&(n.bigImgUrl=n.objURL),n&&this.controls.imgDetail.updateData(n),e.bindEvent(),alog&&alog("speed.set","c_asynACStart",+new Date),alog.fire&&alog.fire("mark"),this.dataController.initialData(this.controls.imgSlideList.getMinLoadedCount()).done(function(t){alog&&alog("speed.set","c_asynACEnd",+new Date),alog.fire&&alog.fire("mark"),e.renderFirstImg(),e.initSlideListData(t.offset,t.dataSet).then(function(){e.controls.imgSlideList.addEventListener("selectedChange",e.handlers.get("onSlideImgSelected")),e.dataController.freshImgModel()})}).fail(function(){e.controls.slideDockPnl.hidePanel(),e.initSlideListData(1,[n]),e.controls.imgSlideList.addEventListener("selectedChange",e.handlers.get("onSlideImgSelected")),e.dataController.switchImage(n,null)}),o.start()},initControls:function(){var e=this;this.sizeManager=a,a.init(),a.update(),this.featureManager.init();var i=this.controls;i.imgDetail.init(),i.userInfoBox.init(function(t){var i=t.data.user;y.set({userName:i.user_name}),y.set({bdstoken:i.bdstoken}),e.imgModel.set("userName",i.user_name)}),i.toolbar.init();this.model.get("userInfo");i.slideDockPnl.init(),i.imgSlideList.init(),window.samplekey.match("UI_PC_DETAIL_DOWNLOAD:1")?(t(".pic-info").css({padding:0,border:"none"}),t(".card-box").css({"margin-top":0}),t(".ad-card").css({"margin-top":"5px"})):i.picInfo.init(),a.update()},bindModel:function(){{var e=this.controls,t=this.imgModel;this.pageModel}b.bind(t,"userName",e.toolbar.favoViewCtrl,"userNameChanged"),b.bind(t,"imgData",this,"onImgDataChanged"),b.bind(t,"imgData",S,"update"),b.bind(t,"bigImgUrl",e.imgDetail,"update"),b.bind(t,"imgData",e.imgDetail,"update"),b.bind(t,"scale",e.imgDetail,"zoomChange"),b.bind(t,"imgData",e.imgSlideList,"update"),"new_dep_tpl"==this.model.get("investTpl")?(b.bind(t,"imgData",this,"getImageDeepInfo"),b.bind(t,"imgDeepData",this.featureManager,"update"),window.samplekey.match("UI_PC_DETAIL_DOWNLOAD:1")||b.bind(t,"imgDeepData",e.picInfo,"update"),"downloadoptimize"==this.model.getAbTestGroup()?e.toolbar.bindModel(t,this.imgCollection,!0):e.toolbar.bindModel(t,this.imgCollection),b.bind(t,"imgDeepData",e.imgDetail,"update_dutuAnchor"),b.bind(t,"imgDeepData",this,"imgSwitched")):(window.samplekey.match("UI_PC_DETAIL_DOWNLOAD:1")||b.bind(t,"imgData",e.picInfo,"update"),e.toolbar.bindModel(t,this.imgCollection),b.bind(t,"imgData",this.featureManager,"update"),b.bind(t,"imgData",this,"imgSwitched")),b.bind(this.imgModel,"imgData",C,"update"),b.bind(this.imgModel,"scale",C,"update"),this.imgLoadStratey.start()},bindEvent:function(){var e=this.controls,i=e.toolbar,n=this.handlers,o=this;this.sizeManager.addObserver(e.imgDetail,"resetSize").addObserver(e.imgSlideList,"resetSize").addObserver(i,"resetSize").addObserver(this.featureManager,"resetSize").addObserver(C,"resetsize").notify(),e.imgDetail.on("scaleChanged",n.get("onImageScaleChanged")),e.imgDetail.on("wheelPrev",n.get("onImageWheelPrev")),e.imgDetail.on("wheelNext",n.get("onImageWheelNext")),e.imgDetail.on("linkout",n.get("onImageLinkOut")),e.imgDetail.dutuAnchor.on("hover",n.get("onDutuAnchorOver")),e.imgDetail.dutuAnchor.on("hout",n.get("onDutuAnchorOut")),e.WikiInfoFaceControl.on("hover",n.get("onWikiinfoOver")),e.WikiInfoFaceControl.on("hout",n.get("onWikiinfoOut")),e.carCtrl.on("hover",n.get("onCarOver")),e.carCtrl.on("hout",n.get("onCarOut")),e.carCtrlNoResult.on("hover",n.get("onCarNoresultOver")),e.carCtrlNoResult.on("hout",n.get("onCarNoresultOut")),e.clothCtrl.on("hover",n.get("onClothOver")),e.clothCtrl.on("hout",n.get("onClothOut")),e.imgSlidePrevBtn.on("click",function(t){e.container.find(".img-container>.img-wrapper").hasClass("leftArrow")&&(e.container.addClass("left leftTwinkle"),setTimeout(function(){e.container.removeClass("leftTwinkle")},500)),n.get("onImgSlidePrevBtnClicked")(t)}),e.imgSlideNextBtn.on("click",function(t){e.container.find(".img-container>.img-wrapper").hasClass("rightArrow")&&(e.container.addClass("right rightTwinkle"),setTimeout(function(){e.container.removeClass("rightTwinkle")},500)),n.get("onImgSlideNextBtnClicked")(t)}),"prevnextarrow"==this.model.getAbTestGroup()&&(e.imgSlidePrevBtn.attr("title","点击上翻"),e.imgSlideNextBtn.attr("title","点击下翻"),e.imgSlidePrevBtn.on("mouseover",function(){e.container.removeClass("right").addClass("left")}),e.imgSlideNextBtn.on("mouseover",function(){e.container.removeClass("left").addClass("right")}),e.imgSlidePrevBtn.on("mouseout",function(){e.container.removeClass("left")}),e.imgSlideNextBtn.on("mouseout",function(){e.container.removeClass("right")}),e.container.find(".img-container>.img-wrapper").on("click",function(i){if(!t(this).hasClass("dragging")){var o=(e.imgDetail,i||window.event);t(this).hasClass("leftArrow")?(e.container.addClass("left leftTwinkle"),setTimeout(function(){e.container.removeClass("leftTwinkle")},500),n.get("onImgSlidePrevBtnClicked")(o)):(e.container.addClass("right rightTwinkle"),setTimeout(function(){e.container.removeClass("rightTwinkle")},500),n.get("onImgSlideNextBtnClicked")(o))}})),t(document.body).on("mousemove",n.get("onPageMouseMove")),e.slideDockPnl.on("stateChanged",n.get("onSlideDockPanelStateChanged")),i.fullScreenCtrl&&(i.fullScreenCtrl.on("enterFullScreen",n.get("onEnterFullScreen")),i.fullScreenCtrl.on("escFullScreen",n.get("onEscFullScreen")),i.fullScreenCtrl.on("selectedChange",n.get("onSlideImgSelected"))),i.zoomViewCtrl.on("viewModeChanged",n.get("onViewModeChanged")),i.elements.downloadLink.on("click",n.get("onDownloadClick")),e.toolbar.elements.dutuSwitcher.on("mouseover",n.get("onDutuSwitcherOver")).on("mouseout",n.get("onDutuSwitcherOut")),this.bindKeyEvent();var a="";t("#sider").on("scroll",function(){var e=o.imgModel.getKey(),i=t("#sider"),n=i.length?i[0].scrollTop:0;e&&n>0&&e!=a&&(S.send("5.1010200",{tn:"baiduimagedetail"}),a=e)}),window.speed&&speed.mark("app_ready")},bindKeyEvent:function(){var e=function(e){e=e||window.event;var t;return t=e.srcElement?e.srcElement:e.target,"INPUT"==t.nodeName.toUpperCase()?!0:!1},i=0,n=0,o=t(document),a=this;o.on("keydown",function(t){return e(t)?!0:void(n||(n=setInterval(function(){i++,a.handlers.get("onKeyPressHandler").call(a,t)},800)))}),o.on("keyup",function(t){return e(t)?!0:(0==i&&a.handlers.get("onKeyPressHandler").call(a,t),clearInterval(n),n=0,void(i=0))})},initSlideListData:function(e,i){var n=this.model.get("pn"),o=this.model.get("spn"),a=this.controls.imgSlideList,r=new t.Deferred;return a.setTotal(this.imgCollection.getTotal()||2),a.insertItems(e,i),this.imgCollection.getSubImg(n,o).then(function(e){a.selectItem(e.imgData&&e.imgData.offset||i[0]&&i[0].pn).then(function(){a.unlockItems(),r.resolve()})}),r},renderFirstImg:function(){var e=this.model.get("pn"),t=this.model.get("spn");if(!t||"0"==t){var i=this;this.imgCollection.getByIndex(e,1).then(function(e){if(e&&e.length){var t=e[0];i._detectPicReplace()&&(t.bigImgUrl=t.objURL),i.controls.imgDetail.updateData(t)}})}},loadErrorLog:function(e){var t=new Image;t.src="//imgstat.baidu.com/6.gif?"+L.json2Query(e)+"&_="+ +new Date},onBigImageLoaded:function(e){var i=e.loadInfo,n=e.imgData;if(n.loadState=1,n.loadTime=i.loadTime,this.fire("firstimgloaded"),this.imgModel.getKey()==n.key){if(!this._isFirstImgLoaded){this._isFirstImgLoaded=!0;var o=n.loadState,a=n.objURL,r=i.loadTime,l=n.fromURL;if(o=-1==o?-1:r,"undefined"==typeof o){var d="//imgstat.baidu.com/6.gif?u="+encodeURIComponent(a)+"&ue="+encodeURIComponent(a)+"&f="+encodeURIComponent(l)+"&tm="+o+"&_dev=pc&hostfr=imgstat&tn=1&fr="+this.model.get("fr"),s=new Image;s.src=d+"&"+(new Date).getTime()}try{var g=L.query2JSON((location.search||"").replace("?",""));if(+g.hs&&"baiduimage"===g.tn&&"ala"===g.fr){var m=(L.getHost(document.referrer)||"").replace(/^.*\//,"");m.match(/^(|www\.baidu\.com)$/)&&((new Image).src="//image.baidu.com/pv/pv.gif?"+L.json2Query({dsp:"pc",hs:g.hs,tn:"detail",type:"firstsc"}).replace(/^&/,""))}}catch(c){}}var u=!1,h=t("#hdFirstImgObj");220===h.width()&&159===h.height()&&(u=!0),"1"!==t(".currentImg").attr("data-ispreload")||u?this.imgModel.set("bigImgUrl",n.bigImgUrl):(this.imgModel.set("bigImgUrl",t("#hdFirstImgObj").attr("src")),t(".currentImg").attr("data-ispreload","0"))}},onBigImageLoadedErr:function(e){var t=e.loadInfo,i=e.imgData,n=0,o=i.replaceUrl,a=new Image,r=this;i.loadState=-1,i.loadTime=t.loadTime||-1,this.imgModel.getKey()===i.key&&function l(){if(o&&n<o.length){r.loadErrorLog({pcError:"objurl",pcObjurl:encodeURIComponent(i.objURL),pcLoadState:n,pcHaveReplaceUrl:1});var e=k.httpsTimg({imgUrl:o[n].ObjURL});a.onload=function(){if(r.imgModel.getKey()===i.key){if(4===this.width&&8===this.height)return n++,void l();i.objURL=e,i.width=a.width,i.height=a.height,r.imgModel.set("imgDeepData",i,!0)}},a.onerror=function(){r.imgModel.getKey()===i.key&&(n++,l())},a.src=e}else r.loadErrorLog({pcError:"objurl",pcObjurl:encodeURIComponent(i.objURL),pcLoadState:n,pcHaveReplaceUrl:0}),i.objURLBackup||(i.objURLBackup=i.objURL,i.objURL=i.thumbURL)}()},onPageLoaded:function(){this.fire("loaded")},getImageDeepInfo:function(e,t){var i=t.getPropCollection("imageDeepInfo");i.getByKey(t.getKey(),t.data.rootImg&&t.data.rootImg.key,!1).done(function(n){var o,a;if(n&&n.cards&&n.key==t.getKey()){o=i.imgCollection.mapField(n.cards),a=i.imgCollection.mapField({}),o.key=n.key;for(var r in o)o.hasOwnProperty(r)&&o[r]&&o[r]!==a[r]&&(e[r]=o[r]);e.is_business_query=n.is_business_query||0}t.set("imgDeepData",e,1)})},imgSwitched:function(e){t("#sider")[0].scrollTop=0,this.fire("imageSwitched",{imgData:e})},initAds:function(e){C.init(this.model),C.initAds(e),this.imgCollection.on("afterFetch",function(e){C.receive(e.param.pn,e.responseData.dataSet)})},onImgDataChanged:function(e,i){var n=this.model.get("firstPic");n?this.model.set("firstPic",0):0!==n&&this.model.set("firstPic",1);var o=!1;if("65"===e.adType&&""!==e.fromPageTitleEnc)try{o=JSON.parse(e.fromPageTitleEnc)}catch(a){}o&&""!==o.desc?(t(".currentImg-adtext").addClass("currentImg-adtext-p"),t(".currentImg-adtext p").html(o.desc),t(".currentImg").hover(function(){t(".currentImg-adtext").show(),S.send("10.1010100",{as:o.brand_name,pos:"pc_detail_hover",subpos:"0",shownum:"1",matcont:o.desc,materialNum:"1"})},function(){t(".currentImg-adtext").hide()})):(t(".currentImg-adtext").removeClass("currentImg-adtext-p"),t(".currentImg-adtext p").html(""),t(".currentImg").unbind("hover")),this._updateTextLinkAd(i),this._hasReqSimi=!1,1!==this.model.get("fullScreen")&&e.objURLBackup&&e.objURLBackup!==e.objURL&&(e.objURL=e.objURLBackup,e.objURLBackup=null);var r,l,d="";if("3"===e.adType){if(this.model&&this.model.tempData){r=this.model.tempData,l=r.get("nsAdIIData");for(var s=0;l&&s<l.length;s++)if("pc_detail_slider_right_relate_img"===l[s].Tag&&l[s].Items.length){var g=l[s].Items;g&&g.length&&(d=l[s].Items[0].BrandName)}}S.send("10.1010100",{as:d,pos:"pc_detail_before_insert",subpos:"0",shownum:"1",matcont:e&&e.bigImgUrl,materialNum:"1"})}},_updateTextLinkAd:function(e){var t=this.controls.imgDetail.textLinkAd;t.update(e)},_detectPicReplace:function(){var e=t("#hdFirstImgObj");return"result"===this.model.get("pageSrc")&&e.length&&"1"===e.attr("data-replace")}},i);return P});
;/*!searchdetail:widget/ui/specialrecord/specialrecord.js*/
define("searchdetail:widget/ui/specialrecord/specialrecord",function(e,i,n){var t,o=e("common:widget/ui/base/base"),a=e("searchdetail:widget/ui/statistic/statistic-core"),c="postMessage"in window,s="__ilike_picture_icon",d="__ilike_page_icon",r=(o.browser.msie,"-1,,,"),u=(escape(r),window.name),m=function(e){a.send("5.361",{type:e})},w=function(e){e&&e.data===r&&m("msg")},g=function(){var e=window.name,i=(document.domain,/woxihuan/gi);e!==u&&i.test(e)&&(u=e,m("nameck"))};n.exports.init=function(){var e=o(window);e.on("load",function(){navigator.userAgent.match(/Chrome\//)?o(document.body).on("mousedown",function(e){var i=e.target;(i.id===s||i.id===d)&&m("click")}):c?e.on("message",w):t=setInterval(g,500)})}});
;/*!searchdetail:widget/ui/statistic/statistic.js*/
define("searchdetail:widget/ui/statistic/statistic",function(t){var e=t("common:widget/ui/base/base"),i=t("searchdetail:widget/ui/statistic/statistic-core"),a=t("common:widget/ui/utils/utils"),o={timestamp:0,dom:null};e(document).unbind().on("mousedown","a,.album-imgs,#srcPic img,#toolbar [log-click]",function(t){if(t.type=1==t.which?"click":t.type,t.type=3==t.which?"rightclick":t.type,"mouseover"==t.type)return o.timestamp=t.timeStamp,void(o.dom=t.srcElement||t.target);if("mouseleave"!=t.type||t.srcElement!=o.dom&&t.target!=o.dom||!(t.timeStamp-o.timestamp<5e3)){for(var e=t.srcElement||t.target,m=!1;e.parentNode!=document.body&&!m;){for(var r=0;r<e.attributes.length;r++){var s=t.type;if(e.attributes["log-"+s]){m=!0;break}}m||(e=e.parentNode)}if(e.attributes["log-"+t.type]){var c=e.attributes["log-"+t.type].value,n=a.queryToJson(c),l=n.p,u=n||{};!u.clivt&&i.imgViewStart>0&&(u.clivt=(new Date).getTime()-i.imgViewStart),i.send(l,u)}}})});
;/*!searchdetail:widget/ui/app/app.js*/
define("searchdetail:widget/ui/app/app",function(t){var e=t("common:widget/ui/base/base"),i=t("common:widget/ui/utils/utils"),a=t("common:widget/ui/arch/app"),c=t("searchdetail:widget/ui/app/pagemodel"),o=(t("searchdetail:widget/ui/app/page"),t("searchdetail:widget/ui/utils/lib"),t("searchdetail:widget/ui/specialrecord/specialrecord")),r=t("searchdetail:widget/ui/statistic/statistic-core"),n=new a(c);return e.extend(n,{logicBeginTime:(new Date).getTime(),setPageInfo:function(t){t&&(t.word&&(t.word=t.word.replace(/\\'/g,"'").replace(/\\"/g,'"'),t.word=i.tryDecodeURIComponent(t.word)),c.set(t)),c.setAbTest()},init:function(){this.logicBeginTime=(new Date).getTime(),alog&&alog("speed.set","c_djsStart",+new Date),alog.fire&&alog.fire("mark"),r.init(this.pageModel),t("searchdetail:widget/ui/statistic/statistic"),a.prototype.init.call(this);var e=function(){return[{rule:{tpl:"avatarbeautyset"},action:"searchdetail:widget/ui/action/avatarbeautyset/action.js"},{rule:{tpl:"rightrecommend"},action:"searchdetail:widget/ui/action/rightrecommend/action.js"},{rule:{tpl:"btea"},action:"searchdetail:widget/ui/action/btea/action.js"},{rule:{tpl:"ecomad"},action:"searchdetail:widget/ui/action/ecomad/action.js"},{rule:{tpl:"avatar"},action:"searchdetail:widget/ui/action/avatar/action.js"},{rule:{tpl:"dutu"},action:"searchdetail:widget/ui/action/dutu/action.js"},{rule:{},action:"searchdetail:widget/ui/action/base/base.js"}]}();this.router.addRules(e)},setData:function(t,e){this.pageModel.tempData.set(t,e)},run:function(){a.prototype.run.apply(this,arguments),o.init()}}),n});
;/*!searchdetail:widget/ui/collections/imgpropertycollection.js*/
define("searchdetail:widget/ui/collections/imgpropertycollection",function(t){function e(t,e){this.opts=s.extend({key:"",url:"",jsonpCb:"cb",buildQuery:function(){return{}}},t),this.imgCollection=e,this.imgData=null,this.hasMore=!0,this._reqPool={}}function a(t,a){this.imgCollection=t;var s=new e(a,t);r.call(this,s),this.configCache({primaryKey:"key"})}var s=t("common:widget/ui/base/base"),r=t("common:widget/ui/arch/collection"),o=t("searchdetail:widget/ui/utils/lib"),i=t("common:widget/ui/utils/utils");return s.extend(e.prototype,{setImgData:function(t){this.imgData=t},fetch:function(t,e,a,r){var n=this.opts.buildQuery&&this.opts.buildQuery(this.imgData),l=s.extend({},n,this.reqParams),d=this.imgData.key,p=this;if(this.opts.reqParams&&(l=this.reqParams=s.extend({},this.opts.reqParams,n,this.reqParams),l=this.parseReqParam(t,e,a,r)),!this.opts.url||!this.hasMore||s.isEmptyObject(l)){var u=new s.Deferred;return u.resolve({offset:e}),u}var h=this._reqPool[d];if(h)return h;var c;if(o.isCrossDomain(this.opts.url)){var f=this.opts.url;f+=(f.indexOf("?")>0?"&":"?")+this.opts.jsonpCb+"=?",c=+new Date,h=s.getJSON(f,l)}else if("post"==this.opts.type){var m=this.opts.buildPostData(this.imgData);if(!m.keyword){var u=new s.Deferred;return u.resolve({offset:e}),u}c=+new Date,h=s.post(this.opts.url+"?"+i.jsonToQuery(l),m,null,"text")}else c=+new Date,h=s.get(this.opts.url,l,null,"text");return h=h.then(function(t){var e=p.parseResponse(t,d);return p.hasMore=!0,e.dataSet.length&&delete p._reqPool[d],e}),this._reqPool[d]=h,h},parseResponse:function(t,e){t=o.parseResponse(t),this.opts.parseResponse&&(t=this.opts.parseResponse(t));var a=[];return t&&(t.key=e,a.push(t)),{offset:!1,total:1,dataSet:a}},parseReqParam:function(t,e,a){var r=s.extend({tn:"resultjson_com"},this.reqParams,t);return e=e||0,r.pn=30*Math.floor(e/30),r.rn=Math.max(30*Math.ceil((a+e-r.pn)/30),30),r.pn<=this.requestedMinOffset&&r.pn+r.rn>this.requestedMinOffset&&(r.pn=r.pn-(r.pn+r.rn-this.requestedMinOffset),r.pn<0&&(r.pn=0,r.rn=this.requestedMinOffset)),r}}),s.extend(a.prototype,r.prototype,{setReqParams:function(t){this.dataProxy.reqParams=t},getByKey:function(t,e,a){var i=new s.Deferred,n=this,l=n.dataProxy&&n.dataProxy.opts&&n.dataProxy.opts.pageModel,d=n.dataProxy&&n.dataProxy.opts&&n.dataProxy.opts.key;if(d&&"asyncCard"==d&&l&&l.get("isNeedAsyncRequest")){var p={};p.asyncCard=["srv_beautyphoto"],p.srv_beautyphoto={query:l.get("word"),tn:"exchangedata"},n.dataProxy.setImgData(p),n.dataProxy.fetch().then(function(t){i.resolve(t&&t.dataSet&&t.dataSet.length&&t.dataSet[0])})}else{var u=e&&this.imgCollection.imgSetCollections[e]||this.imgCollection;u.getByKey(t).then(function(e){e?(n.dataProxy.setImgData(e),r.prototype.get.call(n,{key:t}).then(function(t){if("serviceCard"==d&&e.srv_auto&&n.dataProxy.opts.serviceConf&&!t[0].auto&&a){n.requesting=!0;var r=s.extend({},n.dataProxy.opts.serviceConf[0].getParams(),{word:e.srv_auto.name,pn:0,rn:3});s.get("/search/acjson",r,function(a){var a=s.parseJSON(a);if(a.data.length>0){var l,d=0,p=a.data.length,u=[],h=o.uncompileURL(a.data[d].fromURL);for(h.match(/^https?:\/\//i)||(h="http://"+h),d;p>d;d++){var l="/search/detail?ct=503316480&z="+r.z+"&tn=baiduimagedetail&ipn=d&word="+r.word+"&step_word="+(r.step_word||"")+"&ie="+r.ie+"&in="+a.data[d].currentIndex+"&cl="+r.cl+"&lm="+r.lm+"&st="+r.st+"&cs="+a.data[d].cs+"&os="+a.data[d].os+"&pn="+d+"&rn=1&di="+a.data[d].di+"&ln="+r.listNum+"&fr="+(r.fr||"")+"&fmq=&ic="+r.ic+"&s="+r.s+"&se="+r.se+"&sme="+r.sme+"&tab="+(a.data[d].tab||0)+"&width=&height=&face="+a.data[d].face+"&is="+a.data[d].is+"&istype="+(a.data[d].istype||0)+"&ist="+a.data[d].source_type+"&jit="+r.jit+"&objurl="+encodeURIComponent(o.uncompileURL(a.data[d].objURL))+"&bdtype="+a.data[d].bdSrcType,c={picUrl:a.data[d].thumbURL,linkUrl:l};u.push(c)}}var f={name:e.srv_auto.name,picList:u};n.autoNoResult=t[0].autoNoResult=f,n.requesting=!1,i.resolve(t&&t.length&&t[0])})}else i.resolve(t&&t.length&&t[0])})):i.resolve(null)})}return i}}),a});
;/*!searchdetail:widget/ui/controls/card/adcard/adcard.js*/
define("searchdetail:widget/ui/controls/card/adcard/adcard",function(e){function t(e,t){t=i.extend({tpl:""},t),s.call(this,e,t),this._timer=!1,this._maxCheckTimes=10,this._checkedTimes=0,this._timerInterval=200,this.haveUpdate=!1}var i=e("common:widget/ui/base/base"),s=(e("common:widget/ui/utils/utils"),e("common:widget/ui/base/events"),e("searchdetail:widget/ui/utils/lib"),e("searchdetail:widget/ui/controls/card/base/base")),r=e("searchdetail:widget/ecomads/layer/layer");return i.extend(t.prototype,s.prototype,{update:function(e,t){s.prototype.update.call(this,e,t),this.haveUpdate||(i(".card-box .card-title .tips").css(window.samplekey.match("UI_PC_TUIGUANG:2")||window.samplekey.match("UI_PC_TUIGUANG:1")?{color:"#666"}:{color:"#2da0fd",border:"1px solid #b5d7f3","border-radius":"2px"}),window.samplekey.match("UI_PC_TUIGUANG:1")&&(i("#similarpicCard")?i("#sider #adCard").remove().clone(!0,!0).insertAfter("#similarpicCard"):i("#sider #adCard").remove().clone(!0,!0).prependTo("#siderCardsAfterWikiInfo")),this.haveUpdate=!0),this.checkUser(t);var r=this;this._timer||(this._timer=setTimeout(function(){r._timer=!1,r._startTimer(),r.checkContent()},50))},_startTimer:function(){if(this._checkedTimes<this._maxCheckTimes){var e=this;this._timer=setTimeout(function(){e._checkedTimes+=1,e._timer=!1,e.checkContent()||e._startTimer()},this._timerInterval)}},checkUser:function(e){var t=!!e.get("userName");r.init(t)},checkContent:function(){var e=this.elements.content.get(0);if(!e)return!0;var t=this.elements.content.get(0).offsetHeight<50;return this.$element.css("visibility",t?"hidden":"visible"),this.$element.css("margin-bottom",t?"0":"15px"),this.$element.css("height",t?"0":"auto"),!t}}),t});
;/*!searchdetail:widget/ui/controls/card/appbeauty/appbeauty.js*/
define("searchdetail:widget/ui/controls/card/appbeauty/appbeauty",function(t){function a(t,a){a=i.extend({tpl:['<div class="card-box appbeauty-card">','<h5 class="card-title"><i class="sticker"></i><span class="text">百度图片APP</span><i class="close"></i></h5>','<div class="card-content appbeauty-card-content">','<div class="appbeauty-qrbox"><img src="//img0.bdstatic.com/img/image/ugcqr.png"></div>',"</div>","</div>"].join("")},a),e.call(this,t,a)}var i=t("common:widget/ui/base/base"),e=(t("common:widget/ui/utils/utils"),t("common:widget/ui/base/events"),t("searchdetail:widget/ui/utils/lib"),t("searchdetail:widget/ui/controls/card/base/base"));return i.extend(a.prototype,e.prototype,{updateView:function(){i(".appbeauty-card-content").css({cursor:"pointer"}).click(function(t){t.stopImmediatePropagation(),window.open("http://image.baidu.com/app/tupian")})}}),a});
;/*!searchdetail:widget/ui/controls/card/base/asyncard.js*/
define("searchdetail:widget/ui/controls/card/base/asyncard",function(e){function t(e,t){r.call(this,e,t),this.propData=null}var o=e("common:widget/ui/base/base"),r=(e("common:widget/ui/utils/utils"),e("common:widget/ui/base/events"),e("searchdetail:widget/ui/utils/lib"),e("searchdetail:widget/ui/controls/card/base/base"));return o.extend(t.prototype,r.prototype,{checkProp:function(e){return!(!e||o.isArray(e)&&!e.length)},updateView:function(e,t){var r=t.getPropCollection(this.opts.mergeKey||this.opts.propKey||this.opts.dataKey),a=!1;if(this.curState.pro=null,r){var n=this,i=this.opts.mergeKey,s=t.getKey();n.resetContent(),this.curState.pro=new o.Deferred,alog&&alog("speed.set","c_asyncardStart",+new Date),alog.fire&&alog.fire("mark");var c=(new Date).getTime();r.getByKey(t.getKey(),t.data.rootImg&&t.data.rootImg.key,"auto"==e.service_type).done(function(o){if(s==t.getKey()){i&&(o=o?o[n.opts.propKey]:null),n.propData=o,a=n.checkProp(o),a&&n.renderContent(o,e,t);{(new Date).getTime()-c}alog&&alog("speed.set","c_asyncardEnd",+new Date),alog.fire&&alog.fire("mark"),n.setLinkLog(n.elements.content),n.curState.visible=a,n.curState.pro.resolve()}}).fail(function(){n.hide()})}return void 0==a?!1:a},resetContent:function(){},renderContent:function(){}}),t});
;/*!searchdetail:widget/ui/controls/card/beauty/beauty.js*/
define("searchdetail:widget/ui/controls/card/beauty/beauty",function(i){function t(i,t){t=e.extend({dataKey:"",itemSize:{width:78,height:98},titleArray:["性感系","清纯系","丝袜系"],pTpl:'<p class="item-title"></p>',itemTpl:['<li class="picbox">','<span class="pic-loading-dot"></span>','<a href="" target="_blank"><img /></a>',"</li>"].join(""),tpl:['<div class="card-box beauty-card">','<h5 class="card-title"><i class="sticker"></i><span class="text">更多美女</span><i class="close"></i></h5>','<div class="card-content">','<ul class="clearfix piclist piclist3">',"</ul>","</div>","</div>"].join("")},t),i=e.extend({picList:".piclist"},i),a.call(this,i,t)}{var e=i("common:widget/ui/base/base"),s=(i("common:widget/ui/utils/utils"),i("common:widget/ui/base/events"),i("searchdetail:widget/ui/utils/lib"),i("searchdetail:widget/ui/utils/imghelper")),a=i("searchdetail:widget/ui/controls/card/base/asyncard");i("searchdetail:widget/ui/statistic/statistic-core")}return e.extend(t.prototype,a.prototype,{checkProp:function(i){return e.isArray(i)&&i.length>5||!!i&&e.isArray(i.piclist)&&i.piclist.length>5},renderContent:function(i){if(!e.isArray(i)){{var t=i.piclist;i["simi-listdata"]}i=t}var a=e("<ul></ul>"),l=this,c=(this.imgData,this.opts.itemSize);e(i).each(function(i,t){if(!(i>=4)){var r=e(l.opts.itemTpl).appendTo(a),n=r.find("img"),d={cs:t.cs,p:i+1};r.find("a").attr("href",t.fromurl),s.loadImage([t.objurl],function(i){var e=s.scaleFull(i,c);r.find(".pic-loading-dot").hide(),n.css(e).attr("src",t.objurl)}),n.attr("data-src",t.objurl),r.find("a").attr("log-ext",e.json.stringify(d))}}),this.elements.picList.empty().append(a.children()),this.$element.show()}}),t});
;/*!searchdetail:widget/ui/controls/card/car/car.js*/
define("searchdetail:widget/ui/controls/card/car/car",function(t){function i(t,i){i=a.extend({dataKey:"",itemSize:{width:118,height:88},itemTpl:['<li class="car-item">','<div class="picbox">','<span class="pic-loading-dot"></span>','<a href="" target="_blank"><img /></a>',"</div>",'<h6 class="car-item-title"><span class="car-item-title-bg"></span><a href="" target="_blank"></a></h6>',"</li>"].join(""),tpl:['<div class="card-box car-card">','<h5 class="card-title"><i class="sticker"></i><span class="text">车型信息</span><i class="close"></i></h5>','<div class="card-content">','<div class="car-info">',"</div>",'<ul class="clearfix piclist">',"</ul>",'<a class="morebtn" href="" target="_blank">更多信息&gt;</a>',"</div>","</div>"].join(""),carLogoTpl:['<div class="car-logo">','<div class="car-logo-img"><a target="_blank" href=""><img /></a></div>',"<ul>",'<li><h6><a href="" target="_blank" title=""></a></h6></li>','<li class="src-site-info"><span>来自：</span><a href="" target="_blank"></a></li>',"</ul>","</div>"].join(""),cartypeDetailTpl:['<ul class="cartype-logo-detail">','<li>报价：<a target="_blank" href=""></a></li>',"<li>排量：<span></span></li>",'<li class="bsx"><span class="bsx-label">变速箱：</span><span class="bsx-text"></span></li>',"</ul>"].join(""),cartypeQuiryTpl:'<a class="car-quiry" target="_blank" href="">询问底价</a>'},i),t=a.extend({picList:".piclist",carInfo:".car-info"},t),l.call(this,t,i)}var a=t("common:widget/ui/base/base"),e=(t("common:widget/ui/utils/utils"),t("common:widget/ui/base/events"),t("searchdetail:widget/ui/utils/lib"),t("searchdetail:widget/ui/utils/imghelper")),l=t("searchdetail:widget/ui/controls/card/base/asyncard");return a.extend(i.prototype,l.prototype,{resetContent:function(){var t=this.elements.picList;this.elements.carInfo.empty(),t&&t.html('<li class="card-loading"></li>')},checkProp:function(t){var i=2;return!t||!t.picList||!t.picList.length||t.picList.length<i?!1:!0},renderContent:function(t){var i=a("<ul></ul>"),l=a("<div></div>"),r=a("<div></div>"),s=a("<div></div>"),n=this,c=this.opts.itemSize,o=(this.opts.dataKey,2),d=t.picList,p=a(n.opts.carLogoTpl).appendTo(l),h=p.children("ul").find("li");p.children(".car-logo-img").find("a").attr("href",t.moreUrl),p.children(".car-logo-img").find("img").attr("src",t.logo),h.eq(0).find("h6>a").text(t.name).attr({href:t.moreUrl,title:t.name}),h.eq(1).find("a").attr("href",t.srcUrl).text(t.srcSite);var f=a(n.opts.cartypeDetailTpl).appendTo(r),m=(a(n.opts.cartypeQuiryTpl).appendTo(s),f.find("li"));m.eq(0).find("a").text(t.priceInfo).attr("href",t.priceUrl),m.eq(1).find("span").text(t.volume),m.eq(2).find("span").eq(1).text(t.trans).attr("title",t.trans),s.find("a").attr("href",t.inquiryUrl);var g=[l[0].innerHTML,r[0].innerHTML,s[0].innerHTML].join("");a(d).each(function(t,l){if(t>o-1)return!1;var r=a(n.opts.itemTpl).appendTo(i),s=r.find(".picbox img"),d=l.picUrl;r.find("a").attr("href",l.linkUrl),e.loadImage([d],function(t){var i=e.scaleFull(t,c);r.find(".pic-loading-dot").hide(),s.css(i).attr("src",d)}),s.attr("data-src",d),r.find(".car-item-title a").text(l.desc).attr("title",l.desc)}),this.elements.content.find(".morebtn").attr("href",t.moreUrl),this.elements.carInfo.empty().html(g),this.elements.picList.empty().append(i.children()),this.$element.show()}}),i});
;/*!searchdetail:widget/ui/controls/card/carface/carface.js*/
define("searchdetail:widget/ui/controls/card/carface/carface",function(e){function t(e,t){t=a.extend({logTag:"face",dataKey:"",itemSize:{width:118,height:88},itemTpl:['<li class="car-face-item">','<div class="picbox">','<span class="pic-loading-dot"></span>','<a href="" target="_blank"><img /></a>',"</div>",'<h6 class="car-face-item-title"><span class="car-face-item-title-bg"></span><a href="" target="_blank"></a></h6>',"</li>"].join(""),tpl:['<div class="card-box car-face-card">','<span class="margin-packed"></span>','<div class="card-content">','<div class="car-face-info">',"</div>",'<ul class="clearfix piclist">',"</ul>",'<p class="morebtn-wrapper">','<a class="morebtn" href="" target="_blank">更多信息&gt;</a>','<span class="src-site-info">来自：<a href="" target="_blank"></a></span>',"</p>","</div>","</div>"].join(""),carLogoTpl:['<div class="car-face-logo">','<div class="car-face-logo-wrapper">','<div class="car-face-logo-img">','<a target="_blank" href=""><!--[if lt IE 9]><em class="ie-circel-bg"></em><![endif]--><span><img /></span></a>',"</div>",'<span class="car-face-logo-padding-bg"></span>',"</div>",'<div id="car-face-quiry-wrapper"></div>',"</div>"].join(""),cartypeDetailTpl:['<ul class="cartype-logo-detail">','<li class="car-face-detail-title">','<h6><a href="" target="_blank" title=""></a></h6>',"</li>",'<li class="car-face-detail-price"><span class="detail-label">报价：</span><a class="detail-text" target="_blank" href=""></a></li>','<li><span class="detail-label">排量：</span><span class="detail-text"></span></li>','<li class="bsx"><span class="detail-label">变速箱：</span><span class="detail-text"></span></li>',"</ul>"].join(""),cartypeQuiryTpl:'<a class="car-face-quiry" target="_blank" href="">询问底价</a>'},t),e=a.extend({picList:".piclist",carInfo:".car-face-info"},e),r.call(this,e,t)}var a=e("common:widget/ui/base/base"),i=e("common:widget/ui/utils/utils"),s=(e("common:widget/ui/base/events"),e("searchdetail:widget/ui/utils/lib"),e("searchdetail:widget/ui/utils/imghelper")),r=e("searchdetail:widget/ui/controls/card/base/asyncard"),n=e("searchdetail:widget/ui/statistic/statistic-core");return a.extend(t.prototype,r.prototype,{resetContent:function(){var e=this.elements.picList;this.elements.carInfo.empty(),e&&e.html('<li class="card-loading"></li>')},checkProp:function(e){var t=2;return!e||!e.picList||!e.picList.length||e.picList.length<t?!1:!0},renderContent:function(e){this.propData=e,this.$element.show();var t=a("<ul></ul>"),r=a("<div></div>"),l=a("<div></div>"),c=a("<div></div>"),o=this,d=this.opts.itemSize,p=(this.opts.dataKey,2),h=e.picList,f=a(o.opts.carLogoTpl).appendTo(r);f.find(".car-face-logo-img").find("a").attr("href",e.moreUrl);var m=f.find(".car-face-logo-img").find("img");m.attr("src",i.httpsTimg({imgUrl:e.logo}));var v=a(o.opts.cartypeDetailTpl).appendTo(l),u=(a(o.opts.cartypeQuiryTpl).appendTo(c),v.find("li"));u.eq(0).find("h6>a").text(e.name).attr({href:e.moreUrl,title:e.name}),u.eq(1).find(".detail-text").text(e.priceInfo).attr({href:e.priceUrl,title:e.priceInfo}),u.eq(2).find(".detail-text").text(e.volume).attr("title",e.volume),u.eq(3).find(".detail-text").text(e.trans).attr("title",e.trans),c.find("a").attr("href",e.inquiryUrl).appendTo(f.find("#car-face-quiry-wrapper"));var g=[r[0].innerHTML,l[0].innerHTML].join("");a(h).each(function(e,i){if(e>p-1)return!1;var r=a(o.opts.itemTpl).appendTo(t),n=r.find(".picbox img"),l=i.picUrl;r.find("a").attr("href",i.linkUrl),s.loadImage([l],function(e){var t=s.scaleFull(e,d);r.find(".pic-loading-dot").hide(),n.css(t).attr("src",l)}),n.attr("data-src",l),r.find(".car-face-item-title a").text(i.desc).attr("title",i.desc)});var b="来自"===e.srcSite.substring(0,2)?e.srcSite.substring(3):e.srcSite;this.elements.title.find(".text").html(e.name),this.elements.content.find(".morebtn").attr("href",e.moreUrl),this.elements.content.find(".src-site-info>a").attr("href",e.srcUrl).text(b),this.elements.carInfo.empty().html(g),this.elements.picList.empty().append(t.children()),this.$element.attr("data-id","face_auto_0");var w=a("#dutu-anchor-wrapper").children('[data-id="face_auto_0"]');setTimeout(function(){var t=a("#dutu-anchor-wrapper").children('[data-id="face_auto_0"]');t.children("a").attr("href",e.moreUrl).attr("log-click","p=5.15&fm=auto&tag=face&site="+encodeURIComponent(e.moreUrl))},100),w.show(),w.parent().show(),w.hasClass("default_icon")&&n.send("5.1011000",{tn:"baiduimagedetail",fm:"autodefault",tag:"face"})},bindEvent:function(){var e=this;this.$element.on("mouseenter",function(){var t=a(this).attr("data-id");e.anthorIndex=t,e.fire("hover")}).on("mouseleave",function(){e.fire("hout")})},active:function(e){if(this.checkProp(this.propData)&&(this.disactiveTimeout&&clearTimeout(this.disactiveTimeout),"card-box car-face-card"!=e.$element[0].className)){var t,i=a(e.$element[0]).find('[data-id="'+e.anthorIndex+'"]')[0]||a("body"),s=parseFloat(i.style.top),r=parseFloat(i.style.left),n=this.$element.height(),l=a(".img-container").height()-n,c=-parseInt(s),o=a(".img-container").offset().top,d=a(".img-container").offset().left;a(i).addClass("hover"),this.$element.siblings(".card-box").css("visibility","hidden"),a("#wikiinfo-card-wrapper .card-box").css("visibility","hidden");var p=a.browser.msie&&a.browser.version<9;if(!p){var h=a(i).siblings().children("a"),f=h.find("em");f.hasClass("hover")&&h.css("width","auto")&&f.removeClass("hover")}var h=a(i).children("a"),f=h.find("em");"none"==h.css("display")||a(i).hasClass("default_icon")?this.$element.find(".car-face-detail-title").show():this.$element.find(".car-face-detail-title").hide();var m=n+40+c,v=s+32-l,p=a.browser.msie&&a.browser.version<9;v>0&&(0>m||v>m)?(t=s-this.$element.height()+o,p||f.hasClass("hover")&&h.css("width","auto")&&f.removeClass("hover")):(t=s+32+o,parseInt(f.width())>136&&!f.hasClass("hover")&&!p&&(h.css("width","136px"),f.addClass("hover"))),this.$element.css({left:r+d+"px",top:t+"px",visibility:"visible"})}},disactive:function(e){if(this.checkProp(this.propData)){var t=this,i=e.anthorIndex;!function(e){t.disactiveTimeout=setTimeout(function(){var s=a(e.$element[0]).find('[data-id="'+i+'"]')[0];a(s).removeClass("hover"),t.$element.css("visibility","hidden");var r=a.browser.msie&&a.browser.version<9;if(!r){var n=a(s).children("a"),l=n.find("em");l.hasClass("hover")&&n.css("width","auto")&&l.removeClass("hover")}},150)}(e)}}}),t});
;/*!searchdetail:widget/ui/controls/card/carface2/carface2.js*/
define("searchdetail:widget/ui/controls/card/carface2/carface2",function(e){function t(e,t){t=i.extend({logTag:"face",dataKey:"",itemSize:{width:84,height:62},itemTpl:['<li class="car-face-item">','<div class="picbox">','<span class="pic-loading-dot"></span>','<a href="" target="_blank"><img /></a>',"</div>","</li>"].join(""),tpl:['<div class="card-box car2-face-card" id="carFace2">','<div class="card-search">','<a class="search-a" target="_blank"><span class="search">查看更多"</span><span class="carname"></span><span>"图片</span><i class="icon-more"></i></a>',"</div>",'<div class="card-content">','<ul class="clearfix piclist">',"</ul>","</div>","</div>"].join("")},t),e=i.extend({picList:".piclist",more:".card-search"},e),s.call(this,e,t)}var i=e("common:widget/ui/base/base"),a=(e("common:widget/ui/utils/utils"),e("common:widget/ui/base/events"),e("searchdetail:widget/ui/utils/lib"),e("searchdetail:widget/ui/utils/imghelper")),s=e("searchdetail:widget/ui/controls/card/base/asyncard"),r=e("searchdetail:widget/ui/statistic/statistic-core");return i.extend(t.prototype,s.prototype,{resetContent:function(){var e=this.elements.picList;e&&e.html('<li class="card-loading"></li>')},checkProp:function(e){var t=3;return!e||!e.picList||!e.picList.length||e.picList.length<t?!1:!0},renderContent:function(e){this.propData=e,this.$element.show();var t=i("<ul></ul>"),s=this,n=this.opts.itemSize,c=(this.opts.dataKey,3),o=e.picList;i(o).each(function(e,r){if(e>c-1)return!1;var o=i(s.opts.itemTpl).appendTo(t),d=o.find(".picbox img"),l=r.picUrl;o.find("a").attr("href",r.linkUrl),a.loadImage([l],function(e){var t=a.scaleFull(e,n);o.find(".pic-loading-dot").hide(),d.css(t).attr("src",l)}),d.attr("data-src",l)}),this.elements.more.find(".carname").text(e.name),this.elements.picList.empty().append(t.children()),this.$element.attr("data-id","face_auto_0");var d=i("#dutu-anchor-wrapper").children('[data-id="face_auto_0"]');d.children("a").attr("href",e.moreUrl).attr("log-click","p=5.15&fm=auto&tag=face&site="+encodeURIComponent(e.moreUrl)),d.show(),d.parent().show(),d.hasClass("default_icon")&&r.send("5.1011000",{tn:"baiduimagedetail",fm:"autodefault",tag:"face"}),this.$element.find(".card-search .search-a").attr("href","/search/index?tn=baiduimage&ie=utf-8&word="+encodeURIComponent(e.name)).attr("log-click","p=5.15&fm=autoNoResult&tag=face&site="+encodeURIComponent(e.url))},bindEvent:function(){var e=this;this.$element.on("mouseenter",function(){var t=i(this).attr("data-id");e.anthorIndex=t,e.fire("hover")}).on("mouseleave",function(){e.fire("hout")})},active:function(e){if(this.checkProp(this.propData)&&(this.disactiveTimeout&&clearTimeout(this.disactiveTimeout),"card-box car2-face-card"!=e.$element[0].className)){var t,a=i(e.$element[0]).find('[data-id="'+e.anthorIndex+'"]')[0]||i("body"),s=parseFloat(a.style.top),r=parseFloat(a.style.left),n=this.$element.height(),c=i(".img-container").height()-n,o=-parseInt(s),d=i(".img-container").offset().top,l=i(".img-container").offset().left;i(a).addClass("hover"),this.$element.siblings(".card-box").css("visibility","hidden"),i("#wikiinfo-card-wrapper .card-box").css("visibility","hidden");var h=i.browser.msie&&i.browser.version<9;if(!h){var m=i(a).siblings().children("a"),p=m.find("em");p.hasClass("hover")&&m.css("width","auto")&&p.removeClass("hover")}var m=i(a).children("a"),p=m.find("em"),f=n+40+o,u=s+32-c,h=i.browser.msie&&i.browser.version<9;u>0&&(0>f||u>f)?(t=s-this.$element.height()+d,h||p.hasClass("hover")&&m.css("width","auto")&&p.removeClass("hover")):(t=s+32+d,parseInt(p.width())>136&&!p.hasClass("hover")&&!h&&(m.css("width","136px"),p.addClass("hover"))),this.$element.css({left:r+l+"px",top:t+"px",visibility:"visible"})}},disactive:function(e){if(this.checkProp(this.propData)){var t=this,a=e.anthorIndex;!function(e){t.disactiveTimeout=setTimeout(function(){var s=i(e.$element[0]).find('[data-id="'+a+'"]')[0];i(s).removeClass("hover"),t.$element.css("visibility","hidden")},150)}(e)}}}),t});
;/*!searchdetail:widget/ui/controls/card/decoration_sim/decoration_sim.js*/
define("searchdetail:widget/ui/controls/card/decoration_sim/decoration_sim",function(t){function a(t,a){a=i.extend({dataKey:"decoration_sim",logKey:"decoration_sim",itemSize:{width:78,height:78},itemTpl:['<li class="picbox decoration_sim_item">','<span class="pic-loading-dot"></span>','<a href="" target="_blank"><img /></a>',"</li>"].join(""),tpl:['<div class="card-box decoration_sim_card">','<h5 class="card-title"><i class="sticker"></i><span class="text">装修案例</span><i class="close"></i></h5>','<div class="card-content">','<a href="" target="_blank" class="card-subtitle"></a>','<div class="starbox">','<span class="starbar">案例评分：</span>','<a class="talktoher" href="" target="_blank">免费咨询</a>',"</div>",'<ul class="clearfix piclist"></ul>','<a class="dataprovider" href="" target="_blank"></a>',"</div>","</div>"].join("")},a),t=i.extend({picList:".piclist"},t),s.call(this,t,a)}var i=t("common:widget/ui/base/base"),e=(t("common:widget/ui/utils/utils"),t("common:widget/ui/base/events"),t("searchdetail:widget/ui/utils/lib"),t("searchdetail:widget/ui/utils/imghelper")),s=t("searchdetail:widget/ui/controls/card/base/base");return i.extend(a.prototype,s.prototype,{updateView:function(t,a){var s=(t.same,this.elements.title.find("span")),r=this.elements.content.find(".starbox");s.html("相似案例"),r.hide(),this.opts.logKey="decoration_sim";{var l=i("<ul></ul>"),c=this,n=(this.imgData,this.opts.itemSize);a.get("imgData").cs,a.get("word")}i(t.pics).each(function(a,s){var r=i(c.opts.itemTpl);a>0&&r.css("margin-left","5px"),r.appendTo(l);var d=r.find("img"),o={cs:s.cs,p:a+1};r.find("a").attr("href",t.caseurl),e.loadImage([s],function(t){var a=e.scaleFull(t,n);r.find(".pic-loading-dot").hide(),d.css(a).attr("src",s)}),d.attr("data-src",s.imgUrl),r.find("a").attr("log-ext",i.json.stringify(o))}),this.elements.cntWrapper.find(".card-subtitle").html(t.title).attr("href",t.caseurl),this.elements.cntWrapper.find(".starbar").addClass("star"+t.star),this.elements.cntWrapper.find(".dataprovider").html(t.company).attr("href",t.srcUrl),this.elements.cntWrapper.find(".talktoher").attr("href",t.srcUrl),this.elements.picList.empty().append(l.children())}}),a});
;/*!searchdetail:widget/ui/controls/card/foods/foods.js*/
define("searchdetail:widget/ui/controls/card/foods/foods",function(t){function i(t,i){i=e.extend({dataKey:"srv_food",itemSize:{width:78,height:78},itemTpl:['<li class="picbox">','<span class="pic-loading-dot"></span>','<a href="" target="_blank" log-pos="pic">','<img height=80 src="" />','<span class="step-numbg"></span>','<span class="step-num"></span>',"</a>","</li>"].join(""),tpl:['<div class="card-box foods-card">','<h5 class="card-title"><i class="sticker"></i><span class="text">美食教程</span><i class="close"></i></h5>','<div class="card-content">','<h6><a href="" target="_blank" log-pos="title"></a></h6>','<ul class="clearfix piclist">',"</ul>",'<p class="src-row"><a href="" target="_blank" log-pos="more"><span></span></a></p>',"</div>","</div>"].join("")},i),t=e.extend({titleLink:"h6 a",picList:".piclist",srcSite:".src-row a"},t),l.call(this,t,i)}var e=t("common:widget/ui/base/base"),s=(t("common:widget/ui/utils/utils"),t("common:widget/ui/base/events"),t("searchdetail:widget/ui/utils/lib")),a=t("searchdetail:widget/ui/utils/imghelper"),l=t("searchdetail:widget/ui/controls/card/base/base");return e.extend(i.prototype,l.prototype,{updateView:function(t){var i=e("<ul></ul>"),l=this,n=this.opts.itemSize,r={t:t.title,f:t.srcUrl};e(t.steps).each(function(t,s){if(t>2)return!1;var c=e(l.opts.itemTpl).appendTo(i),o=c.find("img"),d=s.picUrl,p=e.extend({},r,{f:s.linkUrl});c.find("a").attr("href",s.linkUrl),a.loadImage([d],function(t){var i=a.scaleFull(t,n);c.find(".pic-loading-dot").hide(),o.css(i).attr("src",d)}),o.attr("data-src",d),c.find("a").attr("log-ext",e.json.stringify(p)),c.find(".step-num").text(t+1)}),this.elements.picList.empty().append(i.children()),this.elements.titleLink.attr("href",t.srcUrl).html(t.title+"的做法").attr("title",t.title).attr("log-ext",e.json.stringify(r));var c=s.getHost(t.srcUrl);this.elements.srcSite.attr("href",c).attr("log-ext",e.json.stringify(r)).find("span").text(s.getSiteName(c))}}),i});
;/*!searchdetail:widget/ui/controls/card/friends/friendsasync.js*/
define("searchdetail:widget/ui/controls/card/friends/friendsasync",function(t){function i(t,i){i=s.extend({dataKey:"",logKey:"friend",itemSize:{width:70,height:70},itemTpl:['<li class="picbox num${index}"><a href="${fromUrl}" target="_blank" log-click="p=5.15&tag=card&fm=jiaoyou&site=${encodeURIComponent(fromUrl)}&pos=&ext=&pageurl=${encodeURIComponent(pageurl)}">','<span class="pic-loading-dot"></span>','<img src="${stUrl}" class="img" /><span class="shadow"></span><span class="hover">打招呼</span>','<p class="similar">${parseInt(similarity*100)}%相似</p>','<p class="age">${age}岁</p>','<p class="site">${fromSite}</p>',"</a></li>"].join(""),tpl:['<div class="card-box friends-card">','<h5 class="card-title"><i class="sticker"></i><span class="text">识图交友</span><i class="close"></i></h5>','<div class="card-content">','<div class="con"><div class="headImg"><img src="" /><span class="shadow"></span></div></div>','<p class="text">Ta是你的梦中情人么,为你找到和Ta样貌相似的人</p>','<ul class="clearfix piclist">',"</ul>","</div>","</div>"].join("")},i),t=s.extend({picList:".piclist"},t),a.call(this,t,i)}{var s=t("common:widget/ui/base/base"),e=(t("common:widget/ui/utils/utils"),t("common:widget/ui/base/events"),t("searchdetail:widget/ui/utils/lib"),t("searchdetail:widget/ui/utils/imghelper"),t("common:widget/ui/juicer/juicer")),a=t("searchdetail:widget/ui/controls/card/base/asyncard");t("searchdetail:widget/ui/statistic/statistic-core")}return s.extend(i.prototype,a.prototype,{checkProp:function(t){return t&&!s.isArray(t)&&t.cont&&t.cont.length>2},renderContent:function(t){var i=this.opts.itemSize.width/(t.avatar_face_loc.width-0);htmls="";for(var s={width:i*this.imgData.width+"px",left:-i*t.avatar_face_loc.left+"px",top:-i*t.avatar_face_loc.top+"px"},a=0;3>a;a++)t.cont[a].index=a+1,t.cont[a].pageurl=location.href,htmls+=e(this.opts.itemTpl,t.cont[a]);this.elements.picList.empty().append(htmls),this.elements.cntWrapper.find(".headImg img").attr("src",t.avatar_url).css(s),this.$element.show()}}),i});
;/*!searchdetail:widget/ui/controls/card/goods/goods.js*/
define("searchdetail:widget/ui/controls/card/goods/goods",function(e){function t(e,t){t=i.extend({dataKey:"",logKey:"cloth",itemSize:{width:118,height:98},itemTpl:['<li class="goods-item">','<div class="picbox">','<span class="pic-loading-dot"></span>','<a href="" target="_blank"><img /></a>',"</div>",'<div class="goods-info"><span></span><a class="brand" href="" target="_blank"></a></div>',"</li>"].join(""),tpl:['<div class="card-box goods-card">','<h5 class="card-title"><i class="sticker"></i><span class="text">相似商品</span>','<a class="card-box-more card-box-goods-more" log-pos="more" href="" target="_blank"><span class="card-box-more-text">更多</span><i class="card-box-more-img"></i></a><i class="close"></i></h5>','<div class="card-content">','<ul class="clearfix piclist">',"</ul>","</div>","</div>"].join("")},t),e=i.extend({picList:".piclist"},e),a.call(this,e,t)}var i=e("common:widget/ui/base/base"),o=(e("common:widget/ui/utils/utils"),e("common:widget/ui/base/events"),e("searchdetail:widget/ui/utils/lib"),e("searchdetail:widget/ui/utils/imghelper")),a=e("searchdetail:widget/ui/controls/card/base/asyncard");return i.extend(t.prototype,a.prototype,{resetContent:function(){var e=this.elements.picList;e&&e.html('<li class="card-loading"></li>')},checkProp:function(e){return!e||!e.length||e.length<4?!1:!0},renderContent:function(e,t,a){var s=i("<ul></ul>"),r=this,d=this.opts.itemSize,c=a.get("imgData").cs,n=a.get("word"),l=a.get("imgData").bdSrcType||0,m=encodeURIComponent(a.get("imgData").thumbURL),g=a.get("imgData").map,p=g.cloth_info?1:2,h=encodeURIComponent(a.get("imgData").picDesc),f=a.get("imgData").fromPageTitleEnc,u="/n/pc_list?queryImageUrl="+m+"&querySign="+c+"&query="+n+"&shixiao="+l+"&objtype="+p+"&title="+f+"&ddesc="+h+"&fp=searchdetail&pos=card&fm=searchdetail&uptype=button#activeTab=2";i(e).each(function(e,t){if(e>3)return!1;var a=i(r.opts.itemTpl).appendTo(s),c=a.find("img"),n=t.imgInfo.thumbURL;a.find("a").attr("href",t.pcBuyURL||t.fromURL),"http://error"==t.imgInfo.thumbURL&&(n=t.imgInfo.objURL),o.loadImage([n],function(e){var t=o.scaleFull(e,d);a.find(".pic-loading-dot").hide(),c.css(t).attr("src",n)}),c.attr("data-src",n);var l="￥"+(t.price>=100?String(t.price).replace(/(\d{2})$/,".$1"):"0."+t.price),m=a.find(".goods-info");m.find("span:first-child").text(l),m.find(".brand").text(t.source)}),i(".card-box-goods-more").attr({href:u,fm:r.opts.logKey}),i(".card-box-goods-more").hover(function(){i(this).find(".card-box-more-text").addClass("card-box-more-text-hover"),i(this).find(".card-box-more-img").addClass("card-box-more-img-hover")},function(){i(this).find(".card-box-more-text").removeClass("card-box-more-text-hover"),i(this).find(".card-box-more-img").removeClass("card-box-more-img-hover")}),"shoe"==r.opts.logKey&&i(".card-box-goods-more").remove(),this.elements.picList.empty().append(s.children()),this.$element.show(),this.elements.picList.find(".goods-item").each(function(e,t){t=i(t),t.find(".goods-info>.brand").width(Math.max(0,d.width-t.find(".goods-info>span").width()-10))}),i(".card-box-more").on("click",function(){i.cookie("uploadTime",(new Date).getTime(),{path:"/"})})}}),t});
;/*!searchdetail:widget/ui/controls/card/goods/goodsSync.js*/
define("searchdetail:widget/ui/controls/card/goods/goodsSync",function(e){function i(e,i){i=o.extend({dataKey:"",logKey:"cloth",itemSize:{width:118,height:98},itemTpl:['<li class="goods-item">','<div class="picbox">','<span class="pic-loading-dot"></span>','<a href="" target="_blank"><img /></a>',"</div>",'<div class="goods-info"><a class="brand" href="" target="_blank"></a></div>',"</li>"].join(""),tpl:['<div class="card-box goods-card">','<h5 class="card-title"><i class="sticker"></i><span class="text">相关商品</span>','<a class="card-box-more card-box-goods-more" log-pos="more" href="" target="_blank">','<span class="card-box-more-text">更多</span><i class="card-box-more-img"></i></a><i class="close"></i></h5>','<div class="card-content">','<ul class="clearfix piclist">',"</ul>","</div>","</div>"].join("")},i),e=o.extend({picList:".piclist"},e),s.call(this,e,i)}var o=e("common:widget/ui/base/base"),t=e("common:widget/ui/utils/utils"),a=(e("common:widget/ui/base/events"),e("searchdetail:widget/ui/utils/lib"),e("searchdetail:widget/ui/utils/imghelper")),s=e("searchdetail:widget/ui/controls/card/base/base");return o.extend(i.prototype,s.prototype,{updateView:function(e,i){var s=o("<ul></ul>"),d=this,r=this.opts.itemSize,c=i.get("imgData"),n={querySign:c.cs,os:c.os,query:i.get("word"),shixiao:c.bdSrcType||0,queryImageUrl:encodeURIComponent(c.thumbURL),objtype:2,ddesc:encodeURIComponent(c.picDesc),title:c.fromPageTitleEnc},l="/n/pc_list?"+t.jsonToQuery(n)+"&fp=searchdetail&pos=card&fm=searchdetail&uptype=button#activeTab=2";o(e).each(function(e,i){if(e>3)return!1;var t=o(d.opts.itemTpl).appendTo(s),c=t.find("img"),n=i.tnurl;t.find("a").attr("href",i.url),a.loadImage([n],function(e){var i=a.scaleFull(e,r);t.find(".pic-loading-dot").hide(),c.css(i).attr("src",n)}),c.attr("data-src",n);var l=t.find(".goods-info");l.find(".brand").text(i.source)}),o(".card-box-goods-more").attr({href:l,fm:d.opts.logKey}),o(".card-box-goods-more").hover(function(){o(this).find(".card-box-more-text").addClass("card-box-more-text-hover"),o(this).find(".card-box-more-img").addClass("card-box-more-img-hover")},function(){o(this).find(".card-box-more-text").removeClass("card-box-more-text-hover"),o(this).find(".card-box-more-img").removeClass("card-box-more-img-hover")}),this.elements.picList.empty().append(s.children()),this.$element.show(),this.elements.picList.find(".goods-item").each(function(e,i){i=o(i),i.find(".goods-info>.brand").width(Math.max(0,r.width-i.find(".goods-info>span").width()-10))}),o(".card-box-more").on("click",function(){o.cookie("uploadTime",(new Date).getTime(),{path:"/"})})}}),i});
;/*!searchdetail:widget/ui/controls/card/goodsdetail/goodsdetail.js*/
define("searchdetail:widget/ui/controls/card/goodsdetail/goodsdetail",function(t,i,e){function a(t,i){i=s.extend({checkState:!1,logKey:"pc_detail_slider_right_goods_detail",itemTpl:"<li>\n<div class='left-pic'>\n<a target='_blank'>\n<img>\n</a>\n</div>\n<a target='_blank' class='feibiao-link fl1'></a>\n<a target='_blank' class='feibiao-link fl2'></a>\n<a target='_blank' class='feibiao-link fl3'>\n<span>官方价：</span>\n<span class='price'></span>\n</a>\n<a target='_blank' class='feibiao-link fl4'>\n<span>线上优惠价：</span>\n<span class='discount-price'></span>\n</a>\n</li>",tpl:['<div class="card-box goodsdetail">','<h5 class="card-title"><i class="sticker"></i><span class="text">图中商品详情</span><i class="new"></i></h5>','<div class="card-content">','<ul class="piclist">',"</ul>","</div>","</div>"].join("")},i),t=s.extend({titleLink:"h6 a",picList:".piclist"},t),n.call(this,t,i)}var s=t("common:widget/ui/base/base"),n=(t("searchdetail:widget/ui/statistic/statistic-core"),t("searchdetail:widget/ui/controls/card/base/base")),l=t("searchdetail:widget/ui/statistic/statistic-core");s.extend(a.prototype,n.prototype,{setLog:function(t,i,e){var a=this;return l.send("10.1010100",{as:a.opts.brandName,pos:a.opts.logKey,subpos:i,shownum:e,matcont:t,materialNum:"5"}),"p=10.1010101&as"+a.opts.brandName+"&pos="+a.opts.logKey+"&subpos"+i+"&matcont="+t+"&tgTo=1"},updateView:function(t){var i={},e=this;if(t.fbResult&&t.fbResult.length&&s.each(t.fbResult,function(t,e){return e.Tag===this.opts.logKey?(i=e,!1):void 0}.bind(this)),!i.Tag)return!1;var a=i.Items[0].Images;e.opts.brandName=i.Items[0].BrandName,this.elements.picList.empty(),s.each(a,function(t,i){var n=s(this.opts.itemTpl);n.find("img").attr("src",i.ImageUrl),n.find(".fl1").text(i.AdTitle).attr("log-click",e.setLog(i.AdTitle,t,a.length)),n.find(".fl2").text(i.AdDesc).attr("log-click",e.setLog(i.AdDesc,t,a.length)),n.find(".price").text(i.OriginPrice).attr("log-click",e.setLog(i.OriginPrice,t,a.length)),n.find(".discount-price").text(i.Price).attr("log-click",e.setLog(i.Price,t,a.length)),n.find(".left-pic a").attr("href",i.AdLink).attr("log-click",e.setLog(i.ImageUrl,t,a.length)),n.find(".feibiao-link").attr("href",i.AdLink),this.elements.picList.append(n)}.bind(this))}}),e.exports=a});
;/*!searchdetail:widget/ui/controls/card/goodsface/goodsface.js*/
define("searchdetail:widget/ui/controls/card/goodsface/goodsface",function(e){function i(e,i){i=t.extend({dataKey:"",logKey:"cloth",itemSize:{width:110,height:140},itemTpl:['<li class="goods-item">','<div class="picbox">','<span class="pic-loading-dot"></span>','<a href="" target="_blank"><img /></a>',"</div>",'<div class="goods-info"><span></span><a class="brand" href="" target="_blank"></a><em class="bg"></em></div>',"</li>"].join(""),tpl:['<div class="card-box goods-face-card">','<div class="card-content">','<ul class="clearfix piclist">',"</ul>",'<div class="moresimilarpic"><a log-pos="more" href="" target="_blank">查看更多<span class="arrow1"></span><span class="arrow2"></span></a></div>',"</div>","</div>"].join("")},i),e=t.extend({picList:".piclist"},e),a.call(this,e,i)}var t=e("common:widget/ui/base/base"),s=(e("common:widget/ui/utils/utils"),e("common:widget/ui/base/events"),e("searchdetail:widget/ui/utils/lib"),e("searchdetail:widget/ui/utils/imghelper")),a=e("searchdetail:widget/ui/controls/card/base/asyncard");return t.extend(i.prototype,a.prototype,{resetContent:function(){var e=this.elements.picList;e&&e.html('<li class="card-loading"></li>')},checkProp:function(e){return this.propData=e,!e||!e.length||e.length<3?!1:!0},renderContent:function(e,i,a){var n=t("<ul></ul>"),o=this,r=this.opts.itemSize,d=a.get("imgData").cs,l=a.get("word"),c=a.get("imgData").bdSrcType,h=encodeURIComponent(a.get("bigImgUrl")),m=a.get("imgData").map,p=m.cloth_info?1:2,f=a.get("imgData").picDesc,g=a.get("imgData").fromPageTitleEnc,u="/n/pc_list?queryImageUrl="+h+"&querysign="+d+"&query="+l+"&shixiao="+c+"&objtype="+p+"&title="+g+"&ddesc="+f+"&fp=searchdetail&pos=card&fm=searchdetail&uptype=button#tab=product";t(e).each(function(e,i){if(e>2)return!1;var a=t(o.opts.itemTpl).appendTo(n),d=a.find("img"),l=i.imgInfo.thumbURL;a.find("a").attr("href",i.pcBuyURL||i.fromURL),"http://error"==i.imgInfo.thumbURL&&(l=i.imgInfo.objURL),s.loadImage([l],function(e){var i=s.scaleFull(e,r);a.find(".pic-loading-dot").hide(),d.css(i).attr("src",l)}),d.attr("data-src",l);var c=i.price>=100?String(i.price).replace(/(\d{2})$/,".$1"):"0."+i.price,h=a.find(".goods-info");h.find("span:first-child").text(c),h.find(".brand").text(i.source)}),this.elements.picList.empty().append(n.children()),this.$element.attr("data-id","face_cloth_0"),this.$element.show(),this.elements.picList.find(".goods-item").each(function(e,i){i=t(i),i.find(".goods-info>.brand").width(Math.max(0,r.width-i.find(".goods-info>span").width()-12))}),this.elements.cntWrapper.find(".moresimilarpic").find("a").attr("href",u)},bindEvent:function(){var e=this;this.$element.on("mouseenter",function(){var i=t(this).attr("data-id");e.anthorIndex=i,e.fire("hover")}).on("mouseleave",function(){e.fire("hout")})},active:function(e){if(this.disactiveTimeout&&clearTimeout(this.disactiveTimeout),"card-box goods-face-card"!=e.$element[0].className&&this.propData&&this.propData.length&&this.propData.length>3){var i=t(e.$element[0]).find('[data-id="'+e.anthorIndex+'"]')[0]||t("body"),s=parseFloat(i.style.top),a=parseFloat(i.style.left),n=this.$element.height(),o=t(".img-container").height()-n,r=-parseInt(s),d=t(".img-container").offset().top,l=t(".img-container").offset().left;t(i).siblings().removeClass("hover"),t(i).addClass("hover"),this.$element.siblings().css("visibility","hidden"),t("#wikiinfo-card-wrapper .card-box").css("visibility","hidden");var c=t.browser.msie&&t.browser.version<9;if(!c){var h=t(i).siblings().children("a"),m=h.find("em");m.hasClass("hover")&&h.css("width","auto")&&m.removeClass("hover")}var p,h=t(i).children("a"),m=h.find("em"),f=n+65+r,g=s+32-o,c=t.browser.msie&&t.browser.version<9;g>0&&(0>f||g>f)?(p=s-this.$element.height()+d,c||m.hasClass("hover")&&h.css("width","auto")&&m.removeClass("hover")):(p=s+32+d,parseInt(m.width())>104&&!m.hasClass("hover")&&!c&&(h.css("width","104px"),m.addClass("hover"))),this.$element.css({left:a+l+"px",top:p+"px"}).css("visibility","visible"),this.$element.show(),this.$element.find("ul>li").css("border","1px solid #eef2f5")}},disactive:function(e){var i=this,s=e.anthorIndex;!function(e){i.disactiveTimeout=setTimeout(function(){var a=t(e.$element[0]).find('[data-id="'+s+'"]')[0];t(a).removeClass("hover"),i.$element.css("visibility","hidden")},150)}(e)}}),i});
;/*!searchdetail:widget/ui/controls/card/hotcars/hotcars.js*/
define("searchdetail:widget/ui/controls/card/hotcars/hotcars",function(t){function i(t,i){i=e.extend({dataKey:"",itemSize:{width:118,height:88},itemTpl:['<li class="hotcars-item">','<div class="picbox">','<span class="pic-loading-dot"></span>','<a href="" target="_blank"><img /></a>',"</div>",'<h6 class="hotcars-item-title"><span class="hotcars-item-title-bg"></span><a href="" target="_blank"></a></h6>',"</li>"].join(""),tpl:['<div class="card-box hotcars-card">','<h5 class="card-title"><i class="sticker"></i><span class="text">热门汽车</span><i class="close"></i></h5>','<div class="card-content">','<div class="hotcars-info">',"</div>",'<ul class="clearfix piclist">',"</ul>",'<a class="morebtn" href="" target="_blank">更多车型&gt;</a>',"</div>","</div>"].join(""),carLogoTpl:['<div class="hotcars-logo">','<div class="hotcars-logo-img"><a target="_blank" href=""><img /></a></div>',"<ul>",'<li><h6><a target="_blank" href="" title=""></a></h6></li>','<li class="src-site-info"><span>来自：</span><a href="" target="_blank"></a></li>',"</ul>","</div>"].join("")},i),t=e.extend({picList:".piclist",carInfo:".hotcars-info"},t),r.call(this,t,i)}var e=t("common:widget/ui/base/base"),a=t("common:widget/ui/utils/utils"),s=(t("common:widget/ui/base/events"),t("searchdetail:widget/ui/utils/lib"),t("searchdetail:widget/ui/utils/imghelper")),r=t("searchdetail:widget/ui/controls/card/base/asyncard");return e.extend(i.prototype,r.prototype,{resetContent:function(){var t=this.elements.picList;this.elements.carInfo.empty(),t&&t.html('<li class="card-loading"></li>')},checkProp:function(t){var i=4;return!t||!t.picList||!t.picList.length||t.picList.length<i?!1:!0},renderContent:function(t){var i=e("<ul></ul>"),r=e("<div></div>"),l=this,c=this.opts.itemSize,n=(this.opts.dataKey,4),o=t.picList,d=e(l.opts.carLogoTpl).appendTo(r),h=d.children("ul").find("li"),p="来自"===t.srcSite.substring(0,2)?t.srcSite.substring(3):t.srcSite;d.children(".hotcars-logo-img").find("a").attr("href",t.moreUrl),d.children(".hotcars-logo-img").find("img").attr("src",a.httpsTimg({imgUrl:t.logo})),h.eq(0).find("h6>a").text(t.name).attr({href:t.moreUrl,title:t.name}),h.eq(1).find("a").attr("href",t.srcUrl).text(p),e(o).each(function(t,a){if(t>n-1)return!1;var r=e(l.opts.itemTpl).appendTo(i),o=r.find(".picbox img"),d=a.picUrl;r.find("a").attr("href",a.linkUrl),s.loadImage([d],function(t){var i=s.scaleFull(t,c);r.find(".pic-loading-dot").hide(),o.css(i).attr("src",d)}),o.attr("data-src",d),r.find(".hotcars-item-title a").text(a.name).attr("title",a.name)}),this.elements.content.find(".morebtn").attr("href",t.moreUrl),this.elements.carInfo.empty().html(r.children()),this.elements.picList.empty().append(i.children()),this.$element.show()}}),i});
;/*!searchdetail:widget/ui/controls/card/hottags/hottags.js*/
define("searchdetail:widget/ui/controls/card/hottags/hottags",function(t){function e(t,e){e=a.extend({dataKey:"",tpl:['<div class="card-box hottags-card">','<h5 class="card-title"><i class="sticker"></i><span class="text">相关热词</span><i class="close"></i></h5>','<div class="card-content">','<div class="tag-wrapper"></div>',"</div>","</div>"].join("")},e),t=a.extend({tagWrapper:".tag-wrapper"},t),i.call(this,t,e)}var a=t("common:widget/ui/base/base"),i=(t("common:widget/ui/utils/utils"),t("common:widget/ui/base/events"),t("searchdetail:widget/ui/utils/lib"),t("searchdetail:widget/ui/utils/imghelper"),t("searchdetail:widget/ui/controls/card/base/base"));return a.extend(e.prototype,i.prototype,{updateView:function(t){var e=a("<div></div>");a(t).each(function(t,i){var s=a('<a class="tag-item" target="_blank"></a>').appendTo(e),d="/search/index?tn=baiduimage&ie=utf-8&fr=2.0_hottags&word="+encodeURIComponent(i.query);s.text(i.tag).attr("href",d)}),this.elements.tagWrapper.empty().append(e.children())}}),e});
;/*!searchdetail:widget/ui/controls/card/imgstory/imgstory.js*/
define("searchdetail:widget/ui/controls/card/imgstory/imgstory",function(t){function e(t,e){e=s.extend({dataKey:"act_info",itemTpl:['<div class="story-detail">','<h6 class="story-name"><a href="http://www.chinanews.com/yl/yrfc/news/2007/07-18/982241.shtml" target="_blank">布拉德·皮特偷带女儿见前妻 致使茱莉大发雷霆</a></h6>','<p class="detail-row"></p>','<p class="src-row"><a class="src-lbl" href="http://www.chinanews.com/" target="_blank">中国新闻网</a><span class="src-lbl">2007-07-18</span></p>',"</div>"].join(""),tpl:['<div class="card-box imgstory-card">','<h5 class="card-title"><i class="sticker"></i><span class="text">相关资讯</span><i class="close"></i></h5>','<div class="card-content">',"</div>","</div>"].join("")},e),l.call(this,t,e)}var s=t("common:widget/ui/base/base"),a=t("common:widget/ui/utils/utils"),i=(t("common:widget/ui/base/events"),t("searchdetail:widget/ui/utils/lib")),l=t("searchdetail:widget/ui/controls/card/base/base");return s.extend(e.prototype,l.prototype,{updateLogSeq:function(t){l.prototype.updateLogSeq.call(this,t),t>1&&!this.$element.hasClass(this.opts.collapseClass)},updateView:function(t){var e,l=s("<div></div>"),n=this;s(t).each(function(t,r){if(t>1)return!1;e=s(n.opts.itemTpl).appendTo(l);var o=r.title,c=30,d=e.find(".story-name"),p={t:o,tm:r.time};r.cont?(p.hd=1,d.hasClass("sline")||d.addClass("sline")):(p.hd=0,o=a.cutHtmlText(o,c,"...",1),d.hasClass("sline")&&d.removeClass("sline")),e.find(".story-name a").attr("href",r.fromurl).text(o).attr("title",r.title),r.cont?e.find(".detail-row").text(a.cutHtmlText(a.trimTags(r.cont),37,"...")).show():e.find(".detail-row").hide();var h=e.find(".src-row"),m=i.getHost(r.fromurl),f=r.site||i.getSiteName(m);h.find("a").attr("href",m).text(f),h.find("span").text(r.time.replace(/\s+[0-9:]+$/,"")),e.find("a").attr("log-ext",s.json.stringify(p))}),this.elements.content.empty().append(l.children())}}),e});
;/*!searchdetail:widget/ui/controls/card/invest/invest.js*/
define("searchdetail:widget/ui/controls/card/invest/invest",function(t){function e(t,e){e=i.extend({dataKey:"",caption:"",tpl:['<div class="card-box invest-card">','<h5 class="card-title"><i class="sticker"></i><span class="text"></span><i class="close"></i></h5>','<div class="card-content" style="font-size:0;">',"</div>","</div>"].join("")},e),a.call(this,t,e)}var i=t("common:widget/ui/base/base"),a=(t("common:widget/ui/utils/utils"),t("common:widget/ui/base/events"),t("searchdetail:widget/ui/utils/lib"),t("searchdetail:widget/ui/controls/card/base/base"));return i.extend(e.prototype,a.prototype,{render:function(){a.prototype.render.call(this),this.elements.title.find(".text").text(this.opts.caption)},updateView:function(t){var e=i('<a target="_blank"><img /></a>');e.attr("href",t.banner_fromurl).attr("title",t.name||"").find("img").attr("src",t.banner_url),this.elements.content.html(e)}}),e});
;/*!searchdetail:widget/ui/controls/card/jipiao/jipiao.js*/
define("searchdetail:widget/ui/controls/card/jipiao/jipiao",function(t){function i(t,i){i=s.extend({dataKey:"",flashOptions:{xTitle:"时间",yTitle:"人均价格（元）",xTitleFont:"微软雅黑",yTitleFont:"微软雅黑",xTitleColor:"0x9c9898",yTitleColor:"0x9c9898",lineColor:"0xf77d76",markColor:"0xf77d76"},pollingInterval:50,tpl:['<div class="card-box jipiao-card">','<h5 class="card-title"><i class="sticker"></i><span class="text">机票</span><i class="close"></i></h5>','<div class="card-content">','<h6><a class="title" target="_blank"></a><span class="src-site">(来自：<a href="" target="_blank"></a>)</span></h6>','<div class="price-flash"></div>','<a class="morebtn" href="" target="_blank">更多趋势&gt;</a>',"</div>","</div>"].join("")},i),t=s.extend({contentTitle:"h6 .title",srcSite:"h6 .src-site a",priceFlash:".price-flash",moreLink:".morebtn"},t),r.call(this,t,i),this._flashObj=!1,this._pollingTimer=!1}function e(){}var s=t("common:widget/ui/base/base"),a=(t("common:widget/ui/utils/utils"),t("common:widget/ui/base/events")),l=(t("searchdetail:widget/ui/utils/lib"),t("searchdetail:widget/ui/utils/imghelper"),t("searchdetail:widget/ui/statistic/statistic-core")),r=(t("searchdetail:widget/ui/utils/swf"),t("searchdetail:widget/ui/controls/card/base/asyncard"));return s.extend(i.prototype,r.prototype,{checkProp:function(t){var i=r.prototype.checkProp.call(this,t);return i&&r.prototype.checkProp.call(this,t.priceList)},render:function(){r.prototype.render.call(this),this._flashObj===!1&&this._initFlash()},renderContent:function(t,i,e){var s=this.elements;s.contentTitle.text(t.fromPlace+"—"+t.toPlace).attr("href",t.moreUrl),s.srcSite.text(t.srcSite).attr("href",t.srcUrl),s.moreLink.attr("href",t.moreUrl),this.$element.show(),this._startPollingCallFlash(t,e)},_startPollingCallFlash:function(t,i){if(this._pollingTimer&&(this._pollingTimer=window.clearTimeout(this._pollingTimer)),this._flashObj)if("function"==typeof this._flashObj.callAsFunction)this.imgData&&this.imgData.key==i.getKey()&&this._refreshPriceData(t.priceList);else{var e=this;this._pollingTimer=setTimeout(function(){e._startPollingCallFlash(t,i)},this.opts.pollingInterval)}},_refreshPriceData:function(t){var i=[];s(t).each(function(t,e){if(e.price){var s=i.length;i.push({id:t,x:10*s,y:1*e.price,xVal:0==s||6==s?e.date:"",url:e.url})}return i.length>6?!1:void 0}),this._flashObj.callAsFunction(i,this.opts.flashOptions)},_initFlash:function(){this.elements.priceFlash.flash({id:"wChart",name:"wChart",width:"262",height:"190",ver:"9.0.28",errorMessage:"请下载最新的Flash播放器！",swf:"/static/flash/wChart.swf",bgcolor:"#ffffff",wmode:"transparent",allowScriptAccess:"always",vars:{}});var t=this.elements.priceFlash.find("object");if(this._flashObj=t.length?t.get(0):null,!window.wChartFlash){var i=this;window.wChartFlash=new e,window.wChartFlash.on("priceLinkClick",function(t){var e=i.propData.priceList||[],s=e&&e[t.index];l.send("5.15",{tag:"card",fm:i.opts.logKey,site:encodeURIComponent(s&&s.url||""),seq:i.opts.logIndex||""})})}}}),s.extend(e.prototype,a,{nodeClicked:function(t){this.fire("priceLinkClick",{index:t})}}),i});
;/*!searchdetail:widget/ui/controls/card/lvyouluxian/lvyouluxian.js*/
define("searchdetail:widget/ui/controls/card/lvyouluxian/lvyouluxian",function(t){function e(t,e){e=i.extend({dataKey:"",itemTpl:['<li class="lvyouluxian-item">','<a class="lvyouluxian-title" href="" target="_blank"></a>','<span class="price"><span style="font-size:14px;margin-right:-2px;">￥</span><em></em><span style="font-size:12px;">起</span></span>',"</li>"].join(""),tpl:['<div class="card-box lvyouluxian-card">','<h5 class="card-title"><i class="sticker"></i><span class="text">路线推荐</span><i class="close"></i></h5>','<div class="card-content">','<h6><a class="title" target="_blank"></a><span class="src-site">(来自：<a href="" target="_blank"></a>)</span></h6>','<ul class="clearfix list">',"</ul>",'<a class="morebtn" href="" target="_blank">更多路线&gt;</a>',"</div>","</div>"].join("")},e),t=i.extend({contentTitle:"h6 .title",srcSite:"h6 .src-site a",list:".list",moreLink:".morebtn"},t),a.call(this,t,e)}var i=t("common:widget/ui/base/base"),a=(t("common:widget/ui/utils/utils"),t("common:widget/ui/base/events"),t("searchdetail:widget/ui/utils/lib"),t("searchdetail:widget/ui/utils/imghelper"),t("searchdetail:widget/ui/controls/card/base/asyncard"));return i.extend(e.prototype,a.prototype,{resetContent:function(){var t=this.elements.list;t&&t.html('<li class="card-loading"></li>')},renderContent:function(t){var e=i("<ul></ul>"),a=this,l=this.elements;i(t.lineList).each(function(t,l){if(t>2)return!1;var s=i(a.opts.itemTpl).appendTo(e),n=s.find(".lvyouluxian-title"),r=s.find(".price em");r.text(l.realPrice||l.price);var c="<"+l.style+">",o=l.title.replace(c,"");n.text(c+l.duration+o).attr("title",o).attr("href",l.linkUrl)}),l.contentTitle.text(t.fromPlace+"—"+t.toPlace).attr("href",t.moreUrl),l.srcSite.text(t.srcSite).attr("href",t.srcUrl),l.moreLink.attr("href",t.moreUrl),l.list.empty().append(e.children()),this.$element.show(),l.list.find(".lvyouluxian-item").each(function(t,e){e=i(e),e.find(".lvyouluxian-title").width(Math.max(0,e.width()-e.find(".price").width()-15))})}}),e});
;/*!searchdetail:widget/ui/controls/card/materialinfo/materialinfo.js*/
define("searchdetail:widget/ui/controls/card/materialinfo/materialinfo",function(t){function i(t,i){i=e.extend({dataKey:"sucai_info",itemTpl:["<li>",'<p class="size-info">','<span class="info-text info-type"></span>','<span class="vsep">|</span><span class="info-text info-dpi"></span>','<span class="vsep">|</span><span class="info-text info-size"></span>','<span class="vsep">|</span><span class="info-text info-bytes"></span>',"</p>",'<p class="url-info">','<a class="cardbtn cardbtn-small linkbtn" href="javascript:void(0);" target="_blank">前往下载</a>','<a class="src-site" href="" target="_blank">（来自：<span></span>）</a>',"</p>","</li>"].join(""),tpl:['<div class="card-box materialinfo-card">','<h5 class="card-title"><i class="sticker"></i><span class="text">素材下载</span><i class="close"></i></h5>','<div class="card-content">','<ul class="info-list">',"</ul>","</div>","</div>"].join("")},i),this._validData=null,t=e.extend({list:".info-list"},t),l.call(this,t,i)}var e=t("common:widget/ui/base/base"),s=t("common:widget/ui/utils/utils"),a=(t("common:widget/ui/base/events"),t("searchdetail:widget/ui/utils/lib")),n=t("searchdetail:widget/ui/utils/imghelper"),l=t("searchdetail:widget/ui/controls/card/base/base");return e.extend(i.prototype,l.prototype,{checkState:function(t){var i=l.prototype.checkState.call(this,t);if(i.hasContent&&i.changed){var s=this;this._validData=e(i.dataObj).filter(function(t,i){return i.fm?s.isEmpty(i.w)&&s.isEmpty(i.dpi)&&s.isEmpty(i.filesize)?!1:!0:!1}),i.hasContent=!(!this._validData||!this._validData.length)}return i},isEmpty:function(t){return!t||"0"==t},updateView:function(t){var i,l=e("<ul></ul>"),p=this;e(t).each(function(t,o){if(t>1)return!1;i=e(p.opts.itemTpl).appendTo(l);var r=i.find(".info-dpi"),c=i.find(".info-type"),d=i.find(".info-size"),f=i.find(".info-bytes");linkbtn=i.find(".linkbtn"),infoSite=i.find(".src-site"),infoExt={s:(o.w||"0")+"x"+(o.h||"0")},c.text(o.fm.toUpperCase()),r.text((o.dpi||"")+"dpi"),p.isEmpty(o.dpi)?r.hide().prev().hide():r.show().prev().show(),p.isEmpty(o.w)?d.hide().prev().hide():d.html(o.w+"&#215;"+o.h).prev().show();var h=1*(o.filesize||0);h?f.text(n.formatBytes(h).toUpperCase()).show().prev().show():f.hide().prev().hide(),linkbtn.attr("href",o.furl);var u=o.siteName||a.getSiteName(o.site);infoSite.attr("href","http://"+o.site).find("span").text(s.cutHtmlText(u,14,"...")),i.find("a").attr("log-ext",e.json.stringify(infoExt))}),this.elements.list.empty().append(l.children())}}),i});
;/*!searchdetail:widget/ui/controls/card/nsAdII_bottomBanner/bottomBanner.js*/
define("searchdetail:widget/ui/controls/card/nsAdII_bottomBanner/bottomBanner",function(t){function e(t,e){e=a.extend({pn:-1,spn:-1,bottomBannerTpl:['<a href="${targetUrl}" target="_blank" log-click="p=10.1010101&as=${brandName}&pos=${index}&subpos=0&matcont=${imageUrl}&time=${adTime}&tgTo=1">','<img src="${imageUrl}" style="width: 100%"></img>',"</a>"].join(""),tpl:['<div class="card-box bottom-banner-card">','<div class="card-content">',"</div>",'<span class="tuiguang-btn">广告</span>','<div class="tuiguang-info"></div>',"</div>"].join(""),layerTpl1:['<p>本搜索结果为<a target="_blank" href="http://e.baidu.com/">商业推广</a>信息，请注意可能的风险。百度推出','<a target="_blank" href="http://baozhang.baidu.com/guarantee/">网民权益保障计划</a>，','<a target="_blank" href="https://passport.baidu.com/">登录</a>搜索有保障。</p>'].join(""),layerTpl2:['<p>本搜索结果为<a target="_blank" href="http://e.baidu.com/">商业推广</a>信息，请注意可能的风险。','您当前为登录状态，已参加<a target="_blank" href="http://baozhang.baidu.com/guarantee/">网民权益保障计划</a>。'].join("")},e),t=a.extend({bannerBox:".banner-box"},t),i.call(this,t,e)}var a=t("common:widget/ui/base/base"),n=(t("common:widget/ui/utils/utils"),t("common:widget/ui/base/events"),t("searchdetail:widget/ui/utils/lib"),t("searchdetail:widget/ui/utils/imghelper"),t("common:widget/ui/juicer/juicer")),i=t("searchdetail:widget/ui/controls/card/base/base"),o=t("searchdetail:widget/ui/statistic/statistic-core");return a.extend(e.prototype,i.prototype,{getDataByPosId:function(t,e){if(!t||!e)return null;for(var a=null,n=0;n<e.length;n++)e[n].Tag===t&&(a=e[n]);return a},checkState:function(t){var e="pc_detail_slider_right_bottom_banner",a=this.getDataByPosId(e,t.fbResult),t=this.getDataByPosId(e,this.opts.nsAdData),n=!!a||!!t;return{hasContent:n,changed:n,dataObj:[]}},addSpread:function(t){var e=this,n=a(".bottom-banner-card").find(".tuiguang-btn"),i=a(".bottom-banner-card").find(".tuiguang-info"),o=!t.get("userName");i.append(o?e.opts.layerTpl1:e.opts.layerTpl2),i.css("display","none"),n.off("click"),i.off("click"),i.off("hover"),n.on("click",function(){i.show()}),e.clickTips=setTimeout(function(){i.hide()},4e3),i.hover(function(){i.show(),clearTimeout(e.clickTips)},function(){e.clickTips=setTimeout(function(){i.hide()},4e3)}),i.on("click",function(){i.hide()})},updateView:function(t,e){var a=this,i="pc_detail_slider_right_bottom_banner",s=this.getDataByPosId(i,t.fbResult)||this.getDataByPosId(i,this.opts.nsAdData),r=s.Items[0].Images,d=(new Date).toLocaleString(),c=s.Items[0].BrandName,l={brandName:c,imageUrl:r[0].ImageUrl,targetUrl:r[0].AdLink,index:i,adTime:d};(this.opts.pn!==e.get("pn")||this.opts.spn!==e.get("spn"))&&(this.opts.pn=e.get("pn"),this.opts.spn=e.get("spn"),o.send("10.1010100",{as:c,pos:i,subpos:"0",shownum:"1",matcont:l.imageUrl,materialNum:"1"})),this.elements.content.empty().append(n(a.opts.bottomBannerTpl,l)),a.addSpread(e)}}),e});
;/*!searchdetail:widget/ui/controls/card/nsAdII_consult/consult.js*/
define("searchdetail:widget/ui/controls/card/nsAdII_consult/consult",function(t){function a(t,a){a=s.extend({pn:-1,spn:-1,consultTpl:['<a href="${targetUrl}" class="consult-card" target="_blank" log-click="p=10.1010101&as=${brandName}&pos=${index}&subpos=0&matcont=${adDesc}&time=${adTime}&tgTo=1">','<span class="consult-info">${adDesc}</span>','<span class="consult-btn">立即咨询</span>',"</a>"].join(""),tpl:['<div class="card-box consult-card-box">','<h5 class="card-title">','<i class="sticker"></i>','<span class="text">咨询</span>','<span class="tuiguang-spread">广告</span>','<i class="close"></i>',"</h5>",'<div class="consult-card-content">',"</div>","</div>"].join(""),layerTpl1:['<div class="spread-layer" id="spread-layer">','<p>本搜索结果为<a target="_blank" href="http://e.baidu.com/">商业推广</a>信息，请注意可能的风险。百度推出','<a target="_blank" href="http://baozhang.baidu.com/guarantee/">网民权益保障计划</a>，','<a target="_blank" href="https://passport.baidu.com/">登录</a>搜索有保障。</p>',"</div>"].join(""),layerTpl2:['<div class="spread-layer" id="spread-layer">','<p>本搜索结果为<a target="_blank" href="http://e.baidu.com/">商业推广</a>信息，请注意可能的风险。','您当前为登录状态，已参加<a target="_blank" href="http://baozhang.baidu.com/guarantee/">网民权益保障计划</a>。',"</div>"].join("")},a),t=s.extend({consultContent:".consult-card-content"},t),n.call(this,t,a)}var s=t("common:widget/ui/base/base"),e=(t("common:widget/ui/utils/utils"),t("common:widget/ui/base/events"),t("searchdetail:widget/ui/utils/lib"),t("searchdetail:widget/ui/utils/imghelper"),t("common:widget/ui/juicer/juicer")),n=t("searchdetail:widget/ui/controls/card/base/base"),i=t("searchdetail:widget/ui/statistic/statistic-core");return s.extend(a.prototype,n.prototype,{getDataByPosId:function(t,a){if(!t||!a)return null;for(var s=null,e=0;e<a.length;e++)a[e].Tag===t&&(s=a[e]);return s},checkState:function(t){var a=this.getDataByPosId("pc_detail_slider_right_consult",t.fbResult)||this.getDataByPosId("pc_detail_slider_right_consult",this.opts.nsAdData),s=!!a;return{hasContent:s,changed:s,dataObj:[]}},addSpread:function(t){var a=this,e=s(".consult-card-box").find(".tuiguang-spread"),n=!t.get("userName"),i=0;!s("#spread-layer").length&&s("#wrapper").append(n?a.opts.layerTpl1:a.opts.layerTpl2);var o=s("#spread-layer");o.css("display","none"),e.off("click"),o.off("click"),s("#sider").off("scroll"),e.on("click",function(){i=e.offset().top-e.height()/2,o.css("top")!==i+"px"&&(o.hide(),o.css("top",i)),o.toggle(),"block"===o.css("display")&&(a.clickTips=setTimeout(function(){o.css("display","none")},4e3))}),o.on("click",function(){o.toggle()}),s("#sider").scroll(function(){o.css("top",e.offset().top-e.height()/2)})},updateView:function(t,a){var s=this,n="pc_detail_slider_right_consult",o=this.getDataByPosId(n,t.fbResult)||this.getDataByPosId(n,this.opts.nsAdData),c=(new Date).toLocaleString(),l=o.Items[0].Images,d=o.Items[0].BrandName,r={brandName:d,adDesc:l[0].AdTitle||l[0].AdDesc,targetUrl:l[0].AdLink,index:n,adTime:c};(this.opts.pn!==a.get("pn")||this.opts.spn!==a.get("spn"))&&(this.opts.pn=a.get("pn"),this.opts.spn=a.get("spn"),i.send("10.1010100",{as:d,pos:n,subpos:"0",shownum:"1",matcont:r.adDesc,materialNum:"1"})),this.elements.consultContent.empty().append(e(s.opts.consultTpl,r)),s.addSpread(a)}}),a});
;/*!searchdetail:widget/ui/controls/card/nsAdII_cpl/city.js*/
define("searchdetail:widget/ui/controls/card/nsAdII_cpl/city",function(i){function t(i){this.$container=i.container,this.onchange=i.onchange,this.cities=i.cities,this.cats=i.cats,this.tpl=i.tpl,this.init=function(){this.$container.append(this.tpl),this.$cats=this.$container.find(".city-cats"),this.$list=this.$container.find(".city-list"),this.$city=this.$container.find(".city-value"),this.$cityPanel=this.$container.find(".city-panel"),this.$citySearchPanel=this.$container.find(".city-search-panel"),this.$searchList=this.$container.find(".city-search-list"),this.$cityButton=this.$container.find(".city-shadow"),this.$yearPanel=s(".year-panel"),this.$city.click(this.showPanel.bind(this)),this.$cityButton.click(this.showPanel.bind(this)),this.$city.on("change, keyup",this.query.bind(this)),this.$list.on("click","a",this.select.bind(this)),this.$searchList.on("click","a",this.select.bind(this)),s(document).click(this.hide.bind(this)),this.$container.click(function(i){var t=s(".year-panel");i.stopPropagation(),t.hide()});for(var i=0;i<this.cities.length;i++)this.cities[i].index=i;this.render()},this.render=function(){this.$cats.html(s.map(this.cats,function(i,t){return'<a href="javascript:void(0)" data-index="'+t+'">'+i.label+"</a>"}).join("")),this.$cats.on("click","a",this.changeCat.bind(this)),this.changeCat()},this.filter=function(i){for(var t=[],s=0;s<this.cities.length;s++){var e=this.cities[s];if("hot"===i)null!=e.h&&e.h<100&&t.push(e);else{var n=e.spy.substring(0,1);n===i&&t.push(e)}}return t},this.query=function(){var i=[],t=s.trim(this.$city.val());if(this.$container.find(".query").text(t),!t)return this.$cityPanel.show(),this.$citySearchPanel.hide(),void this.$city.removeClass("emptyTip");this.$cityPanel.hide(),this.$citySearchPanel.show();for(var e=0;e<this.cities.length;e++){var n=this.cities[e];(0===n.py.indexOf(t)||0===n.spy.indexOf(t)||0===n.scn.indexOf(t))&&i.push(n)}this.$searchList.html(s.map(i,function(i){return['<a href="javascript:void(0)" data-index="',i.index,'"><span class="py">',i.py,'</span><span class="name">',i.scn,"</span></a>"].join("")}).join("")),this.$citySearchPanel.toggleClass("empty",0===i.length),t&&this.$city.toggleClass("emptyTip",0===i.length)},this.select=function(i){var t=s(i.currentTarget).data("index");this.currentCity=this.cities[t],this.$city.val(this.currentCity.scn),this.$cityPanel.hide(),this.$citySearchPanel.hide(),this.$city.hasClass("active")&&this.$city.removeClass("active"),this.$city.next(".holder").hide(),this.onchange&&this.onchange(this.currentDistrict())},this.changeCat=function(i){var t=i?s(i.currentTarget).data("index"):0;this.$cats.find(".selected").removeClass("selected"),this.$cats.find(":nth-child("+(t+1)+")").addClass("selected");var e=this.cats[t];if("hot"===e.filter){var n=s.map(this.filter("hot"),function(i){return['<a href="javascript:void(0)" data-index="',i.index,'">',i.scn,"</a>"].join("")}).join("");this.$list.html(['<div class="row">',n,"</div>"].join(""))}else{for(var c=e.filter.split(","),h=[],a=0;a<c.length;a++){var r=c[a];h.push({label:r.toUpperCase(),children:s.map(this.filter(r),function(i){return['<a href="javascript:void(0)" data-index="',i.index,'">',i.scn,"</a>"].join("")}).join("")})}this.$list.html(s.map(h,function(i){return['<div class="row"><label>',i.label,'</label><div class="content">',i.children,"</div></div>"].join("")}).join(""))}},this.showPanel=function(){this.$cityPanel.toggle("fast"),this.$city.toggleClass("active"),this.$city.hasClass("emptyTip")&&this.$city.removeClass("emptyTip"),this.$citySearchPanel.hide(),this.$city.next(".holder").hide()},this.currentDistrict=function(){return this.currentCity?{cityCode:this.currentCity.cc,provinceCode:this.currentCity.pc,carLicence:this.currentCity.carnum,cityName:this.currentCity.scn}:null},this.hide=function(){this.$citySearchPanel.hide(),this.$cityPanel.hide(),this.$city.hasClass("active")&&this.$city.removeClass("active"),!this.$city.val()&&this.$city.next(".holder").show()}}var s=i("common:widget/ui/base/base");return t});
;/*!searchdetail:widget/ui/controls/card/nsAdII_cpl/cpl.js*/
define("searchdetail:widget/ui/controls/card/nsAdII_cpl/cpl",function(require,exports,module){function cplCardControl(a,s){s=$.extend({adPosId:"pc_detail_slider_right_cpl",showCount:1,dataKey:"",itemTpl:'<div class="card-box cpl-card">\n<h5 class="card-title"><i class="sticker"></i><span class="text">相关推广</span><i class="close"></i></h5>\n<h5 class="card-Logo">\n<img class="cardLogo" src="${logo}"/>\n<span class="tuiguang-hint" id="tuiguang-hint">商业推广</span>\n</h5>\n<div class="introduce">\n<p class="introduce-text"><span class="block block1"></span><span>${desc1}</span></p>\n<p class="introduce-text"><span span class="block block2"></span><span>${desc2}</span></p>\n</div>\n<div class="cpl-car-insurance">\n<table>\n<tbody>\n<tr>\n<td class="cpl-car-insurance-input">\n<div class="cpl-car-insurance-city cpl-car-insurance-input-div">\n<input type="text" class="city-value" id="city-value" data-pc="" data-cc="" placeholder=""/>\n<span class="holder"><span class="placeholder">行驶城市</span><span class="required-select">*</span></span>\n<span class="shadow city-shadow"></span>\n</div>\n</td>\n<td class="cpl-car-insurance-input cpl-car-insurance-input-num">\n<div class="cpl-car-insurance-num cpl-car-insurance-input-div">\n<input type="text" class="num-value" id="num-value" placeholder=""/>\n<span class="holder"><span class="placeholder">车牌号</span><span class="required-select">*</span></span>\n</div>\n</td>\n<td class="cpl-car-insurance-input cpl-car-insurance-input-year">\n<div class="cpl-car-insurance-year cpl-car-insurance-input-div">\n<input type="text" class="year-value" id="year-value" readonly="readonly" placeholder=""/>\n<span class="holder"><span class="placeholder">购车年份</span></span>\n<span class="shadow year-shadow"></span>\n<div class="year-panel">\n<div class="year-list">\n</div>\n</div>\n</div>\n</td>\n</tr>\n<tr>\n<td class="cpl-car-insurance-input">\n<div class="cpl-car-insurance-carPrice cpl-car-insurance-input-div">\n<input type="text" class="carPrice-value" id="carPrice-value" placeholder="" />\n<span class="holder"><span class="placeholder">车价</span><span class="required-select">*</span></span>\n<span class="carPrice-unit">万元</span>\n<div class="cpl-car-insurance-carPrice-show">\n</div>\n</div>\n</td>\n<td class="cpl-car-insurance-input">\n<div class="cpl-car-insurance-phoneNum cpl-car-insurance-input-div">\n<input type="text" class="phoneNum-value" id="phoneNum-value" placeholder=""/>\n<span class="holder"><span class="placeholder">手机号码（授权）</span><span class="required-select">*</span></span>\n<div class="cpl-car-insurance-phoneNum-show">\n</div>\n</div>\n</td>\n</tr>\n</tbody>\n</table>\n<div class="checkfail-tip">\n<div class="checkfail-tip-sign">\n<span id="checkfail-remind-i">!</span>\n</div>\n<span class="checkfail-tip-message">请选择行驶城市</span>\n</div>\n<div style="position: relative;">\n<button class="cpl-car-insurance-calc">快速试算</button>\n<span class="cpl-car-insurance-calc-text">参考报价：</span>\n<span class="cpl-car-insurance-calc-price">￥0</span>\n<a class="cpl-car-insurance-calc-link" href="${url}" target="_blank">查看精准报价></a>\n</div>\n</div>\n<div class="remind-message">\n<span>以上信息将仅授权${company}公司车险报价使用</span>\n<div class="remind-message-sign">\n<span id="cpl-remind-i">i</span>\n</div>\n</div>\n<div class="tuiguang-tip-container">\n<div class="tuiguang-tip">\n<h3 class="tuiguang-tip-title">\n商业推广</h3>\n<div class="tuiguang-tip-info">\n本搜索结果为商业推广信息，请注意可能的风险。<br>\n百度推出<a href="http://baozhang.baidu.com/guarantee/" target="_blank">网民权益保障计划</a>，<a href="https://passport.baidu.com/v2/?login" target="_blank">登录</a>搜索有保障。</div>\n<div class="tuiguang-tip-arrow">\n<em></em>\n<ins></ins>\n</div>\n</div>\n</div>\n<div class="remind-tip">\n<div class="remind-tip-info">\n本保险报价服务由${company}提供，您在报价表单中填写的所有信息仅${company}有权使用，${company}可能会根据业务需要与您联系。</div>\n<div class="remind-tip-arrow">\n<em></em>\n<ins></ins>\n</div>\n</div>\n</div>\n',tpl:'<div><div class="cpl"></div></div>'},s),a=$.extend({cnt:".cpl"},a),BaseCardControl.call(this,a,s)}var $=require("common:widget/ui/base/base"),events=require("common:widget/ui/base/events"),lib=require("searchdetail:widget/ui/utils/lib"),imghelper=require("searchdetail:widget/ui/utils/imghelper"),juicer=require("common:widget/ui/juicer/juicer"),BaseCardControl=require("searchdetail:widget/ui/controls/card/base/base"),statistic=require("searchdetail:widget/ui/statistic/statistic-core"),CityControl=require("searchdetail:widget/ui/controls/card/nsAdII_cpl/city");return $.extend(cplCardControl.prototype,BaseCardControl.prototype,{checkState:function(a){var s=this,e=this.getDataByPosId("pc_detail_slider_right_cpl",this.opts.verticalAdData),n=!this.opts.nsAdData&&!a.fbResult&&!!e;return n&&(s.opts.showCount>5?(n=!1,$("#adCard").children().show()):(s.opts.showCount++,$("#adCard").children().hide())),{hasContent:n,changed:n,dataObj:[]}},getData:function(a,s,e,n){for(var c=!1,i=0;i<a.length;i++){var t=a[i];if(t[s]===e)return t[n]}return c},getDataFromInterval:function(a,s,e,n){var c=!1;a.length&&(c=a[0]);for(var i=0;i<a.length;i++){var t=a[i];if("E"===t[e]){if(t[s]<=n)return t}else if(t[s]<=n&&n<t[e])return t}return c},calcRiskFee:function(){var a=this,s=$(".cpl-car-insurance-calc-price"),e=$(".cpl-car-insurance-calc-text"),n=$(".cpl-car-insurance-calc-link"),c=$(".year-value"),i=$(".carPrice-value"),t=$(".city-value").data("pc"),l="110000",p=c.val()?parseInt(c.val()):2015,r=2016-p,d=1e4*parseFloat(i.val()),o=30,u=a.getData(a.getData(a.opts.cplMessage.riskFee,"company",a.opts.cplMessage.corp,"p_items"),"pc",t,"p_fee");u=u?u:a.getData(a.getData(a.opts.cplMessage.riskFee,"company",a.opts.cplMessage.corp,"p_items"),"pc",l,"p_fee");var h=a.getDataFromInterval(a.getData(u,"Risk_Type","comprehensive_risk","items"),"year_min","year_max",r),v=a.getDataFromInterval(a.getData(u,"Risk_Type","TPL","items"),"payment_price_min","payment_price_max",o),m=a.getData(u,"Risk_Type","BOL","items"),g=(a.getData(u,"Risk_Type","robbery_Insurance","base_rate"),a.getData(u,"Risk_Type","glass_Insurance","China_rate"),h.base_fee+(d*h.rate+1e4*m[0]+4e4*m[1])/100+v.fee);s.empty().text("￥"+parseInt(g)),s.addClass("cpl-car-insurance-calc-test"),e.addClass("cpl-car-insurance-calc-test"),n.show(),statistic.send("10.1010100",{as:a.opts.brandName,pos:a.opts.adPosId,subpos:"0",shownum:"1",matcont:n.attr("href"),SampleID:a.opts.SampleID,SampleTag:a.opts.SampleTag}),statistic.send("10.1010100",{as:a.opts.brandName,pos:a.opts.adPosId,subpos:"0",shownum:"1",matcont:"referencePrice",SampleID:a.opts.SampleID,SampleTag:a.opts.SampleTag}),statistic.send("10.1010100",{company:a.opts.brandName,adChannel:"百度图搜",device:"PC",cityName:$(".city-value").data("scn"),cityCode:$(".city-value").data("cc"),carNum:$(".num-value").val(),carPrice:d,carYear:p,phoneNum:$(".phoneNum-value").val(),SampleID:a.opts.SampleID,SampleTag:a.opts.SampleTag})},checkInit:function(){var a=this,s=[$(".city-value"),$(".carPrice-value"),$(".phoneNum-value")],e=[134,135,136,137,138,139,147,150,151,152,157,158,159,178,182,183,184,187,188,130,131,132,145,155,156,171,175,176,185,186,133,149,153,173,177,180,181,189,170],n=[],c=[],i="",t="";i="/^"+$(".city-value").data("scn")+"$/",c.push(i),i="/^(?!0$)([1-9][0-9]{0,1}|[1-9][0-9][0-8]|0)(\\.(?![0]+$)[0-9]+)?$/",c.push(i);for(var l=0;l<e.length-1;l++)t+=e[l]+"[0-9]|";t+=e[l]+"[0-9]",i="/^("+t+")\\d{7}$/",c.push(i),"axatp"===a.opts.cplMessage.corp&&(s.push($(".num-value")),i="/^[\\u4e00-\\u9fa5][A-Za-z].{5}$/",c.push(i));for(var l=0;l<s.length;l++)n.push({checkItem:s[l],state:0});a.opts.checkList=n,a.opts.ruleList=c},check:function(){for(var me=this,failList=[],failNum=0,checkListLen=me.opts.checkList.length,checkTip=$(".checkfail-tip"),checkTipText="",i=0;checkListLen>i;i++){var item=me.opts.checkList[i];item.checkItem.val()?item.state=1:(failList.push(item),!item.checkItem.hasClass("wrongTip")&&item.checkItem.addClass("wrongTip"))}if(0!==failList.length){if(1===failList.length)switch(failList[0].checkItem.attr("id")){case"city-value":checkTipText="请选择行驶城市";break;case"num-value":checkTipText="请输入车牌号码";break;case"carPrice-value":checkTipText="请输入购车价格";break;case"phoneNum-value":checkTipText="请输入手机号码";break;default:checkTipText="请输入有效信息"}else checkTipText="请输入有效信息";return checkTip.find(".checkfail-tip-message").empty().text(checkTipText),checkTip.show(),!1}for(var i=0;checkListLen>i;i++){var item=me.opts.checkList[i],patrn=me.opts.ruleList[i];eval(patrn).test(item.checkItem.val())?item.state=2:(failList.push(item),!item.checkItem.hasClass("wrongTip")&&item.checkItem.addClass("wrongTip"))}return 0!==failList.length?(checkTipText="请输入有效信息",checkTip.find(".checkfail-tip-message").empty().text(checkTipText),checkTip.show(),!1):!0},yearSelect:function(a){var s=[];if(a){for(var e=a.find(".year-value"),n=a.find(".year-panel"),c=a.find(".year-shadow"),i=a.find(".year-list"),t=2006;2016>=t;t++)s.push(['<a href="javascript:void(0)">',t,"</a>"].join(""));i&&i.empty().append(s.join("")),e.click(function(){e.toggleClass("active"),n.toggle("fast"),e.next(".holder").hide()}),c.click(function(){e.toggleClass("active"),n.toggle("fast"),e.next(".holder").hide()}),a.on("click","a",function(a){e.val($(a.target).text()),n.hide(),e.hasClass("active")&&e.removeClass("active")}),$(document).click(function(){n.hide(),!e.val()&&e.next(".holder").show(),e.hasClass("active")&&e.removeClass("active")}),a.click(function(a){a.stopPropagation(),$(".city-panel").hide()})}},onchange:function(a){var s=$(".num-value");a&&s&&a.carLicence&&s.val(a.carLicence),a&&s&&a.carLicence&&s.next(".holder").hide(),a&&a.provinceCode&&this.$city.data("pc",a.provinceCode),a&&a.cityCode&&this.$city.data("cc",a.cityCode),a&&a.cityName&&this.$city.data("scn",a.cityName)},bind:function(){var a=this,s=$("#tuiguang-hint"),e=$(".tuiguang-tip"),n=$(".remind-message-sign"),c=$(".remind-tip"),i=$(".cpl-car-insurance-calc"),t=$(".checkfail-tip"),l=$(".cpl-car-insurance-calc-price"),p=$(".cpl-car-insurance-calc-text"),r=$(".cpl-car-insurance-calc-link");$(".cpl-car-insurance-input-div input").focus(function(a){!$(a.target).hasClass("city-value")&&!$(a.target).hasClass("year-value")&&$(a.target).addClass("active"),$(".cpl-car-insurance-input-div input").removeClass("wrongTip"),t.hide(),l.empty().text("￥0"),r.hide(),l.removeClass("cpl-car-insurance-calc-test"),p.removeClass("cpl-car-insurance-calc-test"),$(a.target).next(".holder").hide()}),$(".cpl-car-insurance-input-div input").blur(function(a){!$(a.target).hasClass("city-value")&&!$(a.target).hasClass("year-value")&&$(a.target).removeClass("active"),!($(a.target).hasClass("city-value")||$(a.target).hasClass("year-value"))&&!$(a.target).val()&&$(a.target).next(".holder").show()}),$(".holder").click(function(a){$(a.target).parent(".holder").prev().focus().click()}),s.click(function(a){a.stopPropagation(),e.toggle()}),$(document).click(function(){e.hide()}),e.click(function(a){a.stopPropagation()}),n.hover(function(){c.toggle()}),i.click(function(){statistic.send("10.1010101",{as:a.opts.brandName,pos:a.opts.adPosId,subpos:"0",matcont:"button",SampleID:a.opts.SampleID,SampleTag:a.opts.SampleTag}),a.checkInit(),a.check()&&a.calcRiskFee()}),$(".cpl-car-insurance-calc-link").click(function(){statistic.send("10.1010101",{as:a.opts.brandName,pos:a.opts.adPosId,subpos:"0",matcont:"精准报价",tgTo:1,SampleID:a.opts.SampleID,SampleTag:a.opts.SampleTag})})},renderHtml:function(a,s){var e=this;e.elements.cnt.empty().append(juicer(e.opts.itemTpl,s)),statistic.send("10.1010100",{as:e.opts.brandName,pos:e.opts.adPosId,subpos:"0",shownum:"1",matcont:"card",SampleID:e.opts.SampleID,SampleTag:e.opts.SampleTag}),e.yearSelect($(".cpl-car-insurance-year")),"axatp"===a.corp&&($(".cpl-car-insurance-input-num").show(),$(".cpl-car-insurance-input-year").hide());var n=new CityControl({container:$(".cpl-car-insurance-city"),onchange:e.onchange,cats:a.cats,cities:a[a.corp],tpl:'<div class="city-panel">\n<span class="tip">支持中文/拼音/简拼输入</span>\n<div class="city-cats"></div>\n<div class="city-list"></div>\n</div>\n<div class="city-search-panel">\n<div class="tip">查找更多城市请直接输入汉字或拼音</div>\n<div class="city-search-list"></div>\n<div class="error-tip">\n<span>很抱歉，未找到</span>\n<span class="highlight">“</span>\n<span class="query highlight"></span>\n<span class="highlight">”</span>\n<span>的城市</span><br>\n<span class="tip-bottom">请检查输入是否正确，若无误则城市不在投保范围内</span>\n</div>\n</div>\n'});n.init(),e.bind()},updateView:function(){var a,s=this;s.opts.itemTpl='<div class="card-box cpl-card">\n<h5 class="card-title"><i class="sticker"></i><span class="text">相关推广</span><i class="close"></i></h5>\n<h5 class="card-Logo">\n<img class="cardLogo" src="${logo}"/>\n<span class="tuiguang-hint" id="tuiguang-hint">商业推广</span>\n</h5>\n<div class="introduce">\n<p class="introduce-text"><span class="block block1"></span><span>${desc1}</span></p>\n<p class="introduce-text"><span span class="block block2"></span><span>${desc2}</span></p>\n</div>\n<div class="cpl-car-insurance">\n<table>\n<tbody>\n<tr>\n<td class="cpl-car-insurance-input">\n<div class="cpl-car-insurance-city cpl-car-insurance-input-div">\n<input type="text" class="city-value" id="city-value" data-pc="" data-cc="" placeholder=""/>\n<span class="holder"><span class="placeholder">行驶城市</span><span class="required-select">*</span></span>\n<span class="shadow city-shadow"></span>\n</div>\n</td>\n<td class="cpl-car-insurance-input cpl-car-insurance-input-num">\n<div class="cpl-car-insurance-num cpl-car-insurance-input-div">\n<input type="text" class="num-value" id="num-value" placeholder=""/>\n<span class="holder"><span class="placeholder">车牌号</span><span class="required-select">*</span></span>\n</div>\n</td>\n<td class="cpl-car-insurance-input cpl-car-insurance-input-year">\n<div class="cpl-car-insurance-year cpl-car-insurance-input-div">\n<input type="text" class="year-value" id="year-value" readonly="readonly" placeholder=""/>\n<span class="holder"><span class="placeholder">购车年份</span></span>\n<span class="shadow year-shadow"></span>\n<div class="year-panel">\n<div class="year-list">\n</div>\n</div>\n</div>\n</td>\n</tr>\n<tr>\n<td class="cpl-car-insurance-input">\n<div class="cpl-car-insurance-carPrice cpl-car-insurance-input-div">\n<input type="text" class="carPrice-value" id="carPrice-value" placeholder="" />\n<span class="holder"><span class="placeholder">车价</span><span class="required-select">*</span></span>\n<span class="carPrice-unit">万元</span>\n<div class="cpl-car-insurance-carPrice-show">\n</div>\n</div>\n</td>\n<td class="cpl-car-insurance-input">\n<div class="cpl-car-insurance-phoneNum cpl-car-insurance-input-div">\n<input type="text" class="phoneNum-value" id="phoneNum-value" placeholder=""/>\n<span class="holder"><span class="placeholder">手机号码（授权）</span><span class="required-select">*</span></span>\n<div class="cpl-car-insurance-phoneNum-show">\n</div>\n</div>\n</td>\n</tr>\n</tbody>\n</table>\n<div class="checkfail-tip">\n<div class="checkfail-tip-sign">\n<span id="checkfail-remind-i">!</span>\n</div>\n<span class="checkfail-tip-message">请选择行驶城市</span>\n</div>\n<div style="position: relative;">\n<button class="cpl-car-insurance-calc">快速试算</button>\n<span class="cpl-car-insurance-calc-text">参考报价：</span>\n<span class="cpl-car-insurance-calc-price">￥0</span>\n<a class="cpl-car-insurance-calc-link" href="${url}" target="_blank">查看精准报价></a>\n</div>\n</div>\n<div class="remind-message">\n<span>以上信息将仅授权${company}公司车险报价使用</span>\n<div class="remind-message-sign">\n<span id="cpl-remind-i">i</span>\n</div>\n</div>\n<div class="tuiguang-tip-container">\n<div class="tuiguang-tip">\n<h3 class="tuiguang-tip-title">\n商业推广</h3>\n<div class="tuiguang-tip-info">\n本搜索结果为商业推广信息，请注意可能的风险。<br>\n百度推出<a href="http://baozhang.baidu.com/guarantee/" target="_blank">网民权益保障计划</a>，<a href="https://passport.baidu.com/v2/?login" target="_blank">登录</a>搜索有保障。</div>\n<div class="tuiguang-tip-arrow">\n<em></em>\n<ins></ins>\n</div>\n</div>\n</div>\n<div class="remind-tip">\n<div class="remind-tip-info">\n本保险报价服务由${company}提供，您在报价表单中填写的所有信息仅${company}有权使用，${company}可能会根据业务需要与您联系。</div>\n<div class="remind-tip-arrow">\n<em></em>\n<ins></ins>\n</div>\n</div>\n</div>\n';var e=this.getDataByPosId(s.opts.adPosId,this.opts.verticalAdData),n=e.Items[0].Images[0];s.opts.brandName=e.Items[0].BrandName,s.opts.SampleTag=e.SampleTag,s.opts.SampleID=e.SampleID;var c,i=e.Items[0].AdDesc;-1!==i.indexOf("<br/>")&&(c=i.split("<br/>"));var t={title:n.AdTitle,company:s.opts.brandName,logo:n.ImageUrl,desc1:c[0],desc2:c[1],url:n.AdLink};switch(t.company){case"安盛天平":a="axatp";break;default:a="axatp"}s.opts.cplMessage?s.renderHtml(s.opts.cplMessage,t):require.async(["searchdetail:static/json/cplMessage"],function(e){s.opts.cplMessage={cats:e.cats,cities:e.cities,axatp:e.axatp,corp:a,riskFee:e.riskFee},s.renderHtml(s.opts.cplMessage,t)})}}),cplCardControl});
;/*!searchdetail:widget/ui/controls/card/nsAdII_leftAnchor/tplConf.js*/
define("searchdetail:widget/ui/controls/card/nsAdII_leftAnchor/tplConf",function(a,n,s){var i={0:'<div class="dutu-anchor auto" title="" data-width="${width}"  data-x="${anchorX}" data-y="${anchorY}" style="display: block; left: ${left}px; top: ${top}px;">\n<span class="ic">\n<span class="ic-bg-new"></span><i class="downloadoptimize"></i></span>\n<a target="_blank" herf="${adLink}" log-click="p=10.1010101&as=${brandName}&pos=${index}&subpos=0&matcont=${picTitle}&tgTo=1">\n<em>${picTitle}</em>\n</a>\n<div class="fb-anchor-card" style="">\n<div class=\'left-pic\'>\n<a target=\'_blank\' herf="${adLink}" log-click="p=10.1010101&as=${brandName}&pos=${index}&subpos=0&matcont=${imageUrl}&tgTo=1">\n<img src="${imageUrl}">\n</a>\n</div>\n<a target=\'_blank\' class=\'feibiao-link fl1\' herf="${adLink}" log-click="p=10.1010101&as=${brandName}&pos=${index}&subpos=0&matcont=${picTitle}&tgTo=1">${picTitle}</a>\n<a target=\'_blank\' class=\'feibiao-link fl2\' herf="${adLink}" log-click="p=10.1010101&as=${brandName}&pos=${index}&subpos=0&matcont=${adDesc}&tgTo=1">${adDesc}<br>${price}<br>${offPrice}</a>\n<a class="detail-btn" herf="${adLink}" log-click="p=10.1010101&as=${brandName}&pos=${index}&subpos=0&matcont=${buttonDesc}&tgTo=1">\n${buttonDesc}</a>\n<span class="anchor-tuiguang-btn">广告</span>\n<div class="anchor-tuiguang-info"></div>\n</div>\n</div>',1:'<div class="dutu-anchor auto" title="" data-width="${width}"  data-x="${anchorX}" data-y="${anchorY}" style="display: block; left: ${left}px; top: ${top}px;">\n<span class="ic">\n<span class="ic-bg-new"></span><i class="downloadoptimize"></i></span>\n<a target="_blank" herf="${adLink}" log-click="p=10.1010101&as=${brandName}&pos=${index}&subpos=0&matcont=${picTitle}&tgTo=1">\n<em>${picTitle}</em>\n</a>\n<div class="fb-anchor-card" style="">\n<div class=\'left-pic\'>\n<a target=\'_blank\' herf="${adLink}" log-click="p=10.1010101&as=${brandName}&pos=${index}&subpos=0&matcont=${imageUrl}&tgTo=1">\n<img src="${imageUrl}">\n</a>\n</div>\n<a target=\'_blank\' class=\'feibiao-link fl1\' herf="${adLink}" log-click="p=10.1010101&as=${brandName}&pos=${index}&subpos=0&matcont=${picTitle}&tgTo=1">${picTitle}</a>\n<a target=\'_blank\' class=\'feibiao-link fl2\' herf="${adLink}" log-click="p=10.1010101&as=${brandName}&pos=${index}&subpos=0&matcont=${adDesc}&tgTo=1">${adDesc}</a>\n<a target=\'_blank\' class=\'feibiao-link fl5\' herf="${adLink}" log-click="p=10.1010101&as=${brandName}&pos=${index}&subpos=0&matcont=${price}&tgTo=1">\n<span class=\'price\' title="${price}">${price}</span>\n</a>\n<a target=\'_blank\' class=\'feibiao-link fl6\' herf="${adLink}" log-click="p=10.1010101&as=${brandName}&pos=${index}&subpos=0&matcont=${offPrice}&tgTo=1">\n<span class=\'discount-price\' title="${offPrice}">${offPrice}</span>\n</a>\n<a class="detail-btn" herf="${adLink}" log-click="p=10.1010101&as=${brandName}&pos=${index}&subpos=0&matcont=${buttonDesc}&tgTo=1">\n${buttonDesc}</a>\n<span class="anchor-tuiguang-btn">广告</span>\n<div class="anchor-tuiguang-info"></div>\n</div>\n</div>\n',2:'<div class="dutu-anchor auto" title="" data-width="${width}"  data-x="${anchorX}" data-y="${anchorY}" style="display: block; left: ${left}px; top: ${top}px;">\n<span class="ic">\n<span class="ic-bg-new"></span><i class="downloadoptimize"></i></span>\n<a target="_blank" herf="${adLink}" log-click="p=10.1010101&as=${brandName}&pos=${index}&subpos=0&matcont=${picTitle}&tgTo=1">\n<em>${picTitle}</em>\n</a>\n<div class="fb-anchor-card" style="">\n<div class=\'left-pic\'>\n<a target=\'_blank\' herf="${adLink}" log-click="p=10.1010101&as=${brandName}&pos=${index}&subpos=0&matcont=${imageUrl}&tgTo=1">\n<img src="${imageUrl}">\n</a>\n</div>\n<a target=\'_blank\' class=\'feibiao-link fl1\' herf="${adLink}" log-click="p=10.1010101&as=${brandName}&pos=${index}&subpos=0&matcont=${picTitle}&tgTo=1">${picTitle}</a>\n<a target=\'_blank\' class=\'feibiao-link fl2\' herf="${adLink}" log-click="p=10.1010101&as=${brandName}&pos=${index}&subpos=0&matcont=${adDesc}&tgTo=1">${adDesc}</a>\n<a target=\'_blank\' class=\'feibiao-link fl3\' herf="${adLink}" log-click="p=10.1010101&as=${brandName}&pos=${index}&subpos=0&matcont=${price}&tgTo=1">\n<span>市场价：</span>\n<span class=\'price\'>${price}</span>\n</a>\n<a target=\'_blank\' class=\'feibiao-link fl4\' herf="${adLink}" log-click="p=10.1010101&as=${brandName}&pos=${index}&subpos=0&matcont=${offPrice}&tgTo=1">\n<span>线上优惠价：</span>\n<span class=\'discount-price\'>${offPrice}</span>\n</a>\n<a class="detail-btn" herf="${adLink}" log-click="p=10.1010101&as=${brandName}&pos=${index}&subpos=0&matcont=${buttonDesc}&tgTo=1">\n${buttonDesc}</a>\n<span class="anchor-tuiguang-btn">广告</span>\n<div class="anchor-tuiguang-info"></div>\n</div>\n</div>'};s.exports=i});
;/*!searchdetail:widget/ui/controls/card/nsAdII_leftAnchor/leftanchor.js*/
define("searchdetail:widget/ui/controls/card/nsAdII_leftAnchor/leftanchor",function(a){function t(a,t){t=e.extend({pn:-1,spn:-1,tpl:"",layerTpl1:['<p>本搜索结果为<a class="spreadInfo-link" target="_blank" href="http://e.baidu.com/">商业推广</a>信息，',"请注意可能的风险。百度推出",'<a class="spreadInfo-link" target="_blank" href="http://baozhang.baidu.com/guarantee/">网民权益保障计划</a>，','<a class="spreadInfo-link" target="_blank" href="https://passport.baidu.com/">登录</a>搜索有保障。</p>'].join(""),layerTpl2:['<p>本搜索结果为<a class="spreadInfo-link" target="_blank" href="http://e.baidu.com/">商业推广</a>信息，',"请注意可能的风险。您当前为登录状态，已参加",'<a class="spreadInfo-link" target="_blank" href="http://baozhang.baidu.com/guarantee/">网民权益保障计划</a>。'].join("")},t),o.call(this,a,t)}var e=a("common:widget/ui/base/base"),n=a("common:widget/ui/base/events"),i=(a("searchdetail:widget/ui/utils/lib"),a("searchdetail:widget/ui/utils/imghelper"),a("common:widget/ui/juicer/juicer")),o=a("searchdetail:widget/ui/controls/card/base/base"),s=a("searchdetail:widget/ui/statistic/statistic-core"),c=a("searchdetail:widget/ui/controls/card/nsAdII_leftAnchor/tplConf");return e.extend(t.prototype,n,o.prototype,{checkState:function(a){var t=this.getDataByPosId("pc_detail_slider_left_anchor",a.fbResult),n=!!t,i=e("#srcPic"),o=i.find(".fb-anchor-wrapper");return o.empty(),{hasContent:n,changed:n,dataObj:[]}},addSpread:function(a){var t=this,n=e(".fb-anchor-card").find(".anchor-tuiguang-btn"),i=e(".fb-anchor-card").find(".anchor-tuiguang-info"),o=!a.get("userName");i.append(o?t.opts.layerTpl1:t.opts.layerTpl2),i.css("display","none"),n.off("click"),i.off("click"),i.off("hover"),n.on("click",function(){i.toggle(),"block"===i.css("display")&&(t.clickTips=setTimeout(function(){i.css("display","none")},4e3))}),i.hover(function(){clearTimeout(t.clickTips)},function(){i.hide()}),i.on("click",function(){i.toggle()})},setAnchorPos:function(){var a=e("#srcPic"),t=a.find(".currentImg"),n=a.find(".dutu-anchor"),i=+t.attr("data-width"),o=+t.attr("data-height"),s=+t.width(),c=Math.floor(t.position().left),r=Math.floor(t.position().top),d=s/i;n.each(function(a,t){var n=e(t),l=+n.attr("data-y"),f=+n.attr("data-x"),h=parseInt(l*d+r),p=parseInt(f*d+c),u=+n.width();l>o/2&&n.find(".fb-anchor-card").css({top:"-170px",bottom:"auto"}),f>i/2&&(u+p>c+s&&(p=c+s-u-10),n.find(".ic").css({"float":"right"}),n.find(".fb-anchor-card").css({right:"0px",left:"auto"})),n.css({top:h+"px",left:p+"px"})})},updateView:function(a,t){var n=this,o="pc_detail_slider_left_anchor",r=this.getDataByPosId(o,a.fbResult),d=r.Items[0].Images,l=((new Date).toLocaleString(),e("#srcPic")),f=l.find(".fb-anchor-wrapper"),h=l.find(".currentImg"),p=r.Items[0].BrandName,u=r.Items[0].TemplateId,m=r.Items[0].AdDesc||"查看详情";"undefined"==typeof u&&(u=2);var g=c[u];h.attr("data-width",a.width),h.attr("data-height",a.height),l.removeClass("active"),f[0]||(l.append('<div class="fb-anchor-wrapper"></div>'),f=l.find(".fb-anchor-wrapper")),f.empty(),e.each(d,function(a,t){var e={buttonDesc:m,brandName:p,imageUrl:t.ImageUrl,adLink:t.AdLink,picTitle:t.AdTitle,adDesc:t.AdDesc,anchorX:t.AnchorX,anchorY:t.AnchorY,price:t.PicHeight,offPrice:t.PicWidth,index:o};if(-1!==e.adDesc.indexOf("<br>")){var n=e.adDesc.split("<br>");e.adDesc=n[0],e.price=n[1],e.offPrice=n[2]}f.append(i(g,e)),s.send("10.1010100",{as:p,pos:o,subpos:a,shownum:d.length,matcont:e.picTitle,materialNum:"1"})}),n.setAnchorPos();var b=l.find(".dutu-anchor");e(window).resize(function(){n.setAnchorPos()}),h.hover(function(){n.setAnchorPos(),b.css({opacity:1})},function(){b.css({opacity:0})}),b.find("a").on("click",function(){var a=e(this);window.open(a.attr("herf"))}),b.hover(function(){var a=e(this),t=a.find("img").attr("src"),n=a.find(".fl1").text(),i=a.find(".fl2").text(),c=a.find(".price").text(),r=a.find(".discount-price").text();s.send("10.1010100",{as:p,pos:o,subpos:"0",shownum:"1",matcont:t,materialNum:"6"}),s.send("10.1010100",{as:p,pos:o,subpos:"0",shownum:"1",matcont:n,materialNum:"6"}),s.send("10.1010100",{as:p,pos:o,subpos:"0",shownum:"1",matcont:i,materialNum:"6"}),s.send("10.1010100",{as:p,pos:o,subpos:"0",shownum:"1",matcont:c,materialNum:"6"}),s.send("10.1010100",{as:p,pos:o,subpos:"0",shownum:"1",matcont:r,materialNum:"6"}),s.send("10.1010100",{as:p,pos:o,subpos:"0",shownum:"1",matcont:m,materialNum:"6"}),a.css({opacity:1}).siblings(".dutu-anchor").css({opacity:0}),a.find(".fb-anchor-card").addClass("active"),l.removeClass("active")},function(){var a=e(this),t=e(".fb-anchor-card").find(".anchor-tuiguang-info");a.find(".fb-anchor-card").removeClass("active"),t.hide(),a.siblings(".dutu-anchor").css({opacity:1})});var w=0,v=e(".dutu-anchor a em");!function k(){2>w&&(v.css(w%2===0?{backgroundColor:"rgba(0, 0, 0, .1)"}:{backgroundColor:"#4c4c4c",backgroundColor:"rgba(0, 0, 0, .7)"}),setTimeout(k,500),w++)}(),n.addSpread(t)}}),t});
;/*!searchdetail:widget/ui/controls/card/nsAdII_relateCase/relateCase.js*/
define("searchdetail:widget/ui/controls/card/nsAdII_relateCase/relateCase",function(e){function t(e,t){t=a.extend({itemSize:{width:78,height:78},itemTpl:['<li class="picbox relate-case-item">','<span class="pic-loading-dot"></span>','<a class="picbox-link" href="${targetUrl}" target="_blank"><img /></a>',"</li>"].join(""),tpl:['<div class="card-box relate-case-card">','<h5 class="card-title">','<i class="sticker"></i>','<span class="text">相关案例</span>','<span class="tuiguang-spread">广告</span>','<i class="close"></i>',"</h5>",'<div class="card-content">','<span class="card-subtitle"></span>','<p class="card-desc"></p>','<ul class="clearfix piclist"></ul>','<a class="dataprovider" href="" target="_blank"></a>',"</div>","</div>"].join(""),layerTpl1:['<div class="spread-layer" id="spread-layer">','<p>本搜索结果为<a target="_blank" href="http://e.baidu.com/">商业推广</a>信息，请注意可能的风险。百度推出','<a target="_blank" href="http://baozhang.baidu.com/guarantee/">网民权益保障计划</a>，','<a target="_blank" href="https://passport.baidu.com/">登录</a>搜索有保障。</p>',"</div>"].join(""),layerTpl2:['<div class="spread-layer" id="spread-layer">','<p>本搜索结果为<a target="_blank" href="http://e.baidu.com/">商业推广</a>信息，请注意可能的风险。','您当前为登录状态，已参加<a target="_blank" href="http://baozhang.baidu.com/guarantee/">网民权益保障计划</a>。',"</div>"].join("")},t),e=a.extend({picList:".piclist"},e),d.call(this,e,t)}var a=e("common:widget/ui/base/base"),s=(e("common:widget/ui/utils/utils"),e("common:widget/ui/base/events"),e("searchdetail:widget/ui/utils/lib"),e("searchdetail:widget/ui/utils/imghelper")),i=e("common:widget/ui/juicer/juicer"),d=e("searchdetail:widget/ui/controls/card/base/base"),l=0;return a.extend(t.prototype,d.prototype,{checkState:function(e){var t="pc_detail_slider_right_relate_case",a=this.getDataByPosId(t,e.fbResult),s=this.getDataByPosId(t,this.opts.nsAdData),e=a||s;l=a?a.Items[0].TemplateId:0;var i=!!e;return{hasContent:i,changed:i,dataObj:[]}},addSpread:function(e){var t=this,s=a(".relate-case-card").find(".tuiguang-spread"),i=!e.get("userName"),d=0;!a("#spread-layer").length&&a("#wrapper").append(i?t.opts.layerTpl1:t.opts.layerTpl2);var l=a("#spread-layer");l.css("display","none"),s.off("click"),l.off("click"),a("#sider").off("scroll"),s.on("click",function(){d=s.offset().top-s.height()/2,l.css("top")!==d+"px"&&(l.hide(),l.css("top",d)),l.toggle(),"block"===l.css("display")&&(t.clickTips=setTimeout(function(){l.css("display","none")},4e3))}),l.on("click",function(){l.toggle()}),a("#sider").scroll(function(){l.css("top",s.offset().top-s.height()/2)})},updateView:function(e,t){var d="pc_detail_slider_right_relate_case",n=this,r=this.getDataByPosId(d,e.fbResult)||this.getDataByPosId(d,this.opts.nsAdData),c=this.opts.itemSize,o=!1;a.each(r.Items[0].Images,function(e,t){return"brand_name"===t.AdPosition?(r.Items[0].Images.splice(0,0,r.Items[0].Images[e]),r.Items[0].Images.splice(e+1,1),o=!0,!1):void 0});var p=o?r.Items[0].Images.length-1:r.Items[0].Images.length,m=r.Items[0].Images.slice(0,o?4:3),u=a("<ul></ul>"),g=r.Items[0].BrandName,h=0,f=a(".relate-case-card");n.elements.cntWrapper.find(".dataprovider").html(""),f.find(".card-desc").html(""),a(m).each(function(e,t){var r,o=(new Date).toLocaleString(),f=encodeURIComponent(t.ImageUrl),b={targetUrl:t.AdLink,imageUrl:t.ImageUrl,index:d,adTime:o,logUrl:f},I=a(i(n.opts.itemTpl,b)),v=I.find("img"),k=I.find(".picbox-link");if("brand_name"===t.AdPosition){if(p=t.AdDesc||"3",2===l)return!0;r="p=10.1010101&as="+g+"&pos="+d+"&time="+o+"&subpos=0&matcont="+t.AdTitle+"&tgTo=1",statistic.send("10.1010100",{as:g,pos:d,subpos:"0",shownum:"1",matcont:t.AdTitle,materialNum:m.length+2}),n.elements.cntWrapper.find(".dataprovider").html(t.AdTitle),1!==l?n.elements.cntWrapper.find(".dataprovider").attr("href",m[1].AdLink).attr("log-click",r):n.elements.cntWrapper.find(".dataprovider").attr("href",m[1].AdLink).attr("log-click","")}else{var w=t.PicId||t.ImageUrl;r="p=10.1010101&as="+g+"&pos="+d+"&time="+o+"&subpos="+h+"&matcont="+w+"&tgTo=1",window.statistic.send("10.1010100",{as:g,pos:d,subpos:h++,shownum:m.length,matcont:w,materialNum:m.length+2}),s.loadImage([t.ImageUrl],function(e){var a=s.scaleFull(e,c);I.find(".pic-loading-dot").hide(),v.css(a).attr("src",t.ImageUrl)}),k.attr("log-click",r),u.append(I)}});var b=(new Date).toLocaleString(),I="p=10.1010101&as="+g+"&pos="+d+"&time="+b+"&subpos=0&matcont="+r.Items[0].AdTitle+"&tgTo=1";if(statistic.send("10.1010100",{as:g,pos:d,subpos:"0",shownum:"1",matcont:r.Items[0].AdTitle,materialNum:m.length+2}),this.elements.cntWrapper.find(".card-subtitle").html('<a class="card-subtitle-text" log-click="'+I+'" href="'+m[1].AdLink+'" target="_blank">'+r.Items[0].AdTitle+"</a>"),this.elements.cntWrapper.find(".card-desc").html(r.Items[0].AdDesc).attr("title",r.Items[0].AdDesc),f.find(".text").html("相关案例"),f.find(".dataprovider").removeClass("dataprovider-new"),f.find(".card-subtitle").removeClass("card-subtitle-new"),a(f.find(".relate-case-count")).remove(),1===l){f.find(".text").html("当前套图"),f.find(".dataprovider").addClass("dataprovider-new"),f.find(".card-subtitle").addClass("card-subtitle-new");var v=a('<span class="relate-case-count">'+p+"张</span>");a(f.find(".card-subtitle")).append(v)}if(2===l){f.find(".text").html("当前案例"),f.find(".card-subtitle").addClass("card-subtitle-new");var k={};try{k=JSON.parse(r.Items[0].AdDesc)}catch(w){}f.find(".card-desc").html(""),a.each(k,function(e,t){f.find(".card-desc").append('<span class="card-desc-item">'+e+":"+t+"</span>")})}window.statistic.send("10.1010100",{as:g,pos:d,subpos:"0",shownum:"1",matcont:r.Items[0].AdDesc,materialNum:m.length+2}),this.elements.picList.empty().append(u.children()),1!==l&&2!==l?(f.find(".tuiguang-spread").html("广告"),n.addSpread(t)):f.find(".tuiguang-spread").html("")}}),t});
;/*!searchdetail:widget/ui/controls/card/nsAdII_relateCase/relateCaseAsync.js*/
define("searchdetail:widget/ui/controls/card/nsAdII_relateCase/relateCaseAsync",function(t){function e(t,e){e=a.extend({itemSize:{width:78,height:78},itemTpl:['<li class="picbox decoration_sim_item">','<span class="pic-loading-dot"></span>','<a class="picbox-link" href="${targetUrl}" target="_blank"><img /></a>',"</li>"].join(""),tpl:['<div class="card-box goods-recommend">','<h5 class="card-title">','<i class="sticker"></i>','<span class="text">爆款商品推荐</span>','<span class="tuiguang-spread">广告</span>','<i class="close"></i>',"</h5>",'<div class="card-content">','<a href="" target="_blank" class="card-subtitle" target="_blank"></a>','<p class="card-desc"></p>','<ul class="clearfix piclist"></ul>','<a class="dataprovider" href="" target="_blank"></a>',"</div>","</div>"].join(""),layerTpl1:['<div class="spread-layer" id="spread-layer">','<p>本搜索结果为<a target="_blank" href="http://e.baidu.com/">商业推广</a>信息，请注意可能的风险。百度推出','<a target="_blank" href="http://baozhang.baidu.com/guarantee/">网民权益保障计划</a>，','<a target="_blank" href="https://passport.baidu.com/">登录</a>搜索有保障。</p>',"</div>"].join(""),layerTpl2:['<div class="spread-layer" id="spread-layer">','<p>本搜索结果为<a target="_blank" href="http://e.baidu.com/">商业推广</a>信息，请注意可能的风险。','您当前为登录状态，已参加<a target="_blank" href="http://baozhang.baidu.com/guarantee/">网民权益保障计划</a>。',"</div>"].join("")},e),t=a.extend({picList:".piclist"},t),l.call(this,t,e)}var a=t("common:widget/ui/base/base"),s=(t("common:widget/ui/utils/utils"),t("common:widget/ui/base/events"),t("searchdetail:widget/ui/utils/lib"),t("searchdetail:widget/ui/utils/imghelper")),i=t("common:widget/ui/juicer/juicer"),l=t("searchdetail:widget/ui/controls/card/base/base"),n=t("searchdetail:widget/ui/statistic/statistic-core");return a.extend(e.prototype,l.prototype,{getDataByPosId:function(t,e){if(!t||!e)return null;for(var a=null,s=0;s<e.length;s++)e[s].Tag===t&&(a=e[s]);return a},checkState:function(t){var e="pc_detail_slider_right_goods_recommend",a=this.getDataByPosId(e,t.fbResult),t=this.getDataByPosId(e,this.opts.nsAdData),s=!!a||!!t;return{hasContent:s,changed:s,dataObj:[]}},addSpread:function(t){var e=this,s=a(".goods-recommend").find(".tuiguang-spread"),i=!t.get("userName"),l=0;!a("#spread-layer").length&&a("#wrapper").append(i?e.opts.layerTpl1:e.opts.layerTpl2);var n=a("#spread-layer");n.css("display","none"),s.off("click"),n.off("click"),a("#sider").off("scroll"),s.on("click",function(){l=s.offset().top-s.height()/2,n.css("top")!==l+"px"&&(n.hide(),n.css("top",l)),n.toggle(),"block"===n.css("display")&&(e.clickTips=setTimeout(function(){n.css("display","none")},4e3))}),n.on("click",function(){n.toggle()}),a("#sider").scroll(function(){n.css("top",s.offset().top-s.height()/2)})},updateView:function(t,e){var l=this,o="pc_detail_slider_right_goods_recommend",r=a("<ul></ul>"),d=l.opts.itemSize,c=this.getDataByPosId(o,t.fbResult)||this.getDataByPosId(o,this.opts.nsAdData),p=c.Items[0].Images,m=c.Items[0].BrandName,g=0;a(p).each(function(t,e){var c,u=(new Date).toLocaleString(),h={targetUrl:e.AdLink,imageUrl:e.ImageUrl,index:o,adTime:u},f=a(i(l.opts.itemTpl,h)),b=f.find("img"),k=f.find(".picbox-link");"brand_name"===e.AdPosition?(c="p=10.1010101&as="+m+"&pos="+o+"&time="+u+"&subpos=0&matcont="+e.AdTitle+"&tgTo=1",n.send("10.1010100",{as:m,pos:o,subpos:"0",shownum:"1",matcont:e.AdTitle,materialNum:p.length+2}),l.elements.cntWrapper.find(".dataprovider").html(e.AdTitle).attr("href",e.AdLink).attr("log-click",c)):(c="p=10.1010101&as="+m+"&pos="+o+"&time="+u+"&subpos="+g+"&matcont="+e.ImageUrl+"&tgTo=1",n.send("10.1010100",{as:m,pos:o,subpos:g++,shownum:p.length,matcont:e.ImageUrl,materialNum:p.length+2}),s.loadImage([e.ImageUrl],function(t){var a=s.scaleFull(t,d);f.find(".pic-loading-dot").hide(),b.css(a).attr("src",e.ImageUrl)}),k.attr("log-click",c),r.append(f))});var u=(new Date).toLocaleString(),h="p=10.1010101&as="+m+"&pos="+o+"&time="+u+"&subpos=0&matcont="+c.Items[0].AdTitle+"&tgTo=1";n.send("10.1010100",{as:m,pos:o,subpos:"0",shownum:"1",matcont:c.Items[0].AdTitle,materialNum:p.length+2}),this.elements.cntWrapper.find(".card-subtitle").html(c.Items[0].AdTitle).attr("href",p[0].AdLink).attr("log-click",h),this.elements.cntWrapper.find(".card-desc").html(c.Items[0].AdDesc),n.send("10.1010100",{as:m,pos:o,subpos:"0",shownum:"1",matcont:c.Items[0].AdDesc,materialNum:p.length+2}),this.elements.picList.empty().append(r.children()),l.addSpread(e)}}),e});
;/*!searchdetail:widget/ui/controls/card/nsAdII_relateImg/relateImg.js*/
define("searchdetail:widget/ui/controls/card/nsAdII_relateImg/relateImg",function(e){function t(e,t){t=a.extend({itemSize:{width:78,height:78},itemTpl:['<li class="picbox ${type}">','<span class="pic-loading-dot"></span>','<a class="picbox-link" href="${targetUrl}" log-click="${logInfo}" target="_blank">','<img data-src="${imageUrl}"/>',"</a>","</li>"].join(""),tpl:['<div class="card-box relate-img-card">','<h5 class="card-title">','<span class="text">相关图片</span>','<span class="tuiguang-spread">广告</span>','<i class="close"></i>',"</h5>",'<span class="type0 relate-img-card-active"></span>','<span class="type1"></span>','<div class="card-content">','<ul class="clearfix piclist">',"</ul>","</div>","</div>"].join(""),layerTpl1:['<div class="spread-layer" id="spread-layer">','<p>本搜索结果为<a target="_blank" href="http://e.baidu.com/">商业推广</a>信息，请注意可能的风险。百度推出','<a target="_blank" href="http://baozhang.baidu.com/guarantee/">网民权益保障计划</a>，','<a target="_blank" href="https://passport.baidu.com/">登录</a>搜索有保障。</p>',"</div>"].join(""),layerTpl2:['<div class="spread-layer" id="spread-layer">','<p>本搜索结果为<a target="_blank" href="http://e.baidu.com/">商业推广</a>信息，请注意可能的风险。','您当前为登录状态，已参加<a target="_blank" href="http://baozhang.baidu.com/guarantee/">网民权益保障计划</a>。',"</div>"].join("")},t),e=a.extend({picList:".piclist"},e),l.call(this,e,t)}var a=e("common:widget/ui/base/base"),i=(e("common:widget/ui/utils/utils"),e("common:widget/ui/base/events"),e("searchdetail:widget/ui/utils/lib"),e("searchdetail:widget/ui/utils/imghelper")),s=e("common:widget/ui/juicer/juicer"),l=e("searchdetail:widget/ui/controls/card/base/base"),r=e("searchdetail:widget/ui/statistic/statistic-core"),c=0;return a.extend(t.prototype,l.prototype,{checkState:function(e){window.canShowIt=!0;var t=this.getDataByPosId("pc_detail_slider_right_relate_img",this.opts.nsAdData),a=this.getDataByPosId("pc_detail_slider_right_relate_img",e.fbResult),e=a||t;a?c=a.Items[0].TemplateId:(c=0,window.canShowIt=!1);var i=!!e&&canShowIt;return{hasContent:i,changed:i,dataObj:[]}},addSpread:function(e){var t=this,i=a(".relate-img-card").find(".tuiguang-spread"),s=!e.get("userName"),l=0;!a("#spread-layer").length&&a("#wrapper").append(s?t.opts.layerTpl1:t.opts.layerTpl2);var r=a("#spread-layer");r.css("display","none"),i.off("click"),r.off("click"),a("#sider").off("scroll"),i.on("click",function(){l=i.offset().top-i.height()/2,r.css("top")!==l+"px"&&(r.hide(),r.css("top",l)),r.toggle(),"block"===r.css("display")&&(t.clickTips=setTimeout(function(){r.css("display","none")},4e3))}),r.on("click",function(){r.toggle()}),a("#sider").scroll(function(){r.css("top",i.offset().top-i.height()/2)})},updateView:function(e,t){var l=this,d=(e.pn,"pc_detail_slider_right_relate_img"),n=this.getDataByPosId(d,e.fbResult)||this.getDataByPosId(d,this.opts.nsAdData);a(n.Items).each(function(e,t){a(t.Images).each(function(a,i){i.type="relate-img-card-type"+e,i.title=t.AdTitle})});var o=this.opts.itemSize,p=n.Items[0].Images,g=5;(1===c||2===c)&&(p=n.Items[0].Images.slice(0,6).concat(n.Items[1].Images.slice(0,6)),g=11);var m=p.length,h=n.Items[0].BrandName,u=(Math.floor(m/6),a("<ul></ul>")),f="/search/addetail?word="+encodeURI(e.srv_simi.query)+"&tn=addetail&picIndex=";a(p).each(function(e,t){if(e>=0&&g>=e){var n=(new Date).toLocaleString(),m=encodeURIComponent(t.ImageUrl),y=t.PicId||t.ImageUrl,I="p=10.1010101&as="+h+"&pos="+d+"&time="+n+"&subpos="+e+"&matcont="+y+"&matcontTitle="+t.title+"&tgTo=1";r.send("10.1010100",{as:h,pos:d,subpos:e,shownum:p.length,matcont:y,matcontTitle:t.title,materialNum:p.length});var v={targetUrl:f+e,imageUrl:t.ImageUrl,index:d,adTime:n,logUrl:m,type:t.type,logInfo:I};0!==c&&(v.targetUrl=t.AdLink);{var b=a(s(l.opts.itemTpl,v)),w=b.find("img");b.find("picbox-link")}i.loadImage([t.ImageUrl],function(e){var a=i.scaleFull(e,o);b.find(".pic-loading-dot").hide(),w.css(a).attr("src",t.ImageUrl)}),u.append(b)}}),this.elements.picList.empty().append(u.children());var y=a(".relate-img-card");y.find(".text").html("相关图片"),(1===c||2===c)&&(y.find(".text").html("相似图片"),a("#similarpicCard").hide(),a(".relate-img-card .type0").addClass("relate-img-card-active"),a(".relate-img-card .type1").removeClass("relate-img-card-active"),a(".relate-img-card .type0").html(n.Items[0].AdTitle).on("click",function(){a(".relate-img-card .type0").addClass("relate-img-card-active"),a(".relate-img-card .type1").removeClass("relate-img-card-active"),a(".relate-img-card-type0").show(),a(".relate-img-card-type1").hide()}),a(".relate-img-card .type1").html(n.Items[1].AdTitle).on("click",function(){a(".relate-img-card .type1").addClass("relate-img-card-active"),a(".relate-img-card .type0").removeClass("relate-img-card-active"),a(".relate-img-card-type1").show(),a(".relate-img-card-type0").hide()}),a(".relate-img-card-type1").css("display","none")),1!==c&&2!==c?(y.find(".tuiguang-spread").html("广告"),l.addSpread(t)):y.find(".tuiguang-spread").html("")}}),t});
;/*!searchdetail:widget/ui/controls/card/nsAdII_rightPicInfo/rightpicinfo.js*/
define("searchdetail:widget/ui/controls/card/nsAdII_rightPicInfo/rightpicinfo",function(i){function e(i,e){e=t.extend({pn:-1,spn:-1,itemTpl:['<a href="${logoAdLink}" class="ad-logo" target="_blank" log-click="p=10.1010101&as=${brandName}&pos=${index}&subpos=0&matcont=${imageUrl}&time=${adTime}&tgTo=1">','<img src="${imageUrl}" alt="" width=100 height=38/>',"</a>",'<div class="pic-info-detail">','<a href="${titleAdLink}" class="pic-title-info" target="_blank" title="${picTitle}" ','log-click="p=10.1010101&as=${brandName}','&pos=${index}&subpos=0&matcont=${picTitle}&time=${adTime}&tgTo=1">${picTitle}</a>','<em class="pic-size-info">${picSize}</em>',"</div>"].join(""),itemTplNew1:['<div class="pic-info-new1">',"<p>${title}</p>",'<a href="${link}" target="_blank" log-click="p=10.1010101&as=${brandName}&pos=${index}','&subpos=0&matcont=${loglink}&time=${adTime}&tgTo=1">${link}</a>',"<span>${name}</span>","<span>|</span>","<em>${width}*${height}</em>","</div>"].join(""),itemTplNew2:['<div class="pic-info-new2">','<img src="${face}">','<div class="pic-info-new2-title">',"<span>${name}</span>",'<a href="${link}" target="_blank" log-click="p=10.1010101&as=${brandName}&pos=${index}','&subpos=0&matcont=${loglink}&time=${adTime}&tgTo=1">进入主页</a>',"</div>","<p>${desc}</p>","</div>"].join(""),tpl:['<div class="card-box pic-info pic-info-box right-pic-info-box">','<div class="card-title">','<i class="pic-info-sticker"></i>','<span class="text">图片信息</span>','<span class="tuiguang-spread">广告</span>',"</div>",'<div class="card-content">',"</div>","</div>"].join(""),layerTpl1:['<div class="spread-layer" id="spread-layer">','<p>本搜索结果为<a target="_blank" href="http://e.baidu.com/">商业推广</a>信息，请注意可能的风险。百度推出','<a target="_blank" href="http://baozhang.baidu.com/guarantee/">网民权益保障计划</a>，','<a target="_blank" href="https://passport.baidu.com/">登录</a>搜索有保障。</p>',"</div>"].join(""),layerTpl2:['<div class="spread-layer" id="spread-layer">','<p>本搜索结果为<a target="_blank" href="http://e.baidu.com/">商业推广</a>信息，请注意可能的风险。','您当前为登录状态，已参加<a target="_blank" href="http://baozhang.baidu.com/guarantee/">网民权益保障计划</a>。',"</div>"].join("")},e),i=t.extend({},i),s.call(this,i,e)}var t=i("common:widget/ui/base/base"),a=i("common:widget/ui/base/events"),n=(i("searchdetail:widget/ui/utils/lib"),i("searchdetail:widget/ui/utils/imghelper"),i("common:widget/ui/juicer/juicer")),s=i("searchdetail:widget/ui/controls/card/base/base"),d=i("searchdetail:widget/ui/statistic/statistic-core"),o=0;return t.extend(e.prototype,a,s.prototype,{checkState:function(i){var e=this.opts.nsAdData,a=this.getDataByPosId("pc_detail_slider_right_pic_info",e),n=this.getDataByPosId("pc_detail_slider_right_pic_info",i.fbResult);o=n?n.Items[0].TemplateId:0;var s=!!n;s||(s=!!a&&"0"!==i.adType);var d=!!n||!!a&&"0"!==i.adType;return d?t("#picInfoPnl").hide():t("#picInfoPnl").show(),{hasContent:s,changed:s,dataObj:[]}},addSpread:function(i){var e=this,a=t(".pic-info-box").find(".tuiguang-spread"),n=!i.get("userName"),s=0;!t("#spread-layer").length&&t("#wrapper").append(n?e.opts.layerTpl1:e.opts.layerTpl2);var d=t("#spread-layer");d.css("display","none"),a.off("click"),d.off("click"),t("#sider").off("scroll"),a.on("click",function(){s=a.offset().top-a.height()/2,d.css("top")!==s+"px"&&(d.hide(),d.css("top",s)),d.toggle(),"block"===d.css("display")&&(e.clickTips=setTimeout(function(){d.css("display","none")},4e3))}),d.on("click",function(){d.toggle()}),t("#sider").scroll(function(){d.css("top",a.offset().top-a.height()/2)})},updateView:function(i,e){var a,s=this,l="pc_detail_slider_right_pic_info",p=this.getDataByPosId(l,i.fbResult)||this.getDataByPosId(l,s.opts.nsAdData),c=p.Items[0].Images,r=(new Date).toLocaleString(),g=p.Items[0].BrandName,m={imageUrl:"",logoAdLink:"",titleAdLink:"",picTitle:"",picSize:"",adTime:"",index:"",brandName:""};1===c.length?(m={imageUrl:c[0].ImageUrl,logoAdLink:c[0].AdLink,titleAdLink:c[0].AdLink,picTitle:c[0].AdTitle||i.picDesc||i.fromPageTitle,picSize:i.width+"x"+i.height,adTime:r,index:l,brandName:g},a=s.opts.itemTpl):2===c.length&&(m={imageUrl:c[0].ImageUrl,logoAdLink:c[0].AdLink,titleAdLink:c[1].AdLink,picTitle:c[1].AdTitle,picSize:i.width+"x"+i.height,adTime:r,index:l,brandName:g},a=s.opts.itemTpl);var h=t(".right-pic-info-box");1===o&&(m={title:c[0].AdTitle,link:c[0].AdLink,loglink:encodeURIComponent(c[0].AdLink),name:c[0].AdDesc,width:c[0].PicWidth,height:c[0].PicHeight,adTime:r,index:l,brandName:g},a=s.opts.itemTplNew1),2===o?(m={face:c[0].ImageUrl,link:c[0].AdLink,loglink:encodeURIComponent(c[0].AdLink),name:c[0].AdTitle,desc:c[0].AdDesc,adTime:r,index:l,brandName:g},a=s.opts.itemTplNew2,h.find(".text").html("设计师信息")):h.find(".text").html("图片信息"),(this.opts.pn!==e.get("pn")||this.opts.spn!==e.get("spn"))&&(this.opts.pn=e.get("pn"),this.opts.spn=e.get("spn"),1===o?d.send("10.1010100",{as:g,pos:l,subpos:"0",shownum:"1",matcont:m.loglink,materialNum:"4"}):2===o?d.send("10.1010100",{as:g,pos:l,subpos:"0",shownum:"1",matcont:m.loglink,materialNum:"4"}):(d.send("10.1010100",{as:g,pos:l,subpos:"0",shownum:"1",matcont:m.imageUrl,materialNum:"2"}),d.send("10.1010100",{as:g,pos:l,subpos:"0",shownum:"1",matcont:m.picTitle,materialNum:"2"}))),this.elements.content.empty().append(n(a,m)),m.imageUrl&&m.logoAdLink||t(".ad-logo").hide(),m.picTitle&&m.titleAdLink||t(".pic-info-detail").hide(),1!==o?(h.find(".tuiguang-spread").html("广告"),s.addSpread(e)):h.find(".tuiguang-spread").html("")}}),e});
;/*!searchdetail:widget/ui/controls/card/nsAdII_rightWorks/rightWorks.js*/
define("searchdetail:widget/ui/controls/card/nsAdII_rightWorks/rightWorks",function(t){function a(t,a){a=e.extend({itemSize:{width:78,height:78},itemTpl:['<li class="picbox right-works-item">','<span class="pic-loading-dot"></span>','<a class="picbox-link" href="${targetUrl}" target="_blank">',"<img />",'<span class="right-works-item-title">${title}</span>',"</a>","</li>"].join(""),tpl:['<div class="card-box right-works-card">','<h5 class="card-title">','<i class="sticker"></i>','<span class="text">他的作品集</span>','<i class="close"></i>',"</h5>",'<div class="card-content">','<ul class="clearfix piclist"></ul>',"</div>","</div>"].join(""),layerTpl1:['<div class="spread-layer" id="spread-layer">','<p>本搜索结果为<a target="_blank" href="http://e.baidu.com/">商业推广</a>信息，请注意可能的风险。百度推出','<a target="_blank" href="http://baozhang.baidu.com/guarantee/">网民权益保障计划</a>，','<a target="_blank" href="https://passport.baidu.com/">登录</a>搜索有保障。</p>',"</div>"].join(""),layerTpl2:['<div class="spread-layer" id="spread-layer">','<p>本搜索结果为<a target="_blank" href="http://e.baidu.com/">商业推广</a>信息，请注意可能的风险。','您当前为登录状态，已参加<a target="_blank" href="http://baozhang.baidu.com/guarantee/">网民权益保障计划</a>。',"</div>"].join("")},a),t=e.extend({picList:".piclist"},t),l.call(this,t,a)}var e=t("common:widget/ui/base/base"),i=t("searchdetail:widget/ui/utils/imghelper"),s=t("common:widget/ui/juicer/juicer"),l=t("searchdetail:widget/ui/controls/card/base/base");return e.extend(a.prototype,l.prototype,{checkState:function(t){var a="pc_detail_slider_right_works",t=this.getDataByPosId(a,t.fbResult),e=!!t;return{hasContent:e,changed:e,dataObj:[]}},updateView:function(t){var a="pc_detail_slider_right_works",l=this,r=this.getDataByPosId(a,t.fbResult)||this.getDataByPosId(a,this.opts.nsAdData),n=this.opts.itemSize,c=r.Items[0].Images.slice(0,3),d=e("<ul></ul>"),o=r.Items[0].BrandName,p=0;e(c).each(function(t,r){var g,h=(new Date).toLocaleString(),m=encodeURIComponent(r.ImageUrl),u={targetUrl:r.AdLink,imageUrl:r.ImageUrl,index:a,adTime:h,logUrl:m,title:r.AdTitle},b=e(s(l.opts.itemTpl,u)),f=b.find("img"),k=b.find(".picbox-link"),w=r.PicId||r.ImageUrl;g="p=10.1010101&as="+o+"&pos="+a+"&time="+h+"&subpos="+p+"&matcont="+w+"&tgTo=1",window.statistic.send("10.1010100",{as:o,pos:a,subpos:p++,shownum:c.length,matcont:w,materialNum:c.length+2}),i.loadImage([r.ImageUrl],function(t){var a=i.scaleFull(t,n);b.find(".pic-loading-dot").hide(),f.css(a).attr("src",r.ImageUrl)}),k.attr("log-click",g),d.append(b)}),this.elements.picList.empty().append(d.children())}}),a});
;/*!searchdetail:widget/ui/controls/card/nsAdII_similarCase/tplConf.js*/
define("searchdetail:widget/ui/controls/card/nsAdII_similarCase/tplConf",function(s,a,i){var e={0:'<div class="card-box similarcase-card">\n<h5 class="card-title"><i class="sticker"></i><span class="text">${cardTitle}</span><span class="tuiguang-spread">广告</span><i class="close"></i></h5>\n<div class="card-content">\n<a class="similarcase-link" href="${targetUrl}" target="_blank">\n<img class="similarcase-pic" src="${imgUrl}"/>\n<div class="designer-message">\n<span>${designerName}</span>\n</div>\n<div class="portrait" title="${adlink}"><img src="${portraitUrl}"></div>\n</a>\n<div class="similarcase-message">\n{@each mesData as item}<p>\n<span class="similarcase-text" title="${item}">${item}</span>\n</p>\n{@/each}</div>\n<a class="similarcase-more button0" href="${targetUrl}" target="_blank">\n<span class="similarcase-more-text">${buttonDesc}</span>\n</a>\n</div>\n</div>\n',1:'<div class="card-box similarcase-card">\n<h5 class="card-title"><i class="sticker"></i><span class="text">${cardTitle}</span><span class="tuiguang-spread">广告</span><i class="close"></i></h5>\n<div class="card-content">\n<a class="similarcase-link" href="${targetUrl}" target="_blank">\n<img class="similarcase-pic" src="${imgUrl}"/>\n<div class="designer-message">\n<span>${designerName}</span>\n</div>\n<div class="portrait" title="${adlink}"><img src="${portraitUrl}"></div>\n</a>\n<div class="similarcase-message">\n{@each mesData as item}<p>\n<span class="similarcase-text" title="${item}">${item}</span>\n</p>\n{@/each}</div>\n<a class="similarcase-more button0" href="${targetUrl}" target="_blank">\n<span class="similarcase-more-text">${buttonDesc}</span>\n</a>\n</div>\n</div>\n',2:'<div class="card-box similarcase-card">\n<h5 class="card-title"><i class="sticker"></i><span class="text">相关案例</span><span class="tuiguang-spread">广告</span><i class="close"></i></h5>\n<div class="card-content">\n<a class="similarcase-link" href="${targetUrl}" target="_blank">\n<img class="similarcase-pic" src="${imgUrl}"/>\n<div class="similarcase-designer-message">\n<span>${designerName}</span>\n</div>\n</a>\n<div class="similarcase-message">\n{@each mesData as item}<p>\n<span class="similarcase-text" title="${item}">${item}</span>\n</p>\n{@/each}</div>\n<a class="similarcase-more button0" href="${targetUrl}" target="_blank">\n<span class="similarcase-more-text">查看详情</span>\n</a>\n</div>\n</div>\n'};i.exports=e});
;/*!searchdetail:widget/ui/controls/card/nsAdII_similarCase/similarcaseAsync.js*/
define("searchdetail:widget/ui/controls/card/nsAdII_similarCase/similarcaseAsync",function(e){function t(e,t){t=s.extend({pn:-1,spn:-1,dataKey:"",pnMore:-1,itemSize:{width:118,height:98},itemTpl:"",tpl:'<div><div class="similarcase"></div></div>',layerTpl1:['<div class="spread-layer" id="spread-layer">','<p>本搜索结果为<a target="_blank" href="http://e.baidu.com/">商业推广</a>信息，请注意可能的风险。百度推出','<a target="_blank" href="http://baozhang.baidu.com/guarantee/">网民权益保障计划</a>，','<a target="_blank" href="https://passport.baidu.com/">登录</a>搜索有保障。</p>',"</div>"].join(""),layerTpl2:['<div class="spread-layer" id="spread-layer">','<p>本搜索结果为<a target="_blank" href="http://e.baidu.com/">商业推广</a>信息，请注意可能的风险。','您当前为登录状态，已参加<a target="_blank" href="http://baozhang.baidu.com/guarantee/">网民权益保障计划</a>。',"</div>"].join("")},t),e=s.extend({cnt:".similarcase"},e),i.call(this,e,t)}var s=e("common:widget/ui/base/base"),a=(e("common:widget/ui/base/events"),e("searchdetail:widget/ui/utils/lib"),e("searchdetail:widget/ui/utils/imghelper"),e("common:widget/ui/juicer/juicer")),i=e("searchdetail:widget/ui/controls/card/base/base"),n=e("searchdetail:widget/ui/statistic/statistic-core"),o=e("searchdetail:widget/ui/controls/card/nsAdII_similarCase/tplConf");return s.extend(t.prototype,i.prototype,{checkState:function(e){var t=this.getDataByPosId("pc_detail_slider_right_relate_cases",e.fbResult),s=!!t;return s?this.opts.pnMore=(e[this.opts.dataKey]||e).pn:(t=this.getDataByPosId("pc_detail_slider_right_relate_cases",this.opts.nsAdData),s=!!t),{hasContent:s,changed:s,dataObj:[]}},addSpread:function(e){var t=this,a=s(".similarcase-card").find(".tuiguang-spread"),i=!e.get("userName"),n=0;!s("#spread-layer").length&&s("#wrapper").append(i?t.opts.layerTpl1:t.opts.layerTpl2);var o=s("#spread-layer");o.css("display","none"),a.off("click"),o.off("click"),s("#sider").off("scroll"),a.on("click",function(){n=a.offset().top-a.height()/2,o.css("top")!==n+"px"&&(o.hide(),o.css("top",n)),o.toggle(),"block"===o.css("display")&&(t.clickTips=setTimeout(function(){o.css("display","none")},4e3))}),o.on("click",function(){o.toggle()}),s("#sider").scroll(function(){o.css("top",a.offset().top-a.height()/2)})},updateView:function(e,t){var i,r,d,l,p,c,m,u,h=this,g="pc_detail_slider_right_relate_cases",f=this.getDataByPosId(g,e.fbResult),b=e.pn,y={};f?(i=f.Items[0].Images,p=f.Items[0].TemplateId,c=f.Items[0].BrandName,m=f.Items[0].AdTitle||"相关案例",u=f.Items[0].AdDesc||"查看详情"):(f=this.getDataByPosId(g,this.opts.nsAdData),r=f.Items,d=r.length,l=(b-this.opts.pnMore-1)%d,i=r[l].Images,p=r[l].TemplateId,c=r[l].BrandName,m=r[l].AdTitle||"相关案例",u=r[l].AdDesc||"查看详情"),h.opts.iteamTpl=o[p],s(i).each(function(e,t){if("content"===t.AdPosition){y=s.extend({cardTitle:m,buttonDesc:u,AdDesc:t.AdDesc,imgUrl:t.ImageUrl,targetUrl:t.AdLink},y);var a=y.AdDesc.split("<br>");y=s.extend({mesData:a},y)}"logo"===t.AdPosition&&(y=s.extend({designerName:t.AdDesc,portraitUrl:t.ImageUrl,adlink:t.AdLink},y))}),(this.opts.pn!==t.get("pn")||this.opts.spn!==t.get("spn"))&&(this.opts.pn=t.get("pn"),this.opts.spn=t.get("spn"),n.send("10.1010100",{as:c,pos:g,subpos:"0",shownum:"1",matcont:m,materialNum:"6"}),n.send("10.1010100",{as:c,pos:g,subpos:"0",shownum:"1",matcont:y.imgUrl,materialNum:"6"}),n.send("10.1010100",{as:c,pos:g,subpos:"0",shownum:"1",matcont:y.designerName,materialNum:"6"}),n.send("10.1010100",{as:c,pos:g,subpos:"0",shownum:"1",matcont:y.portraitUrl,materialNum:"6"}),n.send("10.1010100",{as:c,pos:g,subpos:"0",shownum:"1",matcont:y.AdDesc,materialNum:"6"}),n.send("10.1010100",{as:c,pos:g,subpos:"0",shownum:"1",matcont:u,materialNum:"6"})),h.elements.cnt.empty().append(a(h.opts.iteamTpl,y));var _=s(".similarcase-link"),I=s(".similarcase-more");_.click(function(){n.send("10.1010101",{as:c,pos:g,subpos:"0",matcont:y.imgUrl,tgTo:1})}),I.click(function(){n.send("10.1010101",{as:c,pos:g,subpos:"0",matcont:u,tgTo:1})}),h.addSpread(t)}}),t});
;/*!searchdetail:widget/ui/controls/card/photo/photo.js*/
define("searchdetail:widget/ui/controls/card/photo/photo",function(i){function t(i,t){t=e.extend({dataKey:"",itemSize:{width:78,height:78},itemTpl:['<li class="picbox">','<span class="pic-loading-dot"></span>','<a href="" target="_blank"><img /></a>',"</li>"].join(""),tpl:['<div class="card-box similarpic-card">','<h5 class="card-title"><i class="sticker"></i><span class="text">精美头像</span><i class="close"></i></h5>','<div class="card-content">','<ul class="clearfix piclist">',"</ul>","</div>","</div>"].join("")},t),i=e.extend({picList:".piclist"},i),a.call(this,i,t)}{var e=i("common:widget/ui/base/base"),s=(i("common:widget/ui/utils/utils"),i("common:widget/ui/base/events"),i("searchdetail:widget/ui/utils/lib"),i("searchdetail:widget/ui/utils/imghelper")),a=i("searchdetail:widget/ui/controls/card/base/asyncard");i("searchdetail:widget/ui/statistic/statistic-core")}return e.extend(t.prototype,a.prototype,{checkProp:function(i){return e.isArray(i)&&i.length>5||!!i&&e.isArray(i.piclist)&&i.piclist.length>5},renderContent:function(i){if(!e.isArray(i)){{var t=i.piclist;i["simi-listdata"]}i=t}var a=e("<ul></ul>"),c=this,l=(this.imgData,this.opts.itemSize);e(i).each(function(i,t){var r=e(c.opts.itemTpl).appendTo(a),n=r.find("img"),o={cs:t.cs,p:i+1};r.find("a").attr("href",t.fromurl),s.loadImage([t.objurl],function(i){var e=s.scaleFull(i,l);r.find(".pic-loading-dot").hide(),n.css(e).attr("src",t.objurl)}),n.attr("data-src",t.objurl),r.find("a").attr("log-ext",e.json.stringify(o))}),this.elements.picList.empty().append(a.children()),this.$element.show()}}),t});
;/*!searchdetail:widget/ui/controls/card/photographDetail/index.js*/
define("searchdetail:widget/ui/controls/card/photographDetail/index",function(t){function i(t,i){i=e.extend({tpl:['<div class="card-box photograph-detail">','<div class="card-content">',"</div>","</div>"].join(""),itemTpl:["<div>",'<div class="summary">${summary}</div>',"{@if showpv}",'<div class="showpv">${showpv}浏览</div>',"{@/if}","{@if description}",'<div class="description">${description}</div>',"{@/if}",'<div class="size">${width}x${height}</div>',"{@if tags && tags.length}",'<div class="tags">',"{@each tags as tag}",'<span class="tag">${tag}</span>',"{@/each}","</div>","{@/if}",'<div class="copyright">©版权归作者所有，请勿商用</div>',"</div>"].join("")},i),s.call(this,t,i)}var e=t("common:widget/ui/base/base"),a=t("common:widget/ui/juicer/juicer"),s=t("searchdetail:widget/ui/controls/card/base/base");return e.extend(i.prototype,s.prototype,{checkState:function(t){var i="1"===t.youtuType;return{hasContent:i,changed:i,dataObj:[]}},updateView:function(t,i){var s=i.data.spn+1,d=i.data.rootImg.bdSetImgNum,o=+d?s+"/"+d:"",c=t.setTitle||(t.fromPageTitleEnc?"":i.data.word),n=t.browserPv||0;this.elements.content.empty().append(e(a(this.opts.itemTpl,{summary:o+c,showpv:n,description:t.fromPageTitleEnc||"",width:t.width,height:t.height,tags:t.imageSetTag})))}}),i});
;/*!searchdetail:widget/ui/controls/card/photographRelated/index.js*/
define("searchdetail:widget/ui/controls/card/photographRelated/index",function(a){function i(a,i){i=s.extend({tpl:['<div class="card-box photograph-related">','<h5 class="card-title">','<i class="sticker"></i>','<span class="text">相关作品</span>','<a class="card-box-more" href="" target="_blank">','<span class="card-box-more-text">更多</span>','<i class="card-box-more-img"></i>',"</a>",'<i class="close"></i>',"</h5>",'<div class="card-content">',"</div>","</div>"].join(""),itemTpl:['<div class="imgs-box">','<div class="left-box">','<div class="half-box img-box box-0">','<span class="pic-loading-dot"></span>','<a href="" target="_blank"><img /></a>',"</div>",'<div class="half-box img-box box-1">','<span class="pic-loading-dot"></span>','<a href="" target="_blank"><img /></a>',"</div>","</div>",'<div class="right-box">','<div class="full-box img-box box-2">','<span class="pic-loading-dot"></span>','<a href="" target="_blank"><img /></a>',"</div>","</div>","</div>"].join("")},i),t.call(this,a,i)}var s=a("common:widget/ui/base/base"),t=(a("common:widget/ui/juicer/juicer"),a("searchdetail:widget/ui/controls/card/base/base"));return s.extend(i.prototype,t.prototype,{checkState:function(a){var i="1"===a.youtuType&&!!a.relatedPhotographs;return{hasContent:i,changed:i,dataObj:[]}},updateView:function(){}}),i});
;/*!searchdetail:widget/ui/controls/card/photographerInfo/index.js*/
define("searchdetail:widget/ui/controls/card/photographerInfo/index",function(t){function e(t,e){e=i.extend({tpl:['<div class="card-box photographer-info">','<div class="card-content">',"</div>","</div>"].join(""),itemTpl:["<div>",'<i class="sticker"></i>','<div class="photographer-detail">','<img src="${portrait}" class="portrait" />','<div class="name">${name}</div>',"</div>","</div>"].join("")},e),n.call(this,t,e)}var i=t("common:widget/ui/base/base"),a=t("common:widget/ui/juicer/juicer"),n=t("searchdetail:widget/ui/controls/card/base/base"),o=t("searchdetail:widget/ui/statistic/statistic-core");return i.extend(e.prototype,n.prototype,{checkState:function(t){var e="1"===t.youtuType&&!(!t.userData||!t.userData.Nickname);return{hasContent:e,changed:e,dataObj:[]}},updateView:function(t,e){var n=t.userData.Nickname,r=t.userData.Portrait,c=i(a(this.opts.itemTpl,{portrait:r,name:n})),d=e.get("word")||n;c.find(".name, .portrait").click(function(){window.open("/search/index?tn=baiduimage&ie=utf-8&word="+encodeURIComponent(d)),o.send("5.1024100",{})}),this.elements.content.empty().append(c)}}),e});
;/*!searchdetail:widget/ui/controls/card/photographerRecommend/index.js*/
define("searchdetail:widget/ui/controls/card/photographerRecommend/index",function(e){function t(e,t){t=i.extend({dataKey:"",logKey:"photorecommend",recommendPeopleNum:3,recommendPictureNum:3,itemSize:{width:80,height:80},itemTpl:['<div class="recommendContentItem">','<div class="recommendPhotographer">','<img class="portrait">','<div class="name"></div>','<div class="productNum"></div>',"</div>",'<div class="recommendPhotos">','<ul class="piclist">','<li class="piclistItem">','<a href="" target="_blank"><img class="photo0"></a>',"</li>",'<li class="piclistItem">','<a href="" target="_blank"><img class="photo1"></a>',"</li>",'<li class="piclistItem">','<a href="" target="_blank"><img class="photo2"></a>',"</li>","</ul>","</div>","</div>"].join(""),tpl:['<div class="card-box photographer-recommend">','<div class="card-content">','<div class="recommendTitle">摄影师推荐</div>','<div class="recommendContent"></div>',"</div>","</div>"].join("")},t),e=i.extend({recommendContent:".recommendContent"},e),a.call(this,e,t)}var i=e("common:widget/ui/base/base"),n=e("searchdetail:widget/ui/utils/imghelper"),a=e("searchdetail:widget/ui/controls/card/base/asyncard"),r=e("searchdetail:widget/ui/app/pagemodel"),o=e("searchdetail:widget/ui/utils/lib");return i.extend(t.prototype,a.prototype,{checkState:function(e){var t="1"===e.youtuType;return{hasContent:t,changed:t,dataObj:[]}},renderContent:function(e,t,a){var r=(a.map,i("<div></div>")),o=this,c=(this.imgData,this.opts.itemSize);i(e).each(function(e,t){if(e>o.opts.recommendPeopleNum-1)return!1;var a=i(o.opts.itemTpl).appendTo(r),d=a.find(".portrait");d.attr("src",t.userInfo.portrait);var s=a.find(".name");s.text(t.userInfo.nickname),a.find(".name, .portrait").click(function(){o.sendPortraitClickLog(),window.open("/search/index?tn=baiduimage&ie=utf-8&word="+t.recommandQuery)});var m=a.find(".productNum");m.text(t.picCount+"张作品");var l=t.cateName;i(t.picData).each(function(e,i){if(e>o.opts.recommendPictureNum-1)return!1;var r=i.thumbURL,d=a.find(".photo"+e);d.parent().attr("href",o.getDetailURL(i,e,t.recommandQuery,l)),d.parent().click(function(){o.sendRecommendPicClickLog()}),n.loadImage([r],function(e){var t=n.scaleFull(e,c);d.css(t).attr("src",r)})})}),this.elements.recommendContent.empty().append(r.children()),this.$element.show()},getDetailURL:function(e,t,i,n){return"/search/detail?ct=503316480&z="+r.get("z")+"&tn=baiduimagedetail&ipn=d&word="+encodeURIComponent(i)+"&step_word="+(r.get("step_word")||"")+"&ie="+r.get("ie")+"&in="+(e.currentIndex||"")+"&cl="+r.get("cl")+"&lm="+r.get("lm")+"&st="+r.get("st")+"&cs="+e.cs+"&os="+e.os+"&simid="+e.simid+"&pn="+t+"&rn=1&di="+e.di+"&fr=&fmq="+this.getfmq()+"&fm="+(r.get("fm")||"")+"&ic="+r.get("ic")+"&s="+r.get("s")+"&se="+r.get("se")+"&sme="+r.get("sme")+"&tab="+(e.tab||0)+"&width="+r.get("width")+"&height="+r.get("height")+"&face="+e.face+"&is="+e.is+"&istype="+(r.get("istype")||0)+"&ist="+(e.source_type||"")+"&jit="+r.get("jit")+"&bdtype="+(e.bdSrcType||0)+"&spn="+(e.spn||0)+("&pi="+(e.pi||""))+"&gsm="+(r.get("tmpGsm")||0)+(+r.get("hs")?"&hs="+r.get("hs"):"")+(r.get("oriquery")?"&oriquery="+r.get("oriquery"):"")+"&objurl="+encodeURIComponent(o.uncompileURL(e.objURL))+"&rpstart="+(r.get("rpstart")||0)+"&rpnum="+(r.get("rpnum")||0)+"&adpicid="+(e.adPicId||0)+"&catename="+encodeURIComponent(n)},getfmq:function(){var e=new Date,t=e.getTime(),i=r.get("fmq"),n="";return n=i&&i.indexOf("m")>-1&&-1===i.indexOf("_m")&&-1===i.indexOf("_R")?t+"_"+i+"_R":t+"_R"},sendPortraitClickLog:function(){var e="//imgstat.baidu.com/5.gif?p=1024101&tn=baiduimagedetail",t=new Image;t.src=e+"&"+(new Date).getTime()},sendRecommendPicClickLog:function(){var e="//imgstat.baidu.com/5.gif?p=1024102&tn=baiduimagedetail",t=new Image;t.src=e+"&"+(new Date).getTime()}}),t});
;/*!searchdetail:widget/ui/controls/card/relatedpic/relatedpic.js*/
define("searchdetail:widget/ui/controls/card/relatedpic/relatedpic",function(t){function i(t,i){i=e.extend({itemSize:{width:78,height:78},itemTpl:['<li class="picbox">','<span class="pic-loading-dot"></span>','<a href="" target="_blank">','<img height=80 src="" />',"</a>","</li>"].join(""),tpl:['<div class="card-box relatedpic-card">','<h5 class="card-title"><i class="sticker"></i><span class="text">同主题图片</span><i class="close"></i></h5>','<div class="card-content">','<h6><a href="" target="_blank"><span class="num"></span></a></h6>','<ul class="clearfix piclist">',"</ul>",'<p class="src-row"><a href="" target="_blank"><span></span></a></p>',"</div>","</div>"].join("")},i),t=e.extend({titleLink:"h6 a",picList:".piclist",srcSite:".src-row a"},t),c.call(this,t,i)}var e=t("common:widget/ui/base/base"),s=t("common:widget/ui/utils/utils"),a=(t("common:widget/ui/base/events"),t("searchdetail:widget/ui/utils/lib")),r=t("searchdetail:widget/ui/utils/imghelper"),c=t("searchdetail:widget/ui/controls/card/base/base");return e.extend(i.prototype,c.prototype,{updateView:function(t){var i=e("<ul></ul>"),c=this,l=this.opts.itemSize,n={t:t.topic,f:t.topicUrl};e(t.pics).each(function(t,s){if(t>2)return!1;var a=e(c.opts.itemTpl).appendTo(i),o=a.find("img"),d=s.thumbUrl||s.objUrl,p=e.extend({},n,{f:s.fromUrl,cs:s.cs||"",sd:s.sd});a.find("a").attr("href",s.fromUrl),r.loadImage([d],function(t){var i=r.scaleFull(t,l);a.find(".pic-loading-dot").hide(),o.css(i).attr("src",d)}),o.attr("data-src",d),a.find("a").attr("log-ext",e.json.stringify(p))});var o=t.picNum?54:60,d=a.cutTextByCharWidth(s.trimTags(t.topic),o,"...",1);t.picNum&&(d+='<span class="num"><em>'+t.picNum+"</em>张</span>"),this.elements.titleLink.attr("href",t.topicUrl).html(d).attr("title",t.topic).attr("log-ext",e.json.stringify(n));var p=t.siteUrl||a.getHost(t.topicUrl);this.elements.srcSite.attr("href",p).attr("log-ext",e.json.stringify(n)).find("span").text(t.site||a.getSiteName(p)),this.elements.picList.empty().append(i.children())}}),i});
;/*!searchdetail:widget/ui/controls/card/relationship/relationship.js*/
define("searchdetail:widget/ui/controls/card/relationship/relationship",function(i){function t(i,t){t=e.extend({itemSize:{width:123,height:96},itemTpl:['<li class="wiki-item" title="点击进入ta的百科">','<div class="picbox">','<span class="pic-loading-dot"></span>','<a href="" target="_blank"><img /></a>',"</div>",'<div class="wiki-info"><span class="wiki-info-bg"></span><a class="wiki-name" href="" target="_blank"></a></div>',"</li>"].join(""),tpl:['<div class="card-box relationship-card">','<h5 class="card-title"><i class="sticker"></i><span class="text">八卦关系</span><i class="close"></i></h5>','<div class="card-content">','<div class="rs-info">','<div class="rs-pics"></div>','<div class="rs-name"><a target="_blank"></a></div>',"</div>","</div>","</div>"].join("")},t),i=e.extend({rsPics:".rs-pics",rsName:".rs-name a"},i),a.call(this,i,t)}var e=i("common:widget/ui/base/base"),s=(i("common:widget/ui/utils/utils"),i("common:widget/ui/base/events"),i("searchdetail:widget/ui/utils/lib"),i("searchdetail:widget/ui/utils/imghelper")),a=i("searchdetail:widget/ui/controls/card/base/base");return e.extend(t.prototype,a.prototype,{updateView:function(i){var t=e("<div></div>"),s=e(this.opts.itemTpl).addClass("wiki-item-left").appendTo(t),a=e(this.opts.itemTpl).addClass("wiki-item-right").appendTo(t),n=i.entityA.name+" "+i.entityB.name+" "+i.relation,l="https://www.baidu.com/s?wd="+encodeURIComponent(n);elements=this.elements,this._setWikiInfo(s,i.entityA),this._setWikiInfo(a,i.entityB),elements.rsName.text(i.relation).attr("href",l),elements.rsPics.html(t.children())},_setWikiInfo:function(i,t){var e=this.opts.itemSize;s.loadImage([t.pic],function(a){var n=s.scaleFull(a,e);i.find(".pic-loading-dot").hide(),i.find("img").css(n).attr("src",t.pic)}),i.find(".picbox a").attr("href",t.url),i.find(".wiki-name").text(t.name).attr("href",t.url).attr("title",t.name)}}),t});
;/*!searchdetail:widget/ui/controls/card/rsResult/rsResult.js*/
define("searchdetail:widget/ui/controls/card/rsResult/rsResult",function(e){function t(e,t){var s=['<li class="rsline" index="${index}">','<a class="nolog" log-click="p=5.1010001&tpl=detailrs&rsword=${encodeQuery}&pos=${index}" href="https://www.baidu.com/s?wd=${relateSearchQuery}&rsv_dl=0_cont_img_big_${index}&rsf=${feature}&tn=SE_PCimageXG_2rz3bwdr" target="_blank">${relateSearchQuery}</a>',"</li>"];t=i.extend({dataKey:"rsResult",pointer:0,isFirst:1,itemTpl:s.join(""),tpl:['<div class="card-box rsresult-card">','<h5 class="card-title"><span class="text">去全网搜索</span></h5>','<div class="card-content">','<ul class="clearfix rslist">',"</ul>","</div>","</div>"].join("")},t),e=i.extend({rsList:".rslist"},e),r.call(this,e,t)}var i=e("common:widget/ui/base/base"),s=(e("common:widget/ui/utils/utils"),e("common:widget/ui/base/events"),e("searchdetail:widget/ui/utils/lib"),e("searchdetail:widget/ui/utils/imghelper"),e("common:widget/ui/juicer/juicer")),r=e("searchdetail:widget/ui/controls/card/base/base"),a=e("searchdetail:widget/ui/statistic/statistic-core");return i.extend(t.prototype,r.prototype,{checkState:function(e){var t=this.opts.rsResult,i="1"===e.youtuType?!1:t&&t.length;return{hasContent:i,changed:i,dataObj:i&&t||[]}},updateView:function(e){if(!e.offset&&e.pi&&e.pi.length>6&&!this.isFirst)return void(this.isFirst=1);e=this.opts.rsResult;for(var t,i,r,n="",l=0,o=0,d=0,c=this.opts.pointer,u=e.length,h=[],p=this,g=[],m=0,f=c;u>m;m++,f++){if(f%=u,i=e[f].relateSearchQuery.match(/[^\x00-\xff]/g),r=i&&i.length||0,letter=e[f].relateSearchQuery.length-r,t=14*(r+1)+8*letter,o+=t,o>250&&(l++,o=t,n+="</br>"),e[f].index=++d,e[f].oriquery=this.opts.oriquery,e[f].encodeQuery=encodeURIComponent(e[f].relateSearchQuery),e[f].rsPersonalizedStr="1"===e[f].rsPersonalized?"&rspersonalized=1":"",l>=3){this.opts.pointer=f;break}h.push(e[f].relateSearchQuery),"1"===e[f].rsPersonalized&&g.push(m+1),n+=s(this.opts.itemTpl,e[f])}if(2>l)return setTimeout(function(){p.$element.hide()},50),!1;var w={tpl:"detailrs",rstr:encodeURIComponent(h.join(","))};g.length&&(w.rspn=g.join("$")),a.send("3.1010002",w),this.elements.rsList.empty().append(n),this.$element.show(),this.t++}}),t});
;/*!searchdetail:widget/ui/controls/card/rsResult/rsResultAsync.js*/
define("searchdetail:widget/ui/controls/card/rsResult/rsResultAsync",function(e){function t(e,t){t=i.extend({dataKey:"rsResult",itemTpl:['<li class="rsline" index="${index}">','<a class="nolog" log-click="p=5.1010001&tpl=detailrs&rsword=${encodeQuery}&pos=${index}" href="https://www.baidu.com/s?wd=${RelateSearchQuery}&rsv_dl=0_cont_img_big_${index}&rsf=${Feature}" target="_blank">${RelateSearchQuery}</a>',"</li>"].join(""),tpl:['<div class="card-box rsresult-card">','<h5 class="card-title"><span class="text">去全网搜索</span></h5>','<div class="card-content">','<ul class="clearfix rslist">',"</ul>","</div>","</div>"].join("")},t),e=i.extend({rsList:".rslist"},e),r.call(this,e,t)}var i=e("common:widget/ui/base/base"),s=(e("common:widget/ui/utils/utils"),e("common:widget/ui/base/events"),e("searchdetail:widget/ui/utils/lib"),e("searchdetail:widget/ui/utils/imghelper"),e("common:widget/ui/juicer/juicer")),r=e("searchdetail:widget/ui/controls/card/base/asyncard"),n=e("searchdetail:widget/ui/statistic/statistic-core");return i.extend(t.prototype,r.prototype,{checkProp:function(e){return e&&i.isArray(e)&&e.length>4},renderContent:function(e){for(var t,i,r,a="",l=0,c=0,o=0,d=(this.opts.pointer,e.length),u=[],h=this,p=0;d>p&&(i=e[p].RelateSearchQuery.match(/[^\x00-\xff]/g),r=i&&i.length||0,letter=e[p].RelateSearchQuery.length-r,t=14*(r+1)+8*letter,c+=t,c>250&&(l++,c=t,a+="</br>"),e[p].index=++o,e[p].oriquery=this.opts.oriquery,e[p].encodeQuery=encodeURIComponent(e[p].RelateSearchQuery),!(l>=3));p++)u.push(e[p].RelateSearchQuery),a+=s(this.opts.itemTpl,e[p]);return 2>l?(setTimeout(function(){h.$element.hide()},50),!1):(n.send("3.1010002",{tpl:"detailrs",rstr:encodeURIComponent(u.join(","))}),this.elements.rsList.empty().append(a),this.$element.show(),void this.t++)}}),t});
;/*!searchdetail:widget/ui/controls/card/scenicspot/scenicspot.js*/
define("searchdetail:widget/ui/controls/card/scenicspot/scenicspot",function(t){function i(t,i){i=e.extend({dataKey:"",itemSize:{width:118,height:88},itemTpl:['<li class="scenicspot-item">','<div class="picbox">','<span class="pic-loading-dot"></span>','<a href="" target="_blank"><img /></a>',"</div>",'<h6 class="scenicspot-item-title"><span class="scenicspot-item-title-bg"></span><a href="" target="_blank"></a></h6>',"</li>"].join(""),tpl:['<div class="card-box scenicspot-card">','<h5 class="card-title"><i class="sticker"></i><span class="text">景点推荐</span><i class="close"></i></h5>','<div class="card-content">','<div class="scenicspot-info">',"</div>",'<ul class="clearfix piclist">',"</ul>",'<a class="morebtn" href="" target="_blank">更多景点&gt;</a>',"</div>","</div>"].join(""),scenicspotInfoTpl:'<h6><a class="title" target="_blank" href=""></a><span class="src-site">(来自：<a target="_blank" href=""></a>)</span></h6>'},i),t=e.extend({picList:".piclist",scenicspotInfo:".scenicspot-info"},t),c.call(this,t,i)}var e=t("common:widget/ui/base/base"),s=(t("common:widget/ui/utils/utils"),t("common:widget/ui/base/events"),t("searchdetail:widget/ui/utils/lib"),t("searchdetail:widget/ui/utils/imghelper")),c=t("searchdetail:widget/ui/controls/card/base/asyncard");return e.extend(i.prototype,c.prototype,{resetContent:function(){var t=this.elements.picList;this.elements.scenicspotInfo.empty(),t&&t.html('<li class="card-loading"></li>')},checkProp:function(t){var i=4;return!t||!t.picList||!t.picList.length||t.picList.length<i?!1:!0},renderContent:function(t){var i=e("<ul></ul>"),c=e("<div></div>"),a=this,n=this.opts.itemSize,l=(this.opts.dataKey,4),r=t.picList,o=(e(a.opts.scenicspotInfoTpl).appendTo(c),c.find("h6"));o.find(".title").text(t.city).attr("href",t.moreUrl),o.find(".src-site a").attr({href:t.srcUrl}).text(t.srcSite),e(r).each(function(t,c){if(t>l-1)return!1;var r=e(a.opts.itemTpl).appendTo(i),o=r.find(".picbox img"),p=c.picUrl;r.find("a").attr("href",c.fromUrl),s.loadImage([p],function(t){var i=s.scaleFull(t,n);r.find(".pic-loading-dot").hide(),o.css(i).attr("src",p)}),o.attr("data-src",p),r.find(".scenicspot-item-title a").text(c.name).attr("title",c.name)}),this.elements.content.find(".morebtn").attr("href",t.moreUrl),this.elements.scenicspotInfo.empty().html(c.children()),this.elements.picList.empty().append(i.children()),this.$element.show()}}),i});
;/*!searchdetail:widget/ui/controls/card/sim_travel/sim_travel.js*/
define("searchdetail:widget/ui/controls/card/sim_travel/sim_travel",function(t){function i(t,i){i=a.extend({dataKey:"sim_travel",logKey:"sim_travel",itemSize:{width:118,height:88},itemTpl:['<li class="picbox">','<span class="pic-loading-dot"></span>','<a href="" target="_blank"><img /></a>','<a class="desc" href="" target="_blank"></a>',"</li>"].join(""),tpl:['<div class="card-box sim_travel_card">','<h5 class="card-title"><i class="sticker"></i><span class="text">相似景点</span><i class="close"></i></h5>','<div class="card-content">','<ul class="clearfix piclist">',"</ul>",'<span href="http://www.qunar.com/" target="_blank" class="dataprovider">来自：<a href="http://www.qunar.com/" target="_blank">去哪儿网</a></span>',"</div>","</div>"].join("")},i),t=a.extend({picList:".piclist"},t),s.call(this,t,i)}var a=t("common:widget/ui/base/base"),e=(t("common:widget/ui/utils/utils"),t("common:widget/ui/base/events"),t("searchdetail:widget/ui/utils/lib"),t("searchdetail:widget/ui/utils/imghelper")),s=t("searchdetail:widget/ui/controls/card/base/base");return a.extend(i.prototype,s.prototype,{updateView:function(t,i){{var s=a("<ul></ul>"),l=this,c=(this.imgData,this.opts.itemSize);i.get("imgData").cs,i.get("word")}a(t.cont).each(function(t,i){if(!(t>3)){var r=a(l.opts.itemTpl);t%2===1&&r.css("margin-left",12),r.appendTo(s);var n=r.find("img"),d={cs:i.cs,p:t+1};r.find("a").attr("href",i.caseurl),r.find(".desc").html(i.city?i.city+"-"+i.spotname:i.spotname),e.loadImage([i.picurl],function(t){var a=e.scaleFull(t,c);r.find(".pic-loading-dot").hide(),n.css(a).attr("src",i.picurl)}),n.attr("data-src",i.imgUrl),r.find("a").attr("log-ext",a.json.stringify(d))}}),this.elements.picList.empty().append(s.children())}}),i});
;/*!searchdetail:widget/ui/controls/card/similarpic/similarpic.js*/
define("searchdetail:widget/ui/controls/card/similarpic/similarpic",function(i){function t(i,t){t=e.extend({dataKey:"xiangshi_info",itemSize:{width:78,height:78},itemTpl:['<li class="picbox">','<span class="pic-loading-dot"></span>','<a href="" target="_blank"><img /></a>',"</li>"].join(""),tpl:['<div class="card-box similarpic-card" id="similarpicCard">','<h5 class="card-title"><i class="sticker"></i><span class="text">相似图片</span><i class="close"></i></h5>','<div class="card-content">','<ul class="clearfix piclist">',"</ul>",'<div class="moresimilarpic"><a href="" target="_blank">更多相似图片></a></div>',"</div>","</div>"].join("")},t),i=e.extend({picList:".piclist"},i),s.call(this,i,t)}var e=i("common:widget/ui/base/base"),a=(i("common:widget/ui/utils/utils"),i("common:widget/ui/base/events"),i("searchdetail:widget/ui/utils/lib"),i("searchdetail:widget/ui/utils/imghelper")),s=i("searchdetail:widget/ui/controls/card/base/base");return e.extend(t.prototype,s.prototype,{checkState:function(i){var t=s.prototype.checkState.call(this,i),i=this.getDataByPosId("pc_detail_slider_right_relate_img",this.opts.nsAdData),e=!!i;return(t.hasContent&&t.dataObj.length<6||e)&&(t.hasContent=!1),t},updateView:function(i,t){var s=e("<ul></ul>"),c=this,l=this.imgData,r=this.opts.itemSize,n=t.get("imgData").cs,d=t.get("word"),o=t.get("imgData").bdSrcType,p=(t.get("imgData").fromPageTitle,t.get("imgData").picDesc,encodeURIComponent(t.get("bigImgUrl"))),g="/n/pc_list?queryImageUrl="+p+"&querysign="+n+"&query="+d+"&srctype="+o+"&fp=searchdetail&pos=card&fm=searchdetail&uptype=button#tab=similar";e(i).each(function(i,t){var n=e(c.opts.itemTpl).appendTo(s),d=n.find("img"),o={cs:t.cs,p:i+1};n.find("a").attr("href",t.detailUrl+"&bdtype="+encodeURIComponent(l.bdSrcType||"")+"&simics="+encodeURIComponent(l.cs)),a.loadImage([t.imgUrl],function(i){var e=a.scaleFull(i,r);n.find(".pic-loading-dot").hide(),d.css(e).attr("src",t.imgUrl)}),d.attr("data-src",t.imgUrl),n.find("a").attr("log-ext",e.json.stringify(o))}),this.elements.cntWrapper.find(".moresimilarpic").find("a").attr("href",g).attr("log-click",""),this.elements.picList.empty().append(s.children())}}),t});
;/*!searchdetail:widget/ui/controls/card/similarpic/similarpicasync.js*/
define("searchdetail:widget/ui/controls/card/similarpic/similarpicasync",function(i){function t(i,t){t=e.extend({dataKey:"",logKey:"xiangsi",itemSize:{width:78,height:78},itemTpl:['<li class="picbox">','<span class="pic-loading-dot"></span>','<a href="" target="_blank"><img /></a>',"</li>"].join(""),tpl:['<div class="card-box similarpic-card" id="similarpicCard">','<h5 class="card-title"><i class="sticker"></i><span class="text">相似图片</span>','<a class="card-box-more" id="card-box-similar-more" log-pos="more" href="" target="_blank"><span class="card-box-more-text">更多</span><i class="card-box-more-img"></i></a><i class="close"></i></h5>','<div class="card-content">','<ul class="clearfix piclist">',"</ul>","</div>","</div>"].join("")},t),i=e.extend({picList:".piclist"},i),r.call(this,i,t)}{var e=i("common:widget/ui/base/base"),a=(i("common:widget/ui/utils/utils"),i("common:widget/ui/base/events"),i("searchdetail:widget/ui/utils/lib"),i("searchdetail:widget/ui/utils/imghelper")),r=i("searchdetail:widget/ui/controls/card/base/asyncard");i("searchdetail:widget/ui/statistic/statistic-core")}return e.extend(t.prototype,r.prototype,{checkProp:function(i){var t=(this.getDataByPosId("pc_detail_slider_right_relate_img",this.opts.nsAdData),i&&e.isArray(i)&&i.length>5||i&&e.isArray(i.piclist)&&i.piclist.length>5),a=this.opts.tjadData||{},r=a.adType,s=a.adData,c=!!s&&s.length>2&&s[0].AdTagList,o=a.adSrc,d=3===r&&4===o&&!!s&&c&&this.opts.pnMore<4;return d=d&&!window.samplekey.match("UI_PC_TJAD:0"),t&&!d},renderContent:function(i,t){var r=t.map,s="/n/pc_list?queryImageUrl="+encodeURIComponent(this.imgData.thumbURL)+"&querySign="+t.SimiCs+"&query="+encodeURIComponent(t.query)+"&srctype="+(t.srctype||0)+"&fp=searchdetail&pos=card&fm=searchdetail&uptype=button&objtype="+(r?r.cloth_info?1:r.bag_info?2:0:0)+"#activeTab=3",c=e("<ul></ul>"),o=this,d=this.imgData,n=this.opts.itemSize,l=e("#sider"),m=l.width()-l[0].clientWidth;e(i).each(function(i,t){if(i>5)return!1;var r=e(o.opts.itemTpl).appendTo(c),s=r.find("img"),l={cs:t.cs,p:i+1};r.find("a").attr("href",t.detailUrl+"&simics="+encodeURIComponent(d.cs)+"&cardserver=1&srctype="+t.srctype+"&bdtype="+t.srctype).click(function(i){i.preventDefault();var t=e(this).attr("href")+"&ctd="+(new Date).getTime()+"^3_"+(e(window).width()-m)+"X"+e(window).height()+"%1";window.open(t,"_blank")}),a.loadImage([t.imgUrl],function(i){var e=a.scaleFull(i,n);r.find(".pic-loading-dot").hide(),s.css(e).attr("src",t.imgUrl)}),s.attr("data-src",t.imgUrl),r.find("a").attr("log-ext",e.json.stringify(l))}),e("#card-box-similar-more").attr("href",s),e("#card-box-similar-more").hover(function(){e(this).find(".card-box-more-text").addClass("card-box-more-text-hover"),e(this).find(".card-box-more-img").addClass("card-box-more-img-hover")},function(){e(this).find(".card-box-more-text").removeClass("card-box-more-text-hover"),e(this).find(".card-box-more-img").removeClass("card-box-more-img-hover")}),this.elements.picList.empty().append(c.children()),"相似图片"!==e(".relate-img-card").find(".text").html()&&this.$element.show(),e(".card-box-more").on("click",function(){e.cookie("uploadTime",(new Date).getTime(),{path:"/"})})}}),t});
;/*!searchdetail:widget/ui/controls/card/spreadHint/spreadHint.js*/
define("searchdetail:widget/ui/controls/card/spreadHint/spreadHint",function(e){function t(e,t){t=i.extend({timer:null,layer:null,tpl:['<div class="spread-hint-box">',"</div>"].join(""),btnTpl:['<div class="spread-hint-btn">商业推广',"</div>"].join(""),layerTpl:['<div class="spread-hint-layer" id="spread-hint-layer">',"<h3>商业推广</h3>","<p>本搜索结果为商业推广信息，请注意可能的风险。百度推出",'<a target="_blank" href="http://baozhang.baidu.com/guarantee/">网民权益保障计划</a>，','<a target="_blank" href="https://passport.baidu.com/">登录</a>搜索有保障</p>',"</div>"].join("")},t),e=i.extend({spreadButton:".spread-button"},e),a.call(this,e,t)}{var i=e("common:widget/ui/base/base"),a=(e("common:widget/ui/utils/utils"),e("common:widget/ui/base/events"),e("searchdetail:widget/ui/utils/lib"),e("searchdetail:widget/ui/utils/imghelper"),e("common:widget/ui/juicer/juicer"),e("searchdetail:widget/ui/controls/card/base/base"));e("searchdetail:widget/ui/statistic/statistic-core")}return i.extend(t.prototype,a.prototype,{checkState:function(e){var t=this.opts.nsAdData,i=this.getDataByPosId("pc_detail_slider_right_pic_info",t),a=this.getDataByPosId("pc_detail_slider_right_pic_info",e.fbResult),s=i&&"0"!==e.adType||a;return{hasContent:s,changed:s,dataObj:[]}},updateView:function(){var e=this,t=e.elements,a=t.cntWrapper,s=a.find(".spread-hint-btn");if(!s.length){a.append(e.opts.btnTpl),i("#wrapper").append(e.opts.layerTpl),e.opts.layer=i("#spread-hint-layer");var r=i("#sider").width(),n=i("#header").height();e.opts.layer.css({top:n+20+"px",right:r+"px"}),e.bindEvents()}},bindEvents:function(){var e=this,t=e.elements,a=t.cntWrapper,s=a.find(".spread-hint-btn");s.on("click",function(){var t=i(this);clearTimeout(e.opts.timer),t.hasClass("layer-show")?(t.removeClass("layer-show"),e.opts.layer.hide()):(t.addClass("layer-show"),e.opts.layer.show(),e.opts.timer=setTimeout(function(){e.opts.layer.hide(),t.removeClass("layer-show")},4e3))}),e.opts.layer.hover(function(){i(this);clearTimeout(e.opts.timer)},function(){i(this);clearTimeout(e.opts.timer),s.removeClass("layer-show"),e.opts.layer.hide()}),e.opts.layer.on("click",function(){clearTimeout(e.opts.timer),e.opts.layer.hide()})}}),t});
;/*!searchdetail:widget/ui/controls/card/suCard/suCard.js*/
define("searchdetail:widget/ui/controls/card/suCard/suCard",function(i){function s(i,s){s=t.extend({itemSize:{width:78,height:78},itemTpl:['<li class="picbox">','<span class="pic-loading-dot"></span>','<a href="" target="_blank">','<img height=80 src="" />',"</a>","</li>"].join(""),tpl:['<div class="card-box suCard">','<h5 class="card-title"><i class="sticker"></i><span class="text">热门推广</span><i class="close"></i></h5>','<div class="card-content">','<div class="clearfix piclist">',"</div>",'<p class="src-row"><a href="" target="_blank"><span></span></a></p>',"</div>","</div>"].join("")},s),i=t.extend({titleLink:"h6 a",picList:".piclist",srcSite:".src-row a"},i),a.call(this,i,s)}var t=i("common:widget/ui/base/base"),a=(i("searchdetail:widget/ui/statistic/statistic-core"),i("searchdetail:widget/ui/controls/card/base/base")),e=i("searchdetail:widget/sning1/sning1");return t.extend(s.prototype,a.prototype,{updateView:function(){e.show({container:this.elements.picList.empty()})}}),s});
;/*!searchdetail:widget/ui/controls/card/tjAd/tjAd.js*/
define("searchdetail:widget/ui/controls/card/tjAd/tjAd",function(t){function a(t,a){a=e.extend({pn:-1,spn:-1,dataKey:"",pnMore:0,itemSize:{width:118,height:98},itemTpl:['<a class="tjadCard-link" href="${targetUrl}" target="_blank">','<img class="tjadCard-pic" src="${imgUrl}"/>','<div class="tjad-message">','<span class="tjad-desc" title="${adTitle}">${adTitle}</span>','{@each tags as item}<span class="tjad-tag">${item}</span>{@/each}','<span class="price">${price}</span>',"</div>",'<div class="tjad-logo" title="${adlink}"><img src="${logoUrl}"></div>',"</a>"].join(""),tpl:['<div class="card-box tjadCard">','<h5 class="card-title">','<i class="sticker"></i>','<span class="text">相关商品</span>','<span class="tuiguang-spread">品牌广告</span>','<i class="close"></i>',"</h5>",'<div class="card-content">',"</div>","</div>"].join(""),layerTpl1:['<div class="spread-layer" id="spread-layer">','<p>本搜索结果为<a target="_blank" href="http://e.baidu.com/">商业推广</a>信息，请注意可能的风险。百度推出','<a target="_blank" href="http://baozhang.baidu.com/guarantee/">网民权益保障计划</a>，','<a target="_blank" href="https://passport.baidu.com/">登录</a>搜索有保障。</p>',"</div>"].join(""),layerTpl2:['<div class="spread-layer" id="spread-layer">','<p>本搜索结果为<a target="_blank" href="http://e.baidu.com/">商业推广</a>信息，请注意可能的风险。','您当前为登录状态，已参加<a target="_blank" href="http://baozhang.baidu.com/guarantee/">网民权益保障计划</a>。',"</div>"].join("")},a),t=e.extend({cnt:".card-content"},t),s.call(this,t,a)}var e=t("common:widget/ui/base/base"),i=t("common:widget/ui/juicer/juicer"),s=t("searchdetail:widget/ui/controls/card/base/base"),n=(t("searchdetail:widget/ui/statistic/statistic-core"),1);return e.extend(a.prototype,s.prototype,{checkState:function(){var t=this.opts.tjadDat||{},a=t.adType,e=t.adData,i=!!e&&e.length>2&&e[0].AdTagList,s=t.adSrc,n=3===a&&4===s&&!!e&&i&&this.opts.pnMore<4;return n=n&&!window.samplekey.match("UI_PC_TJAD:0"),{hasContent:n,changed:n,dataObj:[]}},addSpread:function(t){var a=this,i=e(".tjadCard").find(".tuiguang-spread"),s=!t.get("userName"),n=0;!e("#spread-layer").length&&e("#wrapper").append(s?a.opts.layerTpl1:a.opts.layerTpl2);var d=e("#spread-layer");d.css("display","none"),i.off("click"),d.off("click"),e("#sider").off("scroll"),i.on("click",function(){n=i.offset().top-i.height()/2,d.css("top")!==n+"px"&&(d.hide(),d.css("top",n)),d.toggle(),"block"===d.css("display")&&(a.clickTips=setTimeout(function(){d.css("display","none")},4e3))}),d.on("click",function(){d.toggle()}),e("#sider").scroll(function(){d.css("top",i.offset().top-i.height()/2)})},addView:function(t,a){var e,s={},n=[];!a||t>=a.length||(e=a[t],!!e.AdTagList&&(n=e.AdTagList.split(",")),s={imgUrl:e.Base64||e.PicUrl,targetUrl:e.AdLink,adlink:e.AdLink,logoUrl:e.AdLogoUrl,price:e.AdPrice||0,tags:n,adTitle:e.AdTitel,adDesc:e.AdDesc},this.elements.cnt.append(i(this.opts.itemTpl,s)))},sendLog:function(t){var a=function(){var t=(new Date).getTime()+"-",a=0;return function(){return t+a++}}(),e=a(),i=new Image;i.onload=i.onerror=function(){i.onload=i.onerror=null,i=null},i.src=t+"&_uid="+e},updateView:function(t,a){var i=this,s=this.opts.tjadData,d=s.adData,r=d.length,c=s.tjUrl,o=i.opts.pnMore,l=window.samplekey.match("UI_PC_TJAD:1")?1:2,p=this.opts.pn!==a.get("pn")||this.opts.spn!==a.get("spn");e(".similarpic-card").hide(),i.elements.cnt.empty(),1===l?(i.addView(o,d),n=1):(i.addView(2*o%r,d),i.addView((2*o+1)%r,d),n=2),p&&(this.opts.pn=a.get("pn"),this.opts.spn=a.get("spn"),i.sendLog(c+"&actionid=4&attach="+o+"|src=detail|render_type="+n),1!==l&&i.sendLog(c+"&actionid=4&attach="+o+"|src=detail|render_type="+n));e(".tjadCard-link");e(".tjadCard-link").click(function(){i.sendLog(c+"&actionid=2&attach="+o+"|src=detail|render_type="+n)}).mouseenter(function(){i.sendLog(c+"&actionid=1&attach="+o+"|src=detail|render_type="+n)}),i.addSpread(a),i.opts.pnMore++}}),a});
;/*!searchdetail:widget/ui/controls/card/travelnotes/travelnotes.js*/
define("searchdetail:widget/ui/controls/card/travelnotes/travelnotes",function(t){function i(t,i){i=e.extend({dataKey:"",itemSize:{width:120,height:90},itemTpl:['<li class="travelnotes-item">','<div class="item-pic-img picbox">','<span class="pic-loading-dot"></span>','<a href="" target="_blank"><img /></a>',"</div>",'<ul class="item-pic-info">','<li><h6><a href="" target="_blank"></a></h6></li>','<li>行程共<span class="time-spend"></span>天</li>','<li><span class="start-time"></span>出发</li>',"</ul>","</li>"].join(""),tpl:['<div class="card-box travelnotes-card">','<h5 class="card-title"><i class="sticker"></i><span class="text">景点游记</span><i class="close"></i></h5>','<div class="card-content">','<ul class="clearfix piclist">',"</ul>",'<a class="morebtn" href="" target="_blank">更多游记&gt;</a>',"</div>","</div>"].join("")},i),t=e.extend({picList:".piclist"},t),s.call(this,t,i)}var e=t("common:widget/ui/base/base"),a=(t("common:widget/ui/utils/utils"),t("common:widget/ui/base/events"),t("searchdetail:widget/ui/utils/lib"),t("searchdetail:widget/ui/utils/imghelper")),s=t("searchdetail:widget/ui/controls/card/base/asyncard");return e.extend(i.prototype,s.prototype,{resetContent:function(){var t=this.elements.picList;t&&t.html('<li class="card-loading"></li>')},checkProp:function(t){var i=2;return!t||!t.data||!t.data.length||t.data.length<i?!1:!0},renderContent:function(t){var i=e("<ul></ul>"),s=this,l=this.opts.itemSize,n=(this.opts.dataKey,2),r=t.data;e(r).each(function(t,r){if(t>n-1)return!1;var c=e(s.opts.itemTpl).appendTo(i),d=c.find(".item-pic-img img"),o=r.image,p=c.find(".item-pic-info");c.find("a").attr("href",r.url),a.loadImage([o],function(t){var i=a.scaleFull(t,l);c.find(".pic-loading-dot").hide(),d.css(i).attr("src",o)}),d.attr("data-src",o),p.find("h6>a").text(r.title).attr({title:r.title,href:r.url}),p.find(".time-spend").text(r.routeDays),p.find(".start-time").text(r.startTime)}),this.elements.content.find(".morebtn").attr("href",t.moreUrl),this.elements.picList.empty().append(i.children()),this.$element.show()}}),i});
;/*!searchdetail:widget/ui/controls/card/wallpaper/wallpaper.js*/
define("searchdetail:widget/ui/controls/card/wallpaper/wallpaper",function(t){function e(t,e){e=a.extend({dataKey:"wallp_info",itemTpl:["<li>",'<p class="size-info">','<span class="info-text info-size"></span>','<span class="vsep">|</span><span class="info-text info-bytes"></span>','<span class="vsep">|</span><span class="info-text info-type"></span>',"</p>",'<p class="url-info">','<a class="cardbtn cardbtn-small preview-btn" href="javascript:void(0);">预览<span class="flashcon"></span></a>','<a class="cardbtn cardbtn-small download-btn" href="javascript:void(0);">下载</a>','<a class="src-site" href="" target="_blank" target="_blank">（来自：<span></span>）</a>',"</p>","</li>"].join(""),tpl:['<div class="card-box wallpaper-card">','<h5 class="card-title"><i class="sticker"></i><span class="text">壁纸下载</span><i class="close"></i></h5>','<div class="card-content">',"<h6>您电脑屏幕的尺寸："+window.screen.width+"&#215;"+window.screen.height+"</h6>",'<p class="subtitle">发现<span class="num"></span>个适合的壁纸</p>','<ul class="info-list">',"</ul>","</div>","</div>"].join("")},e),this._validData=null,t=a.extend({infoList:".info-list",num:".subtitle .num"},t),l.call(this,t,e)}var a=t("common:widget/ui/base/base"),i=(t("common:widget/ui/utils/utils"),t("common:widget/ui/base/events"),t("searchdetail:widget/ui/utils/lib")),n=t("searchdetail:widget/ui/utils/imghelper"),s=t("searchdetail:widget/ui/utils/swf"),l=t("searchdetail:widget/ui/controls/card/base/base");return a.extend(e.prototype,l.prototype,{checkState:function(t){var e=l.prototype.checkState.call(this,t);if(e.hasContent&&e.changed){var i=window.screen.width,n=window.screen.height;this._validData=a(e.dataObj).filter(function(t,e){return e.w>=i&&e.h>=n}),this._validData=a(this._validData).sort(function(t,e){return t.w!=e.w?t.w>e.w:t.h>e.h}),e.hasContent=!(!this._validData||!this._validData.length)}return e},updateView:function(){var t,e=a("<ul></ul>"),s=this,l=[];a(this._validData).each(function(r,o){if(r>2)return!1;t=a(s.opts.itemTpl).appendTo(e);var d=t.find(".info-type"),c=t.find(".info-size"),p=t.find(".info-bytes");previewBtn=t.find(".preview-btn"),downloadLink=t.find(".download-btn"),infoSite=t.find(".src-site"),infoExt={s:(o.w||"0")+"x"+(o.h||"0")};var h=o.fm||n.getFileType(o.objurl);d.text(h.toUpperCase()),c.html(o.w+"&#215;"+o.h);var f=1*(o.size||0);f?p.text(n.formatBytes(f,0,Math.floor).toUpperCase()).show().prev().show():p.hide().prev().hide(),previewBtn.attr("data-src",o.objurl),downloadLink.attr("href","/search/down?tn=download&word=download&ie=utf8&fr=detail&url="+encodeURIComponent(o.objurl)),infoSite.attr("href","http://"+o.s).find("span").text(o.siteName||i.getSiteName(o.s)),l.push({id:"wallpcard_preview_"+r,width:o.w,height:o.h,imgSrc:o.objurl,flashCon:t.find(".preview-btn .flashcon")}),t.find("a").attr("log-ext",a.json.stringify(infoExt))}),this.elements.num.text(this._validData.length),this.elements.infoList.empty().append(e.children()),a(l).each(function(t,e){s.initPreview(e.id,e.imgSrc,e.width,e.height,e.flashCon.get(0))})},initPreview:function(t,e,a,i,n){e="/search/down?tn=download&word=download&ie=utf8&fr=detailWall&url="+encodeURIComponent(e)+"&height="+i+"&width="+a,s.swf.create({id:t,width:"74",height:"30",ver:"9.0.28",errorMessage:"请下载最新的Flash播放器！",url:"/static/flash/WallpaperImagesv103.swf",bgcolor:"#ffffff",wmode:"transparent",allowfullscreen:"true",vars:{preview:2,system:this.gatSystem(),imagesurl:e}},n)},gatSystem:function(){var t="";return t="Win32"==navigator.platform?navigator.userAgent.indexOf("Windows NT 5")>-1?"xp":"win7":"xp"}}),e});
;/*!searchdetail:widget/ui/controls/card/wikiinfo/wikiinfo.js*/
define("searchdetail:widget/ui/controls/card/wikiinfo/wikiinfo",function(i){function t(i,t){t=e.extend({tpl:['<div class="card-box wikiinfo-card">','<h5 class="card-title"><img width=34 height=34 /><i class="sticker"></i><span class="text">人物百科</span><i class="close"></i></h5>','<div class="card-content">','<div class="wiki-detail">','<h6 class="wiki-name">','<p class="main-name">布拉德·皮特</p>','<p class="sub-name">Brad Pitt</p>',"</h6>",'<p><label>国籍：</label><span class="guoji">美国</span></p>','<p><label>职业：</label><span class="job">演员、制片人</span></p>','<p class="big-row"><label>代表作品：</label><br/>《神枪手之死》<br/>《返老还童》<br/>《侏罗纪公园》</p>',"</div>",'<div class="wiki-img">','<div class="wiki-portrait"><a href="#" target="_blank"><img src="http://d.hiphotos.baidu.com/baike/w%3D268/sign=ba583f494dc2d562f208d7ebdf1190f3/b2de9c82d158ccbf6fe124131bd8bc3eb13541bd.jpg" /></a></div>','<a class="cardbtn" href="#" target="_blank">进入百科</a>',"</div>","</div>","</div>"].join("")},t),i=e.extend({portrait:".wiki-portrait img",linkBtn:".cardbtn",mainName:".main-name",subName:".sub-name",guoJi:".guoji",job:".job",zuoPin:".big-row"},i),this.wikiRepeatInfo={count:0,name:""},n.call(this,i,t)}var e=i("common:widget/ui/base/base"),a=i("common:widget/ui/utils/utils"),s=(i("common:widget/ui/base/events"),i("searchdetail:widget/ui/utils/lib")),n=i("searchdetail:widget/ui/controls/card/base/base");return e.extend(t.prototype,n.prototype,{_compat:function(i){n.prototype._compat.call(this,i),a.UI.isSupportCss3("borderRadius",i.get(0),!0)||e('<div class="radius-mask"></div>').insertAfter(i.find(".card-title .close"))},checkState:function(i){var t=n.prototype.checkState.call(this,i);return t.hasContent&&(t.changed&&t.dataObj.name!=this.wikiRepeatInfo.name?(this.wikiRepeatInfo.count=0,this.wikiRepeatInfo.name=t.dataObj.name):this.wikiRepeatInfo.count+=1),t},_resetBox4Update:function(){this.opts.collapseClass;this.opts.cardHeight=!1,this.elements.cntWrapper.css({position:"static",height:"auto"})},updateView:function(i){var t=this.elements;this.$element.attr("data-fr",i.fr||""),t.title.find("img").attr("src",i.pic);var a=i.fr?"#"+i.fr:"",s={name:i.name};t.portrait.attr("src",i.pic+a).parent().attr("href",i.url),t.linkBtn.attr("href",i.url),this.bindText(t.mainName,i.name),this.bindText(t.subName,i.enName),this.bindText(t.guoJi,i.guoJi),this.bindText(t.job,i.job);var n=this.parseZuoPin(i.zuoPin);if(n.length){var o=["<label>代表作品：</label>"],r=!1;e(n).each(function(i,t){return t.length>9?(r=!0,!1):void 0}),e(n).each(function(i,t){o.push("<br/>"+(r?"":"《")+t+(r?"":"》"))}),t.zuoPin.html(o.join("")).show(),r?t.zuoPin.hasClass("big-row-noindent")||t.zuoPin.addClass("big-row-noindent"):t.zuoPin.hasClass("big-row-noindent")&&t.zuoPin.removeClass("big-row-noindent")}else t.zuoPin.hide();if(!n.length||i.collapse||this.wikiRepeatInfo.count>=2){var l=this.opts.collapseClass;this.$element.hasClass(l)||this.$element.addClass(l),this.$element.height(37),this.curState.collapse=!0}t.content.find("a").attr("log-ext",e.json.stringify(s))},parseZuoPin:function(i){var t=[];if(i){i=e.trim(i);var a=s.split(i,["《","》"]),n=["、",",","，","《","》"];e(a).each(function(i,a){a=e.trim(a),a&&(a.length>1||e.inArray(a,n)<0)&&t.push(a)})}return t}}),t});
;/*!searchdetail:widget/ui/controls/card/wikiinfoface/wikiinfoface.js*/
define("searchdetail:widget/ui/controls/card/wikiinfoface/wikiinfoface",function(i){function e(i,e,a){e=t.extend({logTag:"face",tpl:['<div id="wikiinfo-face-card-wrapper"></div>'].join(""),itemtpl:['<div class="card-box wikiinfo-face-card">','<span class="margin-packed"></span>','<div class="cnt-wrapper cnt-wrapper-new"><div class="card-content">','<div class="wiki-detail-wrapper">','<div class="wiki-detail wiki-detail-new">','<h6 class="wiki-name">','<span class="main-name"></span>','<span class="sub-name"></span>',"</h6>",'<p class="wiki-sr wiki-item"><label>生日：</label><span class="birth"></span></p>','<p class="wiki-zy wiki-item"><label>职业：</label><span class="zy job"></span></p>','<p class="wiki-gj wiki-item"><label>国籍：</label><span class="gj"></span></p>','<!--[if lt IE 9]><p class="cardbtn-wrapper wiki-skip" style="text-align: center"><a href="#" target="_blank">进入百科</a></p><![endif]-->',"</div>",'<div class="wiki-img">','<div class="wiki-portrait-wrapper">','<div class="wiki-portrait">','<a href="#" target="_blank"><!--[if lt IE 9]><em class="ie-circel-bg"></em><![endif]--><img src="" /></a>',"</div>",'<span class="car-logo-padding-bg"></span>',"</div>",'<p class="cardbtn-wrapper wiki-skip" style="text-align: center"><a href="#" target="_blank">进入百科</a></p>',"</div>","</div>",'<div class="zp zp-new">','<h5 class="cardbtn-intro"><i class="cardbtn-content">代表作品</i><span></span></h5>',"<p></p>","</div>","</div></div>","</div>"].join("")},e),i=t.extend({mainName:".main-name",subName:".sub-name",birth:".birth",gj:".gj",zy:".zy",portrait:".wiki-portrait img",linkBtn:".cardbtn-wrapper a",cardbtnIntro:".cardbtn-content",wikiDetail:".wiki-detail",zp:".zp p",zpNew:".zp-new",wikiItem:".wiki-item",zpTitle:".zp h5"},i),this.wikiRepeatInfo={count:0,name:""},this.group=a,s.call(this,i,e)}var t=i("common:widget/ui/base/base"),a=i("common:widget/ui/utils/utils"),s=(i("common:widget/ui/base/events"),i("searchdetail:widget/ui/utils/lib"),i("searchdetail:widget/ui/controls/card/base/base"));return t.extend(e.prototype,s.prototype,{_init:function(){var i=this.$element,e=this.elements;this.opts.elements=t.extend({},{},e);for(var a in this.opts.elements)e.hasOwnProperty(a)&&(e[a]=i.find(e[a]));this.bindEvent()},_compat:function(i){s.prototype._compat.call(this,i),a.UI.isSupportCss3("borderRadius",i.get(0),!0)||t('<div class="radius-mask"></div>').insertAfter(i.find(".card-title .close"))},checkState:function(i){var e=s.prototype.checkState.call(this,i);return e.hasContent&&(e.changed&&e.dataObj.name!=this.wikiRepeatInfo.name?(this.wikiRepeatInfo.count=0,this.wikiRepeatInfo.name=e.dataObj.name):this.wikiRepeatInfo.count+=1),e},_resetBox4Update:function(){this.opts.collapseClass;this.opts.cardHeight=!1,this.elements.cntWrapper.css({position:"static",height:"auto"})},updateView:function(i,e){var a=this,s=e.data.imgData.star_face,n=[];if(s&&s.length&&i&&i.length){var r,o;for(r=i.length-1;r>=0;r--)for(o=s.length-1;o>=0;o--)s[o].entity===i[r].ne&&n.unshift(i[r])}0==s.length&&i&&i.length&&n.unshift(i[0]);var l=n!=a.render_wiki_list;a.render_wiki_list=n;var c=(n[0],a.opts.itemtpl);if(n.length&&l){var d=n.length,p=0,h=t("<div/>");for(p;d>p;p++){var f=n[p],v=t("<div/>"),m=t(c).attr("data-id","face_"+p).appendTo(v),w=a.opts.elements,b=a.elements;for(var g in w)b.hasOwnProperty(g)&&(b[g]=m.find(w[g]));m.attr("data-fr",f.fr||""),b.title.find("img").attr("src",f.st);var k=f.fr?"#"+f.fr:"",u={name:f.ne};b.portrait.attr("src",f.st+k).parent().attr("href",f.url),b.linkBtn.attr("href",f.url),b.mainName.text(f.ne);for(var x=(t.browser.msie&&t.browser.version<=9,["birth","zy","gj"]),y=0,I=0;3>I;I++){var z=x[I];f[z]&&2>y&&(y++,a.elements[z].text(f[z]),a.elements[z].parent().show())}2>y&&(b.wikiItem.hide(),b.mainName.parent().css({marginTop:"2px"}),b.wikiDetail.css({height:"47px"}),b.zpNew.css({marginTop:"-25px"}),b.linkBtn.parent().css({height:"24px"}));var C=f.abstract||""||f.zp;C=t("<div></div>").html(C).text();var _=-1==C.lastIndexOf("...")?"...":"";if(C=C.substring(0,65)+_,b.zp.text(C),f.zp||f.abstract){var j=b.cardbtnIntro,T=f.abstract?"人物简介":"代表作品";j.text(T),b.zp.siblings("h5").show(),b.zp.show()}else b.zp.siblings("h5").hide(),b.zp.hide();b.content.find("a").attr("log-ext",t.json.stringify(u)),h.append(v.children())}this.$element.empty().append(h.children())}},setLinkLog:function(){this.$element.find("a").each(function(i,e){e=t(e);var a=e.attr("href");if(a&&!e.attr("log-click")){var s=e.attr("log-ext")||"";e.attr("log-click","p=5.15&tag=face&fm=face&site="+encodeURIComponent(a)+"&ext="+encodeURIComponent(s))}})},bindEvent:function(){var i=this;this.$element.on("mouseenter",".wikiinfo-face-card",function(){var e=t(this).attr("data-id");i.anthorIndex=e,i.fire("hover")}).on("mouseleave",".wikiinfo-face-card",function(){i.fire("hout")})},active:function(i){if(this.disactiveTimeout&&clearTimeout(this.disactiveTimeout),"wikiinfo-face-card-wrapper"!=i.$element[0].id){var e=t(i.$element[0]).find('[data-id="'+i.anthorIndex+'"]')[0]||t("body"),a=parseFloat(e.style.top),s=parseFloat(e.style.left),n=this.$element.find('[data-id="'+i.anthorIndex+'"]'),r=n.height(),o=t(".img-container").height()-r,l=-parseInt(a),c=t(".img-container").offset().top,d=t(".img-container").offset().left;t(e).siblings().removeClass("hover"),t(e).addClass("hover"),n.siblings().css("visibility","hidden"),t("#wikiinfo-face-card-wrapper").siblings(".card-box").css("visibility","hidden");var p=t.browser.msie&&t.browser.version<9;if(!p){var h=t(e).siblings().children("a"),f=h.find("em");f.hasClass("hover")&&h.css("width","auto")&&f.removeClass("hover")}var v,h=t(e).children("a"),f=h.find("em");"none"==h.css("display")&&(n.removeClass("none-title"),n.find(".wiki-name").show(),n.find(".whitespace-pack").remove()),"猜猜图中是谁"==f.text()&&(n.removeClass("none-title"),n.find(".wiki-name").show(),n.find(".whitespace-pack").remove());var m=r+65+l,w=a+32-o,p=t.browser.msie&&t.browser.version<9;if(w>0&&(0>m||w>m)?(v=a-n.height()+c,p||f.hasClass("hover")&&h.css("width","auto")&&f.removeClass("hover")):(v=a+32+c,parseInt(f.width())>104&&!f.hasClass("hover")&&!p&&(h.css("width","104px"),f.addClass("hover"))),this.$element.show(),t(e).hasClass("default_icon")){v=a-n.height()+c;var b=s-(parseInt(n.width())-parseInt(t(e).width()))+70;n.css({left:b+"px",top:v+"px"}).css("visibility","visible")}else n.css({left:s+d+"px",top:v+"px"}).css("visibility","visible")}},disactive:function(i){var e=this,a=i.anthorIndex;!function(i){e.disactiveTimeout=setTimeout(function(){var s=t(i.$element[0]).find('[data-id="'+a+'"]')[0];t(s).removeClass("hover");var n=e.$element.find('[data-id="'+a+'"]');n.css("visibility","hidden");var r=t.browser.msie&&t.browser.version<9;if(!r){var o=t(s).children("a"),l=o.find("em");l.hasClass("hover")&&o.css("width","auto")&&l.removeClass("hover")}},150)}(i)}}),e});
;/*!searchdetail:widget/ui/controls/card/xianguiProductsAd/xianguiProductsAd.js*/
define("searchdetail:widget/ui/controls/card/xianguiProductsAd/xianguiProductsAd",function(i){function t(i,t){t=e.extend({dataKey:"xianguiProducts",tpl:['<div id="xianguiproductscard" class="xianguiproductscard card-box pic-info">','<h5 class="card-title">','<i class="sticker"></i>','<span class="text">产品信息</span>','<i class="close"></i>',"</h5>",'<div class="card-content"></div></div>'].join("")},t),c.call(this,i,t)}var e=i("common:widget/ui/base/base"),a=i("common:widget/ui/juicer/juicer"),c=(i("common:widget/ui/utils/utils"),i("common:widget/ui/base/events"),i("searchdetail:widget/ui/utils/lib"),i("searchdetail:widget/ui/utils/imghelper"),i("searchdetail:widget/ui/controls/card/base/base")),s=i("searchdetail:widget/ui/statistic/statistic-core");return e.extend(t.prototype,c.prototype,{checkState:function(i){var t=i.fbResult,a=c.prototype.checkState.call(this,i),s=this.opts.nsAdData,d=this.getDataByPosId("pc_detail_slider_right_pic_info",s),n=!!d&&"0"!==i.adType,o=t&&t.length;return a.hasContent&&a.changed?(e("#picInfoPnl").hide(),e("#xianguiproductscard").show()):n||o||(e("#picInfoPnl").show(),e("#xianguiproductscard").hide()),a},updateView:function(i){var t=a("#xianguiproductscardtpl",i);e("#xianguiproductscard .card-content").html(t),s.send("5.1010000",{fm:"provide,product",state:"1,1"})}}),t});
;/*!searchdetail:widget/ui/controls/card/xianguiProviderAd/xianguiProviderAd.js*/
define("searchdetail:widget/ui/controls/card/xianguiProviderAd/xianguiProviderAd",function(i){function e(i,e){e=t.extend({dataKey:"xianguiProvider",tpl:""},e),r.call(this,i,e)}var t=i("common:widget/ui/base/base"),a=i("common:widget/ui/juicer/juicer"),r=(i("common:widget/ui/utils/utils"),i("common:widget/ui/base/events"),i("searchdetail:widget/ui/utils/lib"),i("searchdetail:widget/ui/utils/imghelper"),i("searchdetail:widget/ui/controls/card/base/base"));return t.extend(e.prototype,r.prototype,{checkState:function(i){var e=i.fbResult,a=r.prototype.checkState.call(this,i),d=this.opts.nsAdData,n=this.getDataByPosId("pc_detail_slider_right_pic_info",d),o=!!n&&"0"!==i.adType,c=e&&e.length;return a.hasContent&&a.changed?(t("#picInfoPnl").hide(),t("#xianguiprovidercard").show()):c||o||(t("#xianguiprovidercard").hide(),t("#picInfoPnl").show()),a},updateView:function(i){var e=a("#xianguiprovidercardtpl",i);t("#xianguiprovidercard").html(e)}}),e});
;/*!searchdetail:widget/ui/controls/dutuguide/dutuguide.js*/
define("searchdetail:widget/ui/controls/dutuguide/dutuguide",function(e){function i(e){this.$element=t(null),this.$refImgDom=t(null),this.opts=t.extend({exploreWidth:1156,exploreHeight:520,boxSize:{width:418,height:441},duration:1200,cards:[]},e),this.elements={exploreView:".explore-view",scanBar:".explore-view .scan-light",viewWrapper:".view-wrapper",screenPnl:".media-screen",cardPnl:".screen-cnt .cnt-inner",screenCaption:".screen-caption",working:".media-working"},this.receivedData=!1,this.allCards=[],this._preparePro=null,this._scanKeyFrames=null,this.tpl=['<div class="dutuguide">','<div class="explore-view">','<div class="view-wrapper">','<div class="scan-view">','<div class="img-box">','<img src="" />','<div class="img-mask"></div>',"</div>",'<div class="scan-window">','<div class="win-body">','<div class="scan-bar">','<div class="scan-light"></div>',"</div>","</div>","</div>",'<div class="media-working">','<div class="media-working-inner"></div>',"</div>",'<div class="media-screen-wrapper">','<div class="media-screen">','<div class="screen-cnt"><div class="cnt-inner"></div></div>',"</div>",'<div class="screen-caption"></div>',"</div>","</div>","</div>",'<div class="media-hd media-hd-left"></div>','<div class="media-hd media-hd-right"></div>',"</div>","</div>"].join("")}{var t=e("common:widget/ui/base/base"),s=e("common:widget/ui/utils/utils"),n=e("common:widget/ui/base/events"),r=(e("searchdetail:widget/ui/utils/lib"),e("common:widget/ui/arch/behavior/animation")),a=e("searchdetail:widget/ui/utils/imghelper");e("searchdetail:widget/ui/statistic/statistic-core")}return t.extend(i.prototype,n,{init:function(){},render:function(e){var i=t(window).width(),s=t(window).height(),n={top:s/2-this.opts.exploreHeight/2,left:i/2-this.opts.exploreWidth/2};this.$element=t(this.tpl);var r=this.$element,a=this.elements;for(var o in a)a.hasOwnProperty(o)&&(a[o]=r.find(a[o]));this.opts.exploreViewStyle=n,a.exploreView.css(n),e&&e.length&&this.initialAnimate(e),this.reset(),this.$element.appendTo(document.body)},setImgSize:function(e){var i=e.width(),t=e.height(),s=this.$element.find(".img-box img"),n=this.opts.boxSize,r=n.width/n.height;i<n.width||t<n.height?s.attr({width:i,height:t}):i/t>=r?s.css({width:"100%",height:"auto"}):s.attr({width:"auto",height:"100%"}),s.attr("src",e.attr("src"))},initialAnimate:function(e){this.setImgSize(e),this.opts.cards=this.renderCards();var i=0;t("#sider").find(".card-box").each(function(e,s){if(s.offsetHeight){var n=200*i+"ms";t(s).css({"-webkit-animation-delay":n,"-moz-animation-delay":n,"-ms-animation-delay":n,"-o-animation-delay":n,"animation-delay":n}),i+=1}})},show:function(e){this.$refImgDom=e,this.$element.length?this.initialAnimate(e):this.render(e),t("#adCard").hide();var i=this;setTimeout(function(){i.doShow()},200)},doShow:function(){this.$element.show(),this.$element.height();var e=[this.dropBg,this.displayExplore,this.expandExplore,this.startExplore,this.printCards,this.collapseExplore,this.exit,this.twinkleSider,this.reset],i=e.length,t=this,s=function(n){if(i>n){var r=e[n],a=r.call(t);a?a.done(function(){s(n+1)}):s(n+1)}};s(0)},reset:function(){var e=this.elements;e.exploreView.hide(),e.viewWrapper.width(0),e.cardPnl.css("top",""),e.scanBar.removeClass("scan-light-animate"),e.working.removeClass("media-working-animate"),e.screenPnl.css("left",""),this.$element.height(0).removeClass("dutuguide-exiting"),t("#sider").removeClass("twinkle")},dropBg:function(){if(s.UI.isSupportCss3("transition",this.$element.get(0))){var e=new t.Deferred,i=this;return this.$element.height(t(window).height()),setTimeout(function(){i.$element.addClass("dutuguide-exiting"),e.resolve()},300),e}return r.animate(this.$element,{height:t(window).height()},{duration:300,easing:"easeInSine"})},displayExplore:function(){var e=new t.Deferred,i=this;return this.elements.exploreView.show().css("opacity",.8),setTimeout(function(){i.elements.exploreView.css("opacity",1),e.resolve()},300),e},expandExplore:function(){if(s.UI.isSupportCss3("transition",this.elements.viewWrapper.get(0))){var e=new t.Deferred;return this.elements.viewWrapper.css("width",""),setTimeout(function(){e.resolve()},500),e}return r.animate(this.elements.viewWrapper,{width:1076},{duration:500,easing:"easeInSine"})},startExplore:function(){var e=this.elements;return s.UI.isSupportCss3("animation",e.scanBar.get(0))?(e.scanBar.addClass("scan-light-animate"),e.working.addClass("media-working-animate")):this._scanKeyFrames=r.keyframes([[e.scanBar,{top:419},{duration:1200,easing:"linear"}],[e.scanBar,{top:-19},{duration:1200,easing:"linear"}]],{iterationCount:10}),s.UI.isSupportCss3("transition",e.screenPnl.get(0))?void e.screenPnl.css("left",0):r.animate(e.screenPnl,{left:0},{duration:200,easing:"easeInOutSine"})},printCards:function(){var e=new t.Deferred,i=this.elements.cardPnl,n=this.opts.cards,a=n.length,o=1e3,d=400,c=0,l=193,h=193,u=s.UI.isSupportCss3("transition",i.get(0)),m=this,p=function(){if(c>=a)return void e.resolve();var t=n[c];u?i.css({top:l-(c+1)*h,opacity:.6}):r.animate(i,{top:l-(c+1)*h},{duration:d,easing:"linear"}),m.elements.screenCaption.addClass("screen-caption-blur"),setTimeout(function(){m.elements.screenCaption.text(t).removeClass("screen-caption-blur")},d/2),c+=1,setTimeout(function(){i.css("opacity",1)},d),setTimeout(function(){p()},o+d)};return p(),e},renderCards:function(){for(var e=t("#sider").find(".card-box"),i=t("<div></div>"),s=0,n=this,r=[],a=0;3>s&&a<e.length-1;a++){var o=t(e[a]);if(e[a].offsetHeight){var d=o.clone();d.find(".cnt-wrapper").css("position",""),d.css({width:"",height:""}).appendTo(i),r.push(d.find(".card-title").text()||"图片信息"),s+=1}}return this.elements.cardPnl.empty().append(i.children()),this.elements.cardPnl.find(".picbox").each(function(e,i){n._scalePicSize(t(i))}),r},_scalePicSize:function(e){var i=e.find("img");if(!i.attr("src")){var t={width:1*e.css("width").replace("px",""),height:1*e.css("height").replace("px","")};a.loadImage([i.attr("data-src")],function(s){var n=a.scaleFull(s,t);e.find(".pic-loading-dot").hide(),i.css(n).attr("src",i.attr("data-src"))})}},collapseExplore:function(){if(s.UI.isSupportCss3("transition",this.elements.viewWrapper.get(0))){var e=new t.Deferred,i=this;return this.elements.viewWrapper.css("width",0),setTimeout(function(){i.elements.exploreView.hide(),e.resolve()},400),e}return this._scanKeyFrames&&this._scanKeyFrames.stop(),r.animate(this.elements.viewWrapper,{width:0},{duration:400,easing:"easeOutSine"})},exit:function(){var e=this;if(s.UI.isSupportCss3("transition",this.$element.get(0))){var i=new t.Deferred;return this.$element.css("height",0),setTimeout(function(){e.$element.hide(),t("#adCard").show(),i.resolve()},400),i.always(function(){e.fire("exit")}),i}return r.animate(this.$element,{height:0},{duration:400,easing:"easeOutSine"}).always(function(){e.fire("exit")})},twinkleSider:function(){var e=t("#sider"),i=new t.Deferred;return e.addClass("twinkle"),setTimeout(function(){i.resolve()},1200),i},prepare:function(){if(this._preparePro)return this._preparePro;this._preparePro=new t.Deferred;var e=["//img2.bdstatic.com/static/searchdetail/widget/ui/controls/dutuguide/img/scan_bg_39ea267.png","//img2.bdstatic.com/static/searchdetail/widget/ui/controls/dutuguide/img/scan_working_ae5bfc8.png","//img1.bdstatic.com/static/searchdetail/widget/ui/controls/dutuguide/img/scan_light_1d97cd6.png","//img1.bdstatic.com/static/searchdetail/widget/ui/controls/dutuguide/img/scan_maskline_6629130.png"],i=e.length,s=0;return me=this,stepCompleted=function(){s+=1,s==i&&(me.$element.length||me.render(),me._preparePro.resolve())},t(e).each(function(e,i){me._loadImg(i).then(stepCompleted)}),this._preparePro},_loadImg:function(e){var i=new Image,s=new t.Deferred;return i.onload=function(){s.resolve()},i.src=e,s},setCards:function(e){this.allCards=e},needShow:function(e){if(this.receivedData=!0,t.browser.msie&&t.browser.version<8)return!1;var i=0,s=1;t(this.allCards).each(function(t,n){var r=n.checkState(e);return r.hasContent&&(i+=1,i>=s)?!1:void 0});var n=i>=s;return n}}),i});
;/*!searchdetail:widget/ui/controls/dutulink/dutulink.js*/
define("searchdetail:widget/ui/controls/dutulink/dutulink",function(e){function t(){this.tpl='<a class="dutu-link" href="#" target="_blank">识图一下，发现更多</a>',this.$element=n(null)}var n=e("common:widget/ui/base/base"),i=(e("common:widget/ui/utils/utils"),e("common:widget/ui/base/events"));return n.extend(t.prototype,i,{init:function(e){this.$element=n(this.tpl).appendTo(e).hide()},update:function(e){e&&this.$element.attr("href","/pcdutu?fromPage=bigImage&fm=searchdetail&uptype=button&isMobile=0&queryImageUrl="+encodeURIComponent(e.thumbURL||e.bigImgUrl||e.objURL)+"&querySign="+encodeURIComponent(e.querysign||"")).show()}}),t});
;/*!searchdetail:widget/ui/controls/imgtoolbar/feedback/feedback.js*/
define("searchdetail:widget/ui/controls/imgtoolbar/feedback/feedback",function(e){function t(e,t){this.$element=i(null),this.userId=e,this.query=t,this.feedbackData={cards:[],yijian:""},this.imgData=null,this.isUpdated=!1}var i=e("common:widget/ui/base/base"),a=e("common:widget/ui/base/events");return i.extend(t.prototype,a,{update:function(e){this.imgData!=e&&(this.isUpdated=!0),this.imgData=e},render:function(){var e=i(['<div class="feedback-pnl">','<div style="font-size: 28px;position: absolute;right: 312px;top: 20px;color: #c00;">在右侧标识你认为不符合图片信息的卡片==>></div>','<div class="yijian">','<textarea placeholder="在这儿输您的意见"></textarea>',"</div>",'<div class="cardlist-sider"></div>','<form action="http://imageqa.baidu.com:8080/index.php?r=Compete/neice" method="post" target="feedbackifr">','<input name="query" type="hidden" />','<input name="uname" type="hidden" />','<input name="objurl" type="hidden" />','<input name="pageurl" type="hidden" />','<input name="fankui" type="hidden" />',"</form>",'<iframe name="feedbackifr" style="display:none;"></iframe>','<div class="btns">','<button class="btnSubmit">提交</button>','<button class="btnCancel">关闭</button>',"</div>","</div>"].join("")),t=this,a=e.find("form");a.find("[name=query]").val(this.query),a.find("[name=uname]").val(this.userId),e.find(".cardlist-sider").delegate(".card-title .close","click",function(){var e=i(this).parent().parent();t.removeCard(e)}),e.find(".btnSubmit").on("click",function(){t.doSubmit()}),e.find(".btnCancel").on("click",function(){t.hide()}),this.$element=e.appendTo(document.body)},show:function(){this.$element.length||this.render(),this.feedbackData={cards:[],yijian:""},this.$element.length&&this.$element.find("textarea").val(""),this.isUpdated&&this.cloneCards(),this.$element.show(),this.$element.find(".yijian").height(this.$element.find(".cardlist-sider").height()-80-30)},cloneCards:function(){for(var e=i("#sider").find(".card-box"),t=i("<div></div>"),a=1,n=[],d=1;d<e.length-1;d++){var s=i(e[d]);if(e[d].offsetHeight){var r=s.clone();r.find(".cnt-wrapper").css("position",""),r.removeClass("card-box-collpse").css({width:"",height:""}).attr("data-idx",a).attr("data-title",r.find(".card-title").text()).appendTo(t),a+=1}}return this.$element.find(".cardlist-sider").empty().append(t.children()),n},removeCard:function(e){this.feedbackData.cards.push({type:e.attr("data-title"),pos:1*e.attr("data-idx")}),e.hide()},doSubmit:function(){if(this.feedbackData.yijian=this.$element.find(".yijian textarea").val(),this.feedbackData.yijian||this.feedbackData.cards.length){var e=this.$element.find("form");e.find("[name=objurl]").val(this.imgData.objURL),e.find("[name=pageurl]").val(window.location.href),e.find("[name=fankui]").val(JSON.stringify(this.feedbackData)),e[0].submit();var t=this;setTimeout(function(){alert("感谢您的宝贵意见"),t.hide()},400)}else alert("亲，来都来了，不提点意见嘛。:)")},hide:function(){this.$element.hide()}}),t});
;/*!searchdetail:widget/ui/controls/imgtoolbarnew/feedback/feedback.js*/
define("searchdetail:widget/ui/controls/imgtoolbarnew/feedback/feedback",function(e){function t(e,t){this.$element=i(null),this.userId=e,this.query=t,this.feedbackData={cards:[],yijian:""},this.imgData=null,this.isUpdated=!1}var i=e("common:widget/ui/base/base"),a=e("common:widget/ui/base/events");return i.extend(t.prototype,a,{update:function(e){this.imgData!=e&&(this.isUpdated=!0),this.imgData=e},render:function(){var e=i(['<div class="feedback-pnl">','<div style="font-size: 28px;position: absolute;right: 312px;top: 20px;color: #c00;">在右侧标识你认为不符合图片信息的卡片==>></div>','<div class="yijian">','<textarea placeholder="在这儿输您的意见"></textarea>',"</div>",'<div class="cardlist-sider"></div>','<form action="http://imageqa.baidu.com:8080/index.php?r=Compete/neice" method="post" target="feedbackifr">','<input name="query" type="hidden" />','<input name="uname" type="hidden" />','<input name="objurl" type="hidden" />','<input name="pageurl" type="hidden" />','<input name="fankui" type="hidden" />',"</form>",'<iframe name="feedbackifr" style="display:none;"></iframe>','<div class="btns">','<button class="btnSubmit">提交</button>','<button class="btnCancel">关闭</button>',"</div>","</div>"].join("")),t=this,a=e.find("form");a.find("[name=query]").val(this.query),a.find("[name=uname]").val(this.userId),e.find(".cardlist-sider").delegate(".card-title .close","click",function(){var e=i(this).parent().parent();t.removeCard(e)}),e.find(".btnSubmit").on("click",function(){t.doSubmit()}),e.find(".btnCancel").on("click",function(){t.hide()}),this.$element=e.appendTo(document.body)},show:function(){this.$element.length||this.render(),this.feedbackData={cards:[],yijian:""},this.$element.length&&this.$element.find("textarea").val(""),this.isUpdated&&this.cloneCards(),this.$element.show(),this.$element.find(".yijian").height(this.$element.find(".cardlist-sider").height()-80-30)},cloneCards:function(){for(var e=i("#sider").find(".card-box"),t=i("<div></div>"),a=1,n=[],d=1;d<e.length-1;d++){var s=i(e[d]);if(e[d].offsetHeight){var r=s.clone();r.find(".cnt-wrapper").css("position",""),r.removeClass("card-box-collpse").css({width:"",height:""}).attr("data-idx",a).attr("data-title",r.find(".card-title").text()).appendTo(t),a+=1}}return this.$element.find(".cardlist-sider").empty().append(t.children()),n},removeCard:function(e){this.feedbackData.cards.push({type:e.attr("data-title"),pos:1*e.attr("data-idx")}),e.hide()},doSubmit:function(){if(this.feedbackData.yijian=this.$element.find(".yijian textarea").val(),this.feedbackData.yijian||this.feedbackData.cards.length){var e=this.$element.find("form");e.find("[name=objurl]").val(this.imgData.objURL),e.find("[name=pageurl]").val(window.location.href),e.find("[name=fankui]").val(JSON.stringify(this.feedbackData)),e[0].submit();var t=this;setTimeout(function(){alert("感谢您的宝贵意见"),t.hide()},400)}else alert("亲，来都来了，不提点意见嘛。:)")},hide:function(){this.$element.hide()}}),t});
;/*!searchdetail:widget/ui/ecomrecord/ecomrecord.js*/
define("searchdetail:widget/ui/ecomrecord/ecomrecord",function(e,o,n){var t=(e("common:widget/ui/base/base"),e("common:widget/ui/utils/utils")),i=function(){function e(e){var o=(new Date).getTime(),n=window["ecom_recor_"+o]=new Image;n.onerror=n.onload=function(){n.onerror=n.onload=null,n=null,window["ecom_recor_"+o]=null},n.src=e+"&tid="+o}function o(o){o&&o.di===a&&(o._ecomStartView=(new Date).getTime(),e(o.s_rcv+"&actionid=200&attach=0"))}function n(o){if("undefined"==typeof o&&(o=d),o&&o.di===a&&o._ecomStartView){var n=(new Date).getTime(),t=n-o._ecomStartView;e(o.s_rcv+"&actionid=201&attach="+t)}}function i(o,n){o&&o.di===a&&e(o.s_rcv+"&"+t.jsonToQuery(n))}function c(e){a=e}function r(e,t){e=t.get("imgData"),n(d),d=e,o(e)}var a="",d={};return{logStart:o,logEnd:n,logClick:i,init:c,update:r}}();n.exports=window.ecomRecord=i});
;/*!searchdetail:widget/ui/action/base/imgcollectioin_setting.js*/
define("searchdetail:widget/ui/action/base/imgcollectioin_setting",function(t){function e(t,e){this.imgCollection=t,this.pageModel=e,this._fieldMapBinded=!1}var i=t("common:widget/ui/base/base"),n=t("searchdetail:widget/ui/utils/lib"),r=t("common:widget/ui/utils/utils");return i.extend(e.prototype,{fieldMap:{key:function(t){var e="";return t.os?e="os"+t.os:t.di&&(e="di"+t.di),n.getUniqId("imgkey_")+"_"+e},isSet:function(t){return t.bdSetImgNum>1&&t.is&&"0"!=t.is&&"0,0"!=t.is},setTitle:function(t){return i.trim(t.setTitle||t.setTittle||"")},type:function(t){return t.type&&"0"!=t.type?t.type:"jpg"},compiledFromURL:"fromURL",fromURL:function(t){if(!t.fromURL)return"";var e=n.uncompileURL(t.fromURL);return e.match(/^https?:\/\//i)||(e="http://"+e),e},fromHost:function(t){return t.fromURLHost||n.getHost(t.fromURL)},fromURLHostWord:function(t){var e=t.fromURLHost||n.getHost(t.fromURL);return t.pageNum>29?"":"www.vcg.com"===e?"视觉中国":"www.quanjing.com"===e?"全景网":""},objURLHttp:function(t){return n.uncompileURL(t.objURL)},objURL:function(t){var e=n.uncompileURL(t.objURL);return e?/\.gif$/.test(e)?/^https/.test(e)&&e||r.httpsTimg({imgUrl:e,imgType:"0",size:"b9999_10000"}):/^https/.test(e)&&e||r.httpsTimg({imgUrl:e,imgType:"0"}):e},bakUrl:function(t){return t.thumbURL||t.hoverURL||t.largeTnImageUrl},bigImgUrl:function(t){return t.thumbURL||t.largeTnImageUrl||t.hoverURL||t.objURL},picDesc:function(t){var e=t.simid_info;return n.stringEncode(e&&e.desc&&e.desc.cont)||""},picDescUrl:function(t){var e=t.simid_info;return e&&e.desc&&e.desc.gpg||""},ImageNewsDate:function(t){var e=t.ImageNewsDate&&t.ImageNewsDate.replace(/\s+[:0-9]+$/i,"");return"1970-01-01"==e?"":e},youtuType:function(t){return t.youtuType||"0"},browserPv:function(t){return+(t.browserPv||"0")},imageSetTag:function(t){return t.imageSetTag?t.imageSetTag.split?t.imageSetTag.split("#"):t.imageSetTag:[]},userData:function(t){return t.userData||{}},wiki_entities:function(t){var e=t.simid_info;if(e&&e.star_entity){var n=[],r=e.star_entity,o=function(t,e){return{name:t.ne,enName:t.en||"",url:t.url,pic:t.st,job:t.zy||"",guoJi:t.gj||"",zuoPin:t.zp||"",fr:e||""}};return r&&r.cont&&r.cont.length&&i(r.cont).each(function(t,e){n.push(o(e))}),n}return null},wiki_face_entity:function(t){var e=t.simid_info;if(e&&e.star_entity&&e.star_entity.cont&&e.star_entity.cont.length>0){var i=e.star_entity.cont;return i}return null},wiki_entity1:function(t){var e=t.wiki_entities&&t.wiki_entities.length&&t.wiki_entities[0];return e&&t.wiki_entities.length>1&&(e.collapse=1),e},relationShip:function(t){var e=null,i=t.simid_info,n=t.wiki_entities;if(i&&i.star_entity&&i.star_entity.relations){var r=i.star_entity.relations;if(r&&r.length&&n&&n.length>1){for(var o={},s=0;s<n.length;s++)o[n[s].name]=n[s];for(var s=0,a=r.length;a>s;s++){var c=r[s],u=o[c.entityA],p=o[c.entityB];u&&p&&(e=c,e.entityA=u,e.entityB=p)}}}return(e||n&&n.length>1)&&delete t.wiki_entity1,e},act_info:function(t){var e=t.simid_info;return e&&e.acti&&e.acti.cont&&e.acti.cont.length?e.acti.cont:null},pic_sets:function(t){var e=t.simid_info,i=[];if(e&&e.pic_set&&e.pic_set.cont&&e.pic_set.cont.length)for(var r=e.pic_set.cont,o=0;o<r.length;o++){for(var s=r[o],a=s.cs,c=s.sd||[],u=s.ourl||[],p=s.furl,l=[],f=0,_=a.length;_>f;f++){var d=a[f];d&&"0"!=d&&"0,0"!=d&&l.push({objUrl:u[f],cs:d,sd:c[f],thumbUrl:n.getThumbUrl(d),fromUrl:p[f]})}l.length>=3&&i.push({topic:s.tc,topicUrl:s.topic_url,site:s.site,picNum:s.dnum||0,pics:l})}return i},relatePic1:function(t){var e=t.pic_sets&&t.pic_sets.length&&t.pic_sets[0];return e&&e.pics.length>=3?e:null},relatePic2:function(t){var e=t.pic_sets&&t.pic_sets.length>1&&t.pic_sets[1];return e&&e.pics.length>=3?e:null},sucai_info:function(t){var e=t.simid_info;return e&&e.sucai?e.sucai.cont||null:null},sim_travel:function(t){var e=t.simid_info;return e&&e.sim_travel?e.sim_travel||null:null},decoration_sim:function(t){var e=t.simid_info;return e&&e.decoration_sim?e.decoration_sim||null:null},wallp_info:function(t){var e=t.simid_info;return e&&e.wallp?e.wallp.cont||null:null},xiangshi_info:function(t){var e=t.xiangshi_info,i=[];if(e&&e.url&&e.url.length)for(var n=e.url,r=e.os,o=e.cs,s=(e.pn,e.di),a=e.srctype,c=["tn","word","ie","step_word","ipn","istype","fr"],u=this.pageModel.buildQuery(c),p=0,l=n.length;l>p;p++)i.push({imgUrl:n[p],cs:o[p],srctype:a[p],detailUrl:"/search/detail?"+u+"&os="+r[p]+"&cs="+o[p]+(s?"&di="+s[p]:"")+"&pn="+(p+1)});return i},tuJiaAdData:function(t){var e=t.simid_info;if(e&&e.pic_set&&e.pic_set.tujia_cont&&e.pic_set.tujia_cont.length)for(var i=e.pic_set.tujia_cont,n=0;n<i.length;n++){for(var r=i[n],o=r.ourl||[],s=r.furl,a=[],c=0,u=o.length;u>c;c++){var p=o[c];p&&a.push({objUrl:p,thumbUrl:p,fromUrl:s[c]})}if(a.length>=3)return{topic:r.tc,topicUrl:r.topic_url&&r.topic_url.replace(/^hhttp:/,"http:"),site:r.site,siteUrl:r.site?/^http/i.test(r.site)?r.site:"http://"+r.site:"",picNum:0,pics:a}}return null},map:function(t){return t.map||t.face_info},imageDeep_info:function(t){var e=this.pageModel;return{provider:"mola",query:e.get("word"),cs:t.cs,srctype:t.bdSrcType,os:t.os,query:e.get("word")}},goods:function(t){return t.map&&(t.map.shoe_info&&t.map.shoe_info.shopping_window_pos_0||t.map.bag_info&&t.map.bag_info.shopping_window_pos_0||t.map.cloth_info&&t.map.cloth_info.shopping_window_pos_0)?null:t.simid_info&&t.simid_info.product_relate},cloth:function(t){return t.map&&(t.map.shoe_info&&t.map.shoe_info.shopping_window_pos_0||t.map.bag_info&&t.map.bag_info.shopping_window_pos_0)?null:t.map&&t.map.cloth_info&&t.map.cloth_info.shopping_window_pos_0?t.map.cloth_info.shopping_window_pos_0||null:null},photographerRecommend:function(t){var e=[];return"1"===t.youtuType&&e.push("photographerRecommend"),e},bag:function(t){return t.map&&t.map.shoe_info&&t.map.shoe_info.shopping_window_pos_0?null:t.map&&t.map.bag_info&&t.map.bag_info.shopping_window_pos_0?t.map.bag_info.shopping_window_pos_0||null:null},shoe:function(t){return t.map&&t.map.shoe_info&&t.map.shoe_info.shopping_window_pos_0?t.map.shoe_info.shopping_window_pos_0||null:void 0},face_info:function(t){var e=t.map;if(e){if(i.isArray(e))return e;for(var n=e.face_info,r=n?n.face_num||0:0,o=0,s=[];r>o;)n["face_"+o]&&s.push(n["face_"+o]),o+=1;return s}return null},star_face:function(t){var e=t.map;if(e){if(i.isArray(e))return e;for(var n=e.star_face,r=n?n.length||0:0,o=0,s=[],a=[];r>o;){if(n[o]){var c=n[o];s.push(c),a.push([c.x,c.y,c.w,c.h].join("_"))}o+=1}return a.length&&a.join(",").match(/(\d+(_\d+){3}),.*\1/)&&(s=null),s}return null},_mapInfoJianRong:function(t){if(!(t.map&&t.map.star_face&&t.map.star_face.length)&&t.face_info&&1==t.face_info.length&&t.wiki_entities&&1==t.wiki_entities.length){var e=t.face_info[0],i=t.wiki_entity1;t.star_face=[{x:e.face_left,y:e.face_top,w:e.face_width,h:e.face_height,entity:i.name}]}},auto_info:function(t){var e=t.map;if(e){if(i.isArray(e))return e;for(var n=e.car_info,r=n?n.length||0:0,o=0,s=[];r>o;)n[o]&&s.push(n[o]),o+=1;if(1==s.length&&e.auto_brand_pos&&e.auto_brand_pos.cont&&1==e.auto_brand_pos.cont.length){var a=e.auto_brand_pos.cont[0],c=s[0];1*a.x>=1*c.x&&1*a.y>=1*c.y&&1*a.x+1*a.w<=1*c.x+1*c.w&&1*a.y+1*a.h<=1*c.y+1*c.h&&(s=[a])}return s}return null},srv_simi:function(t){if("1"===t.youtuType)return null;var e=this.pageModel;return{provider:"piclist",query:e.get("word"),SimiCs:t.cs,type:"card",pn:"0",rn:"6",srctype:t.bdSrcType,bdtype:t.bdSrcType,map:t.map,os:e.get("os")}},srv_friend:function(t){var e=this.pageModel,i=e.getAbTestGroup();return t.pi&&t.pi.length>1&&"friendscard"==i?{provider:"mola",query:e.get("word"),simid:"AB"+t.pi,cs:t.cs,srctype:t.bdSrcType,os:t.os,service_type:"friends"}:null},imageDeepInfo:function(){return"new_dep_tpl"==this.pageModel.get("investTpl")?["imageDeep_info"]:[]},serviceCard:function(t){var e=t.simid_info,i=(this.pageModel.getAbTestGroup(),[]);if(e&&e.service){if(e.service.cont)for(var n=e.service.cont,r={"auro-brand":"auto-brand"},o={food:function(t){return t.data&&t.data.steps&&t.data.steps.length>2?t.data:null}},s=n.length-1;s>=0;s--){var a=n[s];if(!a.conf_level||2==a.conf_level){var c=r[a.service_type]||a.service_type,u=a.service_type?"srv_"+c:"";u&&!t[u]&&(o[c]?t[u]=o[c](a):("auto"!=c&&"auto-brand"!=c||"yiche"==a.provider||"autohome"==a.provider)&&(t[u]=a,i.push(u),"yiche"===a.provider&&(a.provider="bitauto")))}}if(e.service.invests)for(var p,l=e.service.invests,s=l.length-1;s>=0;s--)if(p=l[s])for(var f in p)if(p.hasOwnProperty(f)){p[f]&&(t["srv_"+f]=p[f]);break}}return i.push("srv_simi"),i.push("srv_friend"),i},asyncCard:function(){var t=[];return this.pageModel.get("isNeedAsyncRequest")&&t.push("srv_beautyphoto"),t},asyncRs:function(){var t=[];return t.push("rsResult"),t},copyrightInfo:function(t){return t.partnerId?{}:null},rsResult:function(){var t=this.pageModel;return{word:t.get("word"),tn:"rscjson"}},srv_beautyphoto:function(){var t=this.pageModel;return this.pageModel.get("isNeedAsyncRequest")?{query:t.get("word"),tn:"exchangedata"}:void 0},srv_appbeauty:function(){this.pageModel;return"美女"===this.pageModel.get("word")?{}:void 0},cardSeq:function(t){var e=t.simid_info;return e&&e.cardSeq||""},card_pres_info:function(t){var e=t.simid_info,i={};if(e&&e.card_pres_info){var n=e.card_pres_info;i.xiangshi_info=!!n.xiangsi,i.sucai_info=!!n.sucai,i.wallp_info=!!n.wallp,i.act_info=!!n.acti,i.relatePic1=!!n.pic_set,i.relatePic2=!!n.pic_set}return i},cardTest:function(t){var e=this.pageModel.getAbTestGroup(),n=(this.pageModel.get("investTpl"),{});t.group=e;var r=t.cardSeq;return r&&r.length&&i.inArray("sucai",r)<0&&i.inArray("wallp",r)<0&&i.inArray("foods",r)<0&&(t.cardSeq=null),(!t.auto_info||t.auto_info&&!t.auto_info.length)&&t.srv_auto&&(t.default_auto_info=!0),"downloadoptimize"==e&&(!t.star_face||t.star_face&&!t.star_face.length)&&t.wiki_face_entity&&t.wiki_face_entity.length&&(t.default_star_face=!0),n.group=e,n},adType:function(t){var e=t.adType;return e||"0"},adid:function(t){return t.adid||0}},getUrl:function(){var t=this.pageModel,e=t.get("datatn")?t.get("datatn"):"acjson",i="/search/acjson",n=/(?:avatar|jsonav)/,r=/com$/,o="resultjsonavbrandcom";return i=n.test(e)?o===e?"/search/advert":r.test(e)?"/search/acjson":"/search/acjson":"acjson"===e?"/search/acjson":"/search/"+e},getReqParams:function(){var t=this.pageModel,e={tn:t.get("datatn")||"resultjson_com",ipn:"rj",ct:"201326592",is:t.get("is")||"",fp:"detail"},n=["cl","lm","ie","oe","adpicid","lpn","st","word","z","ic","s","se","tab","width","height","face","istype","qc","nc","fr","simics","srctype","bdtype","rpstart","rpnum","cs","catename"],r=t.get("step_word");return n.push("cardserver"),n.push("tabname"),i(n).each(function(i,n){e[n]=t.get(n)||""}),r&&(e.word=r,e.step_word=r,e.ie="utf-8"),e},setImgSetCollection:function(){var t=this.pageModel.get("settn");t&&this.imgCollection.setImgSetReqParams(i.extend({},this.getReqParams(),{tn:t}))},getFieldMap:function(){if(!this._fieldMapBinded&&this.fieldMap){var t=this.fieldMap;for(var e in t)if(t.hasOwnProperty(e)){var i=t[e];"function"==typeof i&&(t[e]=i.bind(this))}this._fieldMapBinded=!0}return this.fieldMap},getParseResponse:function(){var t=this.pageModel,e=function(e){return void 0===t.get("isNeedAsyncRequest")?t.set("isNeedAsyncRequest",e&&!!e.isNeedAsyncRequest):t.set("isNeedAsyncRequest",t.get("isNeedAsyncRequest")),e};return e},process:function(){var t=this.imgCollection;t.setReqUrl(this.getUrl()),t.setFieldMap(this.getFieldMap()),t.setReqParams(this.getReqParams()),t.setParseResponse(this.getParseResponse()),this.setImgSetCollection()}}),e});
;/*!searchdetail:widget/ui/action/base/propcollection_setting.js*/
define("searchdetail:widget/ui/action/base/propcollection_setting",function(r){function e(r){return{key:"photographerRecommend",url:"/copyright/recommandcard",buildQuery:function(r){return{pi:r.pi}},parseResponse:function(e){if(!e||0!==e.errno||!e.recommendphotographers||0===e.recommendphotographers.photographersNum)return null;r.set("frm","lensman");var t=e&&e.recommendphotographers;return t.photographersInfo}}}function t(r,e){return{key:"goods",url:window.location.protocol+"//image-shop.baidu.com/n/imageproduct",jsonpCb:"cb",buildQuery:function(t){var i=r.getAbTestGroup(),n={cs:t.cs,word:r.get("word"),title:u.trimTags(t.fromPageTitle||t.fromPageTitleEnc||""),ddesc:u.trimTags(t.picDesc||""),shixiao:11==t.bdSrcType||12==t.bdSrcType?1:0,objectType:e,appid:2e4};return 1==e&&"clothcard"==i&&(n={cs:t.cs,title:u.trimTags(t.fromPageTitle||t.fromPageTitleEnc||""),ddesc:u.trimTags(t.picDesc||""),shixiao:11==t.bdSrcType||12==t.bdSrcType?1:0,objectType:e,appid:2e4}),n},parseResponse:function(r){if(!r||!r.data||0!=r.errno||0!=r.data.errnum)return null;var e=r&&r.data&&r.data.results;if(e&&e.length){for(var t=[],i=0,n=e.length;n>i;i++){var s=this._buildInfo(e[i]);s&&t.push(s)}return t}return null},_buildInfo:function(r){var e=null;return r.items&&r.items.length&&r.images&&r.images.length&&o(r.items).each(function(t,i){return i.imageId&&(o(r.images).each(function(r,e){return i.imageId==e.imageId?(i.imgInfo=e,!1):void 0}),i.imgInfo)?(e=i,!1):void 0}),e}}}function i(r,e,t,i){return{key:e,url:"/cardserver/search",_propParser:{},pageModel:r,buildQuery:function(r){for(var i=this,n=r[e],s=[],a=0;a<n.length;a++){var u=n[a],p=r[u],c=t[u];if("srv_auto"==u&&(i.serviceConf=c),p&&c)for(var l=0;l<c.length;l++){var d=c[l];this._propParser[d.key]||(this._propParser[d.key]=d.parser),s.push(this._buildReqInfo(p,d.key,d.fieldsMap))}}return s.length?{para:o.json.stringify(s)}:null},_buildReqInfo:function(r,e,t){var i={ct:e,cv:[{provider:r.provider,Https:"https:"==window.location.protocol?"1":"0"}]},n=i.cv[0];if(t)for(var s in t)if(t.hasOwnProperty(s)){var a=t[s]||s;n[s]=String(o.isFunction(a)?a(r):r[a]||"")}return i},parseResponse:function(e){if(!e||!e.data)return null;var t=e.data,n=this._propParser;for(var s in n)if(n.hasOwnProperty(s)){var a=t[s],u=n[s];a&&(delete a.cache,u&&(a=u(a,r)),o.isEmptyObject(a)&&(a=null),t[s]=a)}return i&&(t=i(t,r)),t}}}function n(r,e,t,i){return{key:e,url:"/search/exchangedata",_propParser:{},reqParams:{},pageModel:r,buildQuery:function(r){for(var i=r[e],n={},s=0;s<i.length;s++){var a=i[s],u=r[a],p=t[a];if(u&&p)for(var c=0;c<p.length;c++){var l=p[c];this._propParser[l.key]||(this._propParser[l.key]=l.parser),l.getReqParam&&o.isFunction(l.getReqParam)&&(this.reqParams=l.getReqParam()),n=o.extend({},this._buildReqInfo(u,l.key,l.fieldsMap))}}return o.isEmptyObject(n)?null:n},_buildReqInfo:function(r,e,t){var i={};if(t)for(var n in t)if(t.hasOwnProperty(n)){var s=t[n]||n;i[n]=String(o.isFunction(s)?s(r):r[s]||"")}return i},parseResponse:function(e){if(!e||!e.data)return null;var t,n=this._propParser;for(var s in n)if(n.hasOwnProperty(s)){var a=n[s];e&&e.data.length>0&&a&&(t=a(e))}return i&&(t=i(t,r)),t}}}function s(r,e,t,i){return{key:e,url:"/search/rscjson",_propParser:{},pageModel:r,type:"get",buildQuery:function(e){var t=r.get("word"),i=e.fromPageTitle||e.fromPageTitleEnc||e.picDesc||t;return i=u.trimTags(i),{title:i,fromurl:e.fromURL||e.picDescUrl||"",word:t,tn:"recjson"}},parseResponse:function(e){return e?(i&&(parseResObj=i(e,r)),parseResObj):null}}}function a(r){return{key:"copyright",url:"/copyright/copyrightjson",pageModel:r,type:"get",buildQuery:function(r){return{cslist:JSON.stringify([r.cs])}},parseResponse:function(r){return r||{}}}}{var o=r("common:widget/ui/base/base"),u=r("common:widget/ui/utils/utils"),p=r("searchdetail:widget/ui/utils/lib");r("searchdetail:widget/ui/app/pagemodel")}return{pageModel:null,init:function(r,e){return this.pageModel=r,this.imgpropCollection=e,this},getReqParams:function(){var r=this.pageModel,e={tn:r.get("datatn")||"resultjson_com",ipn:"rj",ct:"201326592",is:r.get("is")||"",fp:"detail"},t=["cl","lm","ie","oe","adpicid","lpn","st","word","z","ic","s","se","tab","width","height","face","istype","qc","nc","fr","simics","rpstart","rpnum","cs"],i=r.get("step_word");return r.get("simics")&&t.push("cardserver"),o(t).each(function(t,i){e[i]=r.get(i)||""}),i&&(e.word=i,e.step_word=i,e.ie="utf-8"),e},cloth:function(){return t(this.pageModel,1)},bag:function(){return t(this.pageModel,2)},shoe:function(){return t(this.pageModel,3)},imageDeepInfo:function(){return i(this.pageModel,"imageDeepInfo",{imageDeep_info:[{key:"cards",fieldsMap:{provider:"provider",cs:"cs",srctype:"srctype",os:"os",query:"query"},parser:function(r){return r}}]},function(r){return r},this.imgCollection)},serviceCard:function(){var r=this;return i(this.pageModel,"serviceCard",{srv_sight:[{key:"lvyouxianlu",fieldsMap:{arrive:function(r){return r.sight||r.city}}},{key:"jingdiantuijian",fieldsMap:{sightName:"sight",cityName:"city"}}],srv_auto:[{key:"auto",fieldsMap:{id:"id"},parser:function(r){if(r){for(var e=["logo","name","priceInfo","volume","trans","inquiryUrl","picList"],t=e.length-1;t>=0;t--){var i=e[t];if(!r[i])return null}var n=r.table_id;n&&o(r.picList).each(function(r,e){e.suo_url&&(e.picUrl=p.getThumbUrl(e.suo_url,n))});for(var t=r.picList.length-1;t>=0;t--){var s=r.picList[t].suo_url;s&&"0"!=s&&"0,0"!=s||r.picList.splice(t,1)}}return r},getParams:function(){return r.getReqParams()}}],"srv_auto-brand":[{key:"auto-brand",fieldsMap:{id:"id"},parser:function(r){if(r){var e=r.table_id;e&&o(r.picList).each(function(r,t){t.suo_url&&(t.picUrl=p.getThumbUrl(t.suo_url,e))})}return r}}],srv_simi:[{key:"simi",fieldsMap:{provider:"provider",query:"query",SimiCs:"SimiCs",type:"type",pn:"pn",rn:"rn",srctype:"srctype",bdtype:"bdtype",os:"os"},parser:function(r,e){var t=r.xiangshi_info,i=[];if(t&&t.url&&t.url.length)for(var n=t.url,s=t.os,a=t.cs,o=(t.pn,t.di),u=t.srctype,p=["tn","word","ie","step_word","ipn","istype"],c=e.buildQuery(p),l=0,d=n.length;d>l;l++)i.push({srctype:u[l],imgUrl:n[l],cs:a[l],detailUrl:"/search/detail?"+c+"&os="+s[l]+"&cs="+a[l]+(o?"&di="+o[l]:"")+"&pn="+l+"&simi=cardserver"});return i}}],srv_friend:[{key:"cards",fieldsMap:{provider:"provider",simid:"simid",cs:"cs",srctype:"srctype",os:"os"},parser:function(r){var e=r.simid_info;return e&&e.make_friends}}],srv_zhuangxiu:[{key:"simi",fieldsMap:{provider:"provider",query:"query",SimiCs:"SimiCs",type:"type",pn:"pn",rn:"rn",srctype:"srctype"},parser:function(r,e){var t=r.xiangshi_info,i=[];if(t&&t.url&&t.url.length)for(var n=t.url,s=t.os,a=t.cs,o=(t.pn,t.di),u=t.srctype,p=["tn","word","ie","step_word","ipn","istype","fr"],c=e.buildQuery(p),l=0,d=n.length;d>l;l++)i.push({srctype:u[l],imgUrl:n[l],cs:a[l],detailUrl:"/search/detail?"+c+"&os="+s[l]+"&cs="+a[l]+(o?"&di="+o[l]:"")+"&pn="+(l+1)+"&simi=cardserver"});return i}}]},function(r){return r},this.imgCollection)},asyncCard:function(){var r=this;return n(this.pageModel,"asyncCard",{srv_beautyphoto:[{key:"beautyphoto",fieldsMap:{query:"query",tn:"tn"},parser:function(r){var e={};return"meinv"==r.dataType?e.beauty=r.data:e.photo=r.data,e},getReqParam:function(){return r.getReqParams()}}]},function(r){return r})},asyncRs:function(){return s(this.pageModel,"asyncRs",{rsResult:[{key:"asynrsresult",fieldsMap:{word:"word",tn:"tn"},parser:function(r){return r}}]},function(r){var e={};return r.PsRelateSearch&&r.PsRelateSearch.ResultArray?(e.rsresult=r.PsRelateSearch.ResultArray,e):null})},photographerRecommend:function(){return e(this.pageModel)},copyrightInfo:function(){return a(this.pageModel)}}});
;/*!searchdetail:widget/ui/action/base/base.js*/
define("searchdetail:widget/ui/action/base/base",function(e){function t(e){this.pageModel=e}var a=e("common:widget/ui/base/base"),o=e("searchdetail:widget/ui/app/page"),i=e("searchdetail:widget/ui/action/base/imgcollectioin_setting"),n=e("searchdetail:widget/ui/action/base/propcollection_setting"),r=e("searchdetail:widget/ui/collections/imgpropertycollection"),d=e("searchdetail:widget/ui/statistic/statistic-core"),l=(e("searchdetail:widget/ui/controls/card/base/base"),e("searchdetail:widget/ui/controls/card/wikiinfo/wikiinfo")),g=e("searchdetail:widget/ui/controls/card/wikiinfoface/wikiinfoface"),c=(e("searchdetail:widget/ui/controls/card/relationship/relationship"),e("searchdetail:widget/ui/controls/card/relatedpic/relatedpic")),s=e("searchdetail:widget/ui/controls/card/suCard/suCard"),m=(e("searchdetail:widget/ui/controls/card/wallpaper/wallpaper"),e("searchdetail:widget/ui/controls/card/materialinfo/materialinfo"),e("searchdetail:widget/ui/controls/card/similarpic/similarpicasync")),u=e("searchdetail:widget/ui/controls/card/friends/friendsasync"),p=e("searchdetail:widget/ui/controls/card/goods/goods"),f=e("searchdetail:widget/ui/controls/card/goods/goodsSync"),h=e("searchdetail:widget/ui/controls/card/goodsface/goodsface"),w=(e("searchdetail:widget/ui/controls/card/car/car"),e("searchdetail:widget/ui/controls/card/carface/carface")),C=e("searchdetail:widget/ui/controls/card/carface2/carface2"),y=e("searchdetail:widget/ui/controls/card/hotcars/hotcars"),I=(e("searchdetail:widget/ui/controls/card/foods/foods"),e("searchdetail:widget/ui/controls/card/hottags/hottags")),D=e("searchdetail:widget/ui/controls/card/adcard/adcard"),M=(e("searchdetail:widget/ui/controls/card/imgstory/imgstory"),e("searchdetail:widget/ui/controls/card/beauty/beauty")),v=e("searchdetail:widget/ui/controls/card/photo/photo"),A=e("searchdetail:widget/ui/controls/card/xianguiProviderAd/xianguiProviderAd"),K=e("searchdetail:widget/ui/controls/card/xianguiProductsAd/xianguiProductsAd"),b=(e("searchdetail:widget/ui/controls/card/decoration_sim/decoration_sim"),e("searchdetail:widget/ui/controls/card/sim_travel/sim_travel")),R=e("searchdetail:widget/ui/controls/card/rsResult/rsResult"),x=(e("searchdetail:widget/ui/controls/card/rsResult/rsResultAsync"),e("searchdetail:widget/ui/controls/card/nsAdII_relateCase/relateCaseAsync")),_=e("searchdetail:widget/ui/controls/card/goodsdetail/goodsdetail"),S=e("searchdetail:widget/ui/controls/card/nsAdII_relateImg/relateImg"),U=e("searchdetail:widget/ui/controls/card/nsAdII_relateCase/relateCase"),k=e("searchdetail:widget/ui/controls/card/nsAdII_rightWorks/rightWorks"),O=e("searchdetail:widget/ui/controls/card/nsAdII_consult/consult"),P=e("searchdetail:widget/ui/controls/card/nsAdII_bottomBanner/bottomBanner"),T=e("searchdetail:widget/ui/controls/card/nsAdII_rightPicInfo/rightpicinfo"),q=e("searchdetail:widget/ui/controls/card/nsAdII_leftAnchor/leftanchor"),L=e("searchdetail:widget/ui/controls/card/nsAdII_leftBottomButton/leftBottomButton"),j=e("searchdetail:widget/ui/controls/card/nsAdII_similarCase/similarcaseAsync"),W=e("searchdetail:widget/ui/controls/card/nsAdII_cpl/cpl"),B=e("searchdetail:widget/ui/controls/card/tjAd/tjAd"),N=e("searchdetail:widget/ui/controls/card/photographerInfo/index"),F=e("searchdetail:widget/ui/controls/card/photographDetail/index"),H=e("searchdetail:widget/ui/controls/card/photographRelated/index"),V=e("searchdetail:widget/ui/controls/card/photographerRecommend/index");return a.extend(t.prototype,{initPage:function(){o.on("firstimgloaded",function(){}),o.on("loaded",function(){}),o.init(this.pageModel)},afterInit:function(){},initImgCollection:function(){new i(o.imgCollection,this.pageModel).process()},initImgPropCollection:function(){n.init(this.pageModel,new r(o.imgCollection));var e={imageDeepInfo:new r(o.imgCollection,n.imageDeepInfo()),serviceCard:new r(o.imgCollection,n.serviceCard()),cloth:new r(o.imgCollection,n.cloth()),bag:new r(o.imgCollection,n.bag()),shoe:new r(o.imgCollection,n.shoe()),asyncCard:new r(o.imgCollection,n.asyncCard()),photographerRecommend:new r(o.imgCollection,n.photographerRecommend()),copyrightInfo:new r(o.imgCollection,n.copyrightInfo())};o.imgModel.setPropCollections(e)},initFeature:function(){{var e=this.pageModel.getAbTestGroup(),t=new g(null,{dataKey:"wiki_face_entity",logKey:"wiki"},e),a=new w(null,{dataKey:"srv_auto",mergeKey:"serviceCard",propKey:"auto",logKey:"auto"}),i=new C(null,{dataKey:"srv_auto",mergeKey:"serviceCard",propKey:"autoNoResult",logKey:"autoNoResult"}),n=new h(null,{dataKey:"cloth",logKey:"cloth"});new p(null,{dataKey:"shoe",logKey:"shoe"})}o.controls.WikiInfoFaceControl=t,o.controls.carCtrl=a,o.controls.carCtrlNoResult=i,o.controls.clothCtrl=n,o.controls.wikiInfoCtrl=new l(null,{dataKey:"wiki_entity1",logKey:"wiki"});var r={wikiInfoCard:[],imagedetailCards:[t,a,i],cards:[new M(null,{dataKey:"srv_beautyphoto",mergeKey:"asyncCard",propKey:"beauty",logKey:"beauty"}),new T(null,{nsAdData:this.pageModel.tempData.get("nsAdIIData")}),new N(null,{dataKey:"photographerInfo"}),new F(null,{dataKey:"photographDetail"}),new H(null,{dataKey:"photographRelated"}),new V(null,{dataKey:"photographerRecommend"}),new k(null,{logKey:"rightWorks"}),new q(null),new L(null),new B(null,{tjadData:this.pageModel.tempData.get("tjadData")}),new m(null,{dataKey:"srv_simi",mergeKey:"serviceCard",propKey:"simi",logKey:"xiangsi",nsAdData:this.pageModel.tempData.get("nsAdIIData"),tjadData:this.pageModel.tempData.get("tjadData")}),new D(null,{element:"#adCard",checkState:!1}),new R(null,{dataKey:"rsResult",logKey:"rsResult",sortKey:"common",rsResult:this.pageModel.get("rsResult")||[],oriquery:this.pageModel.get("queryWordEnc")}),new W(null,{nsAdData:this.pageModel.tempData.get("nsAdIIData"),verticalAdData:this.pageModel.tempData.get("verticalAdData")}),new I(null,{dataKey:"hotTags",logKey:"hottags"}),new y(null,{dataKey:"srv_auto-brand",mergeKey:"serviceCard",propKey:"auto-brand",logKey:"autobrand"}),new b(null,{dataKey:"sim_travel"}),new p(null,{dataKey:"bag",logKey:"bag"}),new p(null,{dataKey:"cloth",logKey:"cloth"}),new p(null,{dataKey:"shoe",logKey:"shoe"}),new f(null,{dataKey:"goods",logKey:"goods"}),new c(null,{dataKey:"relatePic1",logKey:"picset"}),new c(null,{caption:"识图推广",dataKey:"tuJiaAdData",logKey:"tujiaad"}),new _(null,{dataKey:"goodsDetail",sortKey:"common"}),new x(null,{logKey:"relateCaseAsync"}),new S(null,{logKey:"relateImg",nsAdData:this.pageModel.tempData.get("nsAdIIData")}),new U(null,{logKey:"relateCase",nsAdData:this.pageModel.tempData.get("nsAdIIData")}),new j(null,{nsAdData:this.pageModel.tempData.get("nsAdIIData")}),new O(null,{nsAdData:this.pageModel.tempData.get("nsAdIIData")}),new v(null,{dataKey:"srv_beautyphoto",mergeKey:"asyncCard",propKey:"photo",logKey:"photo"}),new A(null,{dataKey:"xianguiProvider",nsAdData:this.pageModel.tempData.get("nsAdIIData")}),new K(null,{dataKey:"xianguiProducts",nsAdData:this.pageModel.tempData.get("nsAdIIData")}),new s(null,{dataKey:"suCard",logKey:"",sortKey:"common"}),new P(null,{logKey:"bottomBanner",nsAdData:this.pageModel.tempData.get("nsAdIIData")})],priority:[0,1,2,3,4,5,17,18,19,11,20,13,6,7,8,9,10,12,14,15,16,21,22,23,24,25,26,27,28,29,30,31,32]};"friendscard"==e&&r.cards.splice(2,0,new u(null,{dataKey:"srv_friend",mergeKey:"serviceCard",propKey:"cards",logKey:"jiaoyou"})),o.featureManager.setAds(r);var d=[].concat(r.wikiInfoCard,r.cards);o.featureManager.setLogCards(d),o.featureManager.setCardSeq(d)},initAds:function(){o.initAds(["eyeball","ecomimad"])},process:function(){this.initPage(),this.initImgCollection(),this.initImgPropCollection(),this.initFeature(),this.initAds(),this.afterInit(),this.initHandlers(),this.bindEvent(),o.run(),this.attatchControls()},initHandlers:function(){var e=this;e.onChangeImgOffset=function(){a(".ie-shituTip, .shituTip").remove(),a(".download-tip-content").remove()},window.isAlaPreload="";var t=document.getElementById("hdFirstImgObj");t&&t.getAttribute("data-israndom")&&(window.isAlaPreload="1"===t.getAttribute("data-israndom")?"1":"0"),o.handlers.extend({onPageResizeHandler:function(){o.sizeManager.update()},onHistoryChangedHandler:function(e){null!=e.state&&(pn=e.state&&e.state.pn||0,spn=e.state&&e.state.spn||0,o.dataController.changePn(1*pn,1*spn))},onKeyPressHandler:function(t){var t=t||window.event,i=t.keyCode||t.which,n={38:!0,37:!0},r={39:!0,40:!0};if(!t.ctrlKey&&n[i]){var l=(o.imgModel.get("imgData"),{livt:(new Date).getTime()-d.imgViewStart}),g=e.pageModel.get("simics");g&&(l=a.extend(l,{isSimi:"simi"})),e.pageModel.get("oriquery")&&e.pageModel.get("fm")&&(l=a.extend(l,{oriquery:e.pageModel.get("oriquery"),fm:e.pageModel.get("fm")})),e.onChangeImgOffset(),o.dataController.changeImgOffset(-1).done(function(){0!==o.dataController.imgModel.data.imgData.partnerId&&(l.copyright=o.dataController.imgModel.data.imgData.partnerId),d.send("5.12",a.extend(l,{tp:3,eo:"p410",keyb:3,tpl:window.isAlaPreload}));var e=o.dataController.imgModel.data.imgData.loadState,t=o.dataController.imgModel.data.imgData.objURL,i=o.dataController.imgModel.data.imgData.loadTime,n=o.dataController.imgModel.data.imgData.fromURL;if(e=-1==e?-1:i,"undefined"!=typeof e){var r="//imgstat.baidu.com/6.gif?u="+encodeURIComponent(t)+"&ue="+encodeURIComponent(t)+"&f="+encodeURIComponent(n)+"&tm="+e+"&_dev=pc&hostfr=imgstat",g=new Image;g.src=r+"&"+(new Date).getTime()}})}if(!t.ctrlKey&&r[i]){var l=(o.imgModel.get("imgData"),{livt:(new Date).getTime()-d.imgViewStart}),g=e.pageModel.get("simics");g&&(l=a.extend(l,{isSimi:"simi"})),e.pageModel.get("oriquery")&&e.pageModel.get("fm")&&(l=a.extend(l,{oriquery:e.pageModel.get("oriquery"),fm:e.pageModel.get("fm")})),e.onChangeImgOffset(),o.dataController.changeImgOffset(1).done(function(){0!==o.dataController.imgModel.data.imgData.partnerId&&(l.copyright=o.dataController.imgModel.data.imgData.partnerId),d.send("5.12",a.extend(l,{tp:3,eo:"p410",keyb:4,tpl:window.isAlaPreload}));var e=o.dataController.imgModel.data.imgData.loadState,t=o.dataController.imgModel.data.imgData.objURL,i=o.dataController.imgModel.data.imgData.loadTime,n=o.dataController.imgModel.data.imgData.fromURL;if(e=-1==e?-1:i,"undefined"!=typeof e){var r="//imgstat.baidu.com/6.gif?u="+encodeURIComponent(t)+"&ue="+encodeURIComponent(t)+"&f="+encodeURIComponent(n)+"&tm="+e+"&_dev=pc&hostfr=imgstat",g=new Image;g.src=r+"&"+(new Date).getTime()}})}},onImageScaleChanged:function(e){o.imgModel.set("scale",e.scale)},onImageWheelPrev:function(){var t=(o.imgModel.get("imgData"),{livt:(new Date).getTime()-d.imgViewStart}),i=e.pageModel.get("simics");i&&(t=a.extend(t,{isSimi:"simi"})),e.pageModel.get("oriquery")&&e.pageModel.get("fm")&&(t=a.extend(t,{oriquery:e.pageModel.get("oriquery"),fm:e.pageModel.get("fm")})),e.onChangeImgOffset(),o.dataController.changeImgOffset(-1).done(function(){0!==o.dataController.imgModel.data.imgData.partnerId&&(t.copyright=o.dataController.imgModel.data.imgData.partnerId),d.send("5.12",a.extend(t,{tp:3,eo:"p409",keyb:6,tpl:window.isAlaPreload}));var e=o.dataController.imgModel.data.imgData.loadState,i=o.dataController.imgModel.data.imgData.objURL,n=o.dataController.imgModel.data.imgData.loadTime,r=o.dataController.imgModel.data.imgData.fromURL;if(e=-1==e?-1:n,"undefined"!=typeof e){var l="//imgstat.baidu.com/6.gif?u="+encodeURIComponent(i)+"&ue="+encodeURIComponent(i)+"&f="+encodeURIComponent(r)+"&tm="+e+"&_dev=pc&hostfr=imgstat",g=new Image;g.src=l+"&"+(new Date).getTime()}})},onImageWheelNext:function(){var t=(o.imgModel.get("imgData"),{livt:(new Date).getTime()-d.imgViewStart}),i=e.pageModel.get("simics");i&&(t=a.extend(t,{isSimi:"simi"})),e.pageModel.get("oriquery")&&e.pageModel.get("fm")&&(t=a.extend(t,{oriquery:e.pageModel.get("oriquery"),fm:e.pageModel.get("fm")})),e.onChangeImgOffset(),o.dataController.changeImgOffset(1).done(function(){0!==o.dataController.imgModel.data.imgData.partnerId&&(t.copyright=o.dataController.imgModel.data.imgData.partnerId),d.send("5.12",a.extend(t,{tp:3,eo:"p409",keyb:7,tpl:window.isAlaPreload}));var e=o.dataController.imgModel.data.imgData.loadState,i=o.dataController.imgModel.data.imgData.objURL,n=o.dataController.imgModel.data.imgData.loadTime,r=o.dataController.imgModel.data.imgData.fromURL;if(e=-1==e?-1:n,"undefined"!=typeof e){var l="//imgstat.baidu.com/6.gif?u="+encodeURIComponent(i)+"&ue="+encodeURIComponent(i)+"&f="+encodeURIComponent(r)+"&tm="+e+"&_dev=pc&hostfr=imgstat",g=new Image;g.src=l+"&"+(new Date).getTime()}})},onViewModeChanged:function(e){"adapt"==e.mode?(o.controls.imgDetail.autoScale(),d.send("5.1009112")):(o.controls.imgDetail.zoom(1),d.send("5.1009111"))},onImageLinkOut:function(){var t=o.imgModel,a=t&&t.get("imgData");d.send("5.15",{tn:"baiduimagedetail",fm:"picwrap",site:a&&a.fromURL});var i,n,r="";if("3"===a.adType){if(e.pageModel&&e.pageModel.tempData){i=e.pageModel.tempData,n=i.get("nsAdIIData");for(var l=0;n&&l<n.length;l++)if("pc_detail_slider_right_relate_img"===n[l].Tag){var g=n[l].Items;g&&g.length&&(r=n[l].Items[0].BrandName)}}d.send("10.1010101",{as:r,pos:"pc_detail_before_insert",subpos:"0",matcont:a&&a.bigImgUrl,tgTo:1})}},onDutuAnchorOver:function(e){e.target.anthorIndex.indexOf("auto")>=0?(o.controls.carCtrl.active(e.target),o.controls.carCtrlNoResult.active(e.target)):e.target.anthorIndex.indexOf("cloth")>=0?o.controls.clothCtrl.active(e.target):o.controls.WikiInfoFaceControl.active(e.target)},onDutuAnchorOut:function(e){e.target.anthorIndex.indexOf("auto")>=0?(o.controls.carCtrl.disactive(e.target),o.controls.carCtrlNoResult.disactive(e.target)):e.target.anthorIndex.indexOf("cloth")>=0?o.controls.clothCtrl.disactive(e.target):o.controls.WikiInfoFaceControl.disactive(e.target)},onWikiinfoOver:function(e){o.controls.WikiInfoFaceControl.active(e.target),o.controls.imgDetail.dutuAnchor.clearHout(e.target)},onWikiinfoOut:function(){o.controls.WikiInfoFaceControl.disactive(o.controls.imgDetail.dutuAnchor)},onCarOver:function(e){o.controls.carCtrl.active(e.target),o.controls.imgDetail.dutuAnchor.clearHout(e.target)},onCarOut:function(){o.controls.carCtrl.disactive(o.controls.imgDetail.dutuAnchor)},onCarNoresultOver:function(e){o.controls.carCtrlNoResult.active(e.target),o.controls.imgDetail.dutuAnchor.clearHout(e.target)},onCarNoresultOut:function(){o.controls.carCtrlNoResult.disactive(o.controls.imgDetail.dutuAnchor)},onClothOver:function(e){o.controls.clothCtrl.active(e.target),o.controls.imgDetail.dutuAnchor.clearHout(e.target)},onClothOut:function(){o.controls.clothCtrl.disactive(o.controls.imgDetail.dutuAnchor)},onDownloadClick:function(){},onDutuSwitcherOver:function(){o.controls.imgDetail.dutuAnchor.hover()},onDutuSwitcherOut:function(){o.controls.imgDetail.dutuAnchor.hout()},onImgSlidePrevBtnClicked:function(t){var i=e.pageModel.get("simics");t.preventDefault();var n=(o.imgModel.get("imgData"),{livt:(new Date).getTime()-d.imgViewStart});i&&(n=a.extend(n,{isSimi:"simi"})),e.pageModel.get("oriquery")&&e.pageModel.get("fm")&&(n=a.extend(n,{oriquery:e.pageModel.get("oriquery"),fm:e.pageModel.get("fm")})),e.onChangeImgOffset(),o.dataController.changeImgOffset(-1).done(function(){0!==o.dataController.imgModel.data.imgData.partnerId&&(n.copyright=o.dataController.imgModel.data.imgData.partnerId),d.send("5.12",a.extend(n,{tp:3,eo:"p12",keyb:13,tpl:window.isAlaPreload}));var e=o.dataController.imgModel.data.imgData.loadState,t=o.dataController.imgModel.data.imgData.objURL,i=o.dataController.imgModel.data.imgData.loadTime,r=o.dataController.imgModel.data.imgData.fromURL;if(e=-1==e?-1:i,"undefined"!=typeof e){var l="//imgstat.baidu.com/6.gif?u="+encodeURIComponent(t)+"&ue="+encodeURIComponent(t)+"&f="+encodeURIComponent(r)+"&tm="+e+"&_dev=pc&hostfr=imgstat",g=new Image;g.src=l+"&"+(new Date).getTime()}})},onImgSlideNextBtnClicked:function(t){var i=e.pageModel.get("simics");t.preventDefault();var n=(o.imgModel.get("imgData"),{livt:(new Date).getTime()-d.imgViewStart});i&&(n=a.extend(n,{isSimi:"simi"})),e.pageModel.get("oriquery")&&e.pageModel.get("fm")&&(n=a.extend(n,{oriquery:e.pageModel.get("oriquery"),fm:e.pageModel.get("fm")})),e.onChangeImgOffset(),o.dataController.changeImgOffset(1).done(function(){0!==o.dataController.imgModel.data.imgData.partnerId&&(n.copyright=o.dataController.imgModel.data.imgData.partnerId),d.send("5.12",a.extend(n,{tp:3,eo:"p12",keyb:14,tpl:window.isAlaPreload}));var e=o.dataController.imgModel.data.imgData.loadState,t=o.dataController.imgModel.data.imgData.objURL,i=o.dataController.imgModel.data.imgData.loadTime,r=o.dataController.imgModel.data.imgData.fromURL;if(e=-1==e?-1:i,"undefined"!=typeof e){var l="//imgstat.baidu.com/6.gif?u="+encodeURIComponent(t)+"&ue="+encodeURIComponent(t)+"&f="+encodeURIComponent(r)+"&tm="+e+"&_dev=pc&hostfr=imgstat",g=new Image;g.src=l+"&"+(new Date).getTime()}})},onPageMouseMove:function(t){var a=e.pageModel.getAbTestGroup();if("prevnextarrow"!=a){t=t||window.event;var i={x:t.clientX+document.body.scrollLeft,y:t.clientY+document.body.scrollTop},n=o.controls.imgSlidePrevBtn;i.x>o.controls.container.width()/3?n.visible&&(n.visible=!1,n.stop().fadeOut()):n.visible||(n.visible=!0,n.stop().fadeIn())}},onSlideImgSelected:function(t){a(".download-tip").remove(),window.downloadPopCtrl.hide();var i=(o.imgModel.get("imgData"),{livt:(new Date).getTime()-d.imgViewStart}),n=e.pageModel.get("simics");n&&(i=a.extend(i,{isSimi:"simi"})),e.pageModel.get("oriquery")&&e.pageModel.get("fm")&&(i=a.extend(i,{oriquery:e.pageModel.get("oriquery"),fm:e.pageModel.get("fm")})),e.onChangeImgOffset(),o.dataController.changePn(t.index-o.imgCollection.getFixDataLength(),t.subIndex).done(function(){d.send(5.13,a.extend(i,{nb:7}));var e=o.dataController.imgModel.data.imgData.loadState,t=o.dataController.imgModel.data.imgData.objURL,n=o.dataController.imgModel.data.imgData.loadTime,r=o.dataController.imgModel.data.imgData.fromURL;if(e=-1==e?-1:n,"undefined"!=typeof e){var l="//imgstat.baidu.com/6.gif?u="+encodeURIComponent(t)+"&ue="+encodeURIComponent(t)+"&f="+encodeURIComponent(r)+"&tm="+e+"&_dev=pc&hostfr=imgstat",g=new Image;g.src=l+"&"+(new Date).getTime()}})},onSlideDockPanelStateChanged:function(){o.sizeManager.update()},onEnterFullScreen:function(){o.history.lockState(),d.send(5.28,{}),e.pageModel.set("fullScreen",1)},onEscFullScreen:function(){o.history.unlockState(),e.pageModel.set("fullScreen",0)},onPageUnLoadedHandler:function(){}})},bindEvent:function(){},attatchControls:function(){}}),t});